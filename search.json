[{"title":"é‡å­è®¡ç®—ï¼šé‡å­ç®—æ³•","url":"/archives/1880/","content":"\n# Deutsch-Jozsa Algorithm\n\nè¿™ä¸ªç®—æ³•ä»…ä»…ä¸ºäº†è¯´æ˜é‡å­è®¡ç®—åœ¨åŠ é€Ÿè®¡ç®—ä¸Šçš„ä¼˜è¶Šæ€§ï¼Œå¹¶æ²¡æœ‰ä»€ä¹ˆå®é™…ä½œç”¨\n\n## Deutsch Algorithm â€” Problem Description\n\nå‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªå‡½æ•°ï¼š$f:\\{0,1\\}\\mapsto\\{0,1\\}$ã€‚è‹¥å¯¹æ‰€æœ‰è¾“å…¥éƒ½æœ‰ç›¸åŒè¾“å‡ºçš„è¯ï¼Œåˆ™ç§°ä¹‹ä¸º constantï¼›è‹¥ä¸€åŠè¾“å‡ºä¸å¦ä¸€åŠä¸åŒï¼Œåˆ™ä¸º balancedã€‚\n\nDeutsch Algorithm ç›®çš„åœ¨äºç»™å®šä¸€ä¸ªè¿™æ ·çš„å‡½æ•°ï¼Œç¡®å®šè¯¥å‡½æ•°æ˜¯ constant è¿˜æ˜¯ balancedã€‚\n\n\n\n\n\n\n\n","tags":["é‡å­è®¡ç®—"],"categories":["computer"]},{"title":"é‡å­è®¡ç®—ï¼šé‡å­ç”µè·¯","url":"/archives/27241/","content":"\n\n## Quantum Circuits\n\né‡å­ç”µè·¯å³å¯¹ qubit æ“ä½œçš„å›¾å½¢è¡¨ç¤ºï¼Œæ—¶é—´é¡ºåºä¸ºä»å·¦è‡³å³ã€‚æœ‰ä¸¤ç§ qubit æ“ä½œï¼šé‡å­é€»è¾‘é—¨ï¼ˆquantum logic gateï¼‰ã€æµ‹é‡ï¼ˆmeasurementï¼‰ã€‚\n\n![Quantum Circuits](é‡å­è®¡ç®—ï¼šé‡å­ç”µè·¯/quantum_circuit.png)\n\n## Quantum Logic Gates\n\næ‰€æœ‰çš„é‡å­é€»è¾‘é—¨éƒ½æ˜¯é…‰ç®—å­ï¼ˆunitary operatorï¼‰\n\n![Quantum Logic Gates](é‡å­è®¡ç®—ï¼šé‡å­ç”µè·¯/quantum_logic_gates_1.png)\n\n![Quantum Logic Gates](é‡å­è®¡ç®—ï¼šé‡å­ç”µè·¯/quantum_logic_gates_2.png)\n\nExampleï¼š\n\nå°† Pauli X matrix ä½œç”¨äºåŸºåº•ï¼Œå¯ä»¥å¾—åˆ°ç›¸åçš„åŸºåº•ï¼Œæ‰€ä»¥ Pauli X matrix ä¹Ÿè¢«ç§°ä½œ NOT é—¨\n\n$$\n\\begin{align*}\nX\\ket{0}=\\left[\\begin{matrix}\n    0 & 1 \\\\\n    1 & 0\n\\end{matrix}\\right]\\left[\\begin{matrix}\n    1 \\\\\n    0\n\\end{matrix}\\right]=\\left[\\begin{matrix}\n    0 \\\\\n    1\n\\end{matrix}\\right]=\\ket{1} \\\\\n    \nX\\ket{1}=\\left[\\begin{matrix}\n    0 & 1 \\\\\n    1 & 0\n\\end{matrix}\\right]\\left[\\begin{matrix}\n    0 \\\\\n    1\n\\end{matrix}\\right]=\\left[\\begin{matrix}\n    1 \\\\\n    0\n\\end{matrix}\\right]=\\ket{0}\n\\end{align*}\n$$\n\nå°† Hadamard gate ä½œç”¨äºåŸºåº•ï¼Œå¯ä»¥è·å¾—åŸºåº•çš„å åŠ æ€\n\n$$\n\\begin{align*}\nH\\ket{0}=\\frac{1}{\\sqrt{2}}\\left[\\begin{matrix}\n    1 & 1 \\\\\n    1 & -1\n\\end{matrix}\\right]\\left[\\begin{matrix}\n    1 \\\\\n    0\n\\end{matrix}\\right]=\\frac{1}{\\sqrt{2}}\\left[\\begin{matrix}\n    1 \\\\\n    1\n\\end{matrix}\\right]=\\frac{\\ket{0}+\\ket{1}}{\\sqrt{2}} \\\\\nH\\ket{1}=\\frac{1}{\\sqrt{2}}\\left[\\begin{matrix}\n    1 & 1 \\\\\n    1 & -1\n\\end{matrix}\\right]\\left[\\begin{matrix}\n    0 \\\\\n    1\n\\end{matrix}\\right]=\\frac{1}{\\sqrt{2}}\\left[\\begin{matrix}\n    1 \\\\\n    -1\n\\end{matrix}\\right]=\\frac{\\ket{0}-\\ket{1}}{\\sqrt{2}}\n\\end{align*}\n$$\n\nå¦å¤–è¿˜æœ‰å¸¸ç”¨çš„ Controlled NOT gateï¼ˆCNOTï¼‰ï¼Œè¿™ä¸ªé—¨ä¼šæ ¹æ®ç¬¬ä¸€ä¸ª qubit çš„å–å€¼è€Œå†³å®šæ˜¯å¦å¾€ç¬¬äºŒä¸ª qubit ä¸Šä½œç”¨ NOT é—¨ï¼Œå³ç¬¬ä¸€ä¸ª qubit ä¸º 0 æ—¶ä¸ä½œç”¨ï¼Œä¸º 1 æ—¶ä½œç”¨ã€‚\n\n$$\n\\begin{align*}\n&CX\\ket{00}=\\left[\\begin{matrix}\n    1 & 0 & 0 & 0 \\\\\n    0 & 1 & 0 & 0 \\\\\n    0 & 0 & 0 & 1 \\\\\n    0 & 0 & 1 & 0 \\\\\n\\end{matrix}\\right]\\left[\\begin{matrix}\n    1 \\\\\n    0 \\\\\n    0 \\\\\n    0\n\\end{matrix}\\right]=\\left[\\begin{matrix}\n    1 \\\\\n    0 \\\\\n    0 \\\\\n    0\n\\end{matrix}\\right]=\\ket{00} \\\\\n&CX\\ket{01}=\\ket{01} \\quad CX\\ket{10}=\\ket{11} \\quad CX\\ket{11}=\\ket{10} \\quad\n\\end{align*}\n$$\n\n![CNOT](é‡å­è®¡ç®—ï¼šé‡å­ç”µè·¯/CNOT.png)\n\n## No-cloning Theorem\n\næ²¡æœ‰åœ¨ $H\\otimes H$ ä¸Šçš„é…‰ç®—å­ $U$ï¼Œèƒ½å¯¹ $H$ ä¸­çš„å½’ä¸€åŒ–çŠ¶æ€ $\\ket{\\psi}_A$ å’ŒçŠ¶æ€ $\\ket{e}_B$ æœ‰å¦‚ä¸‹çš„æ“ä½œ\n\n$$\nU(\\ket{\\psi}_A\\ket{e}_B)=e^{i\\alpha(\\psi,e)}\\ket{\\psi}_A\\ket{\\psi}_B\n$$\n\nProofï¼š\n\nå‡è®¾å­˜åœ¨è¿™æ ·çš„ $U$ï¼Œé‚£ä¹ˆæœ‰\n\n$$\n\\begin{align*}\nU\\ket{\\psi}_A\\ket{e}_B=\\ket{\\psi}_A\\ket{\\psi}_B \\\\\nU\\ket{\\phi}_A\\ket{e}_B=\\ket{\\phi}_A\\ket{\\phi}_B\n\\end{align*}\n$$\n\nå°†ä¸¤å¼ç›¸ç‚¹ä¹˜ï¼Œå¯ä»¥å¾—åˆ°\n\n$$\n\\begin{align*}\n\\text{left}=\\bra{e}_B\\bra{\\psi}_AU^{\\dagger} U\\ket{\\psi}_A\\ket{e}_B=(\\braket{\\psi|\\psi})_A(\\braket{e|e})_B=\\braket{\\psi|\\psi} \\\\\n\\text{right}=\\bra{\\psi}_B\\bra{\\psi}_A\\ket{\\phi}_A\\ket{\\phi}_B=(\\braket{\\psi|\\phi})_A(\\braket{\\psi|\\phi})_B=|\\braket{\\psi|\\phi}|^2\n\\end{align*}\n$$\n\nå› æ­¤æœ‰\n\n$$\n\\braket{\\psi|\\psi}=|\\braket{\\psi|\\phi}|^2 \\implies \\braket{\\psi|\\psi}=0\\text{ or }1\n$$\n\næ‰€ä»¥é™¤äº†äº’ç›¸æ­£äº¤çš„åŸºåº•ï¼Œæˆ‘ä»¬ä¸å¯èƒ½ä»…é€šè¿‡å½“å‰çš„çŠ¶æ€æƒ…å†µå¤åˆ¶è¯¥çŠ¶æ€ã€‚\n\næ³¨æ„ï¼šè¿™ä¸æ„å‘³ç€æˆ‘ä»¬ä¸å¯ä»¥å¤åˆ¶é‡å­çŠ¶æ€ï¼Œè€Œæ˜¯è¯´ä¸å¯èƒ½æœ‰äººèƒ½çªƒå¬åˆ°é‡å­é€šä¿¡ä¸­çš„ä¿¡æ¯ã€‚\n\n## Measurement\n\nè–›å®šè°”çš„çŒ«ï¼ˆSchrÃ¶dinger's catï¼‰ï¼Œåªæœ‰å½“æµ‹é‡çš„æ—¶å€™æ‰èƒ½çŸ¥é“çœŸå®çš„æƒ…å†µã€‚\n\nå¯¹ qubit çš„æµ‹é‡ä¼šå¯¼è‡´å…¶ä»¥ä¸€å®šæ¦‚ç‡åç¼©åˆ°ç¡®å®šçš„çŠ¶æ€ï¼ˆ$\\ket{0}$ æˆ– $\\ket{1}$ï¼‰ï¼Œä½†è¦è·å¾—æœ€ç»ˆç»“æœï¼Œå¿…é¡»è¦æµ‹é‡ qubit\n\n![Measurement](é‡å­è®¡ç®—ï¼šé‡å­ç”µè·¯/Measurement.png)\n\nExampleï¼š\n\næµ‹é‡å¦‚ä¸‹çš„ qubitï¼Œå°†ä¼šå¾—åˆ°ä»€ä¹ˆé¢„æœŸç»“æœå‘¢ï¼Ÿ\n\n$$\nH\\ket{1}=\\frac{\\ket{0}-\\ket{1}}{\\sqrt{2}}\n$$\n\né¢„æœŸæƒ…å†µä¸‹ï¼Œä¼šæœ‰ 50% çš„æ¦‚ç‡æµ‹é‡å¾—åˆ° $\\ket{0}$ï¼Œä¼šæœ‰ 50% çš„æ¦‚ç‡æµ‹é‡å¾—åˆ° $\\ket{1}$\n\nä¸€èˆ¬æ¥è¯´ï¼Œå¯¹ qubit $\\ket{\\psi}=\\alpha\\ket{0}+\\beta\\ket{1}$ï¼Œä¼šæœ‰ $|\\alpha|^2$ çš„æ¦‚ç‡æµ‹é‡å¾—åˆ° $\\ket{0}$ï¼Œä¼šæœ‰ $|\\beta|^2$ çš„æ¦‚ç‡æµ‹é‡å¾—åˆ° $\\ket{1}$ã€‚è€Œå¯¹å½’ä¸€åŒ–çš„ qubit æ¥è¯´ï¼Œ$|\\alpha|^2+|\\beta|^2=1$\n\n## Reversibility in Quantum Computing\n\nå‡½æ•°æ˜¯å¯é€†çš„ï¼ˆreversibleï¼‰å½“ä¸”ä»…å½“å®ƒæ˜¯åŒå°„çš„ï¼ˆbijectiveï¼‰ã€‚\n\n![Bijective](é‡å­è®¡ç®—ï¼šé‡å­ç”µè·¯/bijective.png)\n\nç»å…¸è®¡ç®—æœºä¸­çš„é€»è¾‘é—¨ä¸ä¸€å®šæ˜¯å¯é€†çš„ï¼Œå¦‚ NOT é—¨ã€AND é—¨ï¼Œå°†å®ƒä»¬ä½œç”¨äº bit ä¹‹åï¼Œä¼šä¸¢å¤±ä¸€äº›ä¿¡æ¯ã€‚\n\n![NOT gate and AND gate](é‡å­è®¡ç®—ï¼šé‡å­ç”µè·¯/NOT_AND.png)\n\nä½†æˆ‘ä»¬å¯ä»¥é€šè¿‡æ·»åŠ ä¸€äº›è¾…åŠ© bit å°†é€»è¾‘é—¨è½¬åŒ–æˆå¯é€†çš„ã€‚\n\nå‡è®¾ $f:i\\to f(i)$ æœ‰ $n$ ä¸ª è¾“å…¥å’Œ $m$ ä¸ªè¾“å‡ºï¼Œæˆ‘ä»¬éœ€è¦å¢åŠ é¢å¤– $n$ ä¸ª è¾“å‡ºå’Œ $m$ ä¸ªè¾“å…¥ï¼Œå¹¶å°†å‡½æ•°æ”¹ä¸º $f_{rev}:i,j\\to i,f(i)\\oplus j$ï¼Œå…¶ä¸­ $\\oplus$ ä¸º XOR\n\n![Reversible AND](é‡å­è®¡ç®—ï¼šé‡å­ç”µè·¯/rev_AND.png)\n\né‡å­ç”µè·¯ä¸­çš„é€»è¾‘é—¨å¿…é¡»æ˜¯é…‰çš„ï¼ˆunitaryï¼‰ï¼Œè€Œé€»è¾‘é—¨ $U$ çš„é€†æ˜¯å”¯ä¸€çš„ï¼Œå³ $U^{\\dagger}$\n\nExampleï¼š\n\nHadamard é—¨çš„é€†\n\n$$\n\\begin{align*}\nH\\ket{0}=\\frac{1}{\\sqrt{2}}\\left[\\begin{matrix}\n    1 & 1 \\\\\n    1 & -1\n\\end{matrix}\\right]\\left[\\begin{matrix}\n    1 \\\\\n    0\n\\end{matrix}\\right]=\\frac{1}{\\sqrt{2}}\\left[\\begin{matrix}\n    1 \\\\\n    1\n\\end{matrix}\\right]=\\frac{\\ket{0}+\\ket{1}}{\\sqrt{2}} \\\\\nH^{\\dagger}\\frac{\\ket{0}+\\ket{1}}{\\sqrt{2}}=\\frac{1}{\\sqrt{2}}\\left[\\begin{matrix}\n    1 & 1 \\\\\n    1 & -1\n\\end{matrix}\\right]\\frac{1}{\\sqrt{2}}\\left[\\begin{matrix}\n    1 \\\\\n    1\n\\end{matrix}\\right]=\\left[\\begin{matrix}\n    1 \\\\\n    0\n\\end{matrix}\\right]=\\ket{0}\n\\end{align*}\n$$\n\nè¦å°†ç»å…¸ç”µè·¯ä¸­çš„é€»è¾‘é—¨æ”¹æˆé‡å­ç”µè·¯ä¸­çš„é€»è¾‘é—¨ï¼Œå¯æ ¹æ®å…ˆå‰æ‰€è¯´çš„å¢åŠ ä¸€äº›è¾…åŠ© qubit å³å¯ã€‚\n\né‡å­ AND é—¨ã€é‡å­ NAND é—¨\n\n![Quantum AND](é‡å­è®¡ç®—ï¼šé‡å­ç”µè·¯/quantum_AND.png)\n\né‡å­ OR é—¨ã€é‡å­ NOR é—¨\n\n![Quantum OR](é‡å­è®¡ç®—ï¼šé‡å­ç”µè·¯/quantum_OR.png)\n\n## Universal Gate Sets\n\næˆ‘ä»¬å¯ä»¥é€šè¿‡æœ‰é™çš„é—¨æ•°ï¼Œå°†ä»»æ„é…‰ç®—å­è¿‘ä¼¼åˆ°ä»»æ„ç»™å®šçš„ç²¾åº¦ï¼ˆç±»ä¼¼äºæ³°å‹’å±•å¼€å¼ï¼‰ã€‚\n\nå®Œæˆè¿™é¡¹å·¥ä½œçš„é—¨çš„é›†åˆè¢«ç§°ä¸ºé€šç”¨é—¨é›†åˆï¼ˆuniversal gate setï¼‰ï¼Œå¦‚\n\n* {Hadamard,Phase,$\\pi/8$,CNOT}\n* {Hadamard,Phase,Toffoli,CNOT}\n\n## Decomposition of Unitary Matrix\n\nä¸€ä¸ª $d$ ç»´çš„é…‰çŸ©é˜µ $U$ å¯è¢«åˆ†è§£ä¸ºäºŒçº§é…‰çŸ©é˜µçš„ä¹˜ç§¯\n\n$$\nU=V_1V_2...V_k\n$$\n\nå…¶ä¸­ $k\\le(d-1)+(d-2)+...+1=d(d-1)/2$\n\nè¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥ç”¨äºŒçº§é…‰çŸ©é˜µæ¥è¡¨ç¤ºä»»æ„é…‰çŸ©é˜µã€‚\n\nå…·ä½“æ¨å¯¼å¯ä»¥å‚è€ƒæ–‡ç«  [Decomposition of unitary matrices and quantum gates](https://arxiv.org/abs/1210.7366)\n\n\n## Reference\n\n[å¤§ä¸€æ–°ç”Ÿä¹Ÿèƒ½æ‡‚çš„é‡å­è®¡ç®—](https://www.bilibili.com/video/BV1oq4y1j7iZ/?spm_id_from=333.337.search-card.all.click&vd_source=201635f84ae101b427649f98a07303b1)\n\n\n[Quantum Computingé˜…è¯»ç¬”è®°ï¼šç¬¬å››ç« ](https://zhuanlan.zhihu.com/p/158725989)","tags":["é‡å­è®¡ç®—"],"categories":["computer"]},{"title":"é‡å­è®¡ç®—ï¼šæ•°å­¦åŸºç¡€","url":"/archives/17052/","content":"\né‡å­è®¡ç®—çš„æ•°å­¦åŸºç¡€\n\n<!-- more -->\n\n## Abstract vector space\n\nå‘é‡ç©ºé—´éœ€è¦æ»¡è¶³ä»¥ä¸‹å‡ ä¸ªå…¬ç†ã€‚å‘é‡ç©ºé—´ä¸­çš„å…ƒç´ å³å‘é‡ã€‚\n\n![axioms of vector space](é‡å­è®¡ç®—ï¼šæ•°å­¦åŸºç¡€/vector_space.png)\n\n## Inner product and Hilbert space\n\nå®šä¹‰ $\\ket{\\phi}$ å’Œ $\\ket{\\psi}$ çš„å†…ç§¯ä¸ºï¼š\n\n* è‹¥ $\\ket{\\phi}$ å’Œ $\\ket{\\psi}$ æ˜¯å‡½æ•°ï¼š\n\n$$\n\\braket{\\phi|\\psi}=\\int_{-\\infty}^{+\\infty}\\bar{\\phi}(x)\\psi(x) dx\n$$\n\n* è‹¥ $\\ket{\\phi}$ å’Œ $\\ket{\\psi}$ æ˜¯åˆ—å‘é‡ï¼š\n\n$$\n\\braket{\\phi|\\psi}=\\phi^\\dagger\\psi=\\bar{\\phi}^T\\psi\n$$\n\nå†…ç§¯çš„ç‰©ç†è§£é‡Šï¼šå¦‚æœç²’å­çš„åˆå§‹æ€ä¸º $\\ket{\\phi}$ï¼Œé‚£ä¹ˆåœ¨ $\\ket{\\psi}$ æ€å‘ç°è¯¥ç²’å­çš„æ¦‚ç‡ä¸º $|\\braket{\\phi|\\psi}|^2$\n\nå¸Œå°”ä¼¯ç‰¹ç©ºé—´å³ä¸€ä¸ªå¸¦å†…ç§¯çš„å¤å‘é‡ç©ºé—´\n\n## Qubits\n\nQubit æ»¡è¶³ä»¥ä¸‹ä¸¤ä¸ªæ€§è´¨ï¼š\n\n* Nomalizedï¼ˆå½’ä¸€çš„ï¼‰ï¼š\n\n$$\n\\braket{0|0}=1, \\braket{1|1}=1\n$$\n\n* Orthogonalï¼ˆæ­£äº¤çš„ï¼‰ï¼š\n\n$$\n\\braket{0|1}=0, \\braket{1|0}=0\n$$\n\nå› æ­¤ï¼Œqubit å½¢æˆäº† Hilbert ç©ºé—´çš„ä¸€ä¸ªåŸºï¼Œå³ä»»ä½•é‡å­æ€éƒ½èƒ½ç”¨ $\\ket{0}$ å’Œ $\\ket{1}$ çš„çº¿æ€§ç»„åˆè¡¨ç¤ºã€‚\n\nqubit å†…ç§¯ä¹Ÿå¯ä»¥è¡¨ç¤ºä¸ºï¼š\n\n$$\n\\braket{i|j}=\\delta_{ij}\n$$\n\n$\\delta_{ij}$ å³ä¸º Kronecker deltaï¼Œæ»¡è¶³\n\n$$\n\\delta_{ij}=\n    \\begin{cases}\n    0, i\\neq j \\\\\n    1, i=j\n    \\end{cases}\n$$\n\n## Superposition of states\n\nå åŠ æ€å³ä¸º qubit çš„çº¿æ€§ç»„åˆ\n\n$$\n\\braket{\\psi}=\\alpha\\ket{0}+\\beta\\ket{1}\n$$\n\nå…¶ä¸­ï¼Œ$|\\alpha|^2+|\\beta|^2=1$ï¼Œä¸” $|\\alpha|^2$ è¡¨ç¤º $\\ket{0}$ æµ‹é‡å‡ºçš„æ¦‚ç‡ã€‚\n\n## Tensor product\n\nä¸¤ä¸ªå‘é‡çš„å¼ é‡ç§¯å³ä¸º\n\n$$\nu\\otimes v=\n    \\left[\\begin{array}{c}\n    u_1 \\\\\n    u_2\n    \\end{array}\\right]\\otimes\n    \\left[\\begin{array}{c}\n    v_1 \\\\\n    v_2\n    \\end{array}\\right]=\n    \\left[\\begin{array}{c}\n    u_1\\left[\\begin{array}{c}\n    v_1 \\\\\n    v_2\n    \\end{array}\\right] \\\\\n    u_2\\left[\\begin{array}{c}\n    v_1 \\\\\n    v_2\n    \\end{array}\\right]\n    \\end{array}\\right]=\n    \\left[\\begin{array}{c}\n    u_1v_1 \\\\\n    u_1v_2 \\\\\n    u_2v_1 \\\\\n    u_2v_2\n    \\end{array}\\right]\n$$\n\nä½¿ç”¨ Dirac ç¬¦å·è¡¨ç¤ºå³ä¸º\n\n$$\n\\ket{\\psi}\\otimes\\ket{\\phi}\\equiv\\ket{\\psi}\\ket{\\phi}\\equiv\\ket{\\psi,\\phi}\\equiv\\ket{\\psi\\phi}\n$$\n\nå¼ é‡ç§¯å…·æœ‰å¦‚ä¸‹æ€§è´¨\n\n$$\n(v+w)\\otimes u = v\\otimes u+w\\otimes u \\\\\nu\\otimes(v+w) = u\\otimes v+u\\otimes w \\\\\nc(v\\otimes u) = (cv)\\otimes u = v\\otimes(cu)\n$$\n\nå¼ é‡ç§¯æ˜¯ä¸èƒ½äº¤æ¢çš„ï¼ï¼\n\n## Inner product on the tensor products\n\nSuppose $\\ket{\\psi_1}, \\ket{\\phi_1}\\in H_1$ and $\\ket{\\psi_2}, \\ket{\\phi_2}\\in ğ»_2$ where $ğ»_1$ and $ğ»_2$ are two Hilbert spaces. Then\n\n$$\n\\braket{\\phi_1,\\phi_2|\\psi_1,\\psi_2}=\\braket{\\phi_1|\\psi_1}_1\\braket{\\phi_2|\\psi_2}_2\n$$\n\nWhere $\\braket{\\cdot|\\cdot}_1$ and $\\braket{\\cdot|\\cdot}_2$ are inner product defined on $ğ»_1$ and $ğ»_2$, respectively.\n\nExample:\n\n$$\n\\braket{01|01}=\\braket{0|0}\\braket{1|1}=1\\cdot1=1 \\\\\n\\braket{011|010}=\\braket{0|0}\\braket{1|1}\\braket{1|0}=1\\cdot1\\cdot0=0\n$$\n\n## Outer product\n\nThe outer product of two vectors $\\ket{\\psi}$ and $\\ket{\\phi}$ are defined as $\\ket{\\psi_1}\\bra{\\phi}=\\ket{\\psi_1}\\otimes\\bra{\\phi}$\n\nOuter product is used to produce operators (ç®—ç¬¦).\n\nExample: \n\nLet $\\ket{\\psi}=\\sqrt{1/2}\\ket{0}+\\sqrt{1/2}\\ket{1}$. Then $\\hat{ğ‘ƒ}_0\\equiv\\ket{0}\\bra{0}$ is a projection operator (æŠ•å½±ç®—ç¬¦) and it projects the wave function onto $\\ket{0}$ state.\n\n$$\n\\hat{ğ‘ƒ}_0\\ket{\\psi}=\\sqrt{1/2}\\ket{0}\\bra{0}\\ket{0}+\\sqrt{1/2}\\ket{0}\\bra{0}\\ket{1}=\\sqrt{1/2}\\ket{0}\n$$\n\n## Eigenvalues and Eigenvectors\n\nLet $\\hat{A}$ be an operator. If\n\n$$\n\\hat{A}\\ket{\\psi}=\\lambda\\ket{\\psi}\n$$\n\nThen $\\lambda$ is an eigenvalue (ç‰¹å¾å€¼) of $\\hat{A}$ and $\\ket{\\psi}$ is an eigenvector (ç‰¹å¾å‘é‡) associated with $\\lambda$.\n\n\nExample: \n\nFind the eigenvalues and eigenvectors of projection operator\n$\\hat{ğ‘ƒ}_0\\equiv\\ket{0}\\bra{0}$\n\nSolution: Eigenvalues are 1 and 0, cooresponding eigenvectors are $\\ket{0}$ and $\\ket{1}$.\n\n$$\n\\hat{ğ‘ƒ}_0\\ket{0}=1\\cdot\\ket{0} \\\\\n\\hat{ğ‘ƒ}_0\\ket{1}=0\\cdot\\ket{1}\n$$\n\n## Spectral theorem \n\nSuppose the eigenvalues $\\lambda_1,\\lambda_2,...,\\lambda_n$ of $\\hat{A}$ are real, and their corresponding eigenvectors are $\\ket{\\psi_1},\\ket{\\psi_2},...,\\ket{\\psi_n}$. Then the operator $\\hat{A}$ can be written as\n\n$$\n\\hat{A}=\\sum_{i=1}^n\\lambda_i\\ket{\\psi_i}\\bra{\\psi_i}\n$$\n\nMoreover, $\\{\\ket{\\psi_1},\\ket{\\psi_2},...,\\ket{\\psi_n}\\}$ form a complete basis for the Hilbert space $\\hat{A}$ living in.\n\nSometimes, this is called spectral decomposition of operator $\\hat{A}$.\n\n## Completeness relation\n\nFrom spectral theorem, we can easily get the so-called completeness relation:\n\n$\\{\\ket{\\psi_1},\\ket{\\psi_2},...,\\ket{\\psi_n}\\}$ is a complete basis \n\nif and only if\n\n$$\nI=\\sum_{i=1}^n\\ket{\\psi_i}\\bra{\\psi_i}\n$$\n\nWhere ğ¼ is an identity matrix.\n\n## Bloch Sphere\n\nThe coefficients of a normalized quantum states must satisfy\n\n$$\n\\ket{\\psi}=\\alpha\\ket{0}+\\beta\\ket{1},\\text{with }|\\alpha|^2+|\\beta|^2=1\n$$\n\nA normalized quantum state must be on a â€œsphereâ€ (Bloch sphere).\nThis sphere is called Bloch sphere.\n\nUsing polar angle $\\theta$, and azimuthal angle $\\phi$, we can write\n\n$$\n\\ket{\\psi}=\n  \\left[\\begin{array}{c}\n  \\cos\\frac{\\theta}{2} \\\\\n  e^{i\\theta}\\sin\\frac{\\theta}{2}\n  \\end{array}\\right]\n$$\n\nBesides, in Cartesian coordinate system, we can write\n\n$$\n\\begin{cases}\n  x = \\sin\\theta\\cos\\phi \\\\\n  y = \\sin\\theta\\sin\\phi \\\\\n  z = \\cos\\theta\n\\end{cases}\n$$\n\n![Bloch Sphere](é‡å­è®¡ç®—ï¼šæ•°å­¦åŸºç¡€/bloch_sphere.png)\n\n![Vectors in Bloch Sphere](é‡å­è®¡ç®—ï¼šæ•°å­¦åŸºç¡€/vectors_in_bloch_sphere.png)\n\n## Global and relative phase\n\nIn computational basis, we can express a quantum state as\n\n$$\n\\ket{\\psi}=e^{i\\gamma}(\\cos\\frac{\\theta}{2}\\ket{0}+e^{i\\phi}\\sin\\frac{\\theta}{2}\\ket{1})\n$$\n\nWhere $e^{i\\gamma}$ is called global phase, $e^{i\\phi}$ is called relative phase.\n\n* Global phase DOES NOT affect anything (we can ignore it).\n* Relative phase IS important, DO NOT forget it.\n\nExample:\n\n![uneffective global phase](é‡å­è®¡ç®—ï¼šæ•°å­¦åŸºç¡€/global_phase.png)\n\n## Unitary operators\n\nAn operator $U$ is unitary if and only if $U^\\dagger U=UU^\\dagger=I$.\n\nUnitary operator PRESERVES the norm:\n\n$$\n||U\\ket{\\psi}||^2=\\bra{\\psi}U^\\dagger U\\ket{\\psi}=\\bra{\\psi}\\ket{\\psi}=||\\ket{\\psi}||^2\n$$\n\nIn other words, unitary operators keep quantum states on the Bloch sphere.\n\nExamples: \n\nPauli matrices:\n\n$$\n\\sigma_x=X=\n\\left[\\begin{array}{c c}\n  0 & 1 \\\\\n  1 & 0\n\\end{array}\\right],\n\\sigma_y=Y=\n\\left[\\begin{array}{c c}\n  0 & -i \\\\\n  i & 0\n\\end{array}\\right],\n\\sigma_z=Z=\n\\left[\\begin{array}{c c}\n  1 & 0 \\\\\n  0 & -1\n\\end{array}\\right],\n$$\n\n## Rotation about arbitrary axis\n\nPauli-Euler relation:\n\n$$\n\\exp(i\\alpha\\hat{n}\\cdot\\vec{\\sigma})=\\cos(\\alpha)I+i\\sin(\\alpha)\\hat{n}\\cdot\\vec{\\sigma}\n$$\n\nwhere $\\hat{n}$ is a unit vector in $\\mathbb{R}^3$.\n\n$\\vec{\\sigma}=X\\hat{x}+Y\\hat{y}+Z\\hat{z}$ is a vector of Pauli matrices.\n\nFor example: \n\n$$\n\\hat{x}\\cdot\\vec{\\sigma}=X=\n\\left[\\begin{array}{c c}\n  0 & 1 \\\\\n  1 & 0\n\\end{array}\\right]\n$$\n\nTo rotate a state $\\ket{\\psi}$ along unit vector $\\hat{n}$ with angle $\\alpha$, multiply the rotation matrix $R_{\\hat{n}}(\\alpha)$,\n\n$$\nR_{\\hat{n}}(\\alpha)\\ket{\\psi}=\\exp(-i\\frac{\\alpha}{2}\\hat{n}\\cdot\\vec{\\sigma})\\ket{\\psi}\n$$\n\n![Rotation](é‡å­è®¡ç®—ï¼šæ•°å­¦åŸºç¡€/rotation.png)\n\n## Pure state and mixed state\n\nA pure state is a quantum state can be represented as a single vector.\n\nThat means, all vectors on the surface Bloch sphere are pure states! Since they can be written as\n\n$$\n\\ket{\\psi}=\n  \\left[\\begin{array}{c}\n  \\cos\\frac{\\theta}{2} \\\\\n  e^{i\\theta}\\sin\\frac{\\theta}{2}\n  \\end{array}\\right]\n$$\n\nA mixed state is a vector inside Bloch sphere.\n\n## Density matrix and Bloch vector\n\nFor a given pure state $\\ket{\\psi}$, define the density operator as\n\n$$\n\\rho=\\ket{\\psi}\\bra{\\psi}\n$$\n\nLet $\\ket{\\psi}=[\\cos\\frac{\\theta}{2},e^{i\\theta}\\sin\\frac{\\theta}{2}]^T$, then we have\n\n$$\n\\rho=\\frac{1}{2}\n\\left[\\begin{array}{c c}\n  1+\\cos\\theta & e^{-i\\phi}\\sin\\theta \\\\\n  e^{i\\phi}\\sin\\theta & 1-\\cos\\theta\n\\end{array}\\right]\n=\\frac{1}{2}(I+xX+yY+zZ)=\\frac{1}{2}(I+\\vec{r}_\\rho\\cdot\\vec{\\sigma})\n$$\n\nwhere $\\vec{\\sigma}=(X,Y,Z)$ is the vector of Pauli matrices and\n\n$$\n\\vec{r}_\\rho=(x,y,z)=(\\sin\\theta\\cos\\phi,\\sin\\theta\\sin\\phi,\\cos\\theta)\n$$\n\nis called the unit Bloch vector. It is the Cartesian representation of $\\ket{\\psi}$.\n\n## Purity\n\nDefine purity of a quantum state $\\ket{\\psi}$ as\n\n$$\n\\gamma=Tr(\\rho^2)\n$$\n\nwhere $\\rho=\\ket{\\psi}\\bra{\\psi}$ is the density operator of $\\ket{\\psi}$.\n* Purity measures how much a state is mixed.\n* $1/d\\leq\\gamma\\leq1$ where $d$ is the dimension of the Hilbert space.\n* $\\gamma=1$ if itâ€™s a pure state, $\\gamma=1/d$ if itâ€™s a completely mixed state.\n\nSuppose $\\vec{r}_1$ and $\\vec{r}_2$ are the Bloch vectors of two pure states $\\ket{\\psi_1}$ and $\\ket{\\psi_2}$, then\n\n$$\n|\\braket{\\psi_1|\\psi_2}|^2=Tr(\\rho_1\\rho_2)=\\frac{1}{2}(1+\\vec{r}_1\\cdot\\vec{r}_2)\n$$\n\nThis formula relates the inner product in $H$ and the inner product in $\\mathbb{R}^3$.\n\nExample:\n\n* Bloch sphere geometry \n\nSuppose $\\braket{\\psi_1|\\psi_2}=0$ (orthogonal in $H$), how do they look like on Bloch sphere?\n\nUsing the formula,\n\n$$\n|\\braket{\\psi_1|\\psi_2}|^2=\\frac{1}{2}(1+\\vec{r}_1\\cdot\\vec{r}_2)\n$$\n\nSince $\\braket{\\psi_1|\\psi_2}=0$, so we have $\\vec{r}_1\\cdot\\vec{r}_2=-1$. $\\ket{\\psi_1}$ and $\\ket{\\psi_2}$ have opposite directions!\n\n* Purity\n\nLet $\\ket{\\psi}=\\frac{\\ket{0}-\\ket{1}}{\\sqrt{2}}$, calculate its purity.\n\n$$\n\\rho_{\\psi}=\\frac{1}{2}(\\ket{0}\\bra{0}-\\ket{0}\\bra{1}-\\ket{1}\\bra{0}+\\ket{1}\\bra{1})=\\frac{1}{2}\\left[\\begin{array}{c c}\n  1 & -1 \\\\\n  -1 & 1\n\\end{array}\\right] \\\\\n\\implies\n\\rho_{\\psi}^2=\\frac{1}{4}\\left[\\begin{array}{c c}\n  2 & -2 \\\\\n  -2 & 2\n\\end{array}\\right]\n\\implies\nTr(\\rho_{\\psi}^2)=1\n$$\n\nThis is obvious, since $\\ket{\\psi}$ can be drawn on Bloch sphere, so it is a pure state.\n\n\n\n\n\n## Reference\n\n[å¤§ä¸€æ–°ç”Ÿä¹Ÿèƒ½æ‡‚çš„é‡å­è®¡ç®—](https://www.bilibili.com/video/BV1oq4y1j7iZ/?spm_id_from=333.337.search-card.all.click&vd_source=201635f84ae101b427649f98a07303b1)\n\n[CMPT 409/981: Quantum Circuits and Compilation](https://www.cs.sfu.ca/~meamy/Teaching/f22/cmpt981/)","tags":["é‡å­è®¡ç®—"],"categories":["computer"]},{"title":"NDCç©ºé—´","url":"/archives/49371/","content":"\n# ç›¸æœºæ¨¡å‹\n\n\n\n\n\n\n\n\n\n\n\n\n# å‚è€ƒèµ„æ–™\n\n- [è¯¦è§£NeRFä¸­çš„NDC ray space](https://zhuanlan.zhihu.com/p/628675070)\n- [OpenGL Projection Matrix](http://www.songho.ca/opengl/gl_projectionmatrix.html)\n- [æŠ•å½±ä¸ç›¸æœºç©ºé—´](https://sighingnow.github.io/graphics/projection_and_camera.html)\n- [å¦‚ä½•ä»NDCåæ ‡è½¬æ¢ä¸ºæ‘„åƒæœºç©ºé—´åæ ‡](https://zhuanlan.zhihu.com/p/356771429)\n- [NeRFç¥ç»è¾å°„åœºä¸­å…³äºå…‰çº¿ä»ä¸–ç•Œåæ ‡ç³»è½¬æ¢ä¸ºNDCåæ ‡ç³»](https://blog.csdn.net/qq_40514113/article/details/131746384)\n- [Generating Camera Rays with Ray-Tracing](https://www.scratchapixel.com/lessons/3d-basic-rendering/ray-tracing-generating-camera-rays/standard-coordinate-systems.html)\n- [nerf è§†å›¾ä¸åæ ‡ç³»](https://zhuanlan.zhihu.com/p/651524053)","tags":["CV&CG"],"categories":["computer"]},{"title":"ç›¸æœºå‚æ•°ä¸åæ ‡ç³»å˜æ¢","url":"/archives/27886/","content":"\n# åæ ‡ç³»\n\n![åæ ‡ç³»](ç›¸æœºå‚æ•°ä¸åæ ‡ç³»å˜æ¢/coordinate_system.png)\n\nä¸ºäº†å”¯ä¸€åœ°æè¿°æ¯ä¸€ä¸ªç©ºé—´ç‚¹çš„åæ ‡ï¼Œä»¥åŠç›¸æœºçš„ä½ç½®å’Œæœå‘ï¼Œæˆ‘ä»¬éœ€è¦å…ˆå®šä¹‰ä¸€ä¸ªä¸–ç•Œåæ ‡ç³»ã€‚ä¸€ä¸ªåæ ‡ç³»å…¶å®å°±æ˜¯ç”±åŸç‚¹çš„ä½ç½®ä¸ XYZ è½´çš„æ–¹å‘å†³å®šã€‚ä¸ºäº†å»ºç«‹ä¸‰ç»´ç©ºé—´ç‚¹åˆ°ç›¸æœºå¹³é¢çš„æ˜ å°„å…³ç³»ä»¥åŠå¤šä¸ªç›¸æœºä¹‹é—´çš„ç›¸å¯¹å…³ç³»ï¼Œä¹Ÿè¦å¯¹æ¯ä¸€ä¸ªç›¸æœºå®šä¹‰ä¸€ä¸ªå±€éƒ¨çš„ç›¸æœºåæ ‡ç³»ã€‚ä¸‹å›¾ä¸ºå¸¸è§çš„åæ ‡ç³»å®šä¹‰ä¹ æƒ¯ï¼š\n\n![å¸¸è§çš„ç›¸æœºåæ ‡ç³»å®šä¹‰ä¹ æƒ¯ï¼ˆå³æ‰‹åæ ‡ç³»ï¼‰](ç›¸æœºå‚æ•°ä¸åæ ‡ç³»å˜æ¢/camera_coordinate.png)\n\n> åœ¨ OpenCV/COLMAP çš„ç›¸æœºåæ ‡ç³»é‡Œç›¸æœºæœå‘ +z è½´ï¼Œåœ¨ LLFF/NeRF çš„ç›¸æœºåæ ‡ç³»ä¸­é‡Œç›¸æœºæœå‘ -z è½´ã€‚æœ‰æ—¶æˆ‘ä»¬ä¼šæŒ‰åæ ‡ç³»çš„ xyz æœå‘æè¿°åæ ‡ç³»ï¼Œå¦‚ OpenCV/COLMAP é‡Œä½¿ç”¨çš„ RDF è¡¨è¿° X è½´æŒ‡å‘ rightï¼ŒY è½´æŒ‡å‘ Downï¼ŒZ è½´æŒ‡å‘ Fowardã€‚\n\n# ç›¸æœºå†…å¤–å‚æ•°\n\nç›¸æœºçš„**ä½ç½®**å’Œ**æœå‘**ç”±ç›¸æœºçš„**å¤–å‚ï¼ˆextrinsic matrixï¼‰**å†³å®šï¼Œ**æŠ•å½±å±æ€§**ç”±ç›¸æœºçš„**å†…å‚ï¼ˆintrinsic matrixï¼‰**å†³å®šã€‚\n\n> æ¥ä¸‹æ¥çš„ä»‹ç»å‡è®¾çŸ©é˜µæ˜¯åˆ—çŸ©é˜µï¼ˆcolumn-major matrixï¼‰ï¼Œå˜æ¢çŸ©é˜µå·¦ä¹˜åæ ‡å‘é‡å®ç°åæ ‡å˜æ¢ï¼ˆè¿™ä¹Ÿæ˜¯ OpenCV/OpenGL/NeRF é‡Œä½¿ç”¨çš„å½¢å¼ï¼‰ã€‚\n\n## ç›¸æœºå¤–å‚\n\nç›¸æœºå¤–å‚æ˜¯ä¸€ä¸ª $4\\times4$ çš„çŸ©é˜µ $M$ï¼Œå…¶ä½œç”¨æ˜¯å°†ä¸–ç•Œåæ ‡ç³»çš„ç‚¹ $P_{world}=[x,y,z,1]$ å˜æ¢åˆ°ç›¸æœºåæ ‡ç³» $P_{camera}=MP_{world}$ ä¸‹ã€‚å› æ­¤ä¹ŸæŠŠç›¸æœºå¤–å‚å«åš **world-to-camera (w2c) çŸ©é˜µ**ã€‚ï¼ˆæ³¨æ„ç”¨çš„æ˜¯4ç»´çš„é½æ¬¡åæ ‡ï¼‰\n\nç›¸æœºå¤–å‚çš„é€†çŸ©é˜µè¢«ç§°ä¸º **camera-to-world (c2w) çŸ©é˜µ**ï¼Œå…¶ä½œç”¨æ˜¯æŠŠç›¸æœºåæ ‡ç³»çš„ç‚¹å˜æ¢åˆ°ä¸–ç•Œåæ ‡ç³»ã€‚c2w çŸ©é˜µæ˜¯ä¸€ä¸ª $4\\times4$ çš„çŸ©é˜µï¼Œå·¦ä¸Šè§’ $3\\times3$ æ˜¯æ—‹è½¬çŸ©é˜µ $R$ï¼Œå³ä¸Šè§’çš„ $3\\times1$ å‘é‡æ˜¯å¹³ç§»å‘é‡ $T$ã€‚æœ‰æ—¶å†™çš„æ—¶å€™å¯ä»¥å¿½ç•¥æœ€åä¸€è¡Œ $[0,0,0,1]$ã€‚\n\n![camera-to-world (c2w) çŸ©é˜µ](ç›¸æœºå‚æ•°ä¸åæ ‡ç³»å˜æ¢/c2w.png)\n\nc2w çŸ©é˜µçš„å€¼ç›´æ¥æè¿°äº†ç›¸æœºåæ ‡ç³»çš„æœå‘å’ŒåŸç‚¹ï¼š**æ—‹è½¬çŸ©é˜µçš„ç¬¬ä¸€åˆ—åˆ°ç¬¬ä¸‰åˆ—åˆ†åˆ«è¡¨ç¤ºäº†ç›¸æœºåæ ‡ç³»çš„ X, Y, Z è½´åœ¨ä¸–ç•Œåæ ‡ç³»ä¸‹å¯¹åº”çš„æ–¹å‘ï¼›å¹³ç§»å‘é‡è¡¨ç¤ºçš„æ˜¯ç›¸æœºåŸç‚¹åœ¨ä¸–ç•Œåæ ‡ç³»çš„å¯¹åº”ä½ç½®**ã€‚\n\n![ç†è§£ camera-to-world (c2w) çŸ©é˜µ](ç›¸æœºå‚æ•°ä¸åæ ‡ç³»å˜æ¢/c2w_description.png)\n\nå¦‚æœå°† c2w ä½œç”¨åˆ°ï¼ˆå³å·¦ä¹˜ï¼‰ç›¸æœºåæ ‡ç³»ä¸‹çš„ X è½´ $[1,0,0,0]$ï¼ŒY è½´ $[0,1,0,0]$, Z è½´ $[0,0,1,0]$ï¼Œä»¥åŠåŸç‚¹ $[0,0,0,1]$ï¼ˆæ³¨æ„æ–¹å‘å‘é‡çš„é½æ¬¡åæ ‡ç¬¬å››ç»´ç­‰äº 0ï¼Œç‚¹åæ ‡ç¬¬å››ç»´ç­‰äº 1ï¼‰ï¼Œå°±èƒ½å¾—åˆ°å®ƒä»¬åœ¨ä¸–ç•Œåæ ‡ç³»çš„åæ ‡è¡¨ç¤ºï¼š\n\n```python\n[R, T][1, 0, 0, 0]^T = [r11, r21, r31]^T # Xè½´å¯¹åº”çš„æ˜¯c2wçŸ©é˜µçš„ç¬¬ä¸€åˆ—\n[R, T][0, 1, 0, 0]^T = [r12, r22, r32]^T # Yè½´å¯¹åº”çš„æ˜¯c2wçŸ©é˜µçš„ç¬¬äºŒåˆ—\n[R, T][0, 0, 1, 0]^T = [r13, r23, r33]^T # Yè½´å¯¹åº”çš„æ˜¯c2wçŸ©é˜µçš„ç¬¬ä¸‰åˆ—\n[R, T][0, 0, 0, 1]^T = [t1, t2, t3]^T    # åŸç‚¹å¯¹åº”çš„æ˜¯c2wçŸ©é˜µçš„ç¬¬å››åˆ—\n```\n\n## ç›¸æœºå†…å‚\n\nç›¸æœºçš„å†…å‚çŸ©é˜µå°†ç›¸æœºåæ ‡ç³»ä¸‹çš„ä¸‰ç»´åæ ‡æ˜ å°„åˆ°äºŒç»´çš„å›¾åƒå¹³é¢ã€‚\n\n![æ˜ å°„](ç›¸æœºå‚æ•°ä¸åæ ‡ç³»å˜æ¢/projection.png)\n\nè¿™é‡Œä»¥é’ˆå­”ç›¸æœºï¼ˆPinhole cameraï¼‰ä¸ºä¾‹ä»‹ç»ç›¸æœºçš„å†…å‚çŸ©é˜µ $K$ï¼š\n\n$$\nK=\\left[\\begin{array}{c c c}\n    f_x & 0 & c_x \\\\\n    0 & f_y & c_y \\\\\n    0 & 0 & 1\n\\end{array}\\right]\n$$\n\nå†…å‚çŸ©é˜µ $K$ åŒ…å« $4$ ä¸ªå€¼ï¼Œå…¶ä¸­ $f_x$ å’Œ $f_y$ æ˜¯ç›¸æœºçš„æ°´å¹³å’Œå‚ç›´**ç„¦è·ï¼ˆfocal lengthï¼‰**ï¼ˆå¯¹äºç†æƒ³çš„é’ˆå­”ç›¸æœºï¼Œ$f_x=f_y$ï¼‰ã€‚ç„¦è·çš„ç‰©ç†å«ä¹‰æ˜¯ç›¸æœºä¸­å¿ƒåˆ°æˆåƒå¹³é¢çš„è·ç¦»ï¼Œé•¿åº¦ä»¥åƒç´ ä¸ºå•ä½ã€‚$c_x$ å’Œ $c_y$ æ˜¯å›¾åƒåŸç‚¹ç›¸å¯¹äºç›¸æœºå…‰å¿ƒçš„æ°´å¹³å’Œå‚ç›´åç§»é‡ã€‚$c_x$ï¼Œ$c_y$ æœ‰æ—¶å€™å¯ä»¥ç”¨å›¾åƒå®½å’Œé«˜çš„ $1/2$ è¿‘ä¼¼:\n\n```python\n#  NeRF run_nerf.pyæœ‰è¿™ä¹ˆä¸€æ®µæ„é€ Kçš„ä»£ç \n    if K is None:\n        K = np.array([\n            [focal, 0, 0.5*W],\n            [0, focal, 0.5*H],\n            [0, 0, 1]\n        ])\n```\n\n# å¦‚ä½•è·å¾—ç›¸æœºå‚æ•°\n\nNeRF ç®—æ³•å‡è®¾ç›¸æœºçš„å†…å¤–å‚æ•°æ˜¯æä¾›çš„ï¼Œé‚£ä¹ˆæ€ä¹ˆå¾—åˆ°æ‰€éœ€è¦çš„ç›¸æœºå‚æ•°å‘¢ï¼Ÿè¿™é‡Œåˆ†åˆæˆæ•°æ®é›†å’ŒçœŸå®æ•°æ®é›†ä¸¤ç§æƒ…å†µã€‚\n\n## åˆæˆæ•°æ®\n\nå¯¹äºåˆæˆæ•°æ®é›†ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡æŒ‡å®šç›¸æœºå‚æ•°æ¥æ¸²æŸ“å›¾åƒï¼Œæ‰€ä»¥å¾—åˆ°å›¾åƒçš„æ—¶å€™å·²ç»çŸ¥é“å¯¹åº”çš„ç›¸æœºå‚æ•°ï¼Œæ¯”å¦‚åƒ NeRF ç”¨åˆ°çš„ Blender Lego æ•°æ®é›†ã€‚å¸¸ç”¨çš„æ¸²æŸ“è½¯ä»¶è¿˜æœ‰ Mitsubaã€OpenGLã€PyTorch3Dã€Pyrender ç­‰ã€‚æ¸²æŸ“æ•°æ®æ¯”è¾ƒç®€å•ï¼Œä½†æ˜¯æŠŠå¾—åˆ°çš„ç›¸æœºæ•°æ®è½¬åˆ° NeRF ä»£ç åæ ‡ç³»ç‰µæ‰¯åˆ°åæ ‡ç³»ä¹‹é—´çš„å˜æ¢ï¼Œæœ‰æ—¶å€™ä¼šæ¯”è¾ƒéº»çƒ¦ã€‚\n\n## çœŸå®æ•°æ®\n\nå¯¹äºçœŸå®åœºæ™¯ï¼Œæ¯”å¦‚æˆ‘ä»¬ç”¨æ‰‹æœºæ‹æ‘„äº†ä¸€ç»„å›¾åƒï¼Œæ€ä¹ˆè·å¾—ç›¸æœºä½å§¿ï¼Ÿç›®å‰å¸¸ç”¨çš„æ–¹æ³•æ˜¯åˆ©ç”¨**è¿åŠ¨æ¢å¤ç»“æ„ï¼ˆstructure-from-motion, SFMï¼‰**æŠ€æœ¯ä¼°è®¡å‡ ä¸ªç›¸æœºé—´çš„ç›¸å¯¹ä½å§¿ã€‚è¿™ä¸ªæŠ€æœ¯æ¯”è¾ƒæˆç†Ÿäº†ï¼Œç°åœ¨å­¦æœ¯ç•Œé‡Œç”¨çš„æ¯”è¾ƒå¤šçš„å¼€æºè½¯ä»¶åŒ…æ˜¯ [COLMAP](https://colmap.github.io/)ã€‚è¾“å…¥å¤šå¼ å›¾åƒï¼ŒCOLMAP å¯ä»¥ä¼°è®¡å‡ºç›¸æœºçš„å†…å‚å’Œå¤–å‚ï¼ˆä¹Ÿå°±æ˜¯ sparse modelï¼‰ã€‚\n\n![COLMAP](ç›¸æœºå‚æ•°ä¸åæ ‡ç³»å˜æ¢/COLMAP.png)\n\nä¸‹é¢æ˜¯ COLMAP å®˜ç½‘æ•™ç¨‹ç»™çš„ä¸‰ä¸ªå‘½ä»¤è¡Œæ“ä½œæ­¥éª¤ï¼Œç®€å•æ¥è¯´ï¼š\n\n1. ç¬¬ä¸€æ­¥æ˜¯å¯¹æ‰€æœ‰çš„å›¾åƒè¿›è¡Œç‰¹å¾ç‚¹æ£€æµ‹ä¸æå–ï¼›\n2. ç¬¬äºŒæ­¥æ˜¯è¿›è¡Œç‰¹å¾ç‚¹åŒ¹é…ï¼›\n3. ç¬¬ä¸‰æ­¥æ˜¯è¿›è¡Œ SFM æ¢å¤ç›¸æœºä½å§¿å’Œç¨€ç–çš„ä¸‰ç»´ç‰¹å¾ç‚¹ã€‚\n\nå…·ä½“çš„ä½¿ç”¨æ–¹æ³•å’ŒåŸç†è¿˜è¯·é˜…è¯»å…¶å®˜æ–¹æ–‡æ¡£ã€‚å…¶å® COLMAP ä¹Ÿé›†æˆäº† multiview stereo (MVS) ç®—æ³•ç”¨äºé‡å»ºåœºæ™¯å®Œæ•´çš„ä¸‰ç»´ç»“æ„ï¼ˆä¹Ÿç§°ä¸º dense modelï¼‰ã€‚ä¸è¿‡ NeRF æœ¬èº«æ˜¯ä¸€ç§æ–°é¢–çš„åœºæ™¯è¡¨å¾å’Œé‡å»ºç®—æ³•ï¼Œæˆ‘ä»¬åªéœ€è¦ç›¸æœºçš„ä½å§¿ä¿¡æ¯ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸éœ€è¦è·‘ MVS è¿›è¡Œ dense é‡å»ºã€‚\n\n> å¦‚æœæ²¡æœ‰æ ‡å®šä¿¡æ¯ï¼ŒåŸºäºå•ç›®çš„ SFM æ— æ³•è·å¾—åœºæ™¯çš„ç»å¯¹å°ºåº¦ã€‚\n\n```bash\n# The project folder must contain a folder \"images\" with all the images.\n$ DATASET_PATH=/path/to/dataset\n\n$ colmap feature_extractor \\\n   --database_path $DATASET_PATH/database.db \\\n   --image_path $DATASET_PATH/images\n\n$ colmap exhaustive_matcher \\\n   --database_path $DATASET_PATH/database.db\n\n$ mkdir $DATASET_PATH/sparse\n\n$ colmap mapper \\\n    --database_path $DATASET_PATH/database.db \\\n    --image_path $DATASET_PATH/images \\\n    --output_path $DATASET_PATH/sparse\n```\n\nä½¿ç”¨ COLMAP å¾—åˆ°ç›¸æœºå‚æ•°ååªéœ€è¦è½¬æˆ NeRF å¯ä»¥è¯»å–çš„æ ¼å¼å³å¯ä»¥ç”¨äºæ¨¡å‹è®­ç»ƒäº†ã€‚é‚£è¿™é‡Œé¢éœ€è¦åšä»€ä¹ˆæ“ä½œï¼Ÿ\n\n# LLFFçœŸå®æ•°æ®æ ¼å¼\n\nLLFFï¼ˆLocal Light Field Fusionï¼‰ï¼Œæ˜¯ NeRF ä½œè€…ä¸Šä¸€ç¯‡åšæ–°è§†è§’åˆæˆçš„å·¥ä½œ [Code release for Local Light Field Fusion at SIGGRAPH 2019](https://github.com/fyusion/llff)ã€‚ä¸ºäº†å’Œ LLFF æ–¹æ³•ä¿æŒä¸€è‡´çš„æ•°æ®æ ¼å¼ï¼ŒNeRF ä½¿ç”¨ load_llff.py è¯»å– LLFF æ ¼å¼çš„çœŸå®æ•°æ®ï¼Œå¹¶å»ºè®®å¤§å®¶ä½¿ç”¨ LLFF æä¾›çš„çš„ [imgs2poses.py](https://github.com/Fyusion/LLFF/blob/master/imgs2poses.py) æ–‡ä»¶è·å–æ‰€éœ€ç›¸æœºå‚æ•°ã€‚\n\n## COLMAPåˆ°LLFFæ•°æ®æ ¼å¼\n\nimgs2poses.py è¿™ä¸ªæ–‡ä»¶å…¶å®å¾ˆç®€å•ï¼Œå°±å¹²äº†ä¸¤ä»¶äº‹ã€‚\n\n1. è°ƒç”¨ COLMAP è½¯ä»¶ä¼°è®¡ç›¸æœºçš„å‚æ•°ï¼Œåœ¨ sparse/0/ æ–‡ä»¶å¤¹ä¸‹ç”Ÿæˆä¸€äº›äºŒè¿›åˆ¶æ–‡ä»¶ï¼šcameras.bin, images.bin, points3D.bin, project.iniï¼›\n2. è¯»å–ä¸Šä¸€æ­¥å¾—åˆ°çš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œä¿å­˜æˆä¸€ä¸ª poses_bounds.npy æ–‡ä»¶ï¼›\n\nè¿™é‡Œæœ‰ä¸€ä¸ªç»†èŠ‚éœ€è¦æ³¨æ„ï¼Œå°±æ˜¯åœ¨ pose_utils.py æ–‡ä»¶é‡Œ load_colmap_data() å‡½æ•°çš„å€’æ•°ç¬¬äºŒè¡Œï¼Œæœ‰ä¸€ä¸ªæ“ä½œå°† COLMAP å¾—åˆ°çš„ c2w æ—‹è½¬çŸ©é˜µä¸­çš„ç¬¬ä¸€åˆ—å’Œç¬¬äºŒåˆ—äº’æ¢ï¼Œç¬¬ä¸‰åˆ—ä¹˜ä»¥è´Ÿå·ï¼š\n\n```python\n# LLFF/llff/poses/pose_utils.py\ndef load_colmap_data(realdir):\n    ...   \n    # must switch to [-u, r, -t] from [r, -u, t], NOT [r, u, -t]\n    poses = np.concatenate([poses[:, 1:2, :], poses[:, 0:1, :], -poses[:, 2:3, :], poses[:, 3:4, :], poses[:, 4:5, :]], 1)\n    return poses, pts3d, perm\n```\n\nä¸Šè¿°æ“ä½œå®é™…ä¸Šå°±æ˜¯æŠŠç›¸æœºåæ ‡ç³»è½´çš„æœå‘è¿›è¡Œäº†å˜æ¢ï¼šX å’Œ Y è½´è°ƒæ¢ï¼ŒZ è½´å–åï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n\n![ä»Colmapçš„åæ ‡ç³»è½¬åˆ°LLFFçš„åæ ‡ç³»](ç›¸æœºå‚æ•°ä¸åæ ‡ç³»å˜æ¢/COLMAP_to_LLFF.png)\n\n## poses_bounds.npyé‡Œæœ‰ä»€ä¹ˆ\n\nload_llff.py ä¼šç›´æ¥è¯»å– poses_bounds.npy æ–‡ä»¶è·å¾—ç›¸æœºå‚æ•°ã€‚poses_bounds.npy æ˜¯ä¸€ä¸ª $N\\times17$ çš„çŸ©é˜µï¼Œå…¶ä¸­ $N$ æ˜¯å›¾åƒçš„æ•°é‡ï¼Œå³æ¯ä¸€å¼ å›¾åƒæœ‰ $17$ ä¸ªå‚æ•°ã€‚å…¶ä¸­å‰é¢ $15$ ä¸ªå‚æ•°å¯ä»¥é‡æ’æˆ $3\\times5$ çš„çŸ©é˜µå½¢å¼ï¼š\n\n$$\n\\left[\\begin{array}{c c c c c}\n    r_{11} & r_{12} & r_{13} & t_1 & H \\\\\n    r_{21} & r_{22} & r_{23} & t_2 & W \\\\\n    r_{31} & r_{32} & r_{33} & t_3 & f \\\\\n\\end{array}\\right]\n$$\n\nå·¦è¾¹ $3\\times3$ çŸ©é˜µæ˜¯ c2w çš„æ—‹è½¬çŸ©é˜µï¼Œç¬¬å››åˆ—æ˜¯ c2w çš„å¹³ç§»å‘é‡ï¼Œç¬¬äº”åˆ—åˆ†åˆ«æ˜¯å›¾åƒçš„é«˜ $H$ã€å®½ $W$ å’Œç›¸æœºçš„ç„¦è· $f$ã€‚\n\næœ€åä¸¤ä¸ªå‚æ•°ç”¨äºè¡¨ç¤º**åœºæ™¯çš„èŒƒå›´ Bounds (bds)**ï¼Œæ˜¯è¯¥ç›¸æœºè§†è§’ä¸‹åœºæ™¯ç‚¹ç¦»ç›¸æœºä¸­å¿ƒæœ€è¿‘ï¼ˆnearï¼‰å’Œæœ€è¿œï¼ˆfarï¼‰çš„è·ç¦»ï¼Œæ‰€ä»¥ near/far è‚¯å®šæ˜¯å¤§äº 0 çš„ã€‚\n\n- è¿™ä¸¤ä¸ªå€¼æ˜¯æ€ä¹ˆå¾—åˆ°çš„ï¼Ÿæ˜¯åœ¨ imgs2poses.py ä¸­ï¼Œè®¡ç®— colmap é‡å»ºçš„ä¸‰ç»´ç¨€ç–ç‚¹åœ¨å„ä¸ªç›¸æœºè§†è§’ä¸‹æœ€è¿‘å’Œæœ€è¿œçš„è·ç¦»å¾—åˆ°çš„ã€‚\n- è¿™ä¸¤ä¸ªå€¼æœ‰ä»€ä¹ˆç”¨ï¼Ÿä¹‹å‰æåˆ°ä½“ç´ æ¸²æŸ“éœ€è¦åœ¨ä¸€æ¡å°„çº¿ä¸Šé‡‡æ ·ä¸‰ç»´ç‚¹ï¼Œè¿™å°±éœ€è¦ä¸€ä¸ªé‡‡æ ·åŒºé—´ï¼Œè€Œ near å’Œ far å°±æ˜¯å®šä¹‰äº†é‡‡æ ·åŒºé—´çš„æœ€è¿‘ç‚¹å’Œæœ€è¿œç‚¹ã€‚è´´è¿‘åœºæ™¯è¾¹ç•Œçš„ near/far å¯ä»¥ä½¿é‡‡æ ·ç‚¹åˆ†å¸ƒæ›´åŠ å¯†é›†ï¼Œä»è€Œæœ‰æ•ˆåœ°æå‡æ”¶æ•›é€Ÿåº¦å’Œæ¸²æŸ“è´¨é‡ã€‚\n\n![poses_bounds.npyé‡Œæœ€åä¸¤ä¸ªå‚æ•°ï¼ˆnear/farï¼‰](ç›¸æœºå‚æ•°ä¸åæ ‡ç³»å˜æ¢/near_far.png)\n\n# load_llff.pyä»£ç è§£è¯»\n\næ¥ç€ï¼Œæˆ‘ä»¬ä»‹ç» NeRF ä»£ç é‡Œ load_llff.py ä»£ç é‡Œçš„ä¸€äº›ç»†èŠ‚ã€‚å¯¹ä¸‰ç»´è§†è§‰ä¸ç†Ÿæ‚‰çš„è¯»è€…ï¼Œæ—©æœŸè¯»ä»£ç çš„æ—¶å€™å¯èƒ½ä¼šæœ‰ä¸å°‘å›°æƒ‘ã€‚\n\n## DRBåˆ°RUBçš„å˜æ¢\n\nç¬¬ä¸€ä¸ªç–‘é—®æ˜¯ï¼Œä¸ºä»€ä¹ˆè¯»è¿› poses_bounds.npy é‡Œçš„c2wçŸ©é˜µä¹‹åï¼Œå¯¹c2wçš„æ—‹è½¬çŸ©é˜µåˆåšäº†ä¸€äº›åˆ—å˜æ¢ï¼Ÿ\n\n```python\n# load_llff.pyæ–‡ä»¶\ndef load_llff_data(basedir, factor=8, recenter=True, bd_factor=.75, spherify=False, path_zflat=False):\n    \n    poses, bds, imgs = _load_data(basedir, factor=factor) # factor=8 downsamples original imgs by 8x\n    print('Loaded', basedir, bds.min(), bds.max())\n    \n    # Correct rotation matrix ordering and move variable dim to axis 0\n    poses = np.concatenate([poses[:, 1:2, :], -poses[:, 0:1, :], poses[:, 2:, :]], 1)\n    ...\n```\n\nä¸Šé¢çš„ä»£ç æ®µçš„æœ€åä¸€è¡Œå®é™…ä¸Šæ˜¯æŠŠæ—‹è½¬çŸ©é˜µçš„ç¬¬ä¸€åˆ—ï¼ˆXè½´ï¼‰å’Œç¬¬äºŒåˆ—ï¼ˆYè½´ï¼‰äº’æ¢ï¼Œå¹¶ä¸”å¯¹ç¬¬äºŒåˆ—ï¼ˆYè½´ï¼‰åšäº†ä¸€ä¸ªåå‘ã€‚è¿™æ ·åšçš„ç›®çš„æ˜¯å°† LLFF çš„ç›¸æœºåæ ‡ç³»å˜æˆ OpenGL/NeRF çš„ç›¸æœºåæ ‡ç³»ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n\n![poses = np.concatenate([poses[:, 1:2, :], -poses[:, 0:1, :], poses[:, 2:, :]], 1)](ç›¸æœºå‚æ•°ä¸åæ ‡ç³»å˜æ¢/DRB_to_RUB.png)\n\n## ç¼©æ”¾å›¾åƒéœ€è¦ä¿®æ”¹ä»€ä¹ˆç›¸æœºå‚æ•°ï¼Ÿ\n\nåœ¨ _load_data() å‡½æ•°é‡Œï¼Œæœ‰ä¸€ä¸ªç”¨äºå›¾åƒç¼©æ”¾çš„ factor æ¯”ä¾‹å‚æ•°ï¼Œå°† $H\\times W$ çš„å›¾åƒç¼©æ”¾æˆ $(H/factor)\\times(W/factor)$ã€‚è¿™é‡Œé¢æœ‰ä¸€ä¸ªé—®é¢˜æ˜¯å¦‚æœç¼©æ”¾äº†å›¾åƒå°ºå¯¸ï¼Œç›¸æœºçš„å‚æ•°éœ€è¦ç›¸åº”çš„åšä»€ä¹ˆå˜åŒ–ï¼Ÿ\n\n**å¤–å‚ï¼ˆä½ç½®å’Œæœå‘ï¼‰ä¸å˜ï¼Œç›¸æœºçš„ç„¦è· $f$ï¼Œ$c_x$, å’Œ $c_y$ ç­‰æ¯”ä¾‹ç¼©æ”¾**ã€‚ä¸‹å›¾çš„ç¤ºæ„å›¾å±•ç¤ºäº†å½“ç›¸æœºä½ç½®ä¸å˜ï¼Œç›¸æœºè§†é‡ï¼ˆField of view, FOVï¼‰ä¸å˜çš„æƒ…å†µä¸‹ï¼Œå›¾åƒçš„é«˜å’Œç„¦è·é•¿çŸ­çš„å…³ç³»ã€‚\n\n![å›¾åƒå¹³é¢1ä¸å›¾åƒå¹³é¢2æ‹æ‘„çš„å›¾åƒå†…å®¹æ˜¯ä¸€æ ·çš„ï¼Œåªæ˜¯åˆ†è¾¨ç‡ä¸åŒ](ç›¸æœºå‚æ•°ä¸åæ ‡ç³»å˜æ¢/FOV.png)\n\n## viewmatrix()\n\nview_matrix æ˜¯ä¸€ä¸ªæ„é€ ç›¸æœºçŸ©é˜µçš„çš„å‡½æ•°ï¼Œè¾“å…¥æ˜¯ç›¸æœºçš„ **Z è½´æœå‘ã€up è½´çš„æœå‘**ï¼ˆå³ç›¸æœºå¹³é¢æœä¸Šçš„æ–¹å‘ Yï¼‰ã€ä»¥åŠç›¸æœºä¸­å¿ƒã€‚è¾“å‡ºä¸‹å›¾æ‰€ç¤ºçš„camera-to-worldï¼ˆc2wï¼‰çŸ©é˜µã€‚å› ä¸º Z è½´æœå‘ï¼ŒY è½´æœå‘ï¼Œå’Œç›¸æœºä¸­å¿ƒéƒ½å·²ç»ç»™å®šï¼Œæ‰€ä»¥åªéœ€æ±‚ X è½´çš„æ–¹å‘å³å¯ã€‚åˆç”±äº X è½´åŒæ—¶ä¸ Z è½´å’Œ Y è½´å‚ç›´ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ Y è½´ä¸ Z è½´çš„å‰ä¹˜å¾—åˆ° X è½´æ–¹å‘ã€‚\n\n![camera-to-world matrix](ç›¸æœºå‚æ•°ä¸åæ ‡ç³»å˜æ¢/c2w_description.png)\n\nä¸‹é¢æ˜¯ load_llff.py é‡Œå…³äº view_matrix() çš„å®šä¹‰ï¼Œçœ‹èµ·æ¥å¤æ‚ä¸€äº›ã€‚å…¶å®å°±æ˜¯æ¯”åˆšåˆšçš„æè¿°æ¯”å¤šäº†ä¸€æ­¥ï¼šåœ¨ç”¨ Y è½´ä¸ Z è½´å‰ä¹˜å¾—åˆ° X è½´åï¼Œå†æ¬¡ç”¨ Z è½´ä¸ X è½´å‰ä¹˜å¾—åˆ°æ–°çš„ Y è½´ã€‚ä¸ºä»€ä¹ˆè¿™ä¹ˆåšå‘¢ï¼Ÿè¿™æ˜¯å› ä¸ºä¼ å…¥çš„ up(Y) è½´æ˜¯é€šè¿‡ä¸€äº›è®¡ç®—å¾—åˆ°çš„ï¼Œä¸ä¸€å®šå’Œ Z è½´å‚ç›´ï¼Œæ‰€ä»¥å¤šè¿™ä¹ˆä¸€æ­¥ã€‚\n\n```python\n# load_llff.py\ndef viewmatrix(z, up, pos):\n    vec2 = normalize(z)\n    vec1_avg = up\n    vec0 = normalize(np.cross(vec1_avg, vec2))\n    vec1 = normalize(np.cross(vec2, vec0))\n    m = np.stack([vec0, vec1, vec2, pos], 1)\n    return m\n```\n\n## poses_avg()\n\nè¿™ä¸ªå‡½æ•°é¡¾åæ€ä¹‰å°±æ˜¯å¤šä¸ªç›¸æœºçš„å¹³å‡ä½å§¿ï¼ˆåŒ…æ‹¬ä½ç½®å’Œæœå‘ï¼‰ã€‚è¾“å…¥æ˜¯å¤šä¸ªç›¸æœºçš„ä½å§¿ã€‚\n\n1. å¯¹å¤šä¸ªç›¸æœºçš„ä¸­å¿ƒè¿›è¡Œæ±‚å‡å€¼å¾—åˆ° centerï¼›\n2. å¯¹æ‰€æœ‰ç›¸æœºçš„ Z è½´æ±‚å¹³å‡å¾—åˆ° vec2 å‘é‡ï¼ˆæ–¹å‘å‘é‡ç›¸åŠ å…¶å®ç­‰æ•ˆäºå¹³å‡æ–¹å‘å‘é‡ï¼‰ï¼›\n3. å¯¹æ‰€æœ‰çš„ç›¸æœºçš„ Y è½´æ±‚å¹³å‡å¾—åˆ° up å‘é‡ï¼›\n4. å°† vec2, up, å’Œ center è¾“å…¥åˆ°åˆšåˆšä»‹ç»çš„ viewmatrix() å‡½æ•°å°±å¯ä»¥å¾—åˆ°å¹³å‡çš„ç›¸æœºä½å§¿äº†ã€‚\n\n```python\ndef poses_avg(poses):\n\n    hwf = poses[0, :3, -1:]\n\n    center = poses[:, :3, 3].mean(0)\n    vec2 = normalize(poses[:, :3, 2].sum(0))\n    up = poses[:, :3, 1].sum(0)\n    c2w = np.concatenate([viewmatrix(vec2, up, center), hwf], 1)\n    \n    return c2w\n```\n\nä¸‹å›¾å±•ç¤ºäº†ä¸€ä¸ª poses_avg() å‡½æ•°çš„ä¾‹å­ã€‚å·¦è¾¹æ˜¯å¤šä¸ªè¾“å…¥ç›¸æœºçš„ä½å§¿ï¼Œå³è¾¹æ˜¯è¿”å›çš„å¹³å‡ç›¸æœºå§¿æ€ã€‚å¯ä»¥çœ‹å‡ºå¹³å‡ç›¸æœºä½å§¿çš„ä½ç½®å’Œæœå‘æ˜¯ä¹‹å‰æ‰€æœ‰ç›¸æœºçš„å‡å€¼ã€‚\n\n![poses_avg()](ç›¸æœºå‚æ•°ä¸åæ ‡ç³»å˜æ¢/poses_avg.png)\n\n> ä¸­é—´å¤§çš„åæ ‡ç³»æ˜¯ä¸–ç•Œåæ ‡ç³»ï¼Œæ¯ä¸€ä¸ªå°çš„åæ ‡ç³»å¯¹åº”ä¸€ä¸ªç›¸æœºçš„å±€éƒ¨åæ ‡ç³»ã€‚çº¢ç»¿è“ï¼ˆRGBï¼‰è½´åˆ†åˆ«ä»£è¡¨ XYZ è½´ã€‚\n\n## recenter_poses()\n\nrecenter_poses() å‡½æ•°çš„åå­—å¬èµ·æ¥æ˜¯ä¸­å¿ƒåŒ–ç›¸æœºä½å§¿ï¼ˆåŒæ ·åŒ…æ‹¬ä½ç½®å’Œæœå‘ï¼‰çš„æ„æ€ã€‚è¾“å…¥ $N$ ä¸ªç›¸æœºä½å§¿ï¼Œä¼šè¿”å›Nä¸ªç›¸æœºä½å§¿ã€‚\n\nå…·ä½“çš„æ“ä½œäº†è§£èµ·æ¥å¯èƒ½æœ‰ç‚¹è·³è·ƒã€‚ç¬¬ä¸€æ­¥å…ˆç”¨åˆšåˆšä»‹ç»çš„ poses_avg(poses) å¾—åˆ°å¤šä¸ªè¾“å…¥ç›¸æœºçš„å¹³å‡ä½å§¿ c2wï¼Œæ¥ç€ç”¨è¿™ä¸ªå¹³å‡ä½å§¿ c2w çš„é€†å·¦ä¹˜åˆ°è¾“å…¥çš„ç›¸æœºä½å§¿ä¸Šå°±å®Œæˆäº†å½’ä¸€åŒ–ã€‚\n\n```python\ndef recenter_poses(poses):\n\n    poses_ = poses+0\n    bottom = np.reshape([0,0,0,1.], [1,4])\n    c2w = poses_avg(poses)\n    c2w = np.concatenate([c2w[:3,:4], bottom], -2)\n    bottom = np.tile(np.reshape(bottom, [1,1,4]), [poses.shape[0],1,1])\n    poses = np.concatenate([poses[:,:3,:4], bottom], -2)\n\n    poses = np.linalg.inv(c2w) @ poses\n    poses_[:,:3,:4] = poses[:,:3,:4]\n    poses = poses_\n    return poses\n```\n\né¦–å…ˆæˆ‘ä»¬è¦çŸ¥é“åˆ©ç”¨åŒä¸€ä¸ªæ—‹è½¬å¹³ç§»å˜æ¢çŸ©é˜µå·¦ä¹˜æ‰€æœ‰çš„ç›¸æœºä½å§¿æ˜¯å¯¹æ‰€æœ‰çš„ç›¸æœºä½å§¿åšä¸€ä¸ªå…¨å±€çš„æ—‹è½¬å¹³ç§»å˜æ¢ï¼Œé‚£ä¸‹ä¸€ä¸ªé—®é¢˜å°±æ˜¯è¿™äº›ç›¸æœºä¼šè¢«å˜åˆ°ä»€ä¹ˆæ ·çš„ä¸€ä¸ªä½ç½®ï¼Ÿæˆ‘ä»¬å¯ä»¥ç”¨å¹³å‡ç›¸æœºä½å§¿ä½œä¸ºæ”¯ç‚¹ç†è§£ï¼Œå¦‚æœæŠŠå¹³å‡ä½å§¿çš„é€† $\\text{c2w}^{-1}$ å·¦ä¹˜å¹³å‡ç›¸æœºä½å§¿ c2wï¼Œè¿”å›çš„ç›¸æœºä½å§¿ä¸­æ—‹è½¬çŸ©é˜µä¸ºå•ä½çŸ©é˜µï¼Œå¹³ç§»é‡ä¸ºé›¶å‘é‡ã€‚ä¹Ÿå°±æ˜¯å˜æ¢åçš„å¹³å‡ç›¸æœºä½å§¿çš„ä½ç½®å¤„åœ¨ä¸–ç•Œåæ ‡ç³»çš„åŸç‚¹ï¼ŒXYZ è½´æœå‘å’Œä¸–ç•Œåæ ‡ç³»çš„å‘ä¸€è‡´ã€‚\n\nä¸‹å›¾æˆ‘ä»¬ç”¨ä¸€ä¸ªä¾‹å­å¸®åŠ©ç†è§£ã€‚å·¦è¾¹å’Œå³è¾¹åˆ†åˆ«æ˜¯è¾“å…¥å’Œè¾“å‡ºçš„ç›¸æœºä½å§¿ç¤ºæ„å›¾ã€‚æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å˜æ¢åçš„å¤šä¸ªç›¸æœºçš„å¹³å‡ä½å§¿å¤„åœ¨ä¸–ç•Œåæ ‡ç³»çš„åŸç‚¹ï¼Œå¹¶ä¸”ç›¸æœºåæ ‡ç³»çš„ XYZ è½´ä¸ä¸–ç•Œåæ ‡ç³»ä¿æŒä¸€è‡´äº†ã€‚\n\n![recenter_poses()](ç›¸æœºå‚æ•°ä¸åæ ‡ç³»å˜æ¢/recenter_poses.png)\n\n> ä¸­é—´å¤§çš„åæ ‡ç³»æ˜¯ä¸–ç•Œåæ ‡ç³»ï¼Œæ¯ä¸€ä¸ªå°çš„åæ ‡ç³»å¯¹åº”ä¸€ä¸ªç›¸æœºçš„å±€éƒ¨åæ ‡ç³»ã€‚çº¢ç»¿è“ï¼ˆRGBï¼‰è½´åˆ†åˆ«ä»£è¡¨ XYZ è½´ã€‚\n\n## render_path_spiral()\n\nè¿™ä¸ªå‡½æ•°å†™çš„æœ‰ç‚¹å¤æ‚ï¼Œå®ƒå’Œæ¨¡å‹è®­ç»ƒæ²¡æœ‰å…³ç³»ï¼Œä¸»è¦æ˜¯ç”¨æ¥ç”Ÿæˆä¸€ä¸ªç›¸æœºè½¨è¿¹ç”¨äºæ–°è§†è§’çš„åˆæˆã€‚\n\nä¸‹é¢åªæ”¾äº†render_path_spiral()å‡½æ•°çš„å®šä¹‰ï¼ŒNeRFä»£ç é‡Œè¿˜æœ‰ä¸€æ®µæ˜¯åœ¨å‡†å¤‡è¾“å…¥å‚æ•°ï¼Œç”±äºç›¸å…³ä»£ç æ¯”è¾ƒé•¿å°±ä¸è´´å‡ºæ¥ã€‚\n\n```python\ndef render_path_spiral(c2w, up, rads, focal, zdelta, zrate, rots, N):\n    render_poses = []\n    rads = np.array(list(rads) + [1.])\n    hwf = c2w[:,4:5]\n    \n    for theta in np.linspace(0., 2. * np.pi * rots, N+1)[:-1]:\n        c = np.dot(c2w[:3,:4], np.array([np.cos(theta), -np.sin(theta), -np.sin(theta*zrate), 1.]) * rads) \n        z = normalize(c - np.dot(c2w[:3,:4], np.array([0,0,-focal, 1.])))\n        render_poses.append(np.concatenate([viewmatrix(z, up, c), hwf], 1))\n    return render_poses\n```\n\néœ€è¦çŸ¥é“è¿™ä¸ªå‡½æ•°å®ƒæ˜¯æƒ³ç”Ÿæˆä¸€æ®µèºæ—‹å¼çš„ç›¸æœºè½¨è¿¹ï¼Œç›¸æœºç»•ç€ä¸€ä¸ªè½´æ—‹è½¬ï¼Œå…¶ä¸­ç›¸æœºå§‹ç»ˆæ³¨è§†ç€ä¸€ä¸ªç„¦ç‚¹ï¼Œç›¸æœºçš„ up è½´ä¿æŒä¸å˜ã€‚ç®€å•è¯´ä¸€ä¸‹ä¸Šé¢çš„ä»£ç ï¼š\n\né¦–å…ˆæ˜¯ä¸€ä¸ª for å¾ªç¯ï¼Œæ¯ä¸€è¿­ä»£ç”Ÿæˆä¸€ä¸ªæ–°çš„ç›¸æœºä½ç½®ã€‚`c` æ˜¯å½“å‰è¿­ä»£çš„ç›¸æœºåœ¨ä¸–ç•Œåæ ‡ç³»çš„ä½ç½®ï¼Œ`np.dot(c2w[:3,:4], np.array([0,0,-focal, 1.])` æ˜¯ç„¦ç‚¹åœ¨ä¸–ç•Œåæ ‡ç³»çš„ä½ç½®ï¼Œ`z` æ˜¯ç›¸æœº z è½´åœ¨ä¸–ç•Œåæ ‡ç³»çš„æœå‘ã€‚æ¥ç€ä½¿ç”¨ä»‹ç»çš„ viewmatrix(z, up, c) æ„é€ å½“å‰ç›¸æœºçš„çŸ©é˜µã€‚\n\nä¸‹é¢è¿™ä¸ªå›¾å¯è§†åŒ–äº† render_path_spiral() ç”Ÿæˆçš„è½¨è¿¹ï¼š\n\n![render_path_spiral()](ç›¸æœºå‚æ•°ä¸åæ ‡ç³»å˜æ¢/render_path_spiral.png)\n\n> ä¸­é—´å¤§çš„åæ ‡ç³»æ˜¯ä¸–ç•Œåæ ‡ç³»ï¼Œæ¯ä¸€ä¸ªå°çš„åæ ‡ç³»å¯¹åº”ä¸€ä¸ªç›¸æœºçš„å±€éƒ¨åæ ‡ç³»ã€‚çº¢ç»¿è“ï¼ˆRGBï¼‰è½´åˆ†åˆ«ä»£è¡¨ XYZ è½´ã€‚\n\n## spherify_poses()\n\nåˆšåˆšä»‹ç»çš„ render_path_spiral() å‡è®¾æ‰€æœ‰ç›¸æœºéƒ½æœå‘æŸä¸€ä¸ªæ–¹å‘ï¼Œä¹Ÿå°±æ˜¯æ‰€è°“çš„ faceforward åœºæ™¯ã€‚å¯¹äºç›¸æœºå›´ç»•ç€ä¸€ä¸ªç‰©ä½“æ‹æ‘„çš„ 360 åº¦åœºæ™¯ï¼ŒNeRF ä»£ç æä¾›äº†ä¸€ä¸ª spherify_poses() çš„å‡½æ•°ç”¨äº\"çƒé¢åŒ–\"ç›¸æœºåˆ†å¸ƒå¹¶è¿”å›ä¸€ä¸ªç¯ç»•çš„ç›¸æœºè½¨è¿¹ç”¨äºæ–°è§†è§’åˆæˆã€‚è¿™é‡Œæ’ä¸€å¥ï¼Œåœ¨è®­ç»ƒ 360 åº¦åœºæ™¯çš„æ—¶å€™ï¼Œéœ€è¦é…åˆ `--no_ndc --spherify --lindisp` ä¸‰ä¸ªå‚æ•°ä»¥å¾—åˆ°å¥½çš„ç»“æœï¼Œå…·ä½“åŸç†è¿™é‡Œä¸å±•å¼€ä»‹ç»ã€‚\n\n```python\nif spherify:\n    poses, render_poses, bds = spherify_poses(poses, bds)\n```\n\nè¿™ä¸ªå‡½æ•°ä¹Ÿæ¯”è¾ƒå¤æ‚ï¼Œå‰åŠéƒ¨åˆ†æ˜¯åœ¨å°†è¾“å…¥çš„ç›¸æœºå‚æ•°è¿›è¡Œå½’ä¸€åŒ–ï¼ŒååŠéƒ¨åˆ†æ˜¯ç”Ÿæˆä¸€æ®µç›¸æœºè½¨è¿¹ç”¨äºåˆæˆæ–°è§†è§’ã€‚å¯¹è¾“å…¥ç›¸æœºå‚æ•°è¿›è¡Œå½’ä¸€åŒ–æ—¶ï¼Œæ€è·¯æ˜¯ï¼š\n\n- ç”¨ `pt_mindist = min_line_dist(rays_o, rays_d)` æ‰¾åˆ°ç¦»æ‰€æœ‰ç›¸æœºä¸­å¿ƒå°„çº¿è·ç¦»ä¹‹å’Œæœ€çŸ­çš„ç‚¹ï¼ˆå¯ä»¥å…ˆç®€å•ç†è§£æˆåœºæ™¯çš„ä¸­å¿ƒä½ç½®ï¼‰\n\n```python\n    rays_d = poses[:,:3,2:3]\n    rays_o = poses[:,:3,3:4]\n\n    def min_line_dist(rays_o, rays_d):\n        A_i = np.eye(3) - rays_d * np.transpose(rays_d, [0,2,1])\n        b_i = -A_i @ rays_o\n        pt_mindist = np.squeeze(-np.linalg.inv((np.transpose(A_i, [0,2,1]) @ A_i).mean(0)) @ (b_i).mean(0))\n        return pt_mindist\n\n    pt_mindist = min_line_dist(rays_o, rays_d)\n```\n\n- å°†å¾—åˆ°çš„åœºæ™¯ä¸­å¿ƒä½ç½®ç§»åˆ°ä¸–ç•Œåæ ‡ç³»çš„åŸç‚¹ï¼ŒåŒæ—¶å°†æ‰€æœ‰ç›¸æœº z è½´çš„å¹³å‡æ–¹å‘è½¬åˆ°å’Œä¸–ç•Œåæ ‡ç³»çš„ z è½´ç›¸åŒ\n\n```python\n    center = pt_mindist\n    up = (poses[:,:3,3] - center).mean(0)\n\n    vec0 = normalize(up)\n    vec1 = normalize(np.cross([.1,.2,.3], vec0))\n    vec2 = normalize(np.cross(vec0, vec1))\n    pos = center\n    c2w = np.stack([vec1, vec2, vec0, pos], 1)\n\n    poses_reset = np.linalg.inv(p34_to_44(c2w[None])) @ p34_to_44(poses[:,:3,:4])\n```\n\n- æœ€åå°†ç›¸æœºçš„ä½ç½®ç¼©æ”¾åˆ°å•ä½åœ†å†…\n\n```python\n    rad = np.sqrt(np.mean(np.sum(np.square(poses_reset[:,:3,3]), -1)))\n    sc = 1./rad\n    poses_reset[:,:3,3] *= sc\n```\n\nä¸‹é¢è¿™ä¸ªå›¾å¯è§†åŒ–äº† spherify_poses() è¿”å›çš„ç»“æœï¼š\n\n![spherify_poses()](ç›¸æœºå‚æ•°ä¸åæ ‡ç³»å˜æ¢/spherify_poses.png)\n\n> ä¸­é—´å¤§çš„åæ ‡ç³»æ˜¯ä¸–ç•Œåæ ‡ç³»ï¼Œæ¯ä¸€ä¸ªå°çš„åæ ‡ç³»å¯¹åº”ä¸€ä¸ªç›¸æœºçš„å±€éƒ¨åæ ‡ç³»ã€‚çº¢ç»¿è“ï¼ˆRGBï¼‰è½´åˆ†åˆ«ä»£è¡¨ XYZ è½´ã€‚\n\n# 3Dç©ºé—´å°„çº¿æ€ä¹ˆæ„é€ \n\næœ€åæˆ‘ä»¬çœ‹ä¸€ä¸‹è¿™ä¸ªå°„çº¿æ˜¯æ€ä¹ˆæ„é€ çš„ã€‚**ç»™å®šä¸€å¼ å›¾åƒçš„ä¸€ä¸ªåƒç´ ç‚¹ï¼Œæˆ‘ä»¬çš„ç›®æ ‡æ˜¯æ„é€ ä»¥ç›¸æœºä¸­å¿ƒä¸ºèµ·å§‹ç‚¹ï¼Œç»è¿‡ç›¸æœºä¸­å¿ƒå’Œåƒç´ ç‚¹çš„å°„çº¿ã€‚**\n\né¦–å…ˆï¼Œæ˜ç¡®ä¸¤ä»¶äº‹ï¼š\n\n1. ä¸€æ¡å°„çº¿åŒ…æ‹¬ä¸€ä¸ªèµ·å§‹ç‚¹å’Œä¸€ä¸ªæ–¹å‘ï¼Œèµ·ç‚¹çš„è¯å°±æ˜¯ç›¸æœºä¸­å¿ƒã€‚å¯¹äºå°„çº¿æ–¹å‘ï¼Œæˆ‘ä»¬éƒ½çŸ¥é“ä¸¤ç‚¹ç¡®å®šä¸€æ¡ç›´çº¿ï¼Œæ‰€ä»¥é™¤äº†ç›¸æœºä¸­å¿ƒæˆ‘ä»¬è¿˜éœ€å¦ä¸€ä¸ªç‚¹ï¼Œè€Œè¿™ä¸ªç‚¹å°±æ˜¯æˆåƒå¹³é¢çš„åƒç´ ç‚¹ã€‚\n2. NeRF ä»£ç æ˜¯åœ¨ç›¸æœºåæ ‡ç³»ä¸‹æ„å»ºå°„çº¿ï¼Œç„¶åå†é€šè¿‡ camera-to-world (c2w) çŸ©é˜µå°†å°„çº¿å˜æ¢åˆ°ä¸–ç•Œåæ ‡ç³»ã€‚\n\né€šè¿‡ä¸Šè¿°çš„è®¨è®ºï¼Œæˆ‘ä»¬ç¬¬ä¸€æ­¥æ˜¯è¦å…ˆå†™å‡ºç›¸æœºä¸­å¿ƒå’Œåƒç´ ç‚¹åœ¨ç›¸æœºåæ ‡ç³»çš„ä¸‰ç»´åæ ‡ã€‚ä¸‹é¢æˆ‘ä»¬ä»¥ OpenCV/Colmap çš„ç›¸æœºåæ ‡ç³»ä¸ºä¾‹ä»‹ç»ã€‚ç›¸æœºä¸­å¿ƒçš„åæ ‡å¾ˆæ˜æ˜¾å°±æ˜¯ $[0,0,0]$ äº†ã€‚åƒç´ ç‚¹çš„åæ ‡å¯èƒ½å¤æ‚ä¸€ç‚¹ï¼šé¦–å…ˆä¸‰ç»´åƒç´ ç‚¹çš„ x å’Œ y åæ ‡æ˜¯äºŒç»´çš„å›¾åƒåæ ‡ $(i, j)$ å‡å»å…‰å¿ƒåæ ‡ $(c_x,c_y)$ï¼Œç„¶å z åæ ‡å…¶å®å°±æ˜¯ç„¦è· $f$ (å› ä¸ºå›¾åƒå¹³é¢è·ç¦»ç›¸æœºä¸­å¿ƒçš„è·ç¦»å°±æ˜¯ç„¦è· $f$)ã€‚\n\næ‰€ä»¥æˆ‘ä»¬å°±å¯ä»¥å¾—åˆ°å°„çº¿çš„æ–¹å‘å‘é‡æ˜¯ $(i-c_x,j-c_y,f)-(0,0,0)=(i-c_x,j-c_y,f)$ã€‚å› ä¸ºæ˜¯å‘é‡ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠæ•´ä¸ªå‘é‡é™¤ä»¥ç„¦è· $f$ å½’ä¸€åŒ– z åæ ‡ï¼Œå¾—åˆ° $(\\frac{i-c_x}{f},\\frac{i-c_y}{f},1)$ã€‚\n\næ¥ç€åªéœ€è¦ç”¨ c2w çŸ©é˜µæŠŠç›¸æœºåæ ‡ç³»ä¸‹çš„ç›¸æœºä¸­å¿ƒå’Œå°„çº¿æ–¹å‘å˜æ¢åˆ°ä¸–ç•Œåæ ‡ç³»å°±æå®šäº†ã€‚\n\n![OpenCV/Colmapç›¸æœºåæ ‡ç³»ä¸‹å°„çº¿çš„æ„é€ ç¤ºæ„å›¾](ç›¸æœºå‚æ•°ä¸åæ ‡ç³»å˜æ¢/OpenCV_or_Colmap_ray.png)\n\nä¸‹é¢æ˜¯ NeRF çš„å®ç°ä»£ç ã€‚ä½†å…³äºè¿™é‡Œé¢æœ‰ä¸€ä¸ªç»†èŠ‚éœ€è¦æ³¨æ„ä¸€ä¸‹ï¼šä¸ºä»€ä¹ˆå‡½æ•°çš„ç¬¬äºŒè¡Œä¸­ dirs çš„ y å’Œ z çš„æ–¹å‘å€¼éœ€è¦ä¹˜ä»¥è´Ÿå·ï¼Œå’Œæˆ‘ä»¬åˆšåˆšæ¨å¯¼çš„çš„ $(\\frac{i-c_x}{f},\\frac{i-c_y}{f},1)$ ä¸å¤ªä¸€æ ·å‘¢ï¼Ÿ\n\n```python\ndef get_rays_np(H, W, K, c2w):\n    i, j = np.meshgrid(np.arange(W, dtype=np.float32), np.arange(H, dtype=np.float32), indexing='xy')\n    dirs = np.stack([(i-K[0][2])/K[0][0], -(j-K[1][2])/K[1][1], -np.ones_like(i)], -1)\n    # Rotate ray directions from camera frame to the world frame\n    rays_d = np.sum(dirs[..., np.newaxis, :] * c2w[:3,:3], -1)  # dot product, equals to: [c2w.dot(dir) for dir in dirs]\n    # Translate camera frame's origin to the world frame. It is the origin of all rays.\n    rays_o = np.broadcast_to(c2w[:3,-1], np.shape(rays_d))\n    return rays_o, rays_d\n```\n\nè¿™æ˜¯å› ä¸º OpenCV/Colmap çš„ç›¸æœºåæ ‡ç³»é‡Œç›¸æœºçš„ Up/Y æœä¸‹, ç›¸æœºå…‰å¿ƒæœå‘ +Z è½´ï¼Œè€Œ NeRF/OpenGL ç›¸æœºåæ ‡ç³»é‡Œç›¸æœºçš„ Up/Y æœä¸Šï¼Œç›¸æœºå…‰å¿ƒæœå‘ -Z è½´ï¼Œæ‰€ä»¥è¿™é‡Œä»£ç åœ¨æ–¹å‘å‘é‡ dir çš„ç¬¬äºŒå’Œç¬¬ä¸‰é¡¹ä¹˜äº†ä¸ªè´Ÿå·ã€‚\n\n![RDF to RUB](ç›¸æœºå‚æ•°ä¸åæ ‡ç³»å˜æ¢/RDF_to_RUB.png)\n\n# å‚è€ƒèµ„æ–™\n\n- [NeRFä»£ç è§£è¯»-ç›¸æœºå‚æ•°ä¸åæ ‡ç³»å˜æ¢](https://zhuanlan.zhihu.com/p/593204605/)\n- [The Perspective Camera - An Interactive Tour](https://ksimek.github.io/2012/08/13/introduction/)","tags":["CV"],"categories":["computer"]},{"title":"ä½“æ¸²æŸ“","url":"/archives/61387/","content":"\n# ä½“æ¸²æŸ“\n\nä½“æ¸²æŸ“å±äºæ•´ä¸ªæ¸²æŸ“æŠ€æœ¯çš„åˆ†æ”¯ï¼Œå®ƒçš„ç›®çš„ä¸»è¦æ˜¯ä¸ºäº†è§£å†³äº‘ã€çƒŸã€æœå†»è¿™ç±»éåˆšæ€§ç‰©ä½“çš„æ¸²æŸ“å»ºæ¨¡ï¼Œå¯ä»¥ç®€å•ç†è§£ä¸ºæ˜¯ä¸ºäº†å¤„ç†å¯†åº¦è¾ƒå°çš„éå›ºä½“çš„æ¸²æŸ“ã€‚\n\nä¸ºäº†å»ºæ¨¡è¿™ç§éåˆšæ€§ç‰©ä½“çš„æ¸²æŸ“ï¼Œä½“æ¸²æŸ“æŠŠæ°”ä½“ç­‰ç‰©è´¨æŠ½è±¡æˆä¸€å›¢é£˜å¿½ä¸å®šçš„ç²’å­ç¾¤ã€‚å…‰çº¿åœ¨ç©¿è¿‡è¿™ç±»ç‰©ä½“æ—¶ï¼Œå…¶å®å°±æ˜¯å…‰å­åœ¨è·Ÿç²’å­å‘ç”Ÿç¢°æ’çš„è¿‡ç¨‹ã€‚\n\nä¸‹å›¾æ˜¯ä½“æ¸²æŸ“å»ºæ¨¡çš„ç¤ºæ„å›¾ã€‚å…‰æ²¿ç›´çº¿æ–¹å‘ç©¿è¿‡ä¸€å †ç²’å­ (ç²‰è‰²éƒ¨åˆ†)ï¼Œå¦‚æœèƒ½è®¡ç®—å‡ºæ¯æ ¹å…‰çº¿ä»æœ€å¼€å§‹å‘å°„ï¼Œåˆ°æœ€ç»ˆæ‰“åˆ°æˆåƒå¹³é¢ä¸Šçš„è¾å°„å¼ºåº¦ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ¸²æŸ“å‡ºæŠ•å½±å›¾åƒã€‚è€Œä½“æ¸²æŸ“è¦åšçš„ï¼Œå°±æ˜¯å¯¹è¿™ä¸ªè¿‡ç¨‹è¿›è¡Œå»ºæ¨¡ã€‚ä¸ºäº†ç®€åŒ–è®¡ç®—ï¼Œæˆ‘ä»¬å°±å‡è®¾å…‰å­åªè·Ÿå®ƒé™„è¿‘çš„ç²’å­å‘ç”Ÿä½œç”¨ï¼Œè¿™ä¸ªèŒƒå›´å°±æ˜¯å›¾ä¸­åœ†æŸ±ä½“å¤§å°çš„åŒºé—´ã€‚\n\n![differential cylinders](ä½“æ¸²æŸ“/differential_cylinders.png)\n\nä½“æ¸²æŸ“æŠŠå…‰å­ä¸ç²’å­å‘ç”Ÿä½œç”¨çš„è¿‡ç¨‹ï¼Œè¿›ä¸€æ­¥ç»†åŒ–ä¸ºå››ç§ç±»å‹ï¼š\n\n- å¸æ”¶ (absorption)ï¼šå…‰å­è¢«ç²’å­å¸æ”¶ï¼Œä¼šå¯¼è‡´å…¥å°„å…‰çš„è¾å°„å¼ºåº¦**å‡å¼±**ï¼›\n- æ”¾å°„ (emission)ï¼šç²’å­æœ¬èº«å¯èƒ½å‘å…‰ï¼Œæ¯”å¦‚æ°”ä½“åŠ çƒ­åˆ°ä¸€å®šç¨‹åº¦å°±ä¼šç¦»å­åŒ–ï¼Œå˜æˆå‘å…‰çš„ã€Œç«ç„°ã€ã€‚è¿™ä¼šè¿›ä¸€æ­¥**å¢å¤§**è¾å°„å¼ºåº¦ï¼›\n- å¤–æ•£å°„ (out-scattering)ï¼šå…‰å­åœ¨æ’å‡»åˆ°ç²’å­åï¼Œå¯èƒ½ä¼šå‘ç”Ÿå¼¹å°„ï¼Œå¯¼è‡´æ–¹å‘å‘ç”Ÿåç§»ï¼Œä¼š**å‡å¼±**å…¥å°„å…‰å¼ºåº¦ï¼›\n- å†…æ•£å°„ (in-scattering)ï¼šå…¶ä»–æ–¹å‘çš„å…‰å­åœ¨æ’åˆ°ç²’å­åï¼Œå¯èƒ½å’Œå½“å‰æ–¹å‘ä¸Šçš„å…‰å­é‡åˆï¼Œä»è€Œ**å¢å¼º**å½“å‰å…‰è·¯ä¸Šçš„è¾å°„å¼ºåº¦ã€‚\n\nä¸‹å›¾æ˜¯è¿™å››ç§æƒ…å†µçš„ç¤ºæ„å›¾ï¼Œ$L_i$ è¡¨ç¤ºå…¥å°„å…‰ï¼Œ$L_o$ è¡¨ç¤ºå‡ºå°„å…‰ã€‚\n\n![four situations](ä½“æ¸²æŸ“/four_situations.png)\n\nå‡ºå°„å…‰ä¸å…¥å°„å…‰ä¹‹é—´çš„å˜åŒ–é‡ï¼Œå¯ä»¥è¡¨ç¤ºä¸ºè¿™å››ä¸ªè¿‡ç¨‹çš„å åŠ ï¼š\n\n$$\ndL(x,w)=\\text{emission}+\\text{inscattering}-\\text{outscattering}-\\text{absorption}\n$$\n\nå…¶ä¸­ $x$ è¡¨ç¤ºå…‰çº¿ä¸ŠæŸä¸ªä½ç½®ç‚¹ï¼Œ$w$ è¡¨ç¤ºå…‰çº¿å‘å°„æ–¹å‘ã€‚\n\n## å¸æ”¶ (absorbing)\n\n![absorption](ä½“æ¸²æŸ“/absorption.png)\n\nå‡è®¾ç²’å­éƒ½æ˜¯åŠå¾„ä¸º $r$ çš„çƒä½“ï¼Œé‚£ä¹ˆæ¯ä¸ªç²’å­çš„æŠ•å½±é¢ç§¯æ˜¯ $A=\\pi r^2$ (ä¹Ÿå°±æ˜¯æ¯ä¸ªç²’å­å¯¹å…‰çº¿çš„é®æŒ¡é¢ç§¯)ã€‚å‡è®¾åœ†æŸ±ä½“ä¸­ç²’å­çš„å¯†åº¦æ˜¯ $\\rho$ï¼Œåœ†æŸ±ä½“çš„åº•é¢ç§¯æ˜¯ $E$ã€‚\n\nå½“åœ†æŸ±ä½“è¶³å¤Ÿè–„ (è–„åˆ°è·Ÿç²’å­ä¸€æ ·åš) çš„æ—¶å€™ï¼Œå¯ä»¥è®¤ä¸ºç²’å­ä¹‹é—´ä¸ä¼šäº’ç›¸é‡å  (ä¹Ÿå°±æ˜¯ç²’å­éƒ½å¹³é“ºåœ¨åœ†æŸ±ä½“ä¸€ä¸ªæ¨ªæˆªé¢ä¸Š)ã€‚\n\nå‡å®šè¿™ä¸ªåšåº¦æ˜¯ $\\Delta s$ï¼Œé‚£ä¹ˆåœ¨è¿™ä¸ªåšåº¦å†…ï¼Œåœ†æŸ±ä½“ä½“ç§¯ä¸º $E\\Delta s$ï¼Œç²’å­æ€»æ•°ä¸º $\\rho E\\Delta s$ã€‚è¿™äº›ç²’å­é®æŒ¡çš„é¢ç§¯ä¸º $\\rho E\\Delta sA$ï¼Œå æ•´ä¸ªåº•é¢ç§¯çš„æ¯”ä¾‹ä¸º $\\rho E\\Delta sA/E=\\rho A\\Delta s$ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ**å½“ä¸€æŸå…‰é€šè¿‡è¿™ä¸ªåœ†æŸ±ä½“çš„æ—¶å€™ï¼Œæœ‰ $\\rho A\\Delta s$ çš„æ¦‚ç‡ä¼šè¢«é®æŒ¡ã€‚**\n\næ¢å¥è¯è¯´ï¼Œå¦‚æœæˆ‘ä»¬åœ¨åœ†æŸ±ä½“çš„ä¸€ç«¯å‘å°„æ— æ•°å…‰çº¿ (å‡è®¾éƒ½æœç›¸åŒçš„æ–¹å‘)ï¼Œåœ¨å¦ä¸€ç«¯æ¥æ”¶ï¼Œä¼šå‘ç°æœ‰äº›å…‰çº¿å®‰ç„¶é€šè¿‡ï¼Œæœ‰äº›åˆ™è¢«ç²’å­é®æŒ¡ (å¸æ”¶)ã€‚**æ•´ä½“ä¸Šï¼Œè¿™äº›æ¥å—åˆ°çš„å…‰çº¿æ€»å¼ºåº¦ï¼Œç›¸æ¯”å…¥å°„å…‰çº¿æ€»å¼ºåº¦è€Œè¨€ï¼Œä¼šæœ‰ $\\rho A\\Delta s$ æ¯”ä¾‹çš„è¡°å‡ï¼Œå³å‡ºå°„å…‰çš„å¼ºåº¦å‡å€¼æ˜¯å…¥å°„å…‰çš„ $\\rho A\\Delta s$ å€ã€‚**\n\n$$\n\\begin{align}\n    I_o-I_i=\\Delta I=-\\rho(s)AI(s)\\Delta s\\notag \\\\\n    \\implies dI=-\\rho(s)AI(s)ds\n\\end{align}\n$$\n\nç²’å­å¯†åº¦ $\\rho$ æ˜¯ä¸€ä¸ªå…³äº $s$ çš„å‡½æ•°ï¼Œå› ä¸ºæ¯ä¸ªåŒºåŸŸçš„å¯†åº¦éƒ½æ˜¯ä¸åŒçš„ã€‚\n\n(1) å¼å¯ä»¥è½¬æ¢ä¸ºå¸¸å¾®åˆ†æ–¹ç¨‹ï¼š\n\n$$\n\\begin{equation}\n    \\frac{dI}{ds}=-\\rho(s)AI(s)=-\\tau_a(s)I(s)\n\\end{equation}\n$$\n\nè§£è¿™ä¸ªæ–¹ç¨‹å¯ä»¥å¾—åˆ°ï¼š\n\n$$\n\\begin{equation}\n    I(s)=I_0\\exp(-\\int_0^s\\tau_a(t)dt)\n\\end{equation}\n$$\n\nå…¬å¼é‡Œé¢çš„ $I_0$ (æ³¨æ„åŒºåˆ† $I_o$) æ˜¯å¸¸å¾®åˆ†æ–¹ç¨‹ä¸­çš„å¸¸æ•°é¡¹ï¼Œç‰©ç†æ„ä¹‰ä¸Šè¡¨ç¤ºå…‰çº¿çš„èµ·å§‹ç‚¹ã€‚è€Œ $I_o$ åº”ä¸º $I_o=I_i\\exp(-\\int_i^o\\tau_a(t)dt)$\n\nå¦‚æœä»‹è´¨ (ç²’å­ç¾¤) æ˜¯å‡åŒ€çš„ï¼Œå³ $\\tau_a(t)$ å¤„å¤„ç›¸ç­‰ï¼Œé‚£ä¹ˆå…¥å°„å…‰åœ¨ç»è¿‡ä»‹è´¨ (ç²’å­ç¾¤) åï¼Œè¾å°„å¼ºåº¦ä¼šå‘ˆæŒ‡æ•°è¡°å‡ã€‚è¿™è¢«ç§°ä¸º**æ¯”å°”-æœ—ä¼¯å¸æ”¶å®šå¾‹ (Beer-Lambert Law)**ï¼š\n\n![Beer-Lambert Law](ä½“æ¸²æŸ“/beer_lambert.png)\n\nå¯ä»¥ç”±æ­¤å®šä¹‰**é€å°„æ¯” (transmittance)**ï¼š\n\n$$\n\\begin{equation}\n    T(s)=\\frac{I_o}{I_i}=\\exp(-\\int_i^o\\tau_a(t)dt)\n\\end{equation}\n$$\n\nå®ƒè¡¨ç¤ºç²’å­ç¾¤æŸä¸€ç‚¹çš„é€æ˜åº¦ï¼Œæ•°å€¼è¶Šå¤§ï¼Œè¯´æ˜ç²’å­ç¾¤è¶Šé€æ˜ï¼Œå…‰çº¿è¡°å‡çš„å¹…åº¦å°±è¶Šå°ã€‚\n\nè€Œé€æ˜åº¦æœ¬èº«æ˜¯å…³äº $\\tau_a(t)$ çš„æ–¹ç¨‹ï¼Œ$\\tau_a(t)$ è¶Šå¤§ï¼Œ$T(s)$ å°±è¶Šå°ã€‚ç”±å…¬å¼ (2) å¯çŸ¥ï¼Œ$\\tau_a(t)=\\rho(t)A$ï¼Œå®ƒæ˜¯ç”±ç²’å­å¯†åº¦å’ŒæŠ•å½±é¢ç§¯å†³å®šçš„ã€‚è¿™åœ¨ç›´è§‰ä¸Šä¹Ÿå¾ˆå¥½ç†è§£ï¼Œå¦‚æœç²’å­å¯†åº¦å¤§ï¼Œç²’å­æœ¬èº«ä¹Ÿæ¯”è¾ƒå¤§ï¼Œé‚£ä¹ˆé®ä½å…‰çº¿çš„æ¦‚ç‡ä¹Ÿä¼šç›¸åº”æå‡ï¼Œè‡ªç„¶é€æ˜åº¦ä¹Ÿå°±ä¸‹é™äº†ã€‚\n\n$\\tau_a(t)$ ä¹Ÿè¢«ç§°ä¸º**å…‰å­¦åšåº¦ (optical depth)**ã€‚\n\n![ä¸åŒå…‰å­¦åšåº¦ä¸‹ï¼Œå…‰çº¿é€å°„åº¦å¯¹æ¯”](ä½“æ¸²æŸ“/optical_depth.png)\n\n## æ”¾å°„ (emission)\n\né™¤äº†å¸æ”¶ä¹‹å¤–ï¼Œç²’å­æœ¬èº«ä¹Ÿå¯èƒ½å‘å…‰ã€‚\n\nå‡è®¾å•ä¸ªç²’å­å‘å°„ä¸€æŸå…‰çš„è¾å°„å¼ºåº¦ä¸º $I_e$ï¼Œé‚£ä¹ˆæŒ‰ç…§å‰æ–‡çš„æè¿°ï¼Œåœ¨åœ†æŸ±ä½“è¶³å¤Ÿè–„çš„æƒ…å†µä¸‹ï¼Œç²’å­æ€»æ•°æ˜¯ $\\rho AE\\Delta s$ï¼Œåˆ™æ€»çš„å‘å…‰å¼ºåº¦ä¸º $I_e\\rho AE\\Delta s$ã€‚\n\nå¦‚æœæˆ‘ä»¬åœ¨åœ†æŸ±ä½“ä¸€ç«¯å»æ¥æ”¶ç²’å­ä»¬æ”¾å°„çš„å…‰çº¿ï¼Œä¼šå‘ç°æœ‰æ—¶å€™èƒ½æ¥æ”¶åˆ°ï¼Œæœ‰æ—¶å€™åˆšå¥½æ¥æ”¶ç‚¹æ‰€åœ¨çš„å…‰è·¯ä¸Šæ²¡æœ‰ç²’å­ï¼Œå°±æ¥æ”¶ä¸åˆ°ã€‚èƒ½æ¥æ”¶åˆ°å…‰çº¿çš„æ¦‚ç‡ä¸º $\\rho AE\\Delta s/E=\\rho A\\Delta s$ï¼Œé‚£ä¹ˆæ¥æ”¶åˆ°çš„å…‰çº¿çš„å¹³å‡å¼ºåº¦ä¸º $I_e\\rho A\\Delta s$ã€‚\n\nåŒæ ·åœ°ï¼Œå¯ä»¥å¾—åˆ°æ”¾å°„å…‰å¼ºçš„å¸¸å¾®åˆ†æ–¹ç¨‹ï¼š\n\n$$\n\\begin{equation}\n    \\frac{dI}{ds}=I_e(s)\\rho(s)A=I_e(s)\\tau_a(s)\n\\end{equation}\n$$\n\n$I_e$ æ˜¯ä¸€ä¸ªå…³äº $s$ çš„å‡½æ•°ï¼Œå› ä¸ºåœ†æŸ±ä½“ä¸åŒä½ç½®çš„ç²’å­ï¼Œæ‰€æ”¾å°„çš„å…‰å¼ºéƒ½æ˜¯æœ‰å·®å¼‚çš„ã€‚è¿™é‡Œæˆ‘ä»¬ä¹Ÿçœ‹åˆ°ï¼Œç±»ä¼¼å¸æ”¶ï¼Œç²’å­æ”¾å°„çš„å…‰å¼ºåŒæ ·å’Œ $\\tau_a(s)$ æœ‰å…³ï¼Œè¿™åœ¨ç›´è§‰ä¸Šä¹Ÿæ˜¯åˆç†çš„ï¼Œå¦‚æœç²’å­èƒ½å‘å…‰ï¼Œé‚£ç²’å­å¯†åº¦å’Œç²’å­é¢—ç²’è¶Šå¤§ï¼Œæ”¾å°„çš„è¾å°„å‡å€¼ä¹Ÿå°±è¶Šå¤§ã€‚\n\n## å¤–æ•£å°„ (out-scattering)\n\nç²’å­é™¤äº†å¸æ”¶å…‰å­ï¼Œä¹Ÿå¯èƒ½ä¼šå¼¹å°„å…‰å­ï¼Œè¿™ä¸ªè¿‡ç¨‹ç§°ä¸ºå¤–æ•£å°„ï¼Œå³å…‰å­è¢«å¼¹å°„å‡ºåŸæœ¬çš„å…‰è·¯ï¼Œå¯¼è‡´å…‰çº¿å¼ºåº¦å‡å¼±ã€‚\n\nåŒå¸æ”¶ä¸€æ ·ï¼Œå¤–æ•£å°„å¯¹å…‰çº¿çš„ã€Œå‰Šå¼±ã€ç¨‹åº¦ï¼Œä¹Ÿè·Ÿå…‰å­¦åšåº¦ç›¸å…³ï¼Œä¸è¿‡è¿‡ç¨‹ç›¸å¯¹å¸æ”¶æ¥è¯´åˆå¤æ‚ä¸€äº›ï¼Œå› æ­¤æˆ‘ä»¬ç”¨ $\\tau_s$ æ¥è¡¨ç¤ºå¤–æ•£å°„å¯¹å…‰çº¿çš„å‰Šå¼±æ¯”ä¾‹ï¼Œä»¥åŒºåˆ«äº $\\tau_a$ã€‚\n\nåŒæ ·åœ°ï¼Œè¿™ä¸€è¿‡ç¨‹å¯ä»¥è¡¨ç¤ºä¸ºï¼š\n\n$$\n\\begin{equation}\n    \\frac{dI}{ds}=-\\tau_s(s)I(s)\n\\end{equation}\n$$\n\n## å†…æ•£å°„ (in-scattering)\n\nå…‰å­å¯ä»¥è¢«å¼¹å°„èµ°ï¼Œè‡ªç„¶å°±æœ‰å…¶ä»–å…‰è·¯çš„å…‰å­è¢«å¼¹å°„åˆ°å½“å‰å…‰è·¯ï¼Œè¿™ä¸€è¿‡ç¨‹å°±æ˜¯å†…æ•£å°„ã€‚\n\nå†…æ•£å°„çš„è¿‡ç¨‹æ¯”å¤–æ•£å°„åˆæ›´åŠ å¤æ‚ï¼Œå› ä¸ºå¼¹å°„åˆ°å½“å‰å…‰è·¯çš„å…‰å­å¯èƒ½æ¥è‡ªå¤šæ¡ä¸åŒçš„å…‰è·¯ï¼Œå› æ­¤éœ€è¦ç»¼åˆè€ƒè™‘å…¶ä»–å…‰è·¯çš„è¾å°„å¼ºåº¦ä»¥åŠå„ç§å¼¹å°„è§’åº¦ã€‚\n\nä¸è¿‡æœ¬æ–‡ä¸æ‰“ç®—æ·±å…¥æ¢ç©¶è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬å°±è®¤ä¸ºå…¶ä»–å…‰è·¯çš„è¾å°„å¼ºåº¦ä¸º $I_s$ï¼Œè€Œå¼¹å°„åˆ°å½“å‰å…‰è·¯çš„èƒ½é‡æŸå¤±æ¯”ä¸º $\\tau_s$ (æ³¨æ„è¿™é‡Œå’Œå¤–æ•£å°„ä½¿ç”¨çš„æ˜¯ç›¸åŒçš„ç³»æ•°ï¼Œæ—¢ç„¶éƒ½æ˜¯æ•£å°„ï¼Œé‚£æœ‰äº›æ€§è´¨ä¸Šè‡ªç„¶æ˜¯å…±é€šçš„)ã€‚\n\nå†…æ•£å°„çš„è¿‡ç¨‹å¯ä»¥è¡¨ç¤ºä¸ºï¼š\n\n$$\n\\begin{equation}\n    \\frac{dI}{ds}=\\tau_s(s)I_s(s)\n\\end{equation}\n$$\n\n# ä½“æ¸²æŸ“æ–¹ç¨‹\n\næˆ‘ä»¬æŠŠä»¥ä¸Šå››ä¸ªè¿‡ç¨‹éƒ½ç»¼åˆåˆ°ä¸€ä¸ªå…¬å¼ä¸­ï¼š\n\n$$\n\\begin{equation}\n    \\frac{dI}{ds}=-\\tau_a(s)I(s)-\\tau_s(s)I(s)+\\tau_a(s)I_e(s)+\\tau_s(s)I_s(s)\n\\end{equation}\n$$\n\nå…¶ä¸­ï¼Œ**å¸æ”¶**å’Œ**å¤–æ•£å°„**éƒ½ä¼šå‰Šå¼±å…‰çº¿çš„è¾å°„å¼ºåº¦ï¼Œå¹¶ä¸”ç”±äºå®ƒä»¬éƒ½å’Œå…¥å°„å…‰æœ‰å…³ï¼Œå› æ­¤å®ƒä»¬å…±åŒæ„æˆäº†ä½“æ¸²æŸ“ä¸­çš„**è¡°å‡é¡¹ (attenuation item)**ï¼Œè€Œç²’å­**å‘å…‰**å’Œ**å†…æ•£å°„**éƒ½æ¥è‡ªç‹¬ç«‹çš„å…‰æºï¼Œå› æ­¤è¢«ç§°ä¸º**æºé¡¹ (source item)**ã€‚\n\nä¸ºäº†æ±‚è§£æ–¹ä¾¿ï¼Œå®šä¹‰ $\\tau_t=\\tau_a+\\tau_s$ï¼Œå…¬å¼ (8) å°±ç®€åŒ–ä¸ºï¼š\n\n$$\n\\begin{equation}\n    \\frac{dI}{ds}=-\\tau_t(s)I(s)+\\tau_a(s)I_e(s)+\\tau_s(s)I_s(s)\n\\end{equation}\n$$\n\næ±‚è§£è¿™ä¸ªå¾®åˆ†æ–¹ç¨‹ï¼Œå¾—åˆ°ï¼š\n\n$$\n\\begin{equation}\n    I(s)=\\int_0^s\\exp(-\\int_0^t\\tau_t(u)du)[\\tau_a(s)I_e(s)+\\tau_s(s)I_s(s)]dt+I_0\\exp(-\\int_0^s\\tau_t(t)dt)\n\\end{equation}\n$$\n\nå…¬å¼ (10) å°±æ˜¯ä½“æ¸²æŸ“çš„æ¸²æŸ“æ–¹ç¨‹äº†ï¼Œå…¶ä¸­ $I_0$ å°±æ˜¯å…¥å°„å…‰æœ€å¼€å§‹çš„å¼ºåº¦ï¼Œåœ¨ NeRF ä¸­æŠŠå®ƒå½“ä½œæ˜¯èƒŒæ™¯å…‰ã€‚\n\nè¿™ä¸ªå…¬å¼å‘Šè¯‰æˆ‘ä»¬ï¼Œå‡ºå°„å…‰çš„å¼ºåº¦ä¸»è¦ç”±å…¥å°„å…‰ (èƒŒæ™¯å…‰) å’Œæºé¡¹ (ç²’å­å‘å…‰ä»¥åŠå†…æ•£å°„) ç­‰æ„æˆçš„ï¼Œè€Œè¿™ä¸¤è€…åœ¨ä¼ é€’è¿‡ç¨‹ä¸­éƒ½ä¼´éšç€ç›¸åŒçš„è¡°å‡ ($\\tau_t$)ã€‚åŒæ—¶ç”±äºä» $I_0$ åˆ° $I_s$ çš„æ•´ä¸ªå…‰è·¯ä¸Šï¼Œå¤„å¤„éƒ½å¯èƒ½å­˜åœ¨ç²’å­å‘å…‰å’Œå†…æ•£å°„ç°è±¡ï¼Œå› æ­¤æºé¡¹æ˜¯éœ€è¦ä» $0$ å¼€å§‹ç›¸åŠ ä¸€ç›´åˆ° $s$ çš„ï¼Œå¯¹åº”åˆ°å…¬å¼ä¸­å°±æ˜¯ç§¯åˆ† $\\int_0^s$ã€‚\n\næœ‰äº†è¿™ä¸ªå…¬å¼ï¼Œæˆ‘ä»¬å°±å¯ä»¥å»ºæ¨¡å‡ºæ¯ä¸€æ¡å…‰çº¿åœ¨ä¼ æ’­ä»‹è´¨ä¸­ï¼Œè¾å°„å¼ºåº¦çš„å˜åŒ–ï¼Œå¹¶æœ€ç»ˆæ¸²æŸ“å‡ºå›¾åƒ (å½“ç„¶å‰æè¦çŸ¥é“ä»‹è´¨ä¸­æ¯ä¸€ç‚¹çš„ $\\tau_t$ã€$I_e$ ç­‰ä¿¡æ¯)ã€‚\n\n**æ³¨æ„ï¼Œè™½ç„¶æˆ‘ä»¬åœ¨è®¨è®ºè¿™ä¸ªæ¨¡å‹çš„æ—¶å€™ä¸€ç›´æ˜¯ç”¨è¾å°„å¼ºåº¦è¿™ä¸ªæ¦‚å¿µï¼Œä½†ç›´æ¥æŠŠ $I(s)$ æ›¿æ¢æˆé¢œè‰²ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚**\n\n**ç°åœ¨ï¼Œæˆ‘ä»¬åšä¸€ä¸ªå¤§èƒ†çš„å‡è®¾ï¼Œå‡è®¾ $\\tau_t$ã€$\\tau_a$ã€$\\tau_s$ è¿™äº›éƒ½ç›¸ç­‰ï¼Œç»Ÿä¸€ç”¨ $\\sigma$ è¡¨ç¤º**ï¼ŒåŒæ—¶ä»¤ $C=I_e+I_s$ï¼Œé‚£ä¹ˆå…¬å¼ (10) å¯ä»¥è¿›ä¸€æ­¥ç®€åŒ–æˆï¼š\n\n$$\n\\begin{align}\n    I(s)&=\\int_0^s\\exp(-\\int_0^t\\sigma(u)du)\\sigma(t)C(t)dt+I_0\\exp(-\\int_0^s\\sigma(t)dt)\\notag \\\\\n    &=\\int_0^sT(t)\\sigma(t)C(t)dt+I_0T(s)\n\\end{align}\n$$\n\nå…¶ä¸­ $T(t)=\\exp(-\\int_0^t\\sigma(u)du)$\n\n# è®¡ç®—æœºçš„ä½“æ¸²æŸ“\n\nå…¬å¼ (11) åœ¨è®¡ç®—æœºä¸­æ˜¯æ— æ³•è¡¨è¾¾çš„ï¼Œéœ€è¦è¿›ä¸€æ­¥ç¦»æ•£åŒ–ã€‚\n\næˆ‘ä»¬å°†æ•´ä¸ªå…‰è·¯ $[0, s]$ åˆ’åˆ†ä¸º $N$ ä¸ªç›¸ç­‰é—´è·çš„åŒºé—´ï¼š$[t_n,t_{n+1}]$ã€‚é‚£ä¹ˆï¼Œåªè¦èƒ½ç®—å‡ºæ¯ä¸ª $[t_n,t_{n+1}]$ åŒºé—´å†…çš„è¾å°„å¼ºåº¦ $I(t_n\\rightarrow t_{n+1})$ï¼Œæœ€åæŠŠ $N$ ä¸ªåŒºé—´çš„è¾å°„åŠ èµ·æ¥ï¼Œå°±å¯ä»¥å¾—åˆ°æœ€ç»ˆçš„å…‰çº¿å¼ºåº¦äº†ã€‚$N$ è¶Šå¤§ï¼Œåˆ™è¶Šæ¥è¿‘ç†è®ºæ•°å€¼ (å…¬å¼ (11))ã€‚\n\nä¸ºäº†æ–¹ä¾¿è¿ç®—ï¼Œæˆ‘ä»¬å‡è®¾åœ¨æ¯ä¸ªåŒºé—´å†…ï¼Œ$\\sigma(t)$ å¤„å¤„ç­‰äº $\\sigma_n$\nï¼Œ$C(t)$ å¤„å¤„ç­‰äº $C_n$ã€‚é‚£ä¹ˆå¯ä»¥å¾—åˆ°ï¼š\n\n$$\n\\begin{align}\n    I(t_n\\rightarrow t_{n+1})&=\\int_{t_n}^{t_{n+1}}T(t)\\sigma_nC_ndt \\notag\\\\\n    &=\\sigma_nC_n\\int_{t_n}^{t_{n+1}}T(t)dt\n\\end{align}\n$$\n\næ³¨æ„ $T(t)=\\exp(-\\int_0^t\\sigma(u)du)$ï¼Œæ˜¯éœ€è¦ä»å…‰çº¿èµ·ç‚¹å¤„å¼€å§‹ç§¯åˆ†çš„ã€‚ä¸è¿‡ï¼Œå¥½åœ¨ $T(t)$ å¯ä»¥æ‹†åˆ†ä¸ºä¸¤æ®µçš„ä¹˜ç§¯ï¼š\n\n$$\n\\begin{align}\n    T(t)&=\\exp(-\\int_0^t\\sigma(u)du) \\notag\\\\\n    &=\\exp(-[\\int_0^{t_n}\\sigma(u)du+\\int_{t_n}^t\\sigma(u)du]) \\notag\\\\\n    &=\\exp(-\\int_0^{t_n}\\sigma(u)du)\\exp(-\\int_{t_n}^t\\sigma(u)du) \\notag\\\\\n    &=T(0\\rightarrow t_n)T(t_n\\rightarrow t)\n\\end{align}\n$$\n\nè¿™æ ·å…¬å¼ (12) å°±å˜æˆï¼š\n\n$$\n\\begin{align}\n    I(t_n\\rightarrow t_{n+1})&=\\sigma_nC_n\\int_{t_n}^{t_{n+1}}T(0\\rightarrow t_n)T(t_n\\rightarrow t)dt \\notag\\\\\n    &=\\sigma_nC_nT(0\\rightarrow t_n)\\int_{t_n}^{t_{n+1}}T(t_n\\rightarrow t)dt \\notag\\\\\n    &=\\sigma_nC_nT(0\\rightarrow t_n)\\int_{t_n}^{t_{n+1}}\\exp(-\\int_{t_n}^t\\sigma_ndu)dt \\notag\\\\\n    &=\\sigma_nC_nT(0\\rightarrow t_n)\\int_{t_n}^{t_{n+1}}\\exp(-\\sigma_nu|_{t_n}^t)dt \\notag\\\\\n    &=\\sigma_nC_nT(0\\rightarrow t_n)\\int_{t_n}^{t_{n+1}}\\exp(-\\sigma_n(t-t_n))dt \\notag\\\\\n    &=\\sigma_nC_nT(0\\rightarrow t_n)\\frac{\\exp(-\\sigma_n(t-t_n))}{-\\sigma_n}|_{t_n}^{t_{n+1}} \\notag\\\\\n    &=C_nT(0\\rightarrow t_n)(1-\\exp(-\\sigma_n(t_{n+1}-t_n)))\n\\end{align}\n$$\n\nç°åœ¨æˆ‘ä»¬å¾—åˆ°äº† $I(t_n\\rightarrow t_{n+1})$ï¼Œæ¥ä¸‹æ¥å°±æ˜¯æŠŠæ¯ä¸€æ®µå¾—ç´¯åŠ èµ·æ¥äº†ï¼š\n\n$$\n\\begin{align}\n    I(s)&=\\int_0^sT(t)\\sigma(t)C(t)dt+I_0T(s) \\notag\\\\\n    &\\approx\\sum_{n=1}^NI(t_n\\rightarrow t_{n+1})+I_0T(s) \\notag\\\\\n    &=\\sum_{n=1}^NC_nT(0\\rightarrow t_n)(1-\\exp(-\\sigma_n(t_{n+1}-t_n)))+I_0T(s)\n\\end{align}\n$$\n\nå‡è®¾ $\\delta_n=t_{n+1}-t_n$ï¼Œé‚£ä¹ˆ $\\delta_n$ è¡¨ç¤ºçš„å°±æ˜¯æ¯ä¸ªå°åŒºé—´çš„é•¿åº¦ï¼Œæˆ‘ä»¬ä»¤ $T_n=T(0\\rightarrow t_n)$ï¼Œåˆ™ $T_n$ ä¹Ÿå¯ä»¥ç¦»æ•£åŒ–ä¸ºï¼š\n\n$$\n\\begin{align}\n    T_n&=\\exp(-\\int_0^{t_n}\\sigma(u)du) \\notag\\\\\n    &\\approx\\exp(\\sum_{k=1}^{n-1}-\\sigma_k\\delta_k)\n\\end{align}\n$$\n\nå°†å…¬å¼ (16) ä»£å…¥ (15) åï¼Œå¯ä»¥å¾—åˆ°æœ€ç»ˆè®¡ç®—æœºä½¿ç”¨çš„ä½“æ¸²æŸ“å…¬å¼ï¼š\n\n$$\n\\begin{equation}\n    I(s)=\\sum_{n=1}^NT_n(1-\\exp(-\\sigma_k\\delta_k))C_n+I_0T(s)\n\\end{equation}\n$$\n\nè¿™ä¸ªå…¬å¼å°±æ˜¯ NeRF è®ºæ–‡ä¸­å…¬å¼ (3) çš„å‡ºå¤„ï¼Œåªä¸è¿‡åŠ äº†èƒŒæ™¯å…‰ï¼š\n\n![NeRF ä½“æ¸²æŸ“çš„æ•°å€¼è®¡ç®—å…¬å¼ï¼Œçœç•¥äº†èƒŒæ™¯å…‰](ä½“æ¸²æŸ“/nerf_equation.png)\n\n# å‚è€ƒèµ„æ–™\n\n- [Volume Rendering](https://www.scratchapixel.com/lessons/3d-basic-rendering/volume-rendering-for-developers/volume-rendering-summary-equations.html)\n- [Optical Models for Direct Volume Rendering](https://courses.cs.duke.edu/spring03/cps296.8/papers/max95opticalModelsForDirectVolumeRendering.pdf)\n- [Volume Rendering Digest (for NeRF)](https://arxiv.org/abs/2209.02417)\n- [NeRFå…¥é—¨ä¹‹ä½“æ¸²æŸ“ (Volume Rendering)](https://zhuanlan.zhihu.com/p/595117334)","tags":["CG"],"categories":["computer"]},{"title":"å›¾åƒè¯„ä»·æŒ‡æ ‡","url":"/archives/2070/","content":"\n# PSNR\n\nPeak Signal to Noise Ratioï¼Œå³°å€¼ä¿¡å™ªæ¯”ï¼Œç”¨äºè¯„ä»·å›¾åƒçš„è´¨é‡ã€‚\n\nè¡¡é‡æœ€å¤§å€¼ä¿¡å·å’ŒèƒŒæ™¯å™ªéŸ³ä¹‹é—´çš„å›¾åƒè´¨é‡å‚è€ƒå€¼ã€‚å•ä½ä¸º dBï¼Œå…¶å€¼è¶Šå¤§ï¼Œå›¾åƒå¤±çœŸè¶Šå°‘ã€‚ä¸€èˆ¬æ¥è¯´ï¼ŒPSNR é«˜äº 40dB è¯´æ˜å›¾åƒè´¨é‡å‡ ä¹ä¸åŸå›¾ä¸€æ ·å¥½ï¼›åœ¨ 30-40dB ä¹‹é—´é€šå¸¸è¡¨ç¤ºå›¾åƒè´¨é‡çš„å¤±çœŸæŸå¤±åœ¨å¯æ¥å—èŒƒå›´å†…ï¼›åœ¨ 20-30dB ä¹‹é—´è¯´æ˜å›¾åƒè´¨é‡æ¯”è¾ƒå·®ï¼›PSNR ä½äº 20dB è¯´æ˜å›¾åƒå¤±çœŸä¸¥é‡ã€‚\n\n$$\nPSNR=10\\cdot\\log_{10}\\frac{MAX_I^2}{MSE} \\\\\nMSE=\\frac{1}{mn}\\sum_{i=0}^{m-1}\\sum_{j=0}^{n-1}[I(i,j)-K(i,j)]^2\n$$\n\nå…¶ä¸­\n- $I$ ä¸º $m\\times n$ çš„ç°åº¦å›¾ï¼›\n- $K$ ä¸º $m\\times n$ çš„å™ªå£°å›¾ï¼›\n- $MAX_I$ ä¸ºå›¾ç‰‡å¯èƒ½çš„æœ€å¤§åƒç´ å€¼ï¼Œå³ $n$-bit çš„å›¾åƒçš„ $MAX_I=2^n-1$ã€‚\n\n# SSIM\n\nstructural similarity indexï¼Œç»“æ„ç›¸ä¼¼æ€§ï¼Œç”¨äºè¡¡é‡ä¸¤å¹…å›¾åƒé—´çš„ç»“æ„ç›¸ä¼¼æ€§ã€‚\n\nä½¿ç”¨äº®åº¦ã€å¯¹æ¯”åº¦ä»¥åŠç»“æ„é‡åŒ–å›¾åƒçš„å±æ€§ï¼Œç”¨å‡å€¼ä¼°è®¡äº®åº¦ï¼Œæ–¹å·®ä¼°è®¡å¯¹æ¯”åº¦ï¼Œåæ–¹å·®ä¼°è®¡ç»“æ„ç›¸ä¼¼åº¦ã€‚SSIM å€¼çš„èŒƒå›´ä¸º $[0,1]$ï¼Œè¶Šå¤§ä»£è¡¨å›¾åƒè¶Šç›¸ä¼¼ã€‚å¦‚æœä¸¤å¼ å›¾ç‰‡å®Œå…¨ä¸€æ ·æ—¶ï¼ŒSSIM å€¼ä¸º 1ã€‚\n\n$$\nSSIM(x,y)=\\frac{(2\\mu_x\\mu_y+c_1)(2\\sigma_{xy}+c_2)}{(\\mu_x^2+\\mu_y^2+c_1)(\\sigma_x^2+\\sigma_y^2+c_2)}\n$$\n\nå…¶ä¸­\n- $u$ ä¸ºå‡å€¼ï¼›\n- $\\sigma$ ä¸ºæ–¹å·®/åæ–¹å·®ï¼›\n- $c_i=(k_iL)^2$ï¼Œ$L$ ä¸ºåƒç´ èŒƒå›´ï¼Œ$n$-bit çš„å›¾åƒçš„ $L=2^n-1$ï¼Œ$k_i$ ä¸ºè¶…å‚æ•°ã€‚\n\n# LPIPS\n\nLearned Perceptual Image Patch Similarityï¼Œå­¦ä¹ æ„ŸçŸ¥å›¾åƒå—ç›¸ä¼¼åº¦ï¼Œä¹Ÿç§°ä¸ºæ„ŸçŸ¥æŸå¤±ï¼ˆperceptual lossï¼‰ï¼Œç”¨äºåº¦é‡ä¸¤å¼ å›¾åƒä¹‹é—´çš„å·®åˆ«ã€‚\n\nç»™å®šä¸¤ä¸ªè¾“å…¥ï¼Œåˆ©ç”¨ $\\mathcal{F}$ ç½‘ç»œæå– $L$ å±‚çš„ç‰¹å¾ï¼Œç„¶ååˆ©ç”¨ $w_l$ ç‚¹ä¹˜æ¥æ”¾ç¼©é€šé“ï¼Œæœ€åè®¡ç®— $L_2$ æŸå¤±\n\n![LPIPS](å›¾åƒè¯„ä»·æŒ‡æ ‡/LPIPS.png)\n\n$$\nd(x,x_0)=\\sum_l\\frac{1}{H_lW_l}\\sum_{h,w}||w_l\\odot(\\hat{y}_{hw}^l-\\hat{y}_{0hw}^l)||_2^2\n$$\n\nå…¶ä¸­\n- $x$ ä¸º ground truth å›¾åƒå—ï¼›\n- $x_0$ ä¸ºå«å™ªå£°å›¾åƒå¤±çœŸå—ã€‚\n\nç›¸å…³è®ºæ–‡ï¼š\n- [ZHANG R, ISOLA P, EFROS A A, et al. The Unreasonable Effectiveness of Deep Features as a Perceptual Metric [J]. IEEE, 2018.](https://ieeexplore.ieee.org/document/8578166)\n\n# LMD\n\nLandmark Distanceï¼Œç”¨äºè¯„ä¼°é¢éƒ¨å›¾åƒç”Ÿæˆè´¨é‡çš„æŒ‡æ ‡ã€‚\n\nåº¦é‡ç”Ÿæˆçš„é¢éƒ¨å›¾åƒä¸çœŸå®é¢éƒ¨å›¾åƒä¹‹é—´çš„é¢éƒ¨ç‰¹å¾ç‚¹çš„è·ç¦»ï¼Œä»¥è¯„ä¼°ç”Ÿæˆå›¾åƒçš„é¢éƒ¨ç‰¹å¾çš„å‡†ç¡®æ€§ã€‚\n\nè®¡ç®—LMDçš„ä¸€èˆ¬æ­¥éª¤å¦‚ä¸‹ï¼š\n1. ä»ç”Ÿæˆçš„é¢éƒ¨å›¾åƒå’ŒçœŸå®é¢éƒ¨å›¾åƒä¸­æ£€æµ‹é¢éƒ¨ç‰¹å¾ç‚¹ï¼ˆä¾‹å¦‚ï¼Œçœ¼ç›ã€é¼»å­ã€å˜´å·´ç­‰ï¼‰çš„ä½ç½®ï¼›\n2. è®¡ç®—æ¯ä¸ªç‰¹å¾ç‚¹ä¹‹é—´çš„æ¬§å‡ é‡Œå¾—è·ç¦»ï¼›\n3. æ±‡æ€»æˆ–å¹³å‡è¿™äº›è·ç¦»ï¼Œä»¥è·å¾— LMD çš„æœ€ç»ˆå€¼ã€‚\n\n$$\nLMD=\\frac{1}{N}\\sum_{i=1}^N\\sqrt{(x_{g_i}-x_{r_i})^2+(y_{g_i}-y_{r_i})^2}\n$$\n\nå…¶ä¸­\n- $N$ ä¸ºç‰¹å¾ç‚¹æ•°é‡ï¼›\n- $x_{g_i}$ å’Œ $y_{g_i}$ åˆ†åˆ«æ˜¯**ç”Ÿæˆå›¾åƒ**ä¸Šç¬¬ $i$ ä¸ªç‰¹å¾ç‚¹çš„ x å’Œ y åæ ‡ï¼›\n- $x_{r_i}$ å’Œ $y_{r_i}$ åˆ†åˆ«æ˜¯**çœŸå®å›¾åƒ**ä¸Šç¬¬ i ä¸ªç‰¹å¾ç‚¹çš„ x å’Œ y åæ ‡ã€‚\n\n# FID\n\nFrÃ©chet Inception Distanceï¼Œç”¨äºè¯„ä¼°ç”Ÿæˆæ¨¡å‹æ€§èƒ½çš„æŒ‡æ ‡ï¼Œç‰¹åˆ«æ˜¯åœ¨ç”Ÿæˆå¯¹æŠ—ç½‘ç»œï¼ˆGANsï¼‰ä¸­å¹¿æ³›ä½¿ç”¨ã€‚\n\næµ‹é‡ç”Ÿæˆå›¾åƒä¸çœŸå®å›¾åƒåˆ†å¸ƒä¹‹é—´çš„å·®å¼‚ï¼Œå³**ç”Ÿæˆå›¾åƒçš„è´¨é‡å’Œå¤šæ ·æ€§**ã€‚è¾ƒä½çš„ FID å€¼è¡¨ç¤ºç”Ÿæˆå›¾åƒæ›´æ¥è¿‘çœŸå®å›¾åƒçš„åˆ†å¸ƒï¼Œå¯¹åº”çš„ç”Ÿæˆæ¨¡å‹æ›´å¥½ã€‚\n\nFID çš„è®¡ç®—åŸºäºä¸¤ä¸ªå›¾åƒåˆ†å¸ƒä¹‹é—´çš„ç‰¹å¾å‘é‡ç©ºé—´çš„ FrÃ©chetè·ç¦»ã€‚\n\n$$\nFID(P,G)=||\\mu_p-\\mu_G||^2+Tr(\\Sigma_P+\\Sigma_G-2\\sqrt{\\Sigma_P\\Sigma_G})\n$$\n\nå…¶ä¸­ \n- $P$ è¡¨ç¤ºçœŸå®å›¾åƒåˆ†å¸ƒçš„ç‰¹å¾å‘é‡é›†åˆï¼Œé€šå¸¸ä½¿ç”¨ Inception ç½‘ç»œçš„ä¸­é—´å±‚çš„è¾“å‡ºæ¥è¡¨ç¤ºï¼›\n- $G$ è¡¨ç¤ºç”Ÿæˆå›¾åƒåˆ†å¸ƒçš„ç‰¹å¾å‘é‡é›†åˆï¼Œä¹Ÿä½¿ç”¨ç›¸åŒçš„æ–¹å¼è¡¨ç¤ºï¼›\n- $\\mu_p$ å’Œ $\\mu_G$ åˆ†åˆ«æ˜¯ $P$ å’Œ $G$ çš„ç‰¹å¾å‘é‡é›†åˆçš„å‡å€¼ï¼›\n- $\\Sigma_P$ å’Œ $\\Sigma_G$ åˆ†åˆ«æ˜¯ $P$ å’Œ $G$ çš„ç‰¹å¾å‘é‡é›†åˆçš„åæ–¹å·®çŸ©é˜µï¼›\n- $Tr(\\Sigma_P+\\Sigma_G-2\\sqrt{\\Sigma_P\\Sigma_G})$ è¡¨ç¤ºåæ–¹å·®çŸ©é˜µçš„è¿¹çš„å¹³æ–¹æ ¹ã€‚\n\n# å‚è€ƒèµ„æ–™\n\n- [ã€å›¾åƒè¯„ä»·æŒ‡æ ‡ã€‘PSNR LPIPS LMD SSIM FID](https://zhuanlan.zhihu.com/p/658827245)","tags":["CV"],"categories":["computer"]},{"title":"ä¸‰ç»´æ¨¡å‹","url":"/archives/48868/","content":"\n# ä¸‰ç»´æ¨¡å‹\n\nä¸‰ç»´æ¨¡å‹ç”±**å½¢çŠ¶ï¼ˆshapeï¼‰**å’Œ**å¤–è§‚ï¼ˆappearanceï¼‰**ç»„æˆï¼Œå¤–è§‚å¤§è‡´å¯åˆ†ä¸º**æè´¨ï¼ˆmaterialï¼‰**å’Œ**å…‰ç…§ï¼ˆlightingï¼‰**ã€‚åœ¨å¾—åˆ°è¿™äº›ä¿¡æ¯åï¼Œåªéœ€è¦ç»è¿‡ä¸€å®šçš„ç®—æ³•ï¼Œå°±èƒ½å¾—åˆ°å›¾åƒã€‚åƒè¿™æ ·ä»æ¨¡å‹åˆ°å›¾åƒçš„æ­£å‘è¿‡ç¨‹ï¼Œç§°ä¹‹ä¸º**æ¸²æŸ“ï¼ˆrenderingï¼‰**ï¼›è€Œä»å›¾åƒå¾—åˆ°æ¨¡å‹çš„è¿™ä¸ªé€†å‘è¿‡ç¨‹ï¼Œç§°ä¸º**åæ¸²æŸ“ï¼ˆinverse renderingï¼‰**ã€‚\n\n![rendering & inverse rendering](ä¸‰ç»´æ¨¡å‹/render.png)\n\næ¸²æŸ“è¿‡ç¨‹æ˜¯é€šè¿‡ä¸€ä¸ªæ¸²æŸ“æ–¹ç¨‹æ¥å®Œæˆçš„ï¼Œä¹Ÿå³å°†ä¸€ç³»åˆ—çš„å‚æ•°è¾“å…¥è¿™ä¸ªæ¸²æŸ“æ–¹ç¨‹ï¼Œæœ€ç»ˆæ¸²æŸ“å‡ºæ¥çš„å›¾åƒå°±æ˜¯è¿™ä¸ªæ–¹ç¨‹çš„è§£ã€‚\n\nä½†æ˜¯å¦å¯ä»¥æ ¹æ®è¿™ä¸ªæ–¹ç¨‹çš„è§£æ¥åå‘æ¨å¯¼å‡ºåˆå§‹å‚æ•°å‘¢ï¼Ÿè¿™å°±æ˜¯NeRFè¦è§£å†³çš„é—®é¢˜ï¼Œå³ä»å›¾åƒä¸­å¾—åˆ°æ¨¡å‹çš„ä¿¡æ¯ã€‚\n\n# å½¢çŠ¶è¡¨å¾\n\nä¸»æµçš„å½¢çŠ¶è¡¨å¾æ–¹å¼æœ‰ä»¥ä¸‹å››ç§ï¼š\n- ç½‘æ ¼ï¼ˆMeshï¼‰ï¼šç”¨å¤šä¸ªå¤šè¾¹å½¢è¡¨å¾ç‰©ä½“ï¼›\n- ç‚¹äº‘ï¼ˆPoint Cloudï¼‰ï¼šæŸä¸ªåæ ‡ç³»ä¸‹çš„ç‚¹çš„æ•°æ®çš„é›†åˆï¼Œæ•°æ®å¯ä»¥æ˜¯ä¸‰ç»´åæ ‡ï¼ˆx, y, zï¼‰ã€é¢œè‰²ã€å¼ºåº¦å€¼ã€æ—¶é—´ç­‰ç­‰ï¼›\n- å æ®åœºï¼ˆOccupancy Fieldï¼‰ï¼šç‰©ä½“å æ®çš„ç©ºé—´ç‚¹çš„å€¼ä¸º 1ï¼Œæœªå æ®çš„ç©ºé—´ç‚¹çš„å€¼ä¸º 0ï¼›\n- æœ‰å‘è·ç¦»åœºï¼ˆSigned distance Fieldï¼‰ï¼šä»ç‰©ä½“è¡¨é¢å°„å‡ºå‘é‡ï¼Œå¾€ç‰©ä½“å†…éƒ¨ä¸ºæ­£ï¼Œå¤–éƒ¨ä¸ºè´Ÿã€‚\n\n![shape](ä¸‰ç»´æ¨¡å‹/shape.png)\n\næ­¤å¤–è¿˜æœ‰ä¸€äº›è¡¨ç¤ºï¼Œå¦‚**ä½“ç´ ï¼ˆVoxelï¼‰**ï¼Œ**å¤šè§†å›¾ï¼ˆMulti-viewï¼‰**ç­‰ç­‰ã€‚\n\n# å¤–è§‚è¡¨å¾\n\næœ€å¸¸è§æ˜¯**æè´¨çº¹ç†è´´å›¾ï¼ˆMaterial Texture Mapï¼‰+ç¯å¢ƒå…‰ç…§**ã€‚å°†ä¸‰ç»´ç‰©ä½“ unwrap æˆäºŒç»´çš„å›¾ç‰‡ï¼Œå¹¶åœ¨å›¾ç‰‡ä¸­å„ç‚¹å­˜å‚¨å¯¹åº”ä¸‰ç»´ç‰©ä½“çš„æè´¨çš„æ€§è´¨ã€‚åŒæ—¶ä½¿ç”¨ç¯å¢ƒå…‰ç…§è·å–å›¾ç‰‡å„ç‚¹å¯¹åº”çš„å…‰ç…§ã€‚\n\nè¿™ç§æ–¹æ³•æ˜“äºç¼–è¾‘ä¿®æ”¹ï¼Œç”¨é€”ååˆ†å¹¿æ³›ã€‚ä½†ç¼ºç‚¹æ˜¯éå¸¸ç†æƒ³ä¸”ååˆ†ç¹çï¼Œå› ä¸ºéœ€è¦å°†æè´¨å’Œå…‰ç…§åˆ†å¼€ï¼Œä¸”ä¸ä»…è¦å¯¹è´´å›¾è¿›è¡Œæ˜ å°„ï¼Œè¿˜åˆ†ä¸åŒçš„è¡¨é¢å¯¹ä¸åŒçš„å…‰çº¿è¿›è¡Œæ±‚äº¤ã€‚\n\næ­¤å¤–è¿˜æœ‰**è¾å°„åœºï¼ˆRadiance Fieldï¼‰**æˆ–è€…**è¡¨é¢å…‰åœºï¼ˆSurface light filedï¼‰**ï¼Œè¿™ç§æ–¹æ³•å°†æè´¨ä¸å…‰ç…§æ‰“åŒ…ï¼Œç»™å‡ºæ¯ä¸ªè¡¨é¢ç‚¹ $(xï¼Œyï¼Œz)$ å¤„ä¸åŒçš„è§‚å¯Ÿè§’åº¦ $(\\theta,\\phi)$ çš„é¢œè‰² $(r,b,g)$ã€‚ç”¨è¿™ç§æ–¹å¼å¯ä»¥å¾ˆæ–¹ä¾¿çš„æè¿°ç‰©ä½“è¡¨é¢çš„é¢œè‰²ï¼Œåå°„ï¼Œå’Œé˜´å½±ç­‰æ•ˆæœã€‚ä½†ç¼ºç‚¹æ˜¯ä¸æ˜“äºä¿®æ”¹å’Œç¼–è¾‘ã€‚\n\n![appearance](ä¸‰ç»´æ¨¡å‹/appearance.png)\n\n# å‚è€ƒèµ„æ–™\n\n- [NeRFï¼ˆNeural Radiance Fieldsï¼‰åŸºç¡€çŸ¥è¯†ç‚¹å’Œç ”ç©¶æ–¹å‘](https://zhuanlan.zhihu.com/p/622380174)\n- [NeRFï¼šä»Šå¹´æœ€ç«çš„AIæŠ€æœ¯ï¼è¯¦è§£](https://www.bilibili.com/video/BV1LG4y1P7hY/?vd_source=5f3724657962d635e839ed96a53c359a)","tags":["CG"],"categories":["computer"]},{"title":"NeRFå­¦ä¹ ","url":"/archives/59645/","content":"\nNeRFï¼ˆNeural Radiance Fieldï¼‰å³ç¥ç»è¾å°„åœºã€‚ä»…åˆ©ç”¨å¤šä¸ªè§†è§’çš„ RGB å›¾åƒï¼Œè®­ç»ƒç¥ç»ç½‘ç»œæ„å»ºä¸€ä¸ªéšå¼çš„ä¸‰ç»´è¡¨å¾ï¼Œå³å¯æ¸²æŸ“å¾—åˆ°æ¨¡å‹æ²¡æœ‰è§è¿‡çš„æ–°è§†è§’ä¸‹çš„å›¾åƒã€‚å…¶ä¸»è¦è´¡çŒ®åœ¨äºå®ç°äº†**ç¥ç»åœºï¼ˆNeural Fieldï¼‰ä¸ä½“æ¸²æŸ“ï¼ˆVolume Renderingï¼‰çš„æœ‰æ•ˆç»“åˆ**ã€‚\n\n<!-- more -->\n\n# åŸºç¡€çŸ¥è¯†\n\n- {% post_link ä¸‰ç»´æ¨¡å‹ %}\n- {% post_link ä½“æ¸²æŸ“ %}\n- {% post_link å›¾åƒè¯„ä»·æŒ‡æ ‡ %}\n- {% post_link ç›¸æœºå‚æ•°ä¸åæ ‡ç³»å˜æ¢ %}\n\n# è¡¨å¾æ–¹æ³•\n\n## Soft Shape\n\nè¿™æ˜¯ NeRF æˆåŠŸåŠå…¶é‡è¦çš„å› ç´ ã€‚\n\nNeRF ä½¿ç”¨äº†**è½¯ä¸é€æ˜åº¦åœºï¼ˆsoft opacity fieldï¼‰**æ¥ç”Ÿæˆå½¢çŠ¶ï¼Œå³ä»ä¸€ç‰‡ä¸‰ç»´è™šç©ºä¸­ï¼ŒæŒ‰å›¾åƒéœ€è¦é€æ¸ç”Ÿæˆå‡ºå…·æœ‰ç‰¹å®šç»“æ„ä¸‰ç»´ç‰©ä½“ã€‚è¿™æ ·ç”Ÿæˆçš„å½¢çŠ¶ä¸åƒ Mesh ç­‰ Hard Geometry ä¸€æ ·å…·æœ‰ç¡®å®šæ€§çš„ç©ºé—´è¾¹ç•Œï¼Œè€Œæ˜¯ä»¥ä¸€å®šæ¦‚ç‡è¿ç»­åœ°å¼¥æ•£åœ¨æ•´ä¸ªç©ºé—´ä¸­çš„ã€‚\n\n![NeRFçš„è¡¨å¾æ–¹æ³•](NeRFå­¦ä¹ /nerf_3d_model.png)\n\n![Soft Shape](NeRFå­¦ä¹ /soft_shape.png)\n\nSoft Geometry æœ‰ä¸¤å¤§å¥½å¤„ï¼š\n\n1. ä¸éœ€è¦ä½¿ç”¨å¯¹è±¡åˆ†å‰²æ©ç ï¼ˆobject segmentation masksï¼‰ï¼›\n2. æ²¡æœ‰è¾¹ç•Œä¸è¿ç»­çš„ï¼ˆboundary discontinuityï¼‰é—®é¢˜ï¼Œè¿™æ„å‘³ç€æ›´æ˜“äºåšå¯å¾®æ¸²æŸ“ã€‚\n\nåŒæ—¶ä¹Ÿæœ‰ä¸€äº›ç¼ºç‚¹ï¼Œå¦‚æ¸²æŸ“æˆæœ¬é«˜ï¼Œç¼–è¾‘å›°éš¾ç­‰ç­‰ã€‚\n\n![ä¸ Hard Geometry æ¯”è¾ƒ](NeRFå­¦ä¹ /compare_to_hard_geo.png)\n\nç›¸å…³è®ºæ–‡ï¼š\n\n- [Yu A , Fridovich-Keil S , Tancik M , et al. Plenoxels: Radiance Fields without Neural Networks[J]. 2021.](https://arxiv.org/abs/2112.05131)\n\n- [Sun C , Sun M , Chen H T . Direct Voxel Grid Optimization: Super-fast Convergence for Radiance Fields Reconstruction[C]. 2021.](https://arxiv.org/abs/2111.11215)\n\n## Radiance Field\n\nç»™å‡ºæ¯ä¸ªè¡¨é¢ç‚¹ $(xï¼Œyï¼Œz)$ å¤„ä¸åŒçš„è§‚å¯Ÿè§’åº¦ $(\\theta,\\phi)$ çš„é¢œè‰² $(r,b,g)$ã€‚ç”¨è¿™ç§æ–¹å¼å¯ä»¥å¾ˆæ–¹ä¾¿çš„æè¿°ç‰©ä½“è¡¨é¢çš„é¢œè‰²ï¼Œåå°„ï¼Œå’Œé˜´å½±ç­‰æ•ˆæœã€‚ä½†ç¼ºç‚¹æ˜¯ä¸æ˜“äºä¿®æ”¹å’Œç¼–è¾‘ã€‚\n\nç›¸å…³è®ºæ–‡ï¼š\n\n- [Wood D N ,Azuma D I ,Aldinger K , et al. Surface light fields for 3D photography[C]. SIGGRAPH conference. 2000.](https://grail.cs.washington.edu/projects/slf/papers/siggraph2000/talk/)\n\n> ä»¥ä¸Šè¿™ä¸¤ç§è¡¨å¾æ–¹æ³•éƒ½å¯ä»¥è§†ä¸ºç©ºé—´ä¸­çš„å‡½æ•°ï¼Œå› æ­¤ä¹Ÿæ–¹ä¾¿åç»­ä½¿ç”¨ç¥ç»ç½‘ç»œæ¥æ‹Ÿåˆã€‚\n\n# æ–¹æ³•æ¦‚è¿°\n\n![æ–¹æ³•æ¦‚è¿°](NeRFå­¦ä¹ /overview.png)\n\nNeRF å·¥ä½œçš„è¿‡ç¨‹å¯ä»¥åˆ†æˆä¸¤éƒ¨åˆ†ï¼š**ä¸‰ç»´é‡å»º**å’Œ**æ¸²æŸ“**ã€‚\n\n1. ä¸‰ç»´é‡å»ºï¼šä»äºŒç»´å¤šè§†è§’å›¾åƒæ„å»ºä¸‰ç»´åœºæ™¯ï¼ˆåæ¸²æŸ“ï¼‰\n  \n    åˆ©ç”¨ä¸‰ç»´ç‚¹çš„ä½ç½® $(x,y,z)$ åŠæ–¹ä½è§†è§’ $(\\theta, \\phi)$ ä½œä¸ºè¾“å…¥ï¼Œé€šè¿‡å¤šå±‚æ„ŸçŸ¥æœºï¼ˆMLPï¼‰å»ºæ¨¡è¯¥ç‚¹å¯¹åº”çš„é¢œè‰²ï¼ˆColorï¼ŒRGBï¼‰åŠä½“å¯†åº¦ ï¼ˆVolume Densityï¼Œ$\\sigma$ï¼‰ï¼Œè¯¥å»ºæ¨¡è¿‡ç¨‹ $F_\\Theta$ å½¢æˆäº†ä¸‰ç»´åœºæ™¯çš„**éšå¼è¡¨ç¤º**ã€‚\n\n2. æ¸²æŸ“ï¼šè®¡ç®—æŸè§†è§’ä¸‹çš„äºŒç»´å›¾åƒï¼ˆä½“æ¸²æŸ“ï¼‰\n  \n    ä½¿ç”¨å¯å¾®åˆ†æ¸²æŸ“å™¨ï¼ˆDifferentiable Rendererï¼‰ï¼Œåˆ©ç”¨é‡å»ºéƒ¨åˆ†å¾—åˆ°çš„ Scene Representation æ²¿ç€ ray ç»“åˆå¾—åˆ°æœ€ç»ˆçš„äºŒç»´å›¾åƒåƒç´ å€¼.\n\nåœ¨è®­ç»ƒçš„æ—¶å€™ï¼Œåˆ©ç”¨æ¸²æŸ“éƒ¨åˆ†å¾—åˆ°çš„äºŒç»´å›¾åƒï¼Œé€šè¿‡ä¼˜åŒ–ä¸ Ground Truth çš„ L2 Loss è®­ç»ƒç½‘ç»œã€‚\n\n## Pipeline\n\n![Pipeline](NeRFå­¦ä¹ /pipeline.png)\n\n## Neural Radiance Field Scene Representation\n\nè¯¥éƒ¨åˆ†çš„è¾“å…¥æ˜¯ä¸‰ç»´ä½ç½® $(x,y,z)$ å’ŒäºŒç»´æ–¹ä½è§†è§’ $(\\theta,\\phi)$ï¼Œè¾“å‡ºæ˜¯é¢œè‰² $c=(r,g,b)$ å’Œä½“å¯†åº¦ $\\sigma$ï¼Œå³åˆ©ç”¨ä¸€ä¸ª MLP ç½‘ç»œè¿‘ä¼¼åœ°è¡¨ç¤ºè¿™ç§æ˜ å°„ $F_\\Theta: (x,d)\\rightarrow(c,\\sigma)$ï¼Œè¿™ä¸ªæ˜ å°„ $F_\\Theta$ å°±æ˜¯ä¸€ç§ä¸‰ç»´åœºæ™¯çš„**éšå¼è¡¨ç¤º**ã€‚\n\nè¯¥ MLP ç½‘ç»œå…ˆä½¿ç”¨ 8 å±‚ 256 é€šé“çš„å…¨è¿æ¥å±‚æ¥æ”¶ $(x,y,z)$ è¾“å…¥ï¼Œå¹¶ä½¿ç”¨ ReLU æ¿€æ´»ï¼Œè¾“å‡º $\\sigma$ å’Œä¸€ä¸ª 256 ç»´çš„å‘é‡ã€‚ç„¶åè¿™ä¸ªå‘é‡ä¸ $(\\theta,\\phi)$ è¿æ¥ï¼Œå¹¶è¾“å…¥ 1 å±‚ 128 é€šé“çš„å…¨è¿æ¥å±‚ï¼Œå¹¶ä½¿ç”¨ ReLU æ¿€æ´»ï¼Œè¾“å‡ºé¢œè‰² $c=(r,g,b)$ã€‚\n\n![Network](NeRFå­¦ä¹ /network.png)\n\n## Volume Rendering with Radiance Fields\n\næˆ‘ä»¬å¯ä»¥å°†ä½“å¯†åº¦ $\\sigma(\\mathbf{x})$ è§†ä¸º ray ç»ˆæ­¢äºä½ç½® $\\mathbf{x}$ çš„æ— é™å°ç²’å­çš„å¾®åˆ†æ¦‚ç‡ã€‚\n\nåœ¨ ray $\\mathbf{r}(t)=\\mathbf{o}+t\\mathbf{d}$ ä¸Š $[t_n,t_f]$ æ®µçš„æœŸæœ›é¢œè‰² $C(\\mathbf{r})$ ä¸ºï¼š\n\n$$\nC(\\mathbf{r})=\\int_{t_n}^{t_f}T(t)\\sigma(\\mathbf{r}(t))\\mathbf{c}(\\mathbf{r}(t),\\mathbf{d})dt,\\text{ where }T(t)=\\exp(-\\int_{t_n}^t\\sigma(\\mathbf{r}(s))ds)\n$$\n\nå…¶ä¸­ $T(t)$ è¡¨ç¤ºä» $t_n$ åˆ° $t$ æ²¿ ray çš„ç´¯ç§¯é€å°„ç‡ï¼Œå³ ray ä» $t_n$ åˆ° $t$ ä¸ç¢°åˆ°ä»»ä½•ç²’å­çš„æ¦‚ç‡ã€‚\n\nå®é™…è®­ç»ƒä¸­ï¼Œéœ€è¦å¯¹ç§¯åˆ†è¿›è¡Œ**ç¦»æ•£åŒ–å¤„ç†**ï¼ŒNeRF é‡‡ç”¨äº† stratified sampling æ–¹å¼ï¼ˆMonte Carlo æ³•çš„é‡‡æ ·æ–¹æ³•ï¼‰ï¼šå°†å°„çº¿éœ€è¦ç§¯åˆ†çš„**åŒºåŸŸåˆ†ä¸º N ç­‰ä»½**ï¼Œç„¶ååœ¨æ¯ä¸€ä¸ªå°åŒºåŸŸä¸­è¿›è¡Œå‡åŒ€éšæœºé‡‡æ ·ï¼š\n\n$$\nt_i\\sim\\mathcal{U}[t_n+\\frac{i-1}{N}(t_f-t_n),t_n+\\frac{i}{N}(t_f-t_n)]\n$$\n\nç¦»æ•£åŒ–åï¼ŒåŸæ¸²æŸ“å…¬å¼å˜ä¸ºï¼š\n\n$$\n\\hat{C}(\\mathbf{r})=\\sum_{i=1}^NT_i(1-\\exp(-\\sigma_i\\delta_i))\\mathbf{c}_i,\\text{ where }T_i=\\exp(-\\sum_{j=1}^{i-1}\\sigma_j\\delta_j)\n$$\n\nå…¶ä¸­ $\\delta_i=t_{i+1}-t_i$ ä¸ºç›¸é‚»æ ·æœ¬é—´çš„è·ç¦»ã€‚\n\nå…³äºä½“æ¸²æŸ“çš„æ¨å¯¼ï¼Œå¯å‚è€ƒ{% post_link ä½“æ¸²æŸ“ %}.\n\nNeRF åœ¨ä¸€æ¡ ray ä¸Šé‡‡æ ·å¤šä¸ªä¸åŒçš„ç‚¹ï¼Œä¸åŒçš„ç‚¹æœ‰å„è‡ªçš„é¢œè‰²ï¼Œè¯¥é¢œè‰²æ˜¯é€šè¿‡ç¥ç»ç½‘ç»œé¢„æµ‹å‡ºçš„ã€‚å°† ray ä¸Šæ‰€æœ‰ç‚¹çš„é¢œè‰²ç»“åˆèµ·æ¥ï¼Œå³å¯è·å¾—è¿™ä¸ª ray çš„é¢œè‰²ã€‚\n\n![æ¸²æŸ“è¿‡ç¨‹](NeRFå­¦ä¹ /rendering.png)\n\n## Positional encoding\n\nå°½ç®¡å¯ä»¥åˆ©ç”¨ç¥ç»ç½‘ç»œæŠŠè¡¨å¾çš„å„ç§æ˜ å°„å…³ç³»æ‹Ÿåˆæˆä¸€ä¸ªå‡½æ•°ï¼Œæ¯”å¦‚æ˜ å°„æˆé¢œè‰²çš„å‡½æ•°ï¼Œæ˜ å°„æˆæ˜¯å¦ occupy çš„å‡½æ•°ï¼Œæ˜ å°„æˆå…‰ç…§å¯†åº¦ï¼ˆdensityï¼‰çš„å‡½æ•°ç­‰ç­‰ã€‚\n\nä½†é—®é¢˜æ˜¯ç¥ç»ç½‘ç»œè¡¨ç¤ºçš„æ˜¯**æœ‰åçš„ï¼ˆbiasï¼‰**ï¼Œé€šè¿‡ç¥ç»ç½‘ç»œå¯èƒ½æ— æ³•å¾—åˆ°é«˜è´¨é‡çš„ç»“æœï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå®ƒæ›´åå‘äºå¾—åˆ°å…‰æ»‘ï¼ˆsmoothï¼‰çš„ç»“æœï¼ˆä¹Ÿå³å­¦ä¹ **ä½é¢‘**ä¿¡å·ï¼‰ï¼Œä½†æˆ‘ä»¬æœŸå¾…çš„æ˜¯å¾—åˆ°é”åˆ©ï¼ˆsharpï¼‰çš„ç»“æœï¼ˆä¹Ÿå³å­¦ä¹ **é«˜é¢‘**ä¿¡å·ï¼‰ã€‚å› æ­¤ NeRF æå‡ºäº†åœ¨å°† $(x,y,z,\\theta,\\phi)$ ä¼ é€’ç»™ç½‘ç»œä¹‹å‰ï¼Œä½¿ç”¨é«˜é¢‘å‡½æ•°å°†è¾“å…¥æ˜ å°„åˆ°æ›´é«˜ç»´åº¦çš„ç©ºé—´ï¼Œå¯ä»¥æ›´å¥½åœ°æ‹ŸåˆåŒ…å«é«˜é¢‘å˜åŒ–çš„æ•°æ®ã€‚\n\nNeRF ä½¿ç”¨äº†ä¸€ä¸ªå…·æœ‰å‚…é‡Œå¶ç‰¹å¾ï¼ˆFourier featuresï¼‰çš„å‡½æ•° $\\gamma$ å°† $\\mathbb{R}$ æ•°æ®æ˜ å°„åˆ° $\\mathbb{R}^{2L}$ï¼Œå³ $F_\\Theta=F_\\Theta'\\circ\\gamma$ã€‚è¯¥é«˜é¢‘ç¼–ç å‡½æ•°ä¸ºï¼š\n\n$$\n\\gamma(p)=(\\sin(2^0\\pi p),\\cos(2^0\\pi p),...,\\sin(2^{L-1}\\pi p),\\cos(2^{L-1}\\pi p))\n$$\n\nå…¶ä¸­ $p$ å°±æ˜¯ $(x,y,z,\\theta,\\phi)$ è¾“å…¥ï¼Œå¹¶ä¸”è¾“å…¥å‡å½’ä¸€åŒ–äº $[-1,1]$ã€‚\n\næ ¹æ®è¿™ç¯‡è®ºæ–‡ï¼š\n\n- [Tancik, M., Srinivasan, P. P., Mildenhall, B., Fridovich-Keil, S., Raghavan, N., Singhal, U., Ramamoorthi, R., Barron, J. T., & Ng, R. (2020). Fourier features let networks learn high frequency functions in low dimensional domains.](https://arxiv.org/abs/2006.10739)\n\nNeRF å¯¹ $(x,y,z)$ å– $L=10$ï¼Œå¯¹ $(\\theta,\\phi)$ å– $L=4$.\n\nä¸‹å›¾å¯ä»¥çœ‹å‡ºæ¥ï¼Œç»“æœç›¸è¾ƒä¹‹å‰æœ‰ååˆ†æ˜æ˜¾çš„æå‡ã€‚\n\n![Positional encoding](NeRFå­¦ä¹ /positional_encoding.png)\n\nä½¿ç”¨ç¥ç»ç½‘ç»œè¡¨ç¤ºä¿¡å·çš„æ–¹å¼ï¼Œç§°ä¸º**ç¥ç»åœºï¼ˆNeural Fieldï¼‰**ã€‚è¿™ç§æ–¹å¼æœ‰ä¸‰ä¸ªå¥½å¤„ï¼š\n1. æ¯ä¸ªä¸‰ç»´æ¨¡å‹å¤§çº¦åªéœ€è¦10MBå°±å¯ä»¥è¡¨ç¤ºï¼Œåˆ©äºä¼ è¾“ï¼›\n2. åœºæ™¯ä¸éœ€è¦ç¦»æ•£åŒ–ï¼ˆdiscretizedï¼‰ï¼›\n3. æ›´åŠ çµæ´»ä¸”æ˜“äºä¼˜åŒ–ï¼šä¾‹å¦‚åœ¨æ­£åˆ™åŒ–æ–¹é¢æ›´æ–¹ä¾¿ï¼Œæ³›åŒ–èƒ½åŠ›æ›´å¼ºã€‚\n\n![Neural Field pros & cons](NeRFå­¦ä¹ /neural_field_pros&cons.png)\n\n## Hierarchical volume sampling\n\nNeRF çš„ä»»åŠ¡å°±æ˜¯å°†ä¸€ç³»åˆ—çš„å¾®å…ƒé‡‡æ ·ç‚¹è¾“å…¥ç½‘ç»œï¼Œè®¡ç®—ä½“å¯†åº¦å’Œé¢œè‰²ã€‚é‚£ä¹ˆå¾®å…ƒçš„é‡‡æ ·å°±æˆä¸ºä¸€ä¸ªå…³é”®çš„é—®é¢˜ï¼šé‡‡æ ·ç‚¹è¿‡å¤šå¼€é”€è¿‡å¤§ï¼Œé‡‡æ ·ç‚¹è¿‡å°‘è¿‘ä¼¼è¯¯å·®å¤ªå¤§ã€‚ç›´è§‚çš„ä¸€ä¸ªæƒ³æ³•æ˜¯ï¼Œæœ€å¥½ä½¿å¾—æ ·æœ¬ç‚¹åˆ†å¸ƒåœ¨å…‰çº¿ä¸ç‰©ä½“ç›¸äº¤çš„è¡¨é¢é™„è¿‘ï¼Œè€Œå°½å¯èƒ½åœ°é¿å…åœ¨ç©ºç¼ºéƒ¨åˆ†ä»¥åŠè¢«é®æŒ¡äº†çš„éƒ¨åˆ†è¿›è¡Œè¿‡å¤šçš„é‡‡æ ·ï¼Œå› ä¸ºè¿™äº›éƒ¨åˆ†å¯¹æœ€å¥½çš„é¢œè‰²è´¡çŒ®æ˜¯å¾ˆå°‘çš„ã€‚\n\nåŸºäºè¿™ä¸€æƒ³æ³•ï¼ŒNeRF æå‡º Hierarchical volume samplingï¼Œ**å³å…ˆæŒ‰ç…§å‡åŒ€éšæœºé‡‡æ ·è¿›è¡Œä¸€æ¬¡ç²—é‡‡æ ·ï¼Œå°†ç²—é‡‡æ ·çš„è¾“å‡ºçš„ç»“æœè½¬åŒ–ä¸ºåˆ†å¸ƒï¼Œå†æ ¹æ®åˆ†å¸ƒè¿›è¡Œä¸€æ¬¡ç²¾é‡‡æ ·ï¼Œæœ€å NeRF è®­ç»ƒçš„æŸå¤±ä¹Ÿæ˜¯ç²—é‡‡æ ·å’Œç²¾é‡‡æ ·ç»“æœç›¸åŠ çš„ç»“æœ**ã€‚è¿™æ ·å°±å®ç°äº†ä¸€ä¸ªè‡ªåŠ¨åŒ– Coarse-To-Fine çš„è®­ç»ƒè¿‡ç¨‹ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚\n\n![Hierarchical volume sampling](NeRFå­¦ä¹ /hierarchical_volume_sampling.png)\n\n\n1. Coarse é˜¶æ®µï¼š\n   \n    åœ¨ $[t_n,t_f]$ ä¸­è¿›è¡Œ stratified sampling é‡‡æ ·å‡º $N_c$ ä¸ªä½ç½®ï¼Œè¾“å…¥ coarse ç½‘ç»œï¼Œå¹¶å°†è¾“å‡ºè¾“å…¥åˆ°ç¬¬äºŒé˜¶æ®µã€‚\n\n2. Fine é˜¶æ®µï¼š\n   \n    è€ƒè™‘åˆ°ç¦»æ•£åŒ–çš„æ¸²æŸ“å…¬å¼å¯è§†ä¸ºæ²¿ç€ ray çš„æ‰€æœ‰é‡‡æ ·é¢œè‰² $c_i$ çš„åŠ æƒå’Œ\n      \n    $$\n    \\hat{C}(\\mathbf{r})=\\sum_{i=1}^{N_c}w_i\\mathbf{c}_i,\\quad w_i=T_i(1-\\exp(-\\sigma_i\\delta_i))\n    $$\n\n    æ‰€ä»¥å½’ä¸€åŒ–æƒé‡ $\\hat{w}_i=\\frac{w_i}{\\sum_{j=1}^{N_c}w_j}$ å°±æ˜¯ $\\hat{C}(\\mathbf{r})$ åœ¨ ray ä¸Šçš„**æ¦‚ç‡å¯†åº¦å‡½æ•°ï¼ˆPDFï¼‰**ã€‚\n\n    å› æ­¤ï¼Œè¿™ä¸€é˜¶æ®µåŸºäº inverse transform samplingï¼Œåœ¨è¿™ä¸ªåˆ†å¸ƒä¸­é‡‡æ ·å‡º $N_f$ ä¸ªä½ç½®ï¼Œç„¶åå°† $N_c+N_f$ é‡‡æ ·å¾—åˆ°çš„æ•°æ®è¾“å…¥ fine ç½‘ç»œï¼Œå¹¶è®¡ç®—æœ€ç»ˆæ¸²æŸ“çš„å…‰çº¿é¢œè‰² $C(r)$\n\nè¿™ä¸Šè¿°ä¸¤é˜¶æ®µçš„é‡‡æ ·è¾¾åˆ°äº†ç±»ä¼¼ importance sampling çš„æ•ˆæœï¼Œä½†å°†é‡‡æ ·ç‚¹è§†ä¸ºéå‡åŒ€çš„ç¦»æ•£åŒ–ï¼Œè€Œéå¯¹æ¯ä¸ªç‚¹è¿›è¡Œç‹¬ç«‹çš„æ¦‚ç‡ä¼°è®¡ã€‚\n\nå¯¹æ¯ä¸ªåœºæ™¯éƒ½éœ€è¦ä¼˜åŒ–ä¸€ä¸ªå•ç‹¬çš„ neural continuous volume representation networkã€‚éœ€è¦ä¼˜åŒ–çš„ $L_2$ æŸå¤±ä¸ºï¼ˆåŒæ—¶ä¼˜åŒ– coarse å’Œ fine ç½‘ç»œï¼‰ï¼š\n\n$$\n\\mathcal{L}=\\sum_{r\\in\\mathcal{R}}[||\\hat{C}_c(\\mathbf{r})-C(\\mathbf{r})||_2^2+||\\hat{C}_f(\\mathbf{r})-C(\\mathbf{r})||_2^2]\n$$\n\nå…¶ä¸­\n\n- $\\mathcal{R}$ï¼šray çš„é›†åˆï¼›\n- $C(\\mathbf{r})$ï¼šground truth RGBï¼›\n- $\\hat{C}_c(\\mathbf{r})$ï¼šcoarse volume predicted RGBï¼›\n- $\\hat{C}_f(\\mathbf{r})$ï¼šfine volume predicted RGBï¼›\n\nè™½ç„¶ Coarse-MLP å’Œ Fine-MLP ä»…åœ¨æ ·æœ¬ç‚¹çš„è¾“å…¥ä¸Šæœ‰æ‰€ä¸åŒï¼ˆåŒæ ·çš„ Positional Encoding å’Œ MLPï¼‰ï¼Œä½†å…¶æ ·æœ¬ç‚¹çš„åˆ†å¸ƒæœ¬èº«å°±å†³å®šäº†å„è‡ª MLP èƒ½å¤Ÿåœ¨ä½•ç§ç¨‹åº¦â€œçœ‹åˆ°â€ä½é¢‘å’Œé«˜é¢‘ä¿¡å·ã€‚Coarse-MLP çš„æ ·æœ¬ç‚¹æ˜¯å…‰çº¿åœ¨ near/far åŒºé—´ä¸Šçš„å‡åŒ€é‡‡æ ·ï¼Œè¿™æ„å‘³ç€è¿™æ¡å…‰çº¿ä¸Šæ ·æœ¬ç‚¹çš„é«˜é¢‘ä¿¡å·å¤±çœŸäº†ï¼ˆè¿œå¤„çš„ä¹Ÿä¼šåŒ…å«é«˜é¢‘ä¿¡å·ï¼‰ï¼›è€Œ Fine-MLP æ˜¯åœ¨è¡¨é¢äº¤ç‚¹é™„è¿‘çš„å¯†é›†é‡‡æ ·ï¼Œè¿™æ„å‘³ç€ MLP èƒ½å¤Ÿå¯†é›†åœ°â€œæ„Ÿå—â€åˆ°è¿™ä¸€æ®µåŒºåŸŸçš„é«˜é¢‘ä¿¡å·ï¼ˆå°½å¯èƒ½ä¿è¯ä¸å¤±çœŸï¼‰ã€‚\n\nå¯ä»¥ç†è§£ä¸ºé‡‡ç”¨ä¸åŒçš„é‡‡æ ·ç­–ç•¥å°±æ˜¯æ–½åŠ äº†ä¸åŒçš„â€œæ»¤æ³¢å™¨â€ã€‚å¯¹åŒä¸€æ¡å…‰çº¿ï¼Œä¸¤ç»„ä¸åŒçš„é‡‡æ ·ä½¿å¾— MLP â€œçœ‹åˆ°â€æˆªç„¶ä¸åŒçš„ä¸¤ç»„ä¿¡å·ï¼›å¦‚æœæƒ³è®©ä¸€ä¸ª MLP åŒæ—¶å¤„ç†å¥½è¿™ä¸¤ç»„æˆªç„¶ä¸åŒçš„ä¿¡å·ï¼Œå¯èƒ½å¾—é«˜è¶…çš„è°ƒå‚æŠ€å·§ä¸æ›´å¤§çš„ç½‘ç»œäº†ã€‚\n\n\n# æŒ‡æ ‡\n\nNeRF ä½¿ç”¨äº† **PSNRï¼ŒSSIMï¼ŒLPIPS** ä¸‰ä¸ªæŒ‡æ ‡ã€‚å…³äºè¿™ä¸‰ä¸ªæŒ‡æ ‡çš„è¯¦ç»†ä¿¡æ¯ï¼Œå¯å‚è€ƒ{% post_link å›¾åƒè¯„ä»·æŒ‡æ ‡ %}ã€‚\n\n# æ‹æ‘„åœºæ™¯\n\n1. ç‰©ä½“åœ¨ä¸­å¤®ï¼Œç›¸æœºåœ¨å››å‘¨æ‹æ‘„ï¼Œå¾€å¾€ç”¨äºé‡å»ºä¸»ä½“ï¼›\n2. ç›¸æœºæ–¹å‘å›ºå®šï¼Œåœ¨å°èŒƒå›´ç§»åŠ¨ï¼›\n3. ç±»ä¼¼å…¨æ™¯å›¾æ‹æ‘„ï¼Œç›¸æœºåœ¨ä¸­é—´ï¼Œæœå„ä¸ªæ–¹å‘æ‹æ‘„ï¼Œé€šå¸¸ç”¨äºé‡å»ºèƒŒæ™¯ï¼›\n4. åœ¨å›ºå®šç©ºé—´å†…éšæœºæ–¹å‘å’Œåˆ†å¸ƒæ‹æ‘„ï¼›\n5. æ˜¯ 1 å’Œ 3 çš„ç»“åˆï¼Œæ—¢é‡å»ºç‰©ä½“ä¸»ä½“ï¼Œåˆé‡å»ºèƒŒæ™¯ã€‚\n\n![capture scenarios](NeRFå­¦ä¹ /capture_scenarios.png)\n\nç›®å‰ NeRF éœ€è¦è§£å†³çš„é—®é¢˜å°±æ˜¯ï¼Œåœ¨ç©ºé—´å†…é‡å»ºè¿‘æ™¯æ—¶è¿œæ™¯ä¼šæ¨¡ç³Šï¼Œåä¹‹é‡å»ºè¿œæ™¯çš„æ—¶å€™è¿‘æ™¯ä¼šæ¨¡ç³Šã€‚\n\nä¸ºäº†è§£å†³è¿™ä¸€é—®é¢˜ï¼ŒNeRF++ æå‡ºäº†ä¸€ç§è§£å†³æ–¹æ¡ˆï¼Œå³å°† NeRF è¿›è¡Œåˆ†è§£å’Œç»„åˆï¼Œåœ¨**è¿‘æ™¯ï¼ˆForegroundï¼‰**å’Œ**è¿œæ™¯ï¼ˆBackgroundï¼‰**å¤„éƒ½åˆ†åˆ«ä½¿ç”¨ä¸€ä¸ª NeRF æ¥è¿›è¡Œè¡¨å¾ï¼Œæœ€åå†**ç»„åˆï¼ˆcombinedï¼‰**åˆ°ä¸€èµ·ã€‚è¿™ä¹Ÿå°±æ˜¯ç¬¬äº”ç§æ‹æ‘„åœºæ™¯ã€‚\n\n![NeRF++](NeRFå­¦ä¹ /separate_fore&back.png)\n\nç›¸å…³è®ºæ–‡ï¼š\n- [Zhang K , Riegler G , Snavely N , et al. NeRF++: Analyzing and Improving Neural Radiance Fields[J]. 2020.](http://vladlen.info/publications/nerf-analyzing-improving-neural-radiance-fields/)\n\nNeRF å®ç°çš„å‡ ä¸ªå…³é”®éƒ¨åˆ†ï¼š\n\n1. æœ‰ä¸€ä¸ª**ä¸‰ç»´ç©ºé—´**ï¼Œç”¨ä¸€ä¸ªè¿ç»­çš„åœºè¡¨ç¤ºï¼›\n2. ç©ºé—´é‡Œå­˜åœ¨ä¸€ä¸ªæ„Ÿå…´è¶£çš„**ç‰©ä½“åŒºåŸŸ**ï¼›\n3. å¤„äº**ä¸åŒä½ç½®å’Œæœå‘**çš„ç›¸æœºæ‹æ‘„å¤šè§†è§’å›¾åƒï¼›\n4. å¯¹äºä¸€å¼ **å›¾åƒ**ï¼Œæ ¹æ®ç›¸æœºä¸­å¿ƒå’Œå›¾åƒå¹³é¢çš„ä¸€ä¸ªåƒç´ ç‚¹ï¼Œä¸¤ç‚¹ç¡®å®šä¸€æ¡**å°„çº¿**ç©¿è¿‡ä¸‰ç»´ç©ºé—´ï¼›\n5. åœ¨å°„çº¿ä¸Šé‡‡æ ·å¤šä¸ª**ç¦»æ•£çš„ä¸‰ç»´ç‚¹**å¹¶åˆ©ç”¨ä½“ç´ æ¸²æŸ“åƒç´ çš„é¢œè‰²ã€‚\n\nè¿™é‡Œé¢æ¶‰åŠåˆ°äº†ä¸‰ç»´ç©ºé—´ã€ç‰©ä½“åŒºåŸŸã€ç›¸æœºä½ç½®å’Œæœå‘ã€å›¾åƒã€å°„çº¿ã€ä»¥åŠä¸‰ç»´é‡‡æ ·ç‚¹ç­‰ã€‚è¦æƒ³ä¼˜åŒ– NeRFï¼Œæˆ‘ä»¬éœ€è¦èƒ½å¤Ÿè¡¨è¾¾åˆšåˆšæåˆ°çš„è¿™äº›ä¸œè¥¿ï¼Œè¿™å°±æ¶‰åŠåˆ°äº†å¦‚ä½•å°†æ‹æ‘„çš„æ•°æ®è¿›è¡Œè½¬åŒ–ã€‚\n\nå…³äºå¦‚ä½•æ­£ç¡®è½¬æ¢ç›¸æœºå‚æ•°å’Œåæ ‡ç³»ï¼Œå¯è¯¦è§äº{% post_link ç›¸æœºå‚æ•°ä¸åæ ‡ç³»å˜æ¢ %}ã€‚\n\n# å‚è€ƒèµ„æ–™\n\n- [NeRF](https://www.matthewtancik.com/nerf)\n- [NeRF è®ºæ–‡](https://arxiv.org/abs/2003.08934)\n- [NeRFä»‹ç»](https://zhuanlan.zhihu.com/p/651081306)\n- [è¾å°„ç¥ç»åœºç®—æ³•â€”â€”NeRFç®—æ³•è¯¦è§£](https://blog.csdn.net/weixin_44580210/article/details/122284120)\n- [NeRFç¥ç»è¾å°„åœºå­¦ä¹ ç¬”è®°ï¼ˆä¸€ï¼‰â€”â€”NeRFè®ºæ–‡ç¿»è¯‘ä»¥åŠåŸç†è§£è¯»](https://blog.csdn.net/weixin_44292547/article/details/126042398)\n- [NeRFåŸç†è§£æ](https://blog.csdn.net/weixin_46363611/article/details/125608625)\n- [åæ¸²æŸ“(Inverse Rendering)ä¸‰ç»´é‡å»ºåŠç¥ç»è¾å°„åœº(NeRF)æ ¸å¿ƒ](https://zhuanlan.zhihu.com/p/628804009)\n- [A Surge in NeRF](https://yconquesty.github.io/blog/ml/nerf/)","tags":["CG"],"categories":["computer"]},{"title":"ç¼“å­˜ç®—æ³•","url":"/archives/47690/","content":"\nå†…å­˜æ˜¯æœ‰é™çš„ï¼Œä¸å¯èƒ½æ— é™åˆ¶åœ°æ·»åŠ æ•°æ®ã€‚å‡å®šæˆ‘ä»¬è®¾ç½®ç¼“å­˜èƒ½å¤Ÿä½¿ç”¨çš„å†…å­˜å¤§å°ä¸º Nï¼Œé‚£ä¹ˆåœ¨æŸä¸€ä¸ªæ—¶é—´ç‚¹ï¼Œæ·»åŠ äº†æŸä¸€æ¡ç¼“å­˜è®°å½•ä¹‹åï¼Œå ç”¨å†…å­˜è¶…è¿‡äº† Nï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦ä»ç¼“å­˜ä¸­ç§»é™¤ä¸€æ¡æˆ–å¤šæ¡æ•°æ®äº†ã€‚\n\n<!-- more -->\n\n# å¸¸ç”¨ç¼“å­˜ç®—æ³•\n\n- æœ€ä¸ç»å¸¸ä½¿ç”¨ç®—æ³•ï¼ˆLeast Frequently Used, LFUï¼‰ï¼šé¦–å…ˆç§»é™¤æœ€ä½è®¿é—®æ•°çš„æ¡ç›®ã€‚\n  - å…³é”®ï¼šä½¿ç”¨ä¸€ä¸ªè®¡æ•°å™¨æ¥è®°å½•æ¡ç›®è¢«è®¿é—®çš„é¢‘ç‡ã€‚\n  - ç¼ºç‚¹ï¼šä¸å¸¸ç”¨ã€‚è‹¥æŸä¸ªæ¡ç›®åœ¨å†å²ä¸Šè®¿é—®æ¬¡æ•°å¥‡é«˜ï¼Œä¸”åœ¨æŸä¸ªæ—¶é—´ç‚¹ä¹‹åé•¿æ—¶é—´å‡ ä¹ä¸å†è¢«è®¿é—®ï¼Œåˆ™è¯¥æ¡ç›®è¿Ÿè¿Ÿä¸èƒ½è¢«æ·˜æ±°ã€‚\n- æœ€è¿‘æœ€å°‘ä½¿ç”¨ç®—æ³•ï¼ˆLeast Recently Used. LRUï¼‰ï¼šå°†æœ€è¿‘ä½¿ç”¨çš„æ¡ç›®å­˜æ”¾åˆ°é è¿‘ç¼“å­˜é¡¶éƒ¨çš„ä½ç½®ã€‚å½“ä¸€ä¸ªæ–°æ¡ç›®è¢«è®¿é—®æ—¶ï¼ŒLRU å°†å®ƒæ”¾ç½®åˆ°ç¼“å­˜çš„é¡¶éƒ¨ã€‚å½“ç¼“å­˜è¾¾åˆ°æé™æ—¶ï¼Œè¾ƒæ—©ä¹‹å‰è®¿é—®çš„æ¡ç›®å°†ä»ç¼“å­˜åº•éƒ¨å¼€å§‹è¢«ç§»é™¤ã€‚è¿™é‡Œä¼šä½¿ç”¨åˆ°æ˜‚è´µçš„ç®—æ³•ï¼Œè€Œä¸”å®ƒéœ€è¦è®°å½•â€œå¹´é¾„ä½â€æ¥ç²¾ç¡®æ˜¾ç¤ºæ¡ç›®æ˜¯ä½•æ—¶è¢«è®¿é—®çš„ã€‚æ­¤å¤–ï¼Œå½“ä¸€ä¸ªLRUç¼“å­˜ç®—æ³•åˆ é™¤æŸä¸ªæ¡ç›®åï¼Œâ€œå¹´é¾„ä½â€å°†éšå…¶ä»–æ¡ç›®å‘ç”Ÿæ”¹å˜ã€‚\n- è‡ªé€‚åº”ç¼“å­˜æ›¿æ¢ç®—æ³•ï¼ˆARCï¼‰ï¼šåœ¨ IBM Almaden ç ”ç©¶ä¸­å¿ƒå¼€å‘ï¼Œè¿™ä¸ªç¼“å­˜ç®—æ³•åŒæ—¶è·Ÿè¸ªè®°å½• LFU å’Œ LRUï¼Œä»¥åŠé©±é€ç¼“å­˜æ¡ç›®ï¼Œæ¥è·å¾—å¯ç”¨ç¼“å­˜çš„æœ€ä½³ä½¿ç”¨ã€‚\n- æœ€è¿‘æœ€å¸¸ä½¿ç”¨ç®—æ³•ï¼ˆMost Recently Used, MRUï¼‰ï¼šé¦–å…ˆç§»é™¤æœ€è¿‘æœ€å¸¸ä½¿ç”¨çš„æ¡ç›®ã€‚\n  - ä¼˜ç‚¹ï¼šæ“…é•¿å¤„ç†ä¸€ä¸ªæ¡ç›®è¶Šä¹…ï¼Œè¶Šå®¹æ˜“è¢«è®¿é—®çš„æƒ…å†µã€‚\n- å…ˆè¿›å…ˆå‡ºç®—æ³•ï¼ˆFirst In First Out, FIFOï¼‰ï¼šå…ˆè¿›å…¥ç¼“å­˜çš„å…ˆç§»é™¤ã€‚\n  - å…³é”®ï¼šæ ˆå¼ç»“æ„ã€‚\n  - ä¼˜ç‚¹ï¼šå®ç°ç®€å•ã€‚\n  - ç¼ºç‚¹ï¼šåªèƒ½é¡ºåºå†™å…¥å’Œç§»é™¤ï¼Œæ— æ³•æŒ‡å®šç‰¹å®šçš„åœ°å€ã€‚\n\n# ç®—æ³•å®ç°\n\n","tags":["ç®—æ³•"],"categories":["computer"]},{"title":"çŸ©é˜µè®¡ç®—","url":"/archives/61043/","content":"\n# å‘é‡ (Vector)\n\n## å®šä¹‰\n\næ•°åŸŸ $F$ ä¸Šçš„ $n$ ä¸ªæ•° $a_1,a_2,...,a_n$ æ‰€ç»„æˆçš„æœ‰åºæ•°ç»„ $[a_1,a_2,...,a_n]$ ç§°ä¸º $n$ ç»´å‘é‡ï¼Œå…¶ä¸­ç¬¬ $i$ ä¸ªæ•°ç§°ä¸ºè¯¥å‘é‡çš„ç¬¬ $i$ ä¸ªåˆ†é‡. é€šå¸¸ç”¨åŠ ç²—å°å†™å­—æ¯ $\\mathbf{a}$ï¼Œ$\\mathbf{b}$ è¡¨ç¤º.\n\n## æ¦‚å¿µ\n\n- è¡Œå‘é‡ï¼š$\\mathbf{\\alpha}=(a_1,a_2,...,a_n)$\n- åˆ—å‘é‡ï¼š$\\mathbf{\\beta}=\\left(\\begin{matrix}\n    b_1 \\\\\n    b_2 \\\\\n    \\vdots \\\\\n    b_n\n\\end{matrix}\\right)=(b_1,b_2,...,b_n)^T$\n\n## å‘é‡çš„çº¿æ€§è¿ç®—\n\nå¯¹å‘é‡ $\\mathbf{a}=(a_1,a_2,...,a_n)$ å’Œ $\\mathbf{b}=(b_1,b_2, b_n)$ï¼Œæœ‰\n\n- ç›¸ç­‰\n\n$$\n\\mathbf{a}=\\mathbf{b} \\Leftrightarrow a_i=b_i(i=1,2,...,n)\n$$\n\n- åŠ æ³•\n\n$$\n\\mathbf{a}\\pm\\mathbf{b}=(a_1\\pm b_1,a_2\\pm b_2,...,a_n\\pm b_n)\n$$\n\n- æ•°ä¹˜\n\n$$\nk\\mathbf{a}=(ka_1,ka_2,...,ka_n)\n$$\n\n- è¿ç®—å¾‹\n\n1. $\\mathbf{a}+\\mathbf{b}=\\mathbf{b}+\\mathbf{a}$\n2. $(\\mathbf{a}+\\mathbf{b})+\\mathbf{c}=\\mathbf{a}+(\\mathbf{b}+\\mathbf{c})$\n3. $k(\\mathbf{a}+\\mathbf{b})=k\\mathbf{a}+k\\mathbf{b}$\n4. $(k+l)\\mathbf{a}=k\\mathbf{a}+l\\mathbf{a}$\n\n## æ¨¡ä¸è§’åº¦ (Norm and Angle)\n\n### å‘é‡å†…ç§¯\n\n- å®šä¹‰\n\nç»™å®š $\\mathbb{R}^n$ ä¸­çš„å‘é‡ $\\mathbf{a}=(a_1,a_2,...,a_n)^T, \\mathbf{b}=(b_1,b_2, b_n)^T$ï¼Œç§°å®æ•°\n\n$$\n\\sum_{i=1}^na_ib_i=a_1b_1+a_2b_2+...+a_nb_n\n$$\n\nä¸º $\\mathbf{a}$ å’Œ $\\mathbf{b}$ çš„å†…ç§¯ï¼Œè®°ä¸º $\\mathbf{a}^T\\mathbf{b}$ .\n\n- è¿ç®—æ€§è´¨\n\nè®¾ $\\alpha, \\beta, \\gamma$ ä¸º $\\mathbb{R}^n$ ä¸­çš„å‘é‡ï¼Œ$k$ ä¸ºå®æ•°ï¼š\n\n1. $\\alpha^T\\beta=\\beta^T\\alpha$\n2. $(k\\alpha)^T\\beta=k(\\alpha^T\\beta)=\\alpha^T(k\\beta)$\n3. $(\\alpha+\\beta)^T\\gamma=\\alpha^T\\gamma+\\beta^T\\gamma$\n4. $\\alpha^T\\alpha=0\\Leftrightarrow\\alpha=\\mathbf{0}$\n\n### å‘é‡çš„æ¨¡\n\n- å®šä¹‰\n\nç»™å®š $\\mathbb{R}^n$ ä¸­çš„å‘é‡ $\\mathbf{a}=(a_1,a_2,...,a_n)^T, \\mathbf{b}=(b_1,b_2, b_n)^T$ï¼Œç§°å®æ•°\n\n$$\n\\sqrt{\\mathbf{a}^T\\mathbf{a}}=\\sqrt{a_1^2+a_2^2+...+a_n^2}=\\sqrt{\\sum_{i=1}^na_i^2}\n$$\n\nâ€‹ä¸ºå‘é‡ $\\mathbf{a}$ çš„é•¿åº¦ï¼Œè®°ä½œ $||\\mathbf{a}||$\n\n- æ€§è´¨\n\n1. éè´Ÿæ€§ï¼š$||\\mathbf{a}||\\geq 0$\n2. é½æ¬¡æ€§ï¼š$||k\\mathbf{a}||=|k|\\cdot||\\mathbf{a}||$\n3. æŸ¯è¥¿ä¸ç­‰å¼ï¼š\n\n$$\n\\begin{align*}\n    &\\left|\\sum_{i=1}^na_ib_i\\right|\\leq\\sqrt{\\sum_{i=1}^na_i^2}\\sqrt{\\sum_{i=1}^nb_i^2} \\\\\n    \\Leftrightarrow \\quad& |\\mathbf{a}^T\\mathbf{b}|\\leq||\\mathbf{a}||\\cdot||\\mathbf{b}||\n\\end{align*}\n$$\n\nç­‰å·æˆç«‹å½“ä¸”ä»…å½“ $\\mathbf{a}$ å’Œ $\\mathbf{b}$ çº¿æ€§ç›¸å…³ã€‚\n\n4. è‹¥å‘é‡ $\\mathbf{a}$ çš„æ¨¡ä¸º $1$ï¼Œåˆ™ç§° $\\mathbf{a}$ ä¸ºå•ä½å‘é‡ã€‚è®¾éé›¶å‘é‡ $\\mathbf{a}$ï¼Œä»¤ $\\eta=\\frac{\\mathbf{a}}{||\\mathbf{a}||}$ï¼Œåˆ™ $||\\eta||=1$ï¼Œä¸”æ–¹å‘ä¸ $\\mathbf{a}$ ç›¸åŒã€‚\n\n### å‘é‡å¤¹è§’\n\n![angle](çŸ©é˜µè®¡ç®—/angle.png)\n\n- å®šä¹‰\n\nè‹¥ $x=(x_1,x_2)^T, y=(y_1,y_2)^T$ï¼Œåˆ™\n\n$$\n\\begin{align}\n    &L_x=||x||=\\sqrt{x_1^2+x_2^2},\\quad L_y=||y||=\\sqrt{y_1^2+y_2^2} \\\\\n    &\\cos{\\theta_1}=\\frac{x_1}{||x||},\\quad \\cos{\\theta_2}=\\frac{y_1}{||y||} \\\\\n    &\\sin{\\theta_1}=\\frac{x_2}{||x||},\\quad \\sin{\\theta_2}=\\frac{y_2}{||y||} \\\\\n    \\cos{\\theta}&=\\cos{(\\theta_2-\\theta_1)}=\\cos{\\theta_2}\\cos{\\theta_1}+\\sin{\\theta_2}\\sin{\\theta_1}\\notag \\\\\n    &=\\frac{x_1y_1+x_2y_2}{||x||\\cdot||y||}=\\frac{x^Ty}{||x||\\cdot||y||}\n\\end{align}\n$$\n\n### å‘é‡æ­£äº¤ï¼ˆorthogonalï¼‰\n\n- å®šä¹‰\n\nè‹¥ä¸¤ä¸ª $n$ ç»´å‘é‡ $\\mathbf{a}$ å’Œ $\\mathbf{b}$ æ»¡è¶³ \n\n$$\n\\mathbf{a}^T\\mathbf{b}=a_1b_1+a_2b_2+...+a_nb_n=0\n$$\n\nåˆ™ç§° $\\mathbf{a}$ å’Œ $\\mathbf{b}$ æ­£äº¤.\n\n- æ€§è´¨\n\n1. é›¶å‘é‡ä¸ä»»ä½•å‘é‡éƒ½æ­£äº¤\n2. ä¸è‡ªèº«æ­£äº¤çš„å‘é‡åªæœ‰é›¶å‘é‡\n\n- æ­£äº¤å‘é‡ç»„\n\nè‹¥éé›¶å‘é‡ç»„ $(\\mathbf{a}_1,\\mathbf{a}_2,...,\\mathbf{a}_n)$ ä¸­ï¼Œå‘é‡ä¸¤ä¸¤æ­£äº¤ï¼Œå³ $\\mathbf{a}_i^T\\mathbf{a}_j=0 (i\\neq j)$ï¼Œåˆ™ç§°è¯¥å‘é‡ç»„ä¸ºæ­£äº¤å‘é‡ç»„.\n\n# æ³°å‹’å…¬å¼ä¸çº¿æ€§åŒ–\n\n## å®šä¹‰\n\nè‹¥å‡½æ•° $f(x)$ åœ¨ $x_0$ å¤„æœ‰ $n+1$ é˜¶å¯¼æ•°ï¼Œåˆ™å­˜åœ¨ $x_0$ çš„ä¸€ä¸ªé‚»åŸŸï¼Œå¯¹äºè¯¥é‚»åŸŸå†…ä»»ä¸€ $x$ï¼Œæœ‰\n\n$$\nf(x)=f(x_0)+f'(x_0)(x-x_0)+\\frac{f^{(2)}(x_0)}{2!}(x-x_0)^2+â€¦+\\frac{f^{(n)}(x_0)}{n!}(x-x_0)^n+R_n(x)\n$$\n\nè¯¥å¼å­ç§°ä¸ºå‡½æ•° $f(x)$ åœ¨ $x_0$ çš„æ³°å‹’å…¬å¼. å…¶ä¸­ï¼Œ$R_n(x)=o((x-x_0)^n)$ ç§°ä¸ºæ‹‰æ ¼æœ—æ—¥ä½™é¡¹ï¼Œè¡¨ç¤ºç”¨ $n$ æ¬¡æ³°å‹’å¤šé¡¹å¼æ¥è¿‘ä¼¼è¡¨ç¤º $f(x)$ æ‰€äº§ç”Ÿçš„è¯¯å·®. $R_n(x)$çš„å…·ä½“è¡¨ç¤ºä¸ºï¼š\n\n$$\nR_n(x)=\\frac{f^{n+1}(\\xi)}{(n+1)!}(x-x_0)^{n+1}\\quad (\\xi \\in (x_0,x))\n$$\n\nå½“ $n=0$ æ—¶ï¼Œæ˜¯æ‹‰æ ¼æœ—æ—¥ä¸­å€¼å…¬å¼ï¼š\n\n$$\nf(x)=f(x_0)+f'(\\xi)(x-x_0)\\quad (\\xi \\in (x_0,x))\n$$\n\nå½“ $x_0=0$ æ—¶ï¼Œæ˜¯éº¦å…‹åŠ³æ—å…¬å¼ï¼š\n\n$$\nf(x)=f(0)+f'(\\xi)x+\\frac{f^{(2)}(0)}{2!}x^2+â€¦+\\frac{f^{(n)}(0)}{n!}x^n+R_n(x)\\quad (\\xi \\in (x_0,x))\n$$\n\n# Jacobian çŸ©é˜µ\n\n## n ç»´æ¬§æ°ç©ºé—´\n\n### å®šä¹‰\n\næ‰€æœ‰ $n$ ä¸ªæœ‰åºå®æ•°ç»„ $(x_1,x_2,â€¦,x_n)$ çš„å…¨ä½“ç§°ä¸º $n$ ç»´å‘é‡ç©ºé—´ï¼Œæˆ–ç®€ç§° $n$ ç»´ç©ºé—´ï¼Œå…¶ä¸­æ¯ä¸ªæœ‰åºå®æ•°ç»„ç§°ä¸º $n$ ç»´ç©ºé—´ä¸­çš„ä¸€ä¸ªå‘é‡ï¼ˆæˆ–ä¸€ä¸ªç‚¹ï¼‰ï¼Œè®°ä½œ\n\n$$\nx=(x_1,x_2,â€¦,x_n)^T\n$$\n\nè®¾ $x=(x_1,x_2,â€¦,x_n)^T$ ä¸ $y=(y_1,y_2,â€¦,y_n)^T$ æ˜¯ $n$ ç»´ç©ºé—´ä¸­çš„ä»»æ„ä¸¤ä¸ªå‘é‡ï¼Œåˆ™å‘é‡ $x$ ä¸ $y$ çš„å†…ç§¯å®šä¹‰ä¸ºï¼š\n\n$$\nx^Ty=x_1y_1+x_2y_2+â€¦+x_ny_n\n$$\n\nå®šä¹‰äº†å†…ç§¯çš„ $n$ ç»´ç©ºé—´å«åš $n$ ç»´æ¬§å‡ é‡Œå¾—ç©ºé—´ï¼ˆç®€ç§° $n$ ç»´æ¬§å¼ç©ºé—´ï¼‰ï¼Œè®°ä½œ $R^n$ï¼Œåˆ©ç”¨å†…ç§¯å®šä¹‰å‘é‡ $x \\in R^n$ çš„æ¨¡ä¸ºï¼š\n\n$$\n|x|=\\sqrt{x^Tx}=\\sqrt{\\sum_{i=1}^nx_i^2}\n$$\n\n## å‘é‡å‡½æ•°ä¸å®å€¼å‡½æ•°\n\n- å®å€¼å‡½æ•°\n \nå³ $n$ ç»´ç©ºé—´ä¸­çš„ç‚¹é›†åˆ°å®æ•°é›†çš„æ˜ å°„ï¼ˆ$R^n \\rightarrow R$\n\n- å‘é‡å‡½æ•°\n\nå³ $n$ ç»´æ¬§æ°ç©ºé—´ä¸­çš„ç‚¹é›†åˆ° $m$ ç»´æ¬§æ°ç©ºé—´ç‚¹é›†çš„æ˜ å°„ï¼ˆ$R^n \\rightarrow R^m$ï¼‰ ä¸€èˆ¬åœ°ï¼Œå½“ $f_1,f_2,â€¦,f_m$ ä¸º $f$ çš„åˆ†é‡å‡½æ•°ï¼ˆæˆ–åæ ‡å‡½æ•°ï¼‰æ—¶ï¼Œå¯å†™ä½œ\n\n$$\nf(x)=\\left(\\begin{array}{c}\nf_1 \\\\\n\\vdots \\\\\nf_m\n\\end{array}\\right)=\\left(\\begin{array}{c}\nf_1(x) \\\\\n\\vdots \\\\\nf_m(x)\n\\end{array}\\right)=\\left(\\begin{array}{c}\nf_1(x_1,x_2,â€¦,x_n) \\\\\n\\vdots \\\\\nf_m(x_1,x_2,â€¦,x_n)\n\\end{array}\\right)\n$$\n\nä¸¤ä¸ªç›¸åŒç»´æ•°çš„å‘é‡å‡½æ•° $f$ å’Œ $g$ åœ¨ç›¸åŒçš„å®šä¹‰åŸŸä¸Šçš„å’Œï¼ˆå·®ï¼‰å‡½æ•°ä¸ºï¼š\n\n$$\nf \\pm g =\\left(\\begin{array}{c}\nf_1 \\pm g_1 \\\\\n\\vdots \\\\\nf_n \\pm g_n\n\\end{array}\\right)\n$$\n\nä¸€ä¸ªå®å€¼å‡½æ•° $\\alpha$ å‘é‡å‡½æ•° $f$ åœ¨ç›¸åŒçš„å®šä¹‰åŸŸä¸Šçš„ä¹˜ç§¯å‡½æ•°ä¸ºï¼š\n\n$$\n\\alpha f =\\left(\\begin{array}{c}\n\\alpha f_1 \\\\\n\\vdots \\\\\n\\alpha f_n\n\\end{array}\\right)\n$$\n\nä¸¤ä¸ªå‘é‡å‡½æ•° $f$ å’Œ $h$ çš„å¤åˆå‡½æ•°ä¸ºï¼š\n\n$$\nh \\cdot f =\\left(\\begin{array}{c}\nh_1 \\cdot f \\\\\n\\vdots \\\\\nh_n \\cdot f\n\\end{array}\\right)\n$$\n\n## æ¢¯åº¦\n\n### åˆ†ç±»\n\næ ¹æ®è‡ªå˜é‡å’Œå› å˜é‡çš„ä¸åŒå¯åˆ†ä¸ºï¼š\n\n1. è‡ªå˜é‡ä¸ºå®å‘é‡çš„æ ‡é‡å‡½æ•° $f$ å…³äºå‘é‡çš„æ¢¯åº¦ï¼š å‡½æ•° $f$ å…³äºè¡Œå‘é‡ $x^T$ çš„æ¢¯åº¦ä¸ºï¼š\n\n    $$\n    \\frac{\\partial f}{\\partial x^T} = [\\frac{\\partial f}{\\partial x_1},...,\\frac{\\partial f}{\\partial x_n}] = \\nabla_{x^T}f(x)\n    $$\n\n    å‡½æ•° $f$ å…³äºåˆ—å‘é‡ $x$ çš„æ¢¯åº¦è®¡ç®—å…¬å¼ä¸ºï¼š\n\n    $$\n    \\frac{\\partial f}{\\partial x} = [\\frac{\\partial f}{\\partial x_1},...,\\frac{\\partial f}{\\partial x_n}]^T = \\nabla_{x}f(x)\n    $$\n\n    è‹¥ $f$ ä¸ºå¸¸æ•°ï¼Œåˆ™å¯¹åº”çš„æ¢¯åº¦ä¸º $\\mathbf{0}$.\n\n2. è‡ªå˜é‡ä¸ºå®å‘é‡ï¼ˆ$x_{n \\times 1}$ï¼‰çš„å‘é‡å‡½æ•° $f$ å…³äºå‘é‡çš„æ¢¯åº¦ï¼š\n\n    $$\n    f \\in R^m,\n    \\nabla_xf = \\left[\\begin{matrix}\n    \\frac{\\partial f_1}{\\partial x_1} & \\frac{\\partial f_2}{\\partial x_1} & \\cdots & \\frac{\\partial f_m}{\\partial x_1} \\\\\n    \\frac{\\partial f_1}{\\partial x_2} & \\frac{\\partial f_2}{\\partial x_2} & \\cdots & \\frac{\\partial f_m}{\\partial x_2} \\\\\n    \\vdots & \\vdots & \\ddots & \\vdots \\\\\n    \\frac{\\partial f_1}{\\partial x_n} & \\frac{\\partial f_2}{\\partial x_n} & \\cdots & \\frac{\\partial f_m}{\\partial x_n}\n    \\end{matrix}\\right]\n    = \\frac{\\partial f}{\\partial x}\n    $$\n\n3. è‡ªå˜é‡ä¸ºçŸ©é˜µï¼ˆ$x_{m \\times n}$ï¼‰çš„æ ‡é‡å‡½æ•° $f$ å…³äºçŸ©é˜µçš„æ¢¯åº¦ï¼š\n\n    $$\n    f \\in R,\n    \\nabla_Xf = \\left[\\begin{matrix}\n    \\frac{\\partial f_1}{\\partial x_{11}} & \\frac{\\partial f_2}{\\partial x_{12}} & \\cdots & \\frac{\\partial f_m}{\\partial x_{1n}} \\\\\n    \\frac{\\partial f_1}{\\partial x_{21}} & \\frac{\\partial f_2}{\\partial x_{22}} & \\cdots & \\frac{\\partial f_m}{\\partial x_{2n}} \\\\\n    \\vdots & \\vdots & \\ddots & \\vdots \\\\\n    \\frac{\\partial f_1}{\\partial x_{m1}} & \\frac{\\partial f_2}{\\partial x_{m2}} & \\cdots & \\frac{\\partial f_m}{\\partial x_{mn}}\n    \\end{matrix}\\right]\n    = \\frac{\\partial f}{\\partial X}\n    $$\n\n### è¿ç®—æ³•åˆ™\n\n- åŠ æ³•æ³•åˆ™ï¼šè‹¥ $f(x),g(x)$ å‡ä¸º $x$ çš„å®å€¼å‡½æ•°ï¼Œåˆ™\n\n$$\n\\frac{\\partial[pf(x)+qg(x)]}{\\partial x}=p\\frac{\\partial f(x)}{\\partial x}+q\\frac{\\partial g(x)}{\\partial x}\n$$\n\n- ä¹˜æ³•æ³•åˆ™ï¼šè‹¥ $f(x),g(x)$ å‡ä¸º $x$ çš„å®å€¼å‡½æ•°ï¼Œåˆ™\n\n$$\n\\frac{\\partial[f(x)g(x)]}{\\partial x}=f(x)\\frac{\\partial g(x)}{\\partial x}+g(x)\\frac{\\partial f(x)}{\\partial x}\n$$\n\n- é™¤æ³•æ³•åˆ™ï¼šè‹¥ $f(x)$ ä¸ºå‘é‡ $x$ çš„å‘é‡å€¼å‡½æ•°ï¼Œåˆ™\n\n$$\n\\frac{\\partial[f(x)/g(x)]}{\\partial x}=\\frac{1}{g^2(x)}\\left[g(x)\\frac{\\partial f(x)}{\\partial x}-f(x)\\frac{\\partial g(x)}{\\partial x}\\right]\n$$\n\n- é“¾å¼æ³•åˆ™ï¼šè‹¥$g(x)$ä¸º$x$çš„å‘é‡å€¼å‡½æ•°ï¼Œåˆ™\n\n$$\n\\frac{\\partial g(f(x))}{\\partial x}=\\frac{\\partial g(f)}{\\partial f}\\frac{\\partial f(x)}{\\partial x}\n$$\n\n- å¸¸è§ç±»å‹çš„æ¢¯åº¦\n$$\n\\begin{align*}\n    \\nabla(x^Tx)=\\frac{\\partial x^Tx}{\\partial x} = 2x,\\quad \\nabla(a^Tx)=\\frac{\\partial a^Tx}{\\partial x} = a,\\\\\n    \\nabla(x^TA)=\\frac{\\partial x^TA}{\\partial x} = A,\\quad \\nabla(x^TAx)=\\frac{\\partial x^TAx}{\\partial x} = (A+A^T)x\n\\end{align*}\n$$\n\n### Jacobian çŸ©é˜µ\n\nè‹¥å‡½æ•° $f(x):\\mathbb{R}^n \\rightarrow \\mathbb{R}^m$ï¼Œæœ‰ï¼š\n\n$$\nx=[x_1,x_2,â€¦,x_n]^T,\nf(x)=\\left[\\begin{array}{c}\nf_1(x_1,x_2,â€¦,x_n) \\\\\nf_2(x_1,x_2,â€¦,x_n) \\\\\n\\vdots \\\\\nf_m(x_1,x_2,â€¦,x_n)\n\\end{array}\\right]\n$$\n\nåˆ™ Jacobian çŸ©é˜µ $J(x)$ å¯ä»¥å†™ä¸ºï¼š\n\n$$\nf \\in \\mathbb{R}^{m \\times 1},\nJ(x) =\\left[\\begin{matrix}\n\\frac{\\partial f_1}{\\partial x_1} & \\frac{\\partial f_1}{\\partial x_2} & \\cdots & \\frac{\\partial f_1}{\\partial x_n} \\\\\n\\frac{\\partial f_2}{\\partial x_1} & \\frac{\\partial f_2}{\\partial x_2} & \\cdots & \\frac{\\partial f_2}{\\partial x_n} \\\\\n\\vdots & \\vdots & \\ddots & \\vdots \\\\\n\\frac{\\partial f_m}{\\partial x_1} & \\frac{\\partial f_m}{\\partial x_2} & \\cdots & \\frac{\\partial f_m}{\\partial x_n}\n\\end{matrix}\\right]\n= \\nabla_x^T f\n$$\n\nJacobian çŸ©é˜µè¡¨ç°äº†å‘é‡å‡½æ•°çš„æœ€ä½³çº¿æ€§é€¼è¿‘ï¼Œä¹Ÿå³\n\n$$\nf(x) \\approx f(p) + J(p)(x-p)\n$$\n\n# Hessian çŸ©é˜µ\n\nè‹¥ $f:\\mathbb{R}^n \\rightarrow \\mathbb{R}$ ä¸ºäºŒæ¬¡å¯å¯¼å‡½æ•°ï¼Œ$x=[x_1,x_2,â€¦,x_n]^T$ï¼Œåˆ™ $f$ çš„HessiançŸ©é˜µä¸ºï¼š\n\n$$\nH(f)=\\left[\\begin{matrix}\n\\frac{\\partial^2 f}{\\partial x_1 \\partial x_1} & \\frac{\\partial^2 f}{\\partial x_1 \\partial x_2} & \\cdots & \\frac{\\partial^2 f}{\\partial x_1 \\partial x_n} \\\\\n\\frac{\\partial^2 f}{\\partial x_2 \\partial x_1} & \\frac{\\partial^2 f}{\\partial x_2 \\partial x_2} & \\cdots & \\frac{\\partial^2 f}{\\partial x_2 \\partial x_n} \\\\\n\\vdots & \\vdots & \\ddots & \\vdots \\\\\n\\frac{\\partial^2 f}{\\partial x_n \\partial x_1} & \\frac{\\partial^2 f}{\\partial x_n \\partial x_2} & \\cdots & \\frac{\\partial^2 f}{\\partial x_n \\partial x_n}\n\\end{matrix}\\right]\n=\\nabla_x^2f\n$$\n\nHessiançŸ©é˜µä½¿ç”¨äº†å‡½æ•°çš„äºŒé˜¶ä¿¡æ¯ï¼Œå¸¸ç”¨äºè§£å†³ä¼˜åŒ–é—®é¢˜ã€‚å½“ $f$ çš„äºŒé˜¶æ··åˆåå¯¼æ•°è¿ç»­æ—¶ï¼Œå®ƒæ˜¯ä¸€ä¸ªå¯¹ç§°çŸ©é˜µã€‚è¿™æ—¶ï¼Œ$f$ åœ¨ $x_0$ çš„äºŒé˜¶æ³°å‹’å…¬å¼å¯ç®€å•åœ°å†™æˆï¼š\n\n$$\nf(x)=f(x_0)+f'(x_0)(x-x_0)+\\frac{1}{2}(x-x_0)^Tf^2(x_0)(x-x_0)+o(|x-x_0|^2)\n$$\n\n# è´å¶æ–¯å†³ç­–ç†è®ºå’Œ HMM\n\n## è´å¶æ–¯å†³ç­–ç†è®º\n\n### è´å¶æ–¯å®šç†\n\nè®¾ $n$ ä¸ªäº‹ä»¶ $A_1,A_2,â€¦,A_n$ ä¸¤ä¸¤äº’æ–¥ï¼Œ$A_1+A_2+â€¦+A_n=\\Omega$ï¼ˆæ»¡è¶³è¿™ä¸¤ä¸ªæ¡ä»¶çš„äº‹ä»¶ç»„ç§°ä¸ºä¸€ä¸ªå®Œå¤‡äº‹ä»¶ç»„ï¼‰ï¼Œä¸” $P(A_i)>0(i=1,2,â€¦,n)$ åˆ™\n\n$$\nP(A_i|B)=\\frac{P(A_i)P(B|A_i)}{\\sum_{j=1}^nP(A_i)P(B|A_j)}\n$$\n\n$P(A_i|B)$ æ˜¯åœ¨äº‹ä»¶ $B$ å‘ç”Ÿçš„æ¡ä»¶ä¸‹ï¼ŒæŸä¸ªåŸå›  $A_i$ å‘ç”Ÿçš„æ¦‚ç‡ï¼Œç§°ä¸ºåéªŒæ¦‚ç‡ï¼Œç§° $P(A_i)$ ä¸ºå…ˆéªŒæ¦‚ç‡.\n\n### MLEã€MAP å’Œ Bayesian\n\nä»¤ï¼š\n\n- $D={(x_1,y_1),â€¦,(x_n,y_n)}$ è¡¨ç¤ºè®­ç»ƒæ ·æœ¬é›†\n- $\\theta$ è¡¨ç¤ºæ¨¡å‹æ‰€æœ‰çš„å‚æ•°\n- $x^*$ è¡¨ç¤ºä¸€ä¸ªæ–°çš„æ ·æœ¬ï¼ˆè®­ç»ƒå®Œçš„æ¨¡å‹éœ€è¦åšé¢„æµ‹ï¼‰ï¼Œ$\\hat y$ è¡¨ç¤ºæ¨¡å‹å¯¹æ–°æ ·æœ¬çš„é¢„æµ‹å€¼\n\n#### æœ€å¤§ä¼¼ç„¶ä¼°è®¡ï¼ˆMaximum likelihood estimation, MLEï¼‰\n\n- åœ¨ç»™å®šä¸€ä¸ªæ¨¡å‹å‚æ•°çš„æƒ…å†µä¸‹ï¼Œè®¡ç®—æ ·æœ¬é›†çš„æ¦‚ç‡ $p(D|\\theta)$\n- ç›®æ ‡æ˜¯æ‰¾åˆ°æœ€ä¼˜çš„å‚æ•° $\\theta^*$ä½¿å¾—$p(D|\\theta)$ æœ€å¤§åŒ–\n- é¢„æµ‹ $p(\\hat y|x^,\\theta^)$\n\nç›®æ ‡ï¼š\n\n$$\n\\theta^{MLE}=\\arg\\max\\theta p(D|\\theta)\n$$\n\nè¦æ‰¾åˆ°æœ€ä¼˜å‚æ•° $\\theta^{MLE}$ ä½¿å¾— $p(D|\\theta)$ æœ€å¤§åŒ–ï¼Œé€šå¸¸å¯é€šè¿‡ä»¤å¯¼æ•°ç­‰äº0ç­‰åˆ°ï¼š\n\n$$\n\\frac{\\partial p(D|\\theta)}{\\partial \\theta}=0\n$$\n\nMLE æœªè€ƒè™‘åˆ°å…ˆéªŒï¼Œä¸”å®¹æ˜“é€ æˆè¿‡æ‹Ÿåˆ.\n\n#### æœ€å¤§åéªŒä¼°è®¡ï¼ˆMaximum a posteriori estimation,MAPï¼‰\n\n- åœ¨ç»™å®šæ ·æœ¬çš„æƒ…å†µä¸‹ï¼Œè®¡ç®—å‚æ•°çš„æ¦‚ç‡ $p(\\theta|D)$ \n- ç›®æ ‡æ˜¯æ‰¾åˆ°æœ€ä¼˜çš„å‚æ•° $\\theta^*$ ä½¿å¾— $p(\\theta|D)$ æœ€å¤§åŒ–\n- é¢„æµ‹ $p(\\hat y|x^,\\theta^)$\n\nç›®æ ‡ï¼š\n\n$$\n\\theta^{MAP}=\\arg\\max\\theta p(\\theta|D)\n$$\n\næ ¹æ®è´å¶æ–¯å…¬å¼æœ‰ï¼š\n\n$$\np(\\theta|D)=\\frac{p(D|\\theta)p(\\theta)}{p(D)}\n$$\n\nç›®æ ‡å¯ä»¥è½¬ä¸ºï¼š\n\n$$\n\\theta^{MAP}=\\arg\\max\\theta p(D|\\theta)p(\\theta)\n$$\n\nè¿›ä¸€æ­¥å–å¯¹æ•°å½¢å¼ï¼š\n\n$$\n\\theta^{MAP}=\\arg\\max\\theta \\log p(D|\\theta)+\\log p(\\theta)\n$$\n\nMAP ä¸ MLE æœ€å¤§ä¸åŒåœ¨äº $p(\\theta)$ é¡¹ï¼ŒMAP è§£å†³äº† MLE ç¼ºä¹å…ˆéªŒçš„ç¼ºç‚¹.\n\n#### è´å¶æ–¯ä¼°è®¡ï¼ˆBayesian estimationï¼‰\n\n- åœ¨ç»™å®šæ ·æœ¬çš„æƒ…å†µä¸‹ï¼Œè®¡ç®—å‚æ•°çš„åˆ†å¸ƒ $p(\\theta|D)$\n- é¢„æµ‹ $p(\\hat y|x^*,D)=\\int_\\theta p(\\hat y|x^*,\\theta)p(\\theta|D)d\\theta$\n\nç›®æ ‡ï¼š\n\nå¯¹äºä¸€ä¸ªæ–°æ ·æœ¬$x^*$ï¼Œæ¨¡å‹çš„é¢„æµ‹ä¸ºï¼š \n\n$$ \np(\\hat y|x^*,D)=\\int_\\theta p(\\hat y|x^*,\\theta)p(\\theta|D)d\\theta\n$$\n\néœ€è¦è®¡ç®—åéªŒæ¦‚ç‡ $p(\\theta|D)$ï¼š\n\n$$\np(\\theta|D)=\\frac{p(D|\\theta)p(\\theta)}{\\int p(D|\\theta)p(\\theta)d\\theta}\n$$\n\nåéªŒæ¦‚ç‡éœ€è¦è¿‘ä¼¼è®¡ç®—.\n\n![MLE_MAP_Bay](çŸ©é˜µè®¡ç®—/MLE_MAP_Bay.png)\n\n### è’™ç‰¹å¡æ´›æ–¹æ³•\n\né€šè¿‡éšæœºæŠ½æ ·æ–¹æ³•ï¼Œä»¥éšæœºäº‹ä»¶å‡ºç°çš„é¢‘ç‡ä¼°è®¡å…¶æ¦‚ç‡ï¼Œæˆ–è€…ä»¥æŠ½æ ·çš„æ•°å­—ç‰¹å¾ä¼°ç®—éšæœºå˜é‡çš„æ•°å­—ç‰¹å¾ï¼Œå¹¶å°†å…¶ä½œä¸ºé—®é¢˜çš„è§£ã€‚\n\n## éšé©¬å°”ç§‘å¤«æ¨¡å‹ï¼ˆHidden Markov Model, HMMï¼‰\n\n- ä¸€ç§ç®€å•çš„æœ‰å‘å›¾æ¨¡å‹ï¼Œå¸¸ç”¨äºå¤„ç†æ—¶é—´åºåˆ—æ•°æ®\n- åœ¨å¤šä¸ªé¢†åŸŸåº”ç”¨å¹¿æ³›ï¼šè¯­éŸ³è¯†åˆ«ã€è‡ªç„¶è¯­è¨€å¤„ç†ã€è¯æ€§æ ‡æ³¨ç­‰ç­‰\n\n### å˜é‡\n\nHMMçš„å˜é‡åˆ†ä¸ºä¸¤ç§ï¼š\n\n- å› å˜é‡ $y \\in Y$ ï¼šåœ¨$i$æ—¶åˆ»ç³»ç»Ÿæ‰€å¤„çš„çŠ¶æ€ï¼ˆé€šå¸¸ç¦»æ•£å‹ï¼‰\n- è§‚å¯Ÿå˜é‡ $x \\in X$ ï¼šåœ¨$i$æ—¶åˆ»æ‰€å¤„çš„è§‚å¯Ÿå€¼ï¼ˆç¦»æ•£ã€è¿ç»­ï¼‰\n\n![HMM](çŸ©é˜µè®¡ç®—/HMM.png)\n\n### çŠ¶æ€\n\nä¸‹ä¸€ä¸ªçŠ¶æ€ä»…ç”±å½“å‰çŠ¶æ€å†³å®šï¼Œä¸å…¶ä»–çŠ¶æ€å˜é‡æ— å…³.\n\n$x$ åœ¨ç»™å®š $y$ çš„æƒ…å†µä¸‹æ¡ä»¶ç‹¬ç«‹ï¼ŒHMM ä¸­å› å˜é‡å’Œè§‚å¯Ÿå˜é‡çš„è”åˆåˆ†å¸ƒå¯ä»¥å†™ä¸º\n\n$$\n\\begin{align*}\n    p(\\textbf{x}^n,\\textbf{y}^n)=p(y_1)p(x_1|y_1)\\prod_{t=2}^Tp(x_t|y_t)p(y_t|y_{t-1})\\\\\n    \\textbf{x}^n=(x_1,x_2,...,x_T),\\quad \\textbf{y}^n=(y_1,y_2,...,y_T)\n\\end{align*}\n$$\n","tags":["çŸ©é˜µ"],"categories":["math"]},{"title":"wslæ‚é¡¹","url":"/archives/45330/","content":"\n# `Error code: Wsl/Service/0x8007273d`\n\nå¯èƒ½æ˜¯ç”µè„‘ä¸­å­˜åœ¨çš„ä»£ç†è½¯ä»¶ä¸ wsl å‘ç”Ÿå†²çªå¯¼è‡´çš„ã€‚\n\n- ä¸´æ—¶è§£å†³æ–¹æ¡ˆ\n  \n  ä»¥ç®¡ç†å‘˜èº«ä»½åœ¨ powershell ä¸­è¿è¡Œï¼š\n\n  ```bash\n  netsh winsock reset\n  ```\n\n\n[wsl2æ›´æ–°åï¼ŒæŠ¥é”™0x8007273dè§£å†³æ–¹æ¡ˆ](https://blog.csdn.net/weixin_44411509/article/details/131195308)\n\n[Winsock module breaks WSL2 ](https://github.com/microsoft/WSL/issues/4177)","tags":["é…ç½®"],"categories":["computer"]},{"title":"Linuxæ‚é¡¹","url":"/archives/2776/","content":"\næœ¬æ–‡ç”¨äºè®°å½•ä½¿ç”¨ Linux è¿‡ç¨‹ä¸­é‡åˆ°çš„é—®é¢˜ã€‚\n\n<!-- more -->\n\n# åˆ é™¤ .nfs æ–‡ä»¶\n\n1. æŸ¥æ‰¾ .nfs æ–‡ä»¶çš„ PID\n\n```bash\nlsof .nfs0000000009e000d700000012\n```\n\n2. å¼¹å‡ºå¤§é‡ä¿¡æ¯ï¼Œæœ€åä¸€è¡Œå¦‚ä¸‹\n\n```\nCOMMAND PID USER FD TYPE DEVICE SIZE/OFF NODE NAME\n\ntar 32961 t3g 5r REG 0,57 8076 0023639 .nfs0000000007b000d700000049\n```\n\n3. æ€æ­»å ç”¨çš„è¿›ç¨‹ï¼Œä»è€Œåˆ é™¤ .nfs æ–‡ä»¶\n\n```\nkill -9 32961\n```\n\n# Could not get lock /var/lib/dpkg/lock-frontend\n\n## ä½•æ—¶è§¦å‘\n\né…ç½®åˆšå®‰è£…çš„ç³»ç»Ÿçš„å…¶ä»–åŒ…çš„æ—¶å€™\n\n## æˆå› \n\nè¿™ä¸ªé”™è¯¯é€šå¸¸æ˜¯å› ä¸ºå·²ç»æœ‰ä¸€ä¸ª apt æˆ– dpkg è¿›ç¨‹åœ¨è¿è¡Œï¼Œå¯¼è‡´æ— æ³•è·å¾—é”å®šæ–‡ä»¶ã€‚\n\n## è§£å†³æ–¹æ¡ˆ\n\n1. ç­‰å¾…ä¸€æ®µæ—¶é—´ï¼Œå¯èƒ½æ˜¯å…¶ä»–æ­£åœ¨è¿è¡Œçš„ apt æˆ– dpkg è¿›ç¨‹å®Œæˆåè‡ªåŠ¨é‡Šæ”¾é”ã€‚\n2. æ£€æŸ¥æ˜¯å¦æœ‰å…¶ä»–ç»ˆç«¯æˆ–è½¯ä»¶åŒ…ç®¡ç†å™¨æ­£åœ¨ä½¿ç”¨ apt æˆ– dpkg å‘½ä»¤ã€‚å¦‚æœæ˜¯ï¼Œè¯·ç­‰å¾…å…¶å®Œæˆæˆ–æ‰‹åŠ¨ç»ˆæ­¢è¯¥è¿›ç¨‹ã€‚\n3. å¦‚æœæ²¡æœ‰å…¶ä»– apt æˆ– dpkg è¿›ç¨‹åœ¨è¿è¡Œï¼Œåˆ™å¯èƒ½æ˜¯é”æ–‡ä»¶æœªæ­£ç¡®é‡Šæ”¾ã€‚æ‚¨å¯ä»¥æ‰‹åŠ¨åˆ é™¤é”æ–‡ä»¶ï¼Œå¹¶é‡æ–°è¿è¡Œ apt æˆ– dpkg å‘½ä»¤ï¼š\n\n  ```bash\n  sudo rm /var/lib/dpkg/lock-frontend \n  sudo dpkg --configure -a\n  ```\n\n4. å¦‚æœä¸Šè¿°æ–¹æ³•éƒ½æ²¡æœ‰è§£å†³é—®é¢˜ï¼Œæ‚¨å¯ä»¥å°è¯•é‡å¯ç³»ç»Ÿå¹¶å†æ¬¡è¿è¡Œ apt æˆ– dpkg å‘½ä»¤ã€‚\n\n## å‚è€ƒèµ„æ–™\n- [Could not get lock /var/lib/dpkg/lock-frontend ï¼Œæ€ä¹ˆå¤„ç†](https://zhuanlan.zhihu.com/p/623220351?utm_id=0)","tags":["Linux"],"categories":["computer"]},{"title":"TTCæµ‹è·ç¢°æ’ç®—æ³•","url":"/archives/27269/","content":"\nåˆ›æ–°å®è·µåˆå¿˜è®°æä¸ªå®šé‡æŒ‡æ ‡äº†ï¼Œè¦è¢«è€æ¿ç—›æ‰¹äº†ï¼Œèµ¶å¿«èµ¶ä¸€ä¸ªã€‚\n\n<!-- more -->\n\n\n\n\n\n\n\n\n\n\n# å‚è€ƒèµ„æ–™\n\n- [ä¸€æ–‡è¯»æ‡‚TTCç¢°æ’æ—¶é—´ç®—æ³•](https://mp.weixin.qq.com/s/9Yq15GsSlM8i9rxsCZ22Mw)\n- [ADASç³»ç»Ÿæ¨ªçºµå‘æ§åˆ¶ç­–ç•¥ä¹‹ç¢°æ’æ—¶é—´è®¡ç®—æ–¹æ³•](https://baijiahao.baidu.com/s?id=1782615956499586607&wfr=spider&for=pc)\n- [è¯„ä¼°è½¦è¾†ä¹‹é—´å®‰å…¨è·ç¦»çš„æŒ‡æ ‡](https://blog.csdn.net/m0_66159157/article/details/129653950)\n- [TTCæµ‹è·ç¢°æ’ç®—æ³•](https://zhuanlan.zhihu.com/p/112342540)\n- [Time to contact estimation using interest points](https://ieeexplore.ieee.org/document/5309851)","tags":["è‡ªåŠ¨é©¾é©¶"],"categories":["computer"]},{"title":"ä¿³å¥","url":"/archives/1937/","content":"\n- éœ²ã®ä¸–ã¯ éœ²ã®ä¸–ãªãŒã‚‰ ã•ã‚ŠãªãŒã‚‰\n\n> æˆ‘çŸ¥è¿™ä¸–ç•Œæœ¬å¦‚éœ²æ°´èˆ¬çŸ­æš‚ã€‚ç„¶è€Œï¼Œç„¶è€Œ\n\n- ã•ã³ã—ã•ã‚„ã€€ä¸€å°ºæ¶ˆãˆã¦ã€€ã‚†ãã»ãŸã‚‹\n\n> æµè¤æ–­ç»­å…‰ï¼Œä¸€æ˜ä¸€ç­ä¸€å°ºé—´ï¼Œå¯‚å¯ä½•ä»¥å ª\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","tags":["æ—¥æœ¬"],"categories":["life"]},{"title":"å¦‚ä½•æäº¤pr","url":"/archives/16781/","content":"\nåŸæ–‡æ˜¯å¤§äºŒæ—¶å†™çš„ï¼Œä½†æ˜¯æ‰¾ä¸åˆ°äº†ï¼Œäºæ˜¯é‡æ–°å†™äº†ä¸€ç¯‡ã€‚é»˜è®¤æ˜¯æœ‰ git ç»éªŒçš„ï¼Œæ²¡æœ‰çš„è¯å¯ä»¥çœ‹çœ‹è¿™ç¯‡æ–‡ç«  {% post_link Gitä¿¡æ¯æ³„éœ² %}\n\n<!-- more -->\n\n# æµç¨‹\n\n- issue\n\nå¯ä»¥å…ˆæä¸€ä¸ª issue ä¸åŸä½œè€…äº¤æµ\n\n![issue](å¦‚ä½•æäº¤pr/issue.png)\n\n- Fork ä»“åº“\n\nFork éœ€è¦æäº¤ pr çš„ä»“åº“åˆ°è‡ªå·±çš„ä»“åº“ä¸­ã€‚\n\n![Fork ä»“åº“](å¦‚ä½•æäº¤pr/fork.png)\n\n- git clone åˆ°æœ¬åœ°\n\ngit clone çš„æ˜¯åˆšåˆš Fork çš„ä»“åº“ï¼Œä¸æ˜¯åŸå§‹é¡¹ç›®çš„ä»“åº“ã€‚\n\n```bash\ngit clone https://github.com/Lynchrocket/hexo-theme-tranquility.git\n```\n\n- åˆ›å»ºä¸€ä¸ªåˆ†æ”¯\n\n```bash\ngit checkout -b add_mermaid\n```\n\n![git clone & branch](å¦‚ä½•æäº¤pr/git1.png)\n\n- åšå‡ºä¿®æ”¹\n\nåšå‡ºä½ éœ€è¦çš„ä¿®æ”¹ã€‚\n\n- æäº¤ä¿®æ”¹\n\nç”±äºåˆ†æ”¯æ˜¯åœ¨æœ¬åœ°åˆ›å»ºçš„ï¼Œgit push éœ€è¦åŠ ä¸Š --set-upstream\n\n```bash\ngit add .\ngit commit -m \"add mermaid\"\ngit push --set-upstream origin add_mermaid\n```\n\n![æäº¤ä¿®æ”¹](å¦‚ä½•æäº¤pr/git2.png)\n\n- åˆ›å»º pull request\n\nåœ¨ Fork çš„ä»“åº“ä¸­ï¼Œç‚¹å‡» `Compare & pull request`\n\n![Compare & pull request](å¦‚ä½•æäº¤pr/Compare%20&%20pull%20request.png)\n\né€‰æ‹©ä½ æƒ³å¹¶å…¥çš„åŸé¡¹ç›®åˆ†æ”¯ï¼Œæ ‡é¢˜å’Œæè¿°ä¿¡æ¯ã€‚å¦‚æœæœ‰å¯¹åº”çš„ issueï¼Œå°±é€šè¿‡é”®å…¥ `#` æ·»åŠ (Github ä¼šè‡ªåŠ¨å±•ç¤º issues åˆ—è¡¨)\n\n![link_issue](å¦‚ä½•æäº¤pr/link_issue.png)\n\nç‚¹å‡» `Create pull request`ï¼Œå°±è¡Œäº†ã€‚ç»“æœå¦‚ä¸‹ï¼š\n\n![result](å¦‚ä½•æäº¤pr/result.png)\n\n# å‚è€ƒèµ„æ–™\n\n- [GitHub flow](https://docs.github.com/en/get-started/quickstart/github-flow)\n- [å¦‚ä½•åœ¨ Github ä¸Šè§„èŒƒçš„æäº¤ PRï¼ˆå›¾æ–‡è¯¦è§£ï¼‰](https://zhuanlan.zhihu.com/p/584834288)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","tags":["Git"],"categories":["computer"]},{"title":"æ·±åº¦å­¦ä¹ ï¼šå·ç§¯ç¥ç»ç½‘ç»œï¼ˆCNNï¼‰","url":"/archives/33779/","content":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n# å‚è€ƒèµ„æ–™\n\n- [ã€DLç¬”è®°6ã€‘ä»æ­¤æ˜ç™½äº†å·ç§¯ç¥ç»ç½‘ç»œï¼ˆCNNï¼‰](https://zhuanlan.zhihu.com/p/42559190)","tags":["æ·±åº¦å­¦ä¹ "],"categories":["computer"]},{"title":"å½’çº¦è¯æ˜","url":"/archives/33031/","content":"\nå½’çº¦ï¼ˆreductionï¼‰æ˜¯æŒ‡é—®é¢˜ A çš„ä»»ä½•å®ä¾‹èƒ½ç”¨é—®é¢˜ B çš„æ–¹æ³•æ¥è§£å†³ï¼ˆåˆ¤æ–­ï¼‰ï¼Œå¹¶ä¸” A çš„è§£ä¸º trueï¼Œå½“ä¸”ä»…å½“ B çš„è§£ä¹Ÿæ˜¯ trueã€‚æ­¤æ—¶å¯æ ‡ä¸º $A\\leq_p B$ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå½’çº¦å¯ä»¥å°†éš¾ä»¥ç›´æ¥è¯æ˜ï¼ˆæˆ–ç›´æ¥è¯æ˜è¾ƒä¸ºå¤æ‚ï¼‰çš„é—®é¢˜è½¬åŒ–ä¸ºè¯æ˜å¦ä¸€ä¸ªè¾ƒä¸ºç®€å•é—®é¢˜ã€‚\n\n<!-- more -->\n\n# å¯†ç å­¦ä¸­çš„å½’çº¦è¯æ˜\n\nåœ¨ç°ä»£å¯†ç å­¦ä¸­è¦è¯æ˜æ–¹æ¡ˆæˆ–åè®®çš„å®‰å…¨æ€§ï¼Œå¸¸å¸¸ä½¿ç”¨ game çš„å½¢å¼æ¥æ„é€ è¯æ˜è¿‡ç¨‹ã€‚å½’çº¦è¯æ˜ï¼ˆproof by reductionï¼‰å°±æ˜¯å…¶ä¸­çš„æ ¸å¿ƒã€‚\n\nä¸€èˆ¬æ¥è¯´ï¼Œä¸€ä¸ªå¯†ç å­¦æ–¹æ¡ˆæˆ–åè®® $\\Pi$ æ˜¯å»ºç«‹åœ¨å·²è¢«è¯æ˜å®‰å…¨çš„æ–¹æ¡ˆæˆ–åè®®ï¼Œæˆ–è€…æ˜¯æŸäº›å›°éš¾é—®é¢˜ä¹‹ä¸Šï¼ˆè®°ä¸º $X$ï¼‰ã€‚å›°éš¾é—®é¢˜å°±ç›¸å½“äºåœ°åŸºï¼Œå¯†ç å­¦æ–¹æ¡ˆæˆ–åè®®å°±ç›¸å½“äºé«˜æ¥¼ã€‚åªè¦åœ°åŸºæ˜¯ç¨³å›ºçš„ï¼Œé«˜æ¥¼ä¸€èˆ¬å°±å®‰å…¨äº†ã€‚å› æ­¤æˆ‘ä»¬å¸Œæœ›ä¸‹é¢çš„å‘½é¢˜æ˜¯ä¸ºçœŸçš„ï¼š\n\n> Prop.1ï¼ˆå‘½é¢˜ï¼‰ï¼šè‹¥ $X$ æ˜¯å®‰å…¨çš„ï¼Œé‚£ä¹ˆæ–¹æ¡ˆ $\\Pi$ å°±æ˜¯å®‰å…¨çš„ã€‚è‹¥ $X$ è¢«æœ‰æ•ˆæ”»ç ´ï¼Œé‚£ä¹ˆæ–¹æ¡ˆ $\\Pi$ å°±ä¸å†å®‰å…¨ã€‚\n\nå®é™…ä¸Šï¼Œè¿™å°±æ˜¯ç¦»æ•£æ•°å­¦ä¸­å‡è¨€å‘½é¢˜çš„é€»è¾‘ç­‰ä»·å¼ï¼š\n\n$$\np\\rightarrow q \\equiv \\neg q\\rightarrow\\neg p\n$$\n\nåŒæ—¶è¿™ä¸ªç­‰ä»·å¼ä¹Ÿæ˜¯**åè¯æ³•**çš„åŸºç¡€ã€‚å› æ­¤ï¼Œè‹¥è¦åœ¨å½’çº¦è¯æ˜ä¸­è¯æ˜æŸä¸€ä¸ªæ–°æå‡ºçš„æ–¹æ¡ˆ X çš„å®‰å…¨æ€§ï¼š\n\n> Thm.ï¼ˆå®šç†ï¼‰ï¼šY æ˜¯å®‰å…¨çš„ $\\rightarrow$ X æ˜¯å®‰å…¨çš„\n\nä¹Ÿå°±æ˜¯è¦è¯æ˜ï¼š\n\n> Prop.2ï¼ˆå‘½é¢˜ï¼‰ï¼šX ä¸æ˜¯å®‰å…¨çš„ $\\rightarrow$ Y ä¸æ˜¯å®‰å…¨çš„\n\nè¿›ä¸€æ­¥è¯´ï¼š**å¦‚æœå­˜åœ¨ä¸€ä¸ª PPT çš„ attacker A å¯ä»¥æ”»ç ´ Xï¼Œé‚£ä¹ˆæˆ‘ä»¬èƒ½æ„é€ ä¸€ä¸ª PPT çš„ attacker B æ¥æ”»ç ´ Y**ã€‚å…¶ä¸­ï¼ŒX æ˜¯æ–°æå‡ºçš„æ–¹æ¡ˆï¼ŒY æ˜¯æŸä¸€ä¸ªå›°éš¾é—®é¢˜ï¼ŒPPT æ˜¯å¤šé¡¹å¼æ¦‚ç‡æ—¶é—´ã€‚â€œæ„é€ â€ä¸€è¯å¯ä»¥ç†è§£ä¸ºæ¨¡æ‹Ÿã€‚\n\nå¦‚æœèƒ½ä½¿æ¡ä»¶å‘½é¢˜ 2 æˆç«‹ï¼Œé‚£ä¹ˆå°±å®Œæˆäº†å½’çº¦è¯æ˜ã€‚\n\n# è¯æ˜è¿‡ç¨‹\n\nåœ¨å¯†ç åè®®çš„å®‰å…¨æ€§è¯æ˜ä¸­ï¼Œä¸€èˆ¬ä½¿ç”¨ game çš„æ–¹å¼æ¥å®šä¹‰**ä»€ä¹ˆæ˜¯å®‰å…¨çš„/ä¸å®‰å…¨çš„**ã€‚ä¸€ä¸ª game ä¸­æœ‰ä¸¤ä¸ª partyï¼Œä¸€ä¸ªæ˜¯ attackerï¼Œå¦ä¸€ä¸ªæ˜¯ challengerã€‚attacker è¯•å›¾ç ´ååè®®çš„å®‰å…¨ï¼Œchallenger åˆ™æ˜¯å¸®åŠ©æ„é€ åè®®çš„å®‰å…¨ã€‚\n\nå‡è®¾å·²çŸ¥é—®é¢˜ $X$ éš¾ä»¥è§£å†³ï¼Œæƒ³è¦è¯æ˜æŸæ„é€ æ–¹æ¡ˆ $\\Pi$ å®‰å…¨ï¼Œå°±è¦å°†æˆåŠŸæ”»ç ´è¯¥æ–¹æ¡ˆ $\\Pi$ çš„æœ‰æ•ˆ attacker $\\mathcal{A}$ è½¬åŒ–ä¸ºæˆåŠŸè§£å†³é—®é¢˜ $X$ çš„æœ‰æ•ˆ attacker $\\mathcal{A}'$ï¼Œè¿™ä¸ $X$ å›°éš¾çš„å‡è®¾ç›¸çŸ›ç›¾ï¼Œæ‰€ä»¥æ–¹æ¡ˆ $\\Pi$ æ— æ³•è¢«æ”»ç ´ï¼Œå› æ­¤è¯¥æ–¹æ¡ˆæ˜¯å®‰å…¨çš„ã€‚\n\nå…¶ä¸­ $X$ å’Œ $\\Pi$ åˆ†åˆ«æœ‰ä¸¤ä¸ª partyï¼Œå³ $X$ çš„ challenger å’Œ attacker ä¸ $\\Pi$ çš„ challenger å’Œ attackerã€‚æˆ‘ä»¬è¿˜éœ€è¦åˆ†åˆ«ä»¥ä¸¤ä¸ª game æ¥å®šä¹‰ $X$ å’Œ $\\Pi$ çš„å®‰å…¨æ€§ï¼Œä¸”è¿™ä¸¤ä¸ª game æ˜¯äº’ç›¸ç‹¬ç«‹çš„ã€‚åœ¨å½’çº¦è¯æ˜ä¸­ï¼Œæˆ‘ä»¬è®© $X$ çš„ attacker æ¥æ¨¡æ‹Ÿ $\\Pi$ çš„ challengerï¼Œä¸”è¦æ±‚ï¼š\n\n1. $X$ çš„ attacker æ‰€æ¨¡æ‹Ÿçš„ $\\Pi$ çš„ challenger å¤Ÿâ€œé€¼çœŸâ€ï¼Œä½¿å¾— $\\Pi$ çš„ attacker æ— æ³•åŒºåˆ†å®ƒçš„ challenger æ˜¯çœŸå®çš„è¿˜æ˜¯æ¨¡æ‹Ÿçš„ï¼Œé™¤äº† negligible çš„æ¦‚ç‡ï¼›\n2. æ‰€æ¨¡æ‹Ÿçš„ $\\Pi$ çš„ challenger æ˜¯ PPT çš„ã€‚\n\n![å½’çº¦è¯æ˜](å½’çº¦è¯æ˜/reduction.png)\n\nå¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œè¯æ˜çš„è¿‡ç¨‹å¦‚ä¸‹ï¼š\n\n1. æŒ‡å®š PPT attacker $\\mathcal{A}$ æ”»å‡»æ–¹æ¡ˆ $\\Pi$ï¼Œä¸”æˆåŠŸçš„æ¦‚ç‡ä¸º $\\varepsilon(n)$ï¼›\n2. å‡è®¾ï¼šé—®é¢˜ $X$ éš¾ä»¥è§£å†³ï¼Œå³æ— æ³•åœ¨ PPT å†…ä»¥ not negligible çš„æ¦‚ç‡è§£å†³ï¼›\n3. å½’çº¦ï¼šæ„é€  efficient attacker $\\mathcal{A}'$ï¼Œå®ƒå°† $\\mathcal{A}$ \nå½“ä½œ subroutine è¿è¡Œï¼Œä»é—®é¢˜ $X$ çš„å®ä¾‹ $x$ æ¨¡æ‹Ÿå‡ºä¸€ä¸ª $\\Pi$ çš„å®ä¾‹ï¼Œè¾“å…¥ç»™ $\\mathcal{A}$ã€‚å¦‚æœ $\\mathcal{A}$ è¢«æˆåŠŸæ”»ç ´ï¼Œåˆ™ $\\mathcal{A}'$ æˆåŠŸè§£å†³å®ä¾‹ $x$ çš„æ¦‚ç‡è‡³å°‘ä¸ºå¤šé¡¹å¼çš„å€’æ•° $1/p(n)$ï¼›\n1. çŸ›ç›¾ï¼šé‚£ä¹ˆ $\\mathcal{A}'$ è§£å†³é—®é¢˜ $X$ çš„æ¦‚ç‡ä¸º $\\varepsilon(n)/p(n)$ã€‚è‹¥ $\\varepsilon(n)$ not negligibleï¼Œåˆ™ $\\varepsilon(n)/p(n)$ ä¹Ÿ not negligibleï¼Œè¿™ä¸ $X$ å›°éš¾çš„å‡è®¾ç›¸çŸ›ç›¾ã€‚\n2. ç»“è®ºï¼šattacker $\\mathcal{A}$ æ— æ³•ä»¥ not negligible çš„æ¦‚ç‡æ”»ç ´æ–¹æ¡ˆ\nï¼Œä¹Ÿå³ $\\Pi$ æ˜¯ computationally secure çš„ã€‚\n\n\né€šä¿—çš„è¯´ï¼Œåœ¨ attacker $\\mathcal{A}'$ æ¥æ”¶åˆ°å¤–éƒ¨çš„ challenger çš„è¾“å…¥æ•°æ®åï¼Œå¯¹å…¶è¿›è¡Œé€‚å½“å˜æ¢ï¼Œç„¶åæ¨¡æ‹Ÿä¸º challengerï¼Œå°†å˜æ¢åçš„æ•°æ®è¾“å…¥ç»™ attacker $\\mathcal{A}$ã€‚ç„¶å $\\mathcal{A}'$ æ ¹æ® $\\mathcal{A}$ çš„è¾“å‡ºï¼Œé€‚å½“å˜æ¢åè¾“å‡ºç»™å¤–éƒ¨ï¼Œå®Œæˆè¿™æ¬¡çš„ challengeã€‚å¯ä»¥çœ‹åˆ°ï¼Œ$\\mathcal{A}'$ å¯¹ $X$ çš„ gameï¼ˆ$X$ çš„å®‰å…¨æ€§ï¼‰è½¬ç§»åˆ° $\\mathcal{A}$ å¯¹ $\\Pi$ çš„ gameï¼ˆ$\\Pi$ çš„å®‰å…¨æ€§ï¼‰ä¸Šäº†ã€‚è¿™æ ·çš„è½¬ç§»å³æ„æˆäº†å‘½é¢˜ä¸­çš„ impliesï¼ˆ$\\rightarrow$ï¼‰ã€‚\n\n# è¯æ˜ä¾‹å­\n\n## PRG\n\nä¼ªéšæœºæ•°å‘ç”Ÿå™¨ï¼ˆpseudorandom generator, PRGï¼‰è¾“å…¥é•¿åº¦ä¸º $n$ çš„ç§å­ $s$\nï¼Œç®—æ³• $G$ è¾“å‡ºé•¿åº¦ä¸º $l(n)$ çš„å­—ç¬¦ä¸²ã€‚è‹¥æ— æ³•åŒºåˆ†å®ƒå’Œå‡åŒ€éšæœºé€‰æ‹©çš„å­—ç¬¦ä¸²ï¼Œåˆ™ç§°å…¶æ»¡è¶³ä¼ªéšæœºæ€§ã€‚ç”¨æ•°å­¦è¯­è¨€æè¿°å°±æ˜¯ï¼Œå¯¹äº PPT çš„ distinguisher $\\mathcal{D}$ æ¥è¯´ï¼Œå­˜åœ¨ negligible å‡½æ•° $negl(n)$ æ»¡è¶³ï¼š\n\n$$\n|\\Pr[D(r)=1]-\\Pr[D(G(s))=1]|\\le negl(n)\n$$\n\nå…¶ä¸­ $r$ æ˜¯ä» $\\{0,1\\}^{l(n)}$ ä¸­å‡ä¸éšæœºé€‰æ‹©çš„ï¼Œç§å­ $s$ æ˜¯ä» $\\{0,1\\}^n$ ä¸­å‡åŒ€éšæœºé€‰æ‹©çš„ã€‚\n\n![prg çš„å½’çº¦è¯æ˜](å½’çº¦è¯æ˜/prg.png)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n# å‚è€ƒèµ„æ–™\n\n- [èƒ½å¦é€šä¿—åœ°è§£é‡Šä¸‹å¯†ç å­¦ä¸­çš„å½’çº¦è¯æ˜ï¼Ÿ](https://www.zhihu.com/question/49441102/answer/1737942968)\n- [å¯†ç å­¦ä¸­çš„å½’çº¦è¯æ˜è¿‡ç¨‹](https://panqiincs.me/2022/11/22/crypto-proof-method/)\n","tags":["æ•°ç†é€»è¾‘","è¯æ˜"],"categories":["math"]},{"title":"æ·±åº¦å­¦ä¹ ï¼šPytorchåŸºæœ¬æ“ä½œ","url":"/archives/18730/","content":"\n# ndarray (tensor)\n\nN-dimensional array.\n\n![ndarray](æ·±åº¦å­¦ä¹ ï¼šPytorchåŸºæœ¬æ“ä½œ/ndarray1.png)\n\n![ndarray](æ·±åº¦å­¦ä¹ ï¼šPytorchåŸºæœ¬æ“ä½œ/ndarray2.png)\n\n# æ•°æ®æ“ä½œ\n\n## è®¿é—®å…ƒç´ \n\n![access elements](æ·±åº¦å­¦ä¹ ï¼šPytorchåŸºæœ¬æ“ä½œ/access_elements.png)\n\n## å¹¿æ’­æœºåˆ¶ (broadcasting mechanism)\n\nåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå³ä½¿å½¢çŠ¶ä¸åŒï¼Œæˆ‘ä»¬ä»ç„¶å¯ä»¥é€šè¿‡è°ƒç”¨ *å¹¿æ’­æœºåˆ¶* æ¥æ‰§è¡ŒæŒ‰å…ƒç´ æ“ä½œã€‚è¿™ç§æœºåˆ¶çš„å·¥ä½œæ–¹å¼å¦‚ä¸‹ï¼š\n\n1. é€šè¿‡é€‚å½“å¤åˆ¶å…ƒç´ æ¥æ‰©å±•ä¸€ä¸ªæˆ–ä¸¤ä¸ªæ•°ç»„ï¼Œä»¥ä¾¿åœ¨è½¬æ¢ä¹‹åï¼Œä¸¤ä¸ªå¼ é‡å…·æœ‰ç›¸åŒçš„å½¢çŠ¶ï¼›\n2. å¯¹ç”Ÿæˆçš„æ•°ç»„æ‰§è¡ŒæŒ‰å…ƒç´ æ“ä½œã€‚\n\n\n\nåé¢æœ‰ç©ºå†è¡¥","tags":["æ·±åº¦å­¦ä¹ ","Pytorch"],"categories":["computer"]},{"title":"ClimateNeRFç¯å¢ƒé…ç½®","url":"/archives/40010/","content":"\næœ€è¿‘åœ¨å­¦ä¹ è¿™ä¸ªï¼Œéœ€è¦é…ç½®ç¯å¢ƒã€‚æ€»çš„æ¥è¯´æŒºå¥½é…çš„ï¼Œä½†æ˜¯æœ‰ç‚¹é—®é¢˜ï¼Œéœ€è¦è®°å½•ä¸€ä¸‹ã€‚\n\n<!-- more -->\n\n# ç¯å¢ƒé—®é¢˜\n\n- å…‹éš†ä»“åº“ï¼š\n```bash\ngit clone --recursive https://github.com/y-u-a-n-l-i/Climate_NeRF.git\n``` \n\n- åˆ›å»ºç¯å¢ƒï¼š\n```bash\nconda create -n climatenerf python=3.8 å’Œ conda activate climatenerf\n```\n\n- å®‰è£… torch ç­‰ï¼š \n```bash\npip install torch==1.11.0 torchvision==0.12.0 --extra-index-url https://download.pytorch.org/whl/cu113\n```\n\n- å®‰è£…torch-scatterï¼š\n```bash\npip install torch-scatter -f https://data.pyg.org/whl/torch-1.11.0+cu113.html\n```\n\n- å®‰è£… cmakeï¼š\n```bash\nconda install cmake\n```\n\n- å®‰è£… nvccï¼š\n  - éœ€è¦æŒ‡å®šç‰ˆæœ¬ \n  ```bash\n  conda install -c \"nvidia/label/cuda-11.7.0\" cuda-nvcc\n  ``` \n\n  - å¤´æ–‡ä»¶ï¼š\n  ```bash\n  conda install -c conda-forge cudatoolkit-dev\n  ```\n\n- å®‰è£… tinycudann çš„ PyTorch extensionï¼šéœ€è¦æ³¨æ„è¦æ ¹æ®è¿™ä¸ª \n\n  <cardLink link=\"https://github.com/NVlabs/tiny-cuda-nn/issues/51\">Complie PyTorch Bindings with float32 precision</cardLink>\n  \n  æ¥å®‰è£… float32 precision çš„ \n- å…‹éš† tinycudannï¼š\n```bash\ngit clone --recursive https://github.com/nvlabs/tiny-cuda-nn\n```\n\n- `cd tiny-cuda-nn`\n- è¿™ä¸ªåœ°æ–¹ç”±äºæœåŠ¡å™¨ç¯å¢ƒçš„åŸå›  cmake å‚æ•°éœ€è¦è®¾ç½®ä¸€ä¸‹ï¼ŒåŒæ—¶åœ¨ gpu èŠ‚ç‚¹ä¸Šè¿è¡Œï¼š\n```bash\ncmake . -B build -DCMAKE_BUILD_TYPE=RelWithDebInfo -S . -G Ninja\ncmake --build build --config RelWithDebInfo -j\n``` \n\n- å®‰è£… PyTorch extensionï¼š\n  ```bash\n  cd bindings/torch\n  python setup.py install\n  ```\n\n- å®‰è£… mmsegmentationï¼š[GET STARTED: INSTALL AND RUN MMSEG](https://mmsegmentation.readthedocs.io/en/latest/get_started.html)ï¼š\n  - Install MMCV using MIM\n    ```bash\n    pip install -U openmim\n    mim install mmengine\n    mim install \"mmcv>=2.0.0\"\n    ```\n\n  - Install MMSegmentation \n    ```bash\n    pip install \"mmsegmentation>=1.0.0\"\n    ```\n\n  - ä¸‹è½½ segmentation model `segformer_mit-b5_8xb1-160k_cityscapes-1024x1024` åˆ°åˆé€‚çš„æ–‡ä»¶å¤¹ä¸­ï¼š\n    ```bash\n    mim download mmsegmentation --config segformer_mit-b5_8xb1-160k_cityscapes-1024x1024 --dest .\n    ```\n\n- å®‰è£… MTMTï¼š\n  ```bash\n  pip3 install --no-build-isolation git+https://github.com/lucasb-eyer/pydensecrf.git\n  ``` \n\n  - å®‰è£…è¿™ä¸ªçš„æ—¶å€™å‡ºç°äº†ä¸€äº›é—®é¢˜ï¼ˆå¦‚ä¸‹å›¾ï¼‰ã€‚é”™è¯¯çš„åŸå› æ˜¯ç¼ºå¤± pydensecrf/eigen.cpp è¿™ä¸ªæ–‡ä»¶ã€‚éœ€è¦æ¢ç”¨å¦ä¸€ç§æ–¹å¼ä¸‹è½½ pydensecrf \n    ```bash\n    conda install -c conda-forge pydensecrf\n    ```\n  \n    ![å®‰è£…MTMTæ—¶çš„é—®é¢˜](ClimateNeRFç¯å¢ƒé…ç½®/MTMT.png)\n\n- ä¸‹è½½ MTMT çš„ checkpointï¼š[Trained Model](https://github.com/eraserNut/MTMT?tab=readme-ov-file#trained-model)\n- å®‰è£…å‰©ä½™çš„ä¾èµ–ï¼š\n  ```bash\n  pip install -r requirements.txt\n  ```\n\n  - åœ¨è¿™å…¶ä¸­å®‰è£… cupy çš„æ—¶å€™å‡ºé”™äº†ã€‚ä½¿ç”¨å‘½ä»¤ \n    ```bash\n    pip install cupy-cuda113\n    ``` \n    å•ç‹¬å®‰è£…ï¼ˆè¦æ ¹æ®è‡ªå·±çš„ cuda ç‰ˆæœ¬æ¥ï¼‰ï¼Œç„¶ååˆ æ‰ requirements.txt ä¸­çš„ cupy è¿™ä¸€é¡¹\n  \n    ![cupy](ClimateNeRFç¯å¢ƒé…ç½®/cupy.png)\n\n    ![delete cupy](ClimateNeRFç¯å¢ƒé…ç½®/delete_cupy.png)\n\n- å®‰è£… cuda extensionï¼š\n  ```bash\n  pip install models/csrc\n  ```\n  \n  æ³¨æ„éœ€è¦ `pip >= 22.1`ï¼ˆç…§ç€æµç¨‹æ¥çš„è¯ pip ç‰ˆæœ¬åº”è¯¥ä¸ä¼šé”™ï¼‰ï¼Œå¹¶ä¸”è¯¥å®‰è£…è¦åœ¨ gpu èŠ‚ç‚¹ä¸Šè¿›è¡Œ\n\nç„¶ååº”è¯¥å°±å¯ä»¥è¿è¡Œäº†ã€‚è·‘ä¸ª training è¯•è¯•çœ‹ã€‚\n\n# è®­ç»ƒé—®é¢˜\n\n1. ftfy å’Œ regex\n\nç›´æ¥å®‰è£…ï¼š`pip install ftfy` å’Œ `pip install regex`\n\n![ftfy](ClimateNeRFç¯å¢ƒé…ç½®/ftfy.png)\n\n![regex](ClimateNeRFç¯å¢ƒé…ç½®/regex.png)\n\n\n2. cuda å¤´æ–‡ä»¶ï¼ˆè¿™ä¸ªæ˜¯åœ¨å¦ä¸€ä¸ªæœåŠ¡å™¨ä¸Šå‘ç”Ÿçš„é—®é¢˜ï¼Œä¹Ÿè®°å½•ä¸€ä¸‹ï¼‰\n\ntrain è·‘èµ·æ¥åå‡ºç°äº†è¿™æ ·çš„é”™è¯¯ï¼Œé”™è¯¯çš„åŸå› æ˜¯æ‰¾ä¸åˆ° cuda çš„æŸä¸ªå¤´æ–‡ä»¶ã€‚è¿™æ˜¯ç”±äºä½œè€…æŠŠå¤´æ–‡ä»¶è·¯å¾„å†™æ­»äº†ï¼Œä½†æ˜¯æˆ‘ä»¬çš„æœåŠ¡å™¨ç¯å¢ƒè·¯å¾„ä¸ä¸€æ ·ã€‚\n\n![head file](ClimateNeRFç¯å¢ƒé…ç½®/head_file.png)\n\nç¿»ä¸‹ conda ç¯å¢ƒï¼Œå‘ç°è¯¥å¤´æ–‡ä»¶åœ¨è¿™ä¸ªè·¯å¾„ï¼š`/home/haoq_lab/cse30013594/miniconda3/envs/climatenerf/include/math_functions.h`\n\nä¿®æ”¹ `./datasets/stylize_tools/smooth_filter.py` æ–‡ä»¶\n\n![ç¬¬ä¸€å¤„](ClimateNeRFç¯å¢ƒé…ç½®/smooth_filter1.png)\n\n![ç¬¬äºŒå¤„](ClimateNeRFç¯å¢ƒé…ç½®/smooth_filter2.png)\n\nç„¶åå°±èƒ½æ­£å¸¸è·‘äº†ã€‚\n\n# å‚è€ƒèµ„æ–™\n\n- [Climate_NeRF](https://github.com/y-u-a-n-l-i/Climate_NeRF)\n- [ä¸æ»‘å®‰è£…pydensecrfåº“](https://zhuanlan.zhihu.com/p/657765799?utm_id=0)\n- [cupy å®‰è£…æ—¶æç¤ºæŠ¥é”™ Exception: Your CUDA environment is invalid.](https://blog.csdn.net/xueying_2017/article/details/116045080)","tags":["é…ç½®","æ·±åº¦å­¦ä¹ "],"categories":["computer"]},{"title":"Paxosç®—æ³•","url":"/archives/1235/","content":"\n# ç®€ä»‹\n\nPaxos ç®—æ³•æ˜¯ Leslie Lamport åœ¨ 1990 å¹´æå‡ºçš„ä¸€ç§åˆ†å¸ƒå¼ç³»ç»Ÿå…±è¯†ç®—æ³•ï¼Œä¹Ÿæ˜¯ç¬¬ä¸€ä¸ªè¢«è¯æ˜å®Œå¤‡çš„åˆ†å¸ƒå¼ç³»ç»Ÿå…±è¯†ç®—æ³•ï¼ˆå‰ææ˜¯ä¸å­˜åœ¨æ‹œå åº­å°†å†›é—®é¢˜ï¼Œä¹Ÿå³æ— æ¶æ„èŠ‚ç‚¹ï¼‰ã€‚Paxos ç®—æ³•ä¸»è¦åŒ…æ‹¬ 2 ä¸ªéƒ¨åˆ†ï¼š\n\n- Basic Paxos ç®—æ³•ï¼šå¤šèŠ‚ç‚¹ä¹‹é—´å¦‚ä½•å°±æŸä¸ªå€¼ï¼ˆææ¡ˆ valueï¼‰è¾¾æˆå…±è¯†ï¼›\n- Multi-Paxos æ€æƒ³ï¼šæ‰§è¡Œå¤šä¸ª Basic Paxos å®ä¾‹ï¼Œå°±ä¸€ç³»åˆ—å€¼è¾¾æˆå…±è¯†ã€‚\n\n# Basic Paxos Algorithm\n\nBasic Paxos ä¸­å­˜åœ¨ 3 ä¸ªé‡è¦çš„è§’è‰²ï¼š\n\n1. Proposerï¼ˆæè®®è€…ï¼‰ï¼šä¹Ÿå¯ç§°ä½œ Coordinatorï¼ˆåè°ƒè€…ï¼‰ã€‚è´Ÿè´£æ¥æ”¶ client ç«¯çš„è¯·æ±‚å¹¶å‘èµ·ææ¡ˆã€‚ææ¡ˆä¿¡æ¯é€šå¸¸åŒ…æ‹¬ææ¡ˆç¼–å·ï¼ˆProposal IDï¼‰å’Œæè®®çš„å€¼ï¼ˆValueï¼‰ã€‚\n2. Acceptorï¼ˆæ¥å—è€…ï¼‰ï¼šä¹Ÿå¯ç§°ä½œ Voterï¼ˆæŠ•ç¥¨å‘˜ï¼‰ã€‚è´Ÿè´£å¯¹ Proposer çš„ææ¡ˆè¿›è¡ŒæŠ•ç¥¨ï¼ŒåŒæ—¶éœ€è¦è®°ä½è‡ªå·±çš„æŠ•ç¥¨å†å²ã€‚\n3. Learnerï¼ˆå­¦ä¹ è€…ï¼‰ï¼šå¦‚æœæœ‰è¶…è¿‡åŠæ•°çš„ Acceptor å¯¹æŸä¸ªæè®®è¾¾æˆäº†å…±è¯†ï¼Œé‚£ä¹ˆ Learner å°±éœ€è¦æ¥å—è¿™ä¸ªæè®®ï¼Œå¹¶å°±è¯¥æè®®åšè¿ç®—ï¼Œç„¶åå°†è¿ç®—ç»“æœè¿”å› clientã€‚\n\n![Paxosè§’è‰²](Paxosç®—æ³•/paxos.png)\n\nä¸ºäº†å‡å°‘å®ç°è¯¥ç®—æ³•æ‰€éœ€çš„èŠ‚ç‚¹æ•°ï¼Œä¸€ä¸ªèŠ‚ç‚¹å¯ä»¥èº«å…¼å¤šä¸ªè§’è‰²ã€‚å¹¶ä¸”ï¼Œä¸€ä¸ªææ¡ˆè¢«é€‰å®šéœ€è¦è¢«åŠæ•°ä»¥ä¸Šçš„ Acceptor æ¥å—ã€‚è¿™æ ·çš„è¯ï¼ŒBasic Paxos ç®—æ³•è¿˜å…·å¤‡å®¹é”™æ€§ï¼Œåœ¨å°‘äºä¸€åŠçš„èŠ‚ç‚¹å‡ºç°æ•…éšœæ—¶ï¼Œé›†ç¾¤ä»èƒ½æ­£å¸¸å·¥ä½œã€‚\n\n# Multi-Paxos thought\n\nBasic Paxos ç®—æ³•çš„ä»…èƒ½å°±å•ä¸ªå€¼è¾¾æˆå…±è¯†ï¼Œä¸ºäº†èƒ½å¤Ÿå¯¹ä¸€ç³»åˆ—çš„å€¼è¾¾æˆå…±è¯†ï¼Œæˆ‘ä»¬éœ€è¦ç”¨åˆ° Multi-Paxos æ€æƒ³ã€‚\n\n> Multi-Paxos åªæ˜¯ä¸€ç§æ€æƒ³ï¼Œè¿™ç§æ€æƒ³çš„æ ¸å¿ƒå°±æ˜¯é€šè¿‡å¤šä¸ª Basic Paxos å®ä¾‹å°±ä¸€ç³»åˆ—å€¼è¾¾æˆå…±è¯†ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒBasic Paxos æ˜¯ Multi-Paxos æ€æƒ³çš„æ ¸å¿ƒï¼ŒMulti-Paxos å°±æ˜¯å¤šæ‰§è¡Œå‡ æ¬¡ Basic Paxosã€‚\n\n# å‚è€ƒèµ„æ–™\n\n- [Paxosç®—æ³•](https://zh.wikipedia.org/wiki/Paxos%E7%AE%97%E6%B3%95#)","tags":["åˆ†å¸ƒå¼"],"categories":["computer"]},{"title":"å…±è¯†ç®—æ³•","url":"/archives/2533/","content":"\nå…±è¯†ç®—æ³•çš„ä½œç”¨æ˜¯è®©åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„å¤šä¸ªèŠ‚ç‚¹ä¹‹é—´å¯¹æŸä¸ªææ¡ˆï¼ˆProposalï¼‰è¾¾æˆä¸€è‡´çš„çœ‹æ³•ã€‚ææ¡ˆçš„å«ä¹‰åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ååˆ†å®½æ³›ï¼Œåƒå“ªä¸€ä¸ªèŠ‚ç‚¹æ˜¯ Leader èŠ‚ç‚¹ã€å¤šä¸ªäº‹ä»¶å‘ç”Ÿçš„é¡ºåºç­‰ç­‰éƒ½å¯ä»¥æ˜¯ä¸€ä¸ªææ¡ˆã€‚\n\né’ˆå¯¹æ²¡æœ‰æ¶æ„èŠ‚ç‚¹çš„æƒ…å†µï¼Œå½“å‰æœ€å¸¸ç”¨çš„ä¸€äº›å…±è¯†ç®—æ³•éƒ½æ˜¯åŸºäº **Paxos** ç®—æ³•æ”¹è¿›çš„ï¼Œå¦‚ **Raft** ç®—æ³•ã€**ZAB** åè®®ã€**Fast Paxos** ç®—æ³•ã€‚\n\né’ˆå¯¹å­˜åœ¨æ¶æ„èŠ‚ç‚¹çš„æƒ…å†µï¼Œä¸€èˆ¬ä½¿ç”¨çš„æ˜¯**å·¥ä½œé‡è¯æ˜ï¼ˆPoWï¼ŒProof-of-Workï¼‰**ã€**æƒç›Šè¯æ˜ï¼ˆPoSï¼ŒProof-of-Stakeï¼‰**ç­‰å…±è¯†ç®—æ³•ã€‚å…¸å‹åº”ç”¨å°±æ˜¯åŒºå—é“¾ã€‚\n\n> åŒºå—é“¾ç³»ç»Ÿä¸­ä½¿ç”¨çš„å…±è¯†ç®—æ³•éœ€è¦è§£å†³çš„æ ¸å¿ƒé—®é¢˜æ˜¯**æ‹œå åº­å°†å†›é—®é¢˜**ã€‚\n\n<!-- more -->\n\n# ç®—æ³•\n\n{% post_link Paxosç®—æ³• %}\n\n# å‚è€ƒèµ„æ–™\n\n- [åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„ä¸€è‡´æ€§ä¸å…±è¯†ç®—æ³•](http://www.xuyasong.com/?p=1970#i)","tags":["åˆ†å¸ƒå¼"],"categories":["computer"]},{"title":"CAP & BASE","url":"/archives/55509/","content":"\n# CAP\n\n## Definition\n\nCAP ä¹Ÿå³ Consistencyï¼ˆä¸€è‡´æ€§ï¼‰ã€Availabilityï¼ˆå¯ç”¨æ€§ï¼‰ã€Partition Toleranceï¼ˆåˆ†åŒºå®¹é”™æ€§ï¼‰\n\n[]()\n\nCAP Theorem æŒ‡å‡ºï¼Œå¯¹äºä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿæ¥è¯´ï¼Œå½“è®¾è®¡è¯»å†™æ“ä½œæ—¶ï¼Œåªèƒ½åŒæ—¶æ»¡è¶³ä»¥ä¸‹ä¸‰ç‚¹ä¸­çš„ä¸¤ä¸ªï¼š\n\n- Consistencyï¼ˆä¸€è‡´æ€§ï¼‰ï¼šæ‰€æœ‰èŠ‚ç‚¹çš„æ•°æ®å‰¯æœ¬çš„å†…å®¹ç›¸åŒï¼›\n- Availabilityï¼ˆå¯ç”¨æ€§ï¼‰ï¼šéæ•…éšœçš„èŠ‚ç‚¹åœ¨åˆç†çš„æ—¶é—´å†…è¿”å›åˆç†çš„å“åº”ï¼›\n- Partition Toleranceï¼ˆåˆ†åŒºå®¹é”™æ€§ï¼‰ï¼šåˆ†å¸ƒå¼ç³»ç»Ÿä¸­éƒ¨åˆ†åˆ†åŒºå‡ºç°æ•…éšœæ—¶ï¼ˆä¹Ÿå³å‡ºç°ç½‘ç»œåˆ†åŒºï¼‰ï¼Œæ•´ä¸ªç³»ç»Ÿä»ç„¶èƒ½å¤Ÿå¯¹å¤–æä¾›æœåŠ¡ã€‚\n\n> Network Partitionï¼ˆç½‘ç»œåˆ†åŒºï¼‰\nåˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œå¤šä¸ªèŠ‚ç‚¹ä¹‹é—´çš„ç½‘ç»œæœ¬æ¥æ˜¯è¿é€šçš„ï¼Œä½†æ˜¯ç”±äºæŸäº›æ•…éšœï¼ŒæŸäº›èŠ‚ç‚¹ä¹‹é—´ä¸è¿é€šäº†ï¼Œæ•´ä¸ªç½‘ç»œå°±åˆ†æˆäº†å‡ å—åŒºåŸŸï¼Œè¿™å°±æ˜¯ç½‘ç»œåˆ†åŒº\n> \n\n## Not 2 in 3\n\nå½“å‘ç”Ÿç½‘ç»œåˆ†åŒºçš„æ—¶å€™ï¼Œå¦‚æœæˆ‘ä»¬è¦ç»§ç»­æœåŠ¡ï¼Œé‚£ä¹ˆå¼ºä¸€è‡´æ€§å’Œå¯ç”¨æ€§åªèƒ½ 2 é€‰ 1ã€‚ä¹Ÿå°±æ˜¯è¯´å½“ç½‘ç»œåˆ†åŒºä¹‹åï¼ŒP æ˜¯å‰æï¼Œå†³å®šäº† P ä¹‹åæ‰æœ‰ C å’Œ A çš„é€‰æ‹©ï¼Œå³åˆ†åŒºå®¹é”™æ€§ï¼ˆPartition toleranceï¼‰æˆ‘ä»¬æ˜¯å¿…é¡»è¦å®ç°çš„ã€‚\n\nç®€è€Œè¨€ä¹‹ï¼š**CAP ç†è®ºä¸­ P æ˜¯ä¸€å®šè¦æ»¡è¶³çš„ï¼Œåœ¨æ­¤åŸºç¡€ä¸Šï¼Œåªèƒ½å†æ»¡è¶³ C æˆ– Aã€‚**\n\nå› æ­¤ï¼Œ**åˆ†å¸ƒå¼ç³»ç»Ÿç†è®ºä¸Šä¸å¯èƒ½é€‰æ‹© CA æ¶æ„ï¼Œåªèƒ½é€‰æ‹© CP æˆ– AP æ¶æ„ã€‚**å¦‚ ZooKeeperã€HBase å°±æ˜¯ CP æ¶æ„ï¼ŒCassandraã€Eureka å°±æ˜¯ AP æ¶æ„ï¼ŒNacos ä¸ä»…æ”¯æŒ CP æ¶æ„ä¹Ÿæ”¯æŒ AP æ¶æ„ã€‚\n\n**é€‰æ‹© CP è¿˜æ˜¯ AP çš„å…³é”®åœ¨äºå½“å‰çš„ä¸šåŠ¡åœºæ™¯ï¼Œæ²¡æœ‰å®šè®ºã€‚**\n\n> ä¸ºä»€ä¹ˆä¸å¯èƒ½é€‰æ‹© CA æ¶æ„ï¼Ÿ\nå½“ç³»ç»Ÿå‡ºç°ç½‘ç»œåˆ†åŒºåï¼ŒæŸä¸ªèŠ‚ç‚¹åœ¨è¿›è¡Œå†™æ“ä½œï¼Œè‹¥ä¸ºäº†ä¿è¯ Cï¼Œå°±å¿…é¡»ç¦æ­¢å…¶ä»–èŠ‚ç‚¹çš„è¯»å†™æ“ä½œï¼Œè¿™å°±è¿èƒŒäº† Aï¼›è‹¥ä¸ºäº†ä¿è¯ Aï¼Œå…¶ä»–èŠ‚ç‚¹ä¹Ÿèƒ½æ­£å¸¸è¯»å†™ï¼Œå°±è¿èƒŒäº† Cã€‚\n> \n\n**å¦‚æœç½‘ç»œåˆ†åŒºæ­£å¸¸çš„è¯ï¼Œä¹Ÿå³æ— éœ€ä¿è¯ P çš„æ—¶å€™ï¼ŒC å’Œ A èƒ½åŒæ—¶ä¿è¯ã€‚**å› æ­¤ï¼Œ**å¦‚æœç³»ç»Ÿå‘ç”Ÿâ€œåˆ†åŒºâ€ï¼Œæˆ‘ä»¬è¦è€ƒè™‘é€‰æ‹© CP è¿˜æ˜¯ APã€‚å¦‚æœç³»ç»Ÿæ²¡æœ‰å‘ç”Ÿâ€œåˆ†åŒºâ€çš„è¯ï¼Œæˆ‘ä»¬è¦æ€è€ƒå¦‚ä½•ä¿è¯ CA ã€‚**\n\n# BASE\n\n## Definition\n\nBASE ä¹Ÿå³ Basically Availableï¼ˆåŸºæœ¬å¯ç”¨ï¼‰ã€Soft-stateï¼ˆè½¯çŠ¶æ€ï¼‰å’Œ Eventually Consistentï¼ˆæœ€ç»ˆä¸€è‡´ï¼‰ã€‚\n\nBASE ç†è®ºæ˜¯å¯¹ CAP ä¸­çš„ C å’Œ A æƒè¡¡çš„ç»“æœã€‚\n\n## æ ¸å¿ƒæ€æƒ³\n\nå³ä¾¿æ— æ³•åšåˆ°å¼ºä¸€è‡´æ€§ï¼Œæ¯ä¸ªåº”ç”¨éƒ½å¯ä»¥æ ¹æ®è‡ªèº«ç‰¹ç‚¹ä»¥é€‚å½“æ–¹å¼æ¥æ—¶ç³»ç»Ÿè¾¾åˆ°æœ€ç»ˆä¸€è‡´æ€§ã€‚\n\n> ä¹Ÿå°±æ˜¯è¯´ä»¥ç‰ºç‰²æ•°æ®çš„ä¸€è‡´æ€§æ¥æ»¡è¶³ç³»ç»Ÿçš„å¯ç”¨æ€§ï¼Œå½“ç³»ç»Ÿä¸­çš„éƒ¨åˆ†æ•°æ®ä¸å¯ç”¨æˆ–è€…ä¸ä¸€è‡´æ—¶ï¼Œä»éœ€è¦ä¿æŒç³»ç»Ÿæ•´ä½“ä¸»è¦å¯ç”¨ã€‚\n> \n\nBASE ç†è®ºæœ¬è´¨ä¸Šæ˜¯å¯¹ CAP çš„å»¶ä¼¸å’Œè¡¥å……ï¼Œæ›´å…·ä½“åœ°è¯´ï¼Œæ˜¯å¯¹ CAP ä¸­ AP æ¶æ„çš„è¡¥å……ã€‚AP æ¶æ„æ˜¯åœ¨ç³»ç»Ÿå‘ç”Ÿåˆ†åŒºçš„æ—¶å€™æ”¾å¼ƒ Cï¼Œè€Œä¸æ˜¯æ°¸è¿œæ”¾å¼ƒ Cã€‚åœ¨åˆ†åŒºæ•…éšœæ¢å¤åï¼Œç³»ç»Ÿåº”è¯¥è¾¾åˆ°æœ€ç»ˆä¸€è‡´æ€§ï¼Œè¿™ä¸€ç‚¹å°±æ˜¯ BASE ç†è®ºå»¶ä¼¸çš„åœ°æ–¹ã€‚\n\n## BASE ä¸‰è¦ç´ \n\n[]()\n\n### åŸºæœ¬å¯ç”¨\n\nåˆ†å¸ƒå¼ç³»ç»Ÿåœ¨å‡ºç°ä¸å¯é¢„çŸ¥çš„æ•…éšœçš„æ—¶å€™ï¼Œå…è®¸æŸå¤±éƒ¨åˆ†å¯ç”¨æ€§ï¼Œä½†ä¸ç­‰ä»·äºç³»ç»Ÿä¸å¯ç”¨ã€‚\n\n- å“åº”æ—¶é—´ä¸Šçš„æŸå¤±ï¼šæ­£å¸¸æƒ…å†µä¸‹ï¼Œå¤„ç†ç”¨æˆ·è¯·æ±‚éœ€è¦ 0.5s è¿”å›ç»“æœï¼Œä½†æ˜¯ç”±äºç³»ç»Ÿå‡ºç°æ•…éšœï¼Œå¤„ç†ç”¨æˆ·è¯·æ±‚çš„æ—¶é—´å˜ä¸º 3sã€‚\n- ç³»ç»ŸåŠŸèƒ½ä¸Šçš„æŸå¤±ï¼šæ­£å¸¸æƒ…å†µä¸‹ï¼Œç”¨æˆ·å¯ä»¥ä½¿ç”¨ç³»ç»Ÿçš„å…¨éƒ¨åŠŸèƒ½ï¼Œä½†æ˜¯ç”±äºç³»ç»Ÿè®¿é—®é‡çªç„¶å‰§å¢ï¼Œç³»ç»Ÿçš„éƒ¨åˆ†éæ ¸å¿ƒåŠŸèƒ½æ— æ³•ä½¿ç”¨ã€‚\n\n### è½¯çŠ¶æ€\n\nå…è®¸ç³»ç»Ÿä¸­çš„æ•°æ®å­˜åœ¨ä¸­é—´çŠ¶æ€ï¼ˆä¹Ÿå³åˆå…ˆäº†æ•°æ®ä¸ä¸€è‡´ï¼‰ï¼Œå¹¶è®¤ä¸ºè¯¥ä¸­é—´çŠ¶æ€çš„å­˜åœ¨ä¸ä¼šå½±å“ç³»ç»Ÿçš„æ•´ä½“å¯ç”¨æ€§ï¼Œä¹Ÿå³å…è®¸ç³»ç»Ÿçš„ä¸åŒèŠ‚ç‚¹çš„æ•°æ®å‰¯æœ¬ä¹‹é—´è¿›è¡Œæ•°æ®åŒæ­¥çš„è¿‡ç¨‹ä¸­å­˜åœ¨å»¶æ—¶ã€‚\n\n### æœ€ç»ˆä¸€è‡´æ€§\n\nç³»ç»Ÿä¸­æ‰€æœ‰çš„æ•°æ®å‰¯æœ¬ï¼Œåœ¨ç»è¿‡ä¸€æ®µæ—¶é—´çš„åŒæ­¥åï¼Œæœ€ç»ˆèƒ½è¾¾åˆ°ä¸€ä¸ªä¸€è‡´çš„çŠ¶æ€ã€‚ä¸éœ€è¦å®æ—¶ä¿è¯æ•°æ®çš„å¼ºä¸€è‡´æ€§ã€‚\n\n> åˆ†å¸ƒå¼ä¸€è‡´æ€§çš„ 3 ä¸ªçº§åˆ«ï¼š\n1. å¼ºä¸€è‡´æ€§ï¼šèƒ½ç«‹åˆ»è¯»å‡ºå†™å…¥çš„æœ€æ–°æ•°æ®ï¼›\n2. å¼±ä¸€è‡´æ€§ï¼šä¸ä¸€å®šå¯ä»¥è¯»åˆ°æœ€æ–°å†™å…¥çš„æ•°æ®ï¼Œä¹Ÿä¸ä¿è¯å¤šä¹…ä¹‹åèƒ½è¯»åˆ°æœ€æ–°çš„æ•°æ®ï¼Œåªæ˜¯å°½é‡ä¿è¯æŸä¸ªæ—¶åˆ»è¾¾åˆ°æ•°æ®ä¸€è‡´çš„çŠ¶æ€ï¼›\n3. æœ€ç»ˆä¸€è‡´æ€§ï¼šç³»ç»Ÿä¿è¯åœ¨ä¸€å®šæ—¶é—´å†…è¾¾åˆ°æ•°æ®ä¸€è‡´çš„çŠ¶æ€ã€‚\n> \n\nå®ç°æœ€ç»ˆä¸€è‡´æ€§çš„å…·ä½“æ–¹å¼ï¼š\n\n- è¯»æ—¶ä¿®å¤ï¼šç³»ç»Ÿåœ¨è¯»å–æ•°æ®æ—¶ï¼Œæ£€æµ‹æ•°æ®çš„ä¸ä¸€è‡´ï¼Œå¹¶ä¿®å¤ã€‚\n- å†™æ—¶ä¿®å¤ï¼šç³»ç»Ÿåœ¨å†™å…¥æ•°æ®æ—¶ï¼Œæ£€æµ‹æ•°æ®çš„ä¸ä¸€è‡´ï¼Œå¹¶ä¿®å¤ã€‚\n- å¼‚æ­¥ä¿®å¤ï¼šç³»ç»Ÿé€šè¿‡å®šæ—¶å¯¹è´¦æ¥æ£€æµ‹å‰¯æœ¬æ•°æ®çš„ä¸€è‡´æ€§ï¼Œå¹¶ä¿®å¤ã€‚\n\nå†™æ—¶ä¿®å¤çš„æ€§èƒ½æ¶ˆè€—è¾ƒä½ã€‚\n\n# æ€»ç»“\n\n**ACID æ˜¯æ•°æ®åº“äº‹åŠ¡å®Œæ•´æ€§çš„ç†è®ºï¼ŒCAP æ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿè®¾è®¡ç†è®ºï¼ŒBASE æ˜¯ CAP ç†è®ºä¸­ AP æ¶æ„çš„å»¶ä¼¸ã€‚**","tags":["åˆ†å¸ƒå¼"],"categories":["computer"]},{"title":"è®¤è¯ä¸æˆæƒ","url":"/archives/48844/","content":"\n# è®¤è¯ä¸æˆæƒ\n\n## è®¤è¯ï¼ˆAuthenticationï¼‰\n\nç”¨æˆ·è®¤è¯ï¼Œå°±æ˜¯éªŒè¯æ­¤ç”¨æˆ·çš„èº«ä»½ï¼Œè§£å†³çš„æ˜¯â€œæˆ‘æ˜¯è°â€çš„é—®é¢˜ã€‚ä¹Ÿå°±æ˜¯ä»ç”¨æˆ·è¯·æ±‚ä¿¡æ¯ä¸­è·å–ç”¨æˆ·ä¿¡æ¯çš„è¿‡ç¨‹ã€‚\n\n> åœ¨ç™»å½•æ—¶ï¼Œè¾“å…¥ç”¨æˆ·åå¯†ç ï¼Œç³»ç»Ÿåˆ¤æ–­ç”¨æˆ·åä¸å¯†ç æ˜¯å¦åœ¨å·²æœ‰çš„ç”¨æˆ·å†…å¹¶ç»™å‡ºç»“æœåé¦ˆï¼Œè¿™ä¸ªè¿‡ç¨‹å°±æ˜¯ç”¨æˆ·è®¤è¯ã€‚\n> \n> ç”¨æˆ·å+å¯†ç ç™»å½•ï¼Œæ‰‹æœºã€é‚®ç®±éªŒè¯ç ï¼Œç¬¬ä¸‰æ–¹ç™»å½•ç­‰éƒ½å±äºç”¨æˆ·è®¤è¯çš„ä¸€ç§ã€‚\n\n## æˆæƒï¼ˆAuthorizationï¼‰\n\nç”¨æˆ·æˆæƒï¼Œå°±æ˜¯æˆäºˆç”¨æˆ·æƒé™ï¼Œä½¿å…¶èƒ½å¤Ÿè¿›è¡Œåç»­çš„æŸäº›è®¿é—®å’Œæ“ä½œï¼Œè§£å†³çš„æ˜¯â€œæˆ‘èƒ½å¹²å“ªäº›äº‹â€çš„é—®é¢˜ã€‚ä¹Ÿå°±æ˜¯ä»å¾—åˆ°ç”¨æˆ·ä¿¡æ¯åˆ°æˆäºˆç”¨æˆ·æƒé™çš„è¿‡ç¨‹ã€‚\n\n> æ¯å¤©ä¹˜ç”µæ¢¯åˆ·å¡ï¼Œåˆ·å¡çš„è¿‡ç¨‹å°±æ˜¯æˆæƒï¼Œæˆäºˆäº†æˆ‘ä»¬è®¿é—®æŸæŸå±‚çš„æƒé™ã€‚å°±ç›¸å½“äºæ˜¯æŸä¸ªäººæˆ–è€…æŸä¸ªæœºæ„èµ‹äºˆæŸäººå¹²æŸäº‹çš„æƒé™çš„è¿‡ç¨‹ã€‚\n\n| è§’åº¦ | Authentication | Authorization |\n| --- | --- | --- |\n| ä½œç”¨ | ç¡®è®¤ç”¨æˆ·çš„èº«ä»½ï¼Œä»¥æˆäºˆå¯¹ç³»ç»Ÿçš„è®¿é—®æƒé™ | æˆæƒç”¨æˆ·ä»¥è®¿é—®èµ„æºçš„æƒé™ |\n| è¿‡ç¨‹ | éªŒè¯ç”¨æˆ·å‡­æ®ä»¥è·å¾—ç”¨æˆ·çš„è®¿é—®æƒé™ | éªŒè¯ç”¨æˆ·æ˜¯å¦æœ‰æƒè®¿é—® |\n| èŒƒå›´ | åˆ¤æ–­ç”¨æˆ·æ˜¯å¦ä¼ªç§° | åˆ¤æ–­ç”¨æˆ·å¯å¦è®¿é—®å†…å®¹ |\n| æ—¶é—´ | å§‹ç»ˆæ˜¯ç¬¬ä¸€æ­¥ | æˆæƒåœ¨è®¤è¯æˆåŠŸåå®Œæˆ |\n\n# Cookie\n\n\n\n","tags":["è½¯ä»¶å¼€å‘","æƒé™ç®¡ç†"],"categories":["computer"]},{"title":"URLå»é‡ç­–ç•¥ï¼ˆå¸ƒéš†è¿‡æ»¤å™¨ï¼‰","url":"/archives/36029/","content":"\nåœ¨ç½‘ç»œçˆ¬è™«çˆ¬å–æ•°æ®æ—¶éœ€è¦è§£å†³æµ·é‡æ•°æ®çš„å­˜åœ¨æ€§é—®é¢˜ï¼Œä¹Ÿå³åˆ¤æ–­ç»™å®šæ•°æ®æ˜¯å¦å­˜åœ¨ã€‚æ¯”å¦‚åˆ¤æ–­ä¸€ä¸ªæ•°å­—æ˜¯å¦å­˜åœ¨äºåŒ…å«å¤§é‡æ•°å­—çš„æ•°å­—é›†ä¸­ï¼ˆæ•°å­—é›†å¾ˆå¤§ï¼Œä¸Šäº¿ï¼‰ã€ é˜²æ­¢ç¼“å­˜ç©¿é€ï¼ˆåˆ¤æ–­è¯·æ±‚çš„æ•°æ®æ˜¯å¦æœ‰æ•ˆé¿å…ç›´æ¥ç»•è¿‡ç¼“å­˜è¯·æ±‚æ•°æ®åº“ï¼‰ã€é‚®ç®±çš„åƒåœ¾é‚®ä»¶è¿‡æ»¤ï¼ˆåˆ¤æ–­ä¸€ä¸ªé‚®ä»¶åœ°å€æ˜¯å¦åœ¨åƒåœ¾é‚®ä»¶åˆ—è¡¨ä¸­ï¼‰ã€é»‘åå•åŠŸèƒ½ï¼ˆåˆ¤æ–­ä¸€ä¸ªIPåœ°å€æˆ–æ‰‹æœºå·ç æ˜¯å¦åœ¨é»‘åå•ä¸­ï¼‰ç­‰ç­‰ã€‚\n\n<!-- more -->\n\n# æœ‰é—®é¢˜çš„å»é‡ç­–ç•¥\n\n| ç­–ç•¥                                                                 | é—®é¢˜                                                                                                                                                             |\n| -------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| åœ¨æ•°æ®åº“ä¸­åˆ›å»ºå­—æ®µçš„ UNIQUE å±æ€§                                     | åœ¨å¤šæ¬¡æ•°æ®åº“çš„ UNIQUE æŠ¥é”™ä¹‹åï¼Œç¨‹åºå¯èƒ½ä¼šç›´æ¥å´©æºƒ                                                                                                               |\n| åœ¨æ•°æ®åº“ä¸­åˆ›å»ºä¸€ä¸ªå”¯ä¸€çš„ç´¢å¼•ï¼Œåœ¨æ’å…¥æ•°æ®ä¹‹å‰æ£€æŸ¥å¾…æ’å…¥çš„æ•°æ®æ˜¯å¦å­˜åœ¨ | å¦‚æœåœ¨æ¯ä¸€æ¬¡æ’å…¥æ•°æ®ä¹‹å‰éƒ½å»æ£€æŸ¥å¾…æ’å…¥çš„æ•°æ®æ˜¯å¦å­˜åœ¨ï¼Œéœ€è¦é¢‘ç¹åœ°å¯¹æ•°æ®åº“è¿›è¡Œ exists æŸ¥è¯¢ï¼Œå½“ç³»ç»Ÿå¹¶å‘é‡å¾ˆé«˜æ—¶ï¼Œæ•°æ®åº“æ˜¯å¾ˆéš¾æ‰›ä½å‹åŠ›çš„ï¼Œè€Œä¸”ä¹ŸåŠ¿å¿…ä¼šå½±å“ç¨‹åºçš„æ•ˆç‡ |\n| ä½¿ç”¨ Redis ç¼“å­˜                                                      | å°†æµ·é‡çš„å†å²è®°å½•å…¨éƒ¨ç¼“å­˜èµ·æ¥ï¼Œå¯¹å­˜å‚¨ç©ºé—´çš„è´Ÿæ‹…éå¸¸å¤§                                                                                                             |\n| ä½¿ç”¨ Set æˆ– Map ä¿å­˜æ•°æ®ï¼Œç¡®ä¿å”¯ä¸€                                   | å®¹æ˜“ OOMï¼Œä»å¾…è®¿é—®é˜Ÿåˆ—ä¸­è§£æå‡ºæ¥çš„URLè¦è¿œæ¯”å®ƒæœ¬èº«è¦å¤šå¾—å¤šï¼Œç¨‹åºå ç”¨çš„å†…å­˜å¤ªå¤§äº†                                                                                  |\n\n# å¸ƒéš†è¿‡æ»¤å™¨\n\n## ä¼˜ç¼ºç‚¹\n\nBloom Filter æ˜¯ç”± Bloom åœ¨1970å¹´æå‡ºçš„ä¸€ç§å¤šå“ˆå¸Œå‡½æ•°æ˜ å°„çš„å¿«é€ŸæŸ¥æ‰¾ç®—æ³•ã€‚é€šå¸¸åº”ç”¨åœ¨ä¸€äº›éœ€è¦å¿«é€Ÿåˆ¤æ–­æŸä¸ªå…ƒç´ æ˜¯å¦å±äºé›†åˆï¼Œä½†æ˜¯å¹¶ä¸ä¸¥æ ¼è¦æ±‚100%æ­£ç¡®çš„åœºåˆã€‚\n\n- ä¼˜ç‚¹ï¼šå ç”¨ç©ºé—´å°ï¼Œæ’å…¥å’ŒæŸ¥è¯¢çš„æ•ˆç‡é«˜ï¼Œå³ä»¥æ­£ç¡®ç‡æ¢ç©ºé—´å’Œæ—¶é—´ã€‚\n- ç¼ºç‚¹ï¼š\n    - æœ‰ä¸€å®šçš„è¯¯åˆ¤ç‡ï¼Œä¸”æ·»åŠ åˆ°é›†åˆä¸­çš„å…ƒç´ è¶Šå¤šï¼Œè¯¯æŠ¥çš„å¯èƒ½æ€§å°±è¶Šå¤§ï¼š\n        - å½“å¸ƒéš†è¿‡æ»¤å™¨è¯´æŸä¸ªå€¼å­˜åœ¨æ—¶ï¼Œè¿™ä¸ªå€¼å¯èƒ½ä¸å­˜åœ¨\n        - å½“å¸ƒéš†è¿‡æ»¤å™¨è¯´æŸä¸ªå€¼ä¸å­˜åœ¨æ—¶ï¼Œè¿™ä¸ªå€¼ä¸€å®šä¸å­˜åœ¨\n    - å­˜æ”¾åœ¨å¸ƒéš†è¿‡æ»¤å™¨çš„æ•°æ®ä¸å®¹æ˜“åˆ é™¤\n\n## åŸç†\n\nå¸ƒéš†è¿‡æ»¤å™¨å®é™…å°±æ˜¯ä¸€ç³»åˆ—çš„ Hash å‡½æ•° + BitSet å®ç°çš„ã€‚\n\n### åˆå§‹åŒ–\n\nåˆ›å»ºä¸€ä¸ª m ä½çš„ BitSetï¼Œå…ˆå°†æ‰€æœ‰ä½éƒ½åˆå§‹åŒ–ä¸º 0ï¼Œç„¶åé€‰æ‹© k ä¸ªä¸åŒçš„å“ˆå¸Œå‡½æ•°ã€‚ç¬¬ i ä¸ªå“ˆå¸Œå‡½æ•°ä½œç”¨äºå­—ç¬¦ä¸² str çš„ç»“æœè®°ä¸º $H_i(str)$ï¼Œä¸” $H_i(str)$ çš„èŒƒå›´æ˜¯ $[0, m-1]$ã€‚\n\n### åŠ å…¥å­—ç¬¦ä¸²\n\nå¯¹äºå­—ç¬¦ä¸² strï¼Œåˆ†åˆ«è®¡ç®— $H_1(str), H_2(str), ..., H_k(str)$ï¼Œç„¶åå°† BitSet çš„ç¬¬ $H_1(str), H_2(str), ..., H_k(str)$ ä½è®¾ä¸º 1ã€‚\n\n![add string](URLå»é‡ç­–ç•¥ï¼ˆå¸ƒéš†è¿‡æ»¤å™¨ï¼‰/add_string.png)\n\n### æ£€æŸ¥å­—ç¬¦ä¸²\n\nå¯¹äºå­—ç¬¦ä¸² strï¼Œåˆ†åˆ«è®¡ç®— $H_1(str), H_2(str), ..., H_k(str)$ï¼Œç„¶åæ£€æŸ¥ BitSet çš„ç¬¬ $H_1(str), H_2(str), ..., H_k(str)$ ä½æ˜¯å¦ä¸º 1ï¼š\n\n- è‹¥å­˜åœ¨å…¶ä¸­ä»»ä½•ä¸€ä½ä¸ä¸º 1ï¼Œåˆ™å¯ä»¥åˆ¤å®š str ä¸€å®šæ²¡æœ‰è¢«è®°å½•è¿‡ï¼›\n- è‹¥å…¨éƒ¨ä½ä¸º 1ï¼Œåˆ™å¯ä»¥â€œè®¤ä¸ºâ€è¯¥ str å·²è¢«è®°å½•è¿‡ã€‚\n\nå®é™…ä¸Šï¼Œå³ä¾¿æ˜¯å…¨éƒ¨ä½éƒ½ä¸º 1ï¼Œä¹Ÿä¸èƒ½å®Œå…¨ç¡®å®šè¯¥å­—ç¬¦ä¸²è¢«è®°å½•è¿‡ï¼Œå› ä¸ºå¯èƒ½å­˜åœ¨å“ˆå¸Œç¢°æ’ã€‚è¿™ç§å°†å­—ç¬¦ä¸²åˆ’åˆ†é”™è¯¯çš„æƒ…å†µï¼Œç§°ä¸º false positiveã€‚\n\n### åˆ é™¤å­—ç¬¦ä¸²\n\nä¸€èˆ¬æ¥è¯´ï¼Œå­—ç¬¦ä¸²åŠ å…¥äº†å¸ƒéš†è¿‡æ»¤å™¨ä¹‹åå°±è¢«ä¸èƒ½åˆ é™¤äº†ï¼Œå› ä¸ºåˆ é™¤ä¼šå½±å“åˆ°å…¶ä»–å­—ç¬¦ä¸²ã€‚å®åœ¨éœ€è¦åˆ é™¤å­—ç¬¦ä¸²çš„å¯ä»¥ä½¿ç”¨ Counting bloomfilter(CBF)ï¼Œè¿™æ˜¯ä¸€ç§åŸºæœ¬ Bloom Filter çš„å˜ä½“ï¼ŒCBF å°†åŸºæœ¬ Bloom Filter æ¯ä¸€ä¸ª Bit æ”¹ä¸ºä¸€ä¸ªè®¡æ•°å™¨ï¼Œè¿™æ ·å°±å¯ä»¥å®ç°åˆ é™¤å­—ç¬¦ä¸²çš„åŠŸèƒ½äº†ã€‚\n\n## å“ˆå¸Œç¢°æ’é—®é¢˜\n\nå¸ƒéš†è¿‡æ»¤å™¨è¯¯åˆ¤çš„åŸå› æ˜¯å‡ºç°äº†å“ˆå¸Œç¢°æ’ï¼Œä½†å®é™…ä¸Šè¯¥æ¦‚ç‡éå¸¸å°ã€‚å‡è®¾ä¸Šè¿°ä½¿ç”¨çš„å“ˆå¸Œå‡½æ•°ä¸­ï¼Œ$H_i$ çš„ç¢°æ’æ¦‚ç‡ä¸º $p_i$ï¼Œåˆ™è¯¯åˆ¤æ¦‚ç‡ä¸º $\\prod_{i=1}^kp_i$ã€‚\n\n## å‚æ•°é€‰æ‹©\n\n- Hash å‡½æ•°\n    \n    å¥½çš„å“ˆå¸Œå‡½æ•°è¦èƒ½è¿‘ä¼¼ç­‰æ¦‚ç‡çš„å°†å­—ç¬¦ä¸²æ˜ å°„åˆ°å„ä¸ª bitã€‚é€‰æ‹© k ä¸ªä¸åŒçš„å“ˆå¸Œå‡½æ•°æ¯”è¾ƒéº»çƒ¦ï¼Œä¸€ç§ç®€å•çš„æ–¹æ³•æ˜¯é€‰æ‹©ä¸€ä¸ªå“ˆå¸Œå‡½æ•°ï¼Œç„¶åé€å…¥ k ä¸ªä¸åŒçš„å‚æ•°ã€‚\n    \n- BitSet å¤§å°\n    \n    å“ˆå¸Œå‡½æ•°ä¸ªæ•° kã€ä½æ•°ç»„å¤§å° mã€åŠ å…¥çš„å­—ç¬¦ä¸²æ•°é‡ n çš„å…³ç³»å¯ä»¥å‚è€ƒ [Bloom Filters - the math](http://pages.cs.wisc.edu/~cao/papers/summary-cache/node8.html)ã€‚è¯¥æ–‡çŒ®è¯æ˜äº†å¯¹äºç»™å®šçš„mã€nï¼Œå½“ $k = ln(2) \\cdot m/n$ æ—¶å‡ºé”™çš„æ¦‚ç‡æ˜¯æœ€å°çš„ã€‚åŒæ—¶è¯¥æ–‡çŒ®è¿˜ç»™å‡ºäº†ç‰¹å®šçš„ kï¼Œmï¼Œn çš„å‡ºé”™æ¦‚ç‡ã€‚ä¾‹å¦‚ï¼šå– k=10ï¼Œè®¾ m = 20n æ—¶ï¼Œfalse positive å‘ç”Ÿçš„æ¦‚ç‡æ˜¯ 0.0000889 ï¼Œè¿™ä¸ªæ¦‚ç‡åŸºæœ¬èƒ½æ»¡è¶³ç½‘ç»œçˆ¬è™«çš„éœ€æ±‚äº†ã€‚\n\n## å¸ƒéš†è¿‡æ»¤å™¨çš„åº”ç”¨\n\n1. ç½‘é¡µçˆ¬è™«å¯¹ URL å»é‡ï¼Œé¿å…çˆ¬å–ç›¸åŒçš„ URL åœ°å€ï¼›\n2. é‚®ç®±ç³»ç»Ÿçš„ä»æ•°åäº¿çš„åƒåœ¾é‚®ä»¶è¿‡æ»¤ä¸€äº›åƒåœ¾é‚®ä»¶å’Œé»‘åå•æŸ¥è¯¢\n3. é›†åˆé‡å¤å…ƒç´ çš„åˆ¤åˆ«\n4. Google Chrome ä½¿ç”¨å¸ƒéš†è¿‡æ»¤å™¨è¯†åˆ«æ¶æ„ URLï¼›\n5. æŸ¥è¯¢åŠ é€Ÿï¼ˆæ¯”å¦‚åŸºäºkey-valueçš„å­˜å‚¨ç³»ç»Ÿï¼‰\n6. æ–°é—»æ¨èç³»ç»Ÿï¼Œä½¿ç”¨å¸ƒéš†è¿‡æ»¤å™¨é¿å…æ¨èç»™ç”¨æˆ·å·²ç»è¯»è¿‡çš„æ–‡ç« ï¼›\n7. **redisç¼“å­˜ç©¿é€é—®é¢˜çš„è§£å†³**\n\næ‰€è°“çš„ç¼“å­˜ç©¿é€å°±æ˜¯æœåŠ¡è°ƒç”¨æ–¹æ¯æ¬¡éƒ½æ˜¯æŸ¥è¯¢ä¸åœ¨ç¼“å­˜ä¸­çš„æ•°æ®ï¼Œè¿™æ ·æ¯æ¬¡æœåŠ¡è°ƒç”¨éƒ½ä¼šåˆ°æ•°æ®åº“ä¸­è¿›è¡ŒæŸ¥è¯¢ï¼Œå¦‚æœè¿™ç±»è¯·æ±‚æ¯”è¾ƒå¤šçš„è¯ï¼Œå°±ä¼šå¯¼è‡´æ•°æ®åº“å‹åŠ›å¢å¤§ï¼Œè¿™æ ·ç¼“å­˜å°±å¤±å»äº†æ„ä¹‰ã€‚\n\næ‰€ä»¥å…ˆå°†éœ€è¦æŸ¥è¯¢çš„æ•°æ®å­˜å…¥å¸ƒéš†è¿‡æ»¤å™¨ï¼Œå¦‚æœå¸ƒéš†è¿‡æ»¤å™¨ä¸å­˜åœ¨åˆ™ç›´æ¥è¿”å›ï¼›å¦‚æœå¸ƒéš†è¿‡æ»¤å™¨å­˜åœ¨åˆ™å†ä»redisæŸ¥è¯¢ï¼ˆæ­¤æ—¶åªä¼šæœ‰å°‘æ•°è¯¯å·®æ•°æ®ï¼‰ï¼›å¦‚æœredisä¸­è¿˜ä¸å­˜åœ¨åˆ™æŸ¥è¯¢æ•°æ®åº“ï¼ˆæ­¤æ—¶çš„è®¿é—®å¾ˆå°äº†ï¼‰ï¼Œå¹¶åœ¨æŸ¥è¯¢æ•°æ®åº“å¯ä»¥é€šè¿‡å¹¶å‘åŠ é”å¤„ç†ï¼Œä¿è¯åªæœ‰ä¸€ä¸ªçº¿ç¨‹å¯ä»¥æŸ¥è¯¢è¯¥æ•°æ®å¹¶å†™å…¥ç¼“å­˜ï¼Œä»è€Œé¿å…äº†ç¼“å­˜ç©¿é€çš„é—®é¢˜ã€‚\n\n## Java å®ç°\n\n```java\nimport java.util.BitSet;\n\npublic class MyBloomFilter {\n    /**\n     * ä½æ•°ç»„çš„å¤§å°\n     */\n    private static final int DEFAULT_SIZE = 2 << 24;\n    /**\n     * é€šè¿‡è¿™ä¸ªæ•°ç»„å¯ä»¥åˆ›å»º 6 ä¸ªä¸åŒçš„å“ˆå¸Œå‡½æ•°\n     */\n    private static final int[] SEEDS = new int[]{3, 13, 46, 71, 91, 134};\n    /**\n     * ä½æ•°ç»„ã€‚æ•°ç»„ä¸­çš„å…ƒç´ åªèƒ½æ˜¯ 0 æˆ–è€… 1\n     */\n    private final BitSet bits = new BitSet(DEFAULT_SIZE);\n    /**\n     * å­˜æ”¾åŒ…å« hash å‡½æ•°çš„ç±»çš„æ•°ç»„\n     */\n    private final SimpleHash[] func = new SimpleHash[SEEDS.length];\n\n    /**\n     * åˆå§‹åŒ–å¤šä¸ªåŒ…å« hash å‡½æ•°çš„ç±»çš„æ•°ç»„ï¼Œæ¯ä¸ªç±»ä¸­çš„ hash å‡½æ•°éƒ½ä¸ä¸€æ ·\n     */\n    public MyBloomFilter() {\n        // åˆå§‹åŒ–å¤šä¸ªä¸åŒçš„ Hash å‡½æ•°\n        for (int i = 0; i < SEEDS.length; i++) {\n            func[i] = new SimpleHash(DEFAULT_SIZE, SEEDS[i]);\n        }\n    }\n\n    /**\n     * æ·»åŠ å…ƒç´ åˆ°ä½æ•°ç»„\n     */\n    public void add(Object value) {\n        for (SimpleHash f : func) {\n            bits.set(f.hash(value), true);\n        }\n    }\n\n    /**\n     * åˆ¤æ–­æŒ‡å®šå…ƒç´ æ˜¯å¦å­˜åœ¨äºä½æ•°ç»„\n     */\n    public boolean contains(Object value) {\n        boolean ret = true;\n        for (SimpleHash f : func) {\n            ret = ret && bits.get(f.hash(value));\n        }\n        return ret;\n    }\n\n    /**\n     * é™æ€å†…éƒ¨ç±»ã€‚ç”¨äº hash æ“ä½œ\n     */\n    public static class SimpleHash {\n        private final int cap;\n        private final int seed;\n\n        public SimpleHash(int cap, int seed) {\n            this.cap = cap;\n            this.seed = seed;\n        }\n\n        /**\n         * è®¡ç®— hash å€¼\n         */\n        public int hash(Object value) {\n            int h;\n            return (value == null) ? 0 : Math.abs(seed * (cap - 1) & ((h = value.hashCode()) ^ (h >>> 16)));\n        }\n    }\n}\n```\n\n# å‚è€ƒèµ„æ–™\n\n- [Bloom filter](https://en.wikipedia.org/wiki/Bloom_filter)\n- [ç½‘ç»œçˆ¬è™«ï¼šURLå»é‡ç­–ç•¥ä¹‹å¸ƒéš†è¿‡æ»¤å™¨(BloomFilter)çš„ä½¿ç”¨](https://blog.csdn.net/lemon_tree12138/article/details/47973715)\n- [BloomFilterâ€”â€”å¤§è§„æ¨¡æ•°æ®å¤„ç†åˆ©å™¨](https://www.cnblogs.com/heaad/archive/2011/01/02/1924195.html)\n- [äº¿çº§æ•°æ®è¿‡æ»¤ï¼Œä¼˜é€‰å¸ƒéš†è¿‡æ»¤å™¨](https://mp.weixin.qq.com/s/711MELnmRwWKSd3NopjF-Q)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","tags":["è½¯ä»¶å¼€å‘","æ•°æ®ç»“æ„"],"categories":["computer"]},{"title":"MQTT","url":"/archives/33401/","content":"\n`MQTT`Â ï¼ˆMessage Queue Telemetry Transportï¼Œæ¶ˆæ¯é˜Ÿåˆ—é¥æµ‹ä¼ è¾“åè®®ï¼‰ï¼Œæ˜¯ä¸€ç§åŸºäºå‘å¸ƒ-è®¢é˜…ï¼ˆ`publish-subscribe`ï¼‰æ¨¡å¼çš„`è½»é‡çº§`é€šè®¯åè®®ï¼Œè¯¥åè®®æ„å»ºäº `TCP/IP` åè®®ä¸Šã€‚\n\n<!-- more -->\n\nMQTT åè®®çš„ä¸»è¦ç‰¹å¾æ˜¯å¼€æ”¾ã€ç®€å•ã€è½»é‡çº§å’Œæ˜“äºå®ç°ï¼Œè¿™äº›ç‰¹å¾ä½¿å¾—å®ƒé€‚ç”¨äºå—çº¦æŸçš„åº”ç”¨ç¯å¢ƒï¼Œå¦‚ï¼š\n\n> `ç½‘ç»œå—é™`ï¼šç½‘ç»œå¸¦å®½è¾ƒä½ä¸”ä¼ è¾“ä¸å¯é \n> \n> `ç»ˆç«¯å—é™`ï¼šåè®®è¿è¡Œåœ¨åµŒå…¥å¼è®¾å¤‡ä¸Šï¼ŒåµŒå…¥å¼ç»ˆç«¯çš„å¤„ç†å™¨ã€å†…å­˜ç­‰æ˜¯å—é™çš„\n\n# MQTT åè®®æ¦‚è¦\n\n## å‘å¸ƒ-è®¢é˜…æ¨¡å¼\n\nå‘å¸ƒ-è®¢é˜…æ¨¡å¼å®šä¹‰äº†ä¸€ç§ä¸€å¯¹å¤šçš„ä¾èµ–å…³ç³»ï¼Œè®©å¤šä¸ªè®¢é˜…è€…å¯¹è±¡åŒæ—¶ç›‘å¬æŸä¸€ä¸ªä¸»é¢˜å¯¹è±¡ã€‚è¿™ä¸ªä¸»é¢˜å¯¹è±¡åœ¨è‡ªèº«çŠ¶æ€å˜åŒ–æ—¶ï¼Œä¼šé€šçŸ¥æ‰€æœ‰è®¢é˜…è€…å¯¹è±¡ï¼Œä½¿å®ƒä»¬èƒ½å¤Ÿè‡ªåŠ¨æ›´æ–°è‡ªå·±çš„çŠ¶æ€ã€‚\n\nè¯¥åè®®å°†æ¶ˆæ¯çš„å‘å¸ƒè€…ï¼ˆ`publisher`ï¼‰ä¸è®¢é˜…è€…ï¼ˆ`subscriber`ï¼‰è¿›è¡Œåˆ†ç¦»ï¼Œå› æ­¤å¯ä»¥åœ¨ä¸å¯é çš„ç½‘ç»œç¯å¢ƒä¸­ï¼Œä¸ºè¿œç¨‹è¿æ¥çš„è®¾å¤‡æä¾›å¯é çš„æ¶ˆæ¯æœåŠ¡ï¼Œä½¿ç”¨æ–¹å¼ä¸ä¼ ç»Ÿçš„ MQ æœ‰ç‚¹ç±»ä¼¼ã€‚\n\n![publish-subscribe](MQTT/publish_subscribe.png)\n\nå‘å¸ƒ-è®¢é˜…æ¨¡å¼æœ€é‡è¦çš„æ–¹é¢æ˜¯æ¶ˆæ¯çš„å‘å¸ƒè€…ä¸è®¢é˜…è€…çš„è§£è€¦ã€‚è¿™ç§è§£è€¦æœ‰å‡ ä¸ªç»´åº¦ï¼š\n\n- ç©ºé—´è§£è€¦ï¼šå‘å¸ƒè€…å’Œè®¢é˜…è€…ä¸éœ€è¦ç›¸äº’äº†è§£ï¼ˆä¾‹å¦‚ï¼Œä¸äº¤æ¢ IP åœ°å€å’Œç«¯å£ï¼‰ã€‚\n- æ—¶é—´è§£è€¦ï¼šå‘å¸ƒè€…å’Œè®¢é˜…è€…ä¸éœ€è¦åŒæ—¶è¿è¡Œã€‚\n- åŒæ­¥è§£è€¦ï¼šä¸¤ä¸ªç»„ä»¶çš„æ“ä½œåœ¨å‘å¸ƒæˆ–æ¥æ”¶æ—¶ä¸éœ€è¦ä¸­æ–­ã€‚\n\næ€»ä¹‹ï¼Œå‘å¸ƒ-è®¢é˜…æ¨¡å¼æ¶ˆé™¤äº†ä¼ ç»Ÿå®¢æˆ·ç«¯-æœåŠ¡å™¨ä¹‹é—´çš„ç›´æ¥é€šä¿¡ï¼ŒæŠŠé€šä¿¡è¿™ä¸ªæ“ä½œäº¤ç»™äº† broker è¿›è¡Œä»£ç†ï¼Œå¹¶åœ¨ç©ºé—´ã€æ—¶é—´ã€åŒæ­¥ä¸‰ä¸ªç»´åº¦ä¸Šè¿›è¡Œäº†è§£è—•ã€‚\n\nå‘å¸ƒ-è®¢é˜…æ¨¡å¼æ¯”ä¼ ç»Ÿçš„å®¢æˆ·ç«¯-æœåŠ¡å™¨æ¨¡å¼æœ‰äº†æ›´å¥½çš„æ‰©å±•æ€§ï¼š\n\n- broker é«˜åº¦å¹¶è¡ŒåŒ–ï¼ŒåŸºäºäº‹ä»¶é©±åŠ¨ï¼›\n- æ¶ˆæ¯çš„ç¼“å­˜å’Œæ¶ˆæ¯çš„æ™ºèƒ½è·¯ç”±ï¼›\n- å¯ä»¥é€šè¿‡é›†ç¾¤ä»£ç†æ¥å®ç°æ•°ç™¾ä¸‡çš„è¿æ¥ï¼Œä½¿ç”¨è´Ÿè½½å‡è¡¡å™¨å°†è´Ÿè½½åˆ†é…åˆ°æ›´å¤šçš„å•ä¸ªæœåŠ¡å™¨ä¸Šã€‚\n\n## æ¶ˆæ¯è¿‡æ»¤\n\nå¾ˆæ˜æ˜¾ï¼Œbroker åœ¨å‘å¸ƒ-è®¢é˜…è¿‡ç¨‹ä¸­èµ·ç€ä¸¾è¶³è½»é‡çš„ä½œç”¨ã€‚ä½†æ˜¯ä»£ç†å¦‚ä½•è¿‡æ»¤æ‰€æœ‰æ¶ˆæ¯ï¼Œä»¥ä¾¿æ¯ä¸ªè®¢é˜…è€…åªæ¥æ”¶æ„Ÿå…´è¶£çš„æ¶ˆæ¯ï¼Ÿbroker æœ‰å‡ ä¸ªå¯ä»¥è¿‡æ»¤çš„é€‰é¡¹ï¼š\n\n- åŸºäºä¸»é¢˜çš„è¿‡æ»¤ï¼š\n    \n    æ­¤è¿‡æ»¤åŸºäºå±äºæ¯æ¡æ¶ˆæ¯çš„ä¸»é¢˜ã€‚æ¥æ”¶å®¢æˆ·ç«¯å‘ä»£ç†è®¢é˜…æ„Ÿå…´è¶£çš„ä¸»é¢˜ï¼Œè®¢é˜…åï¼Œbroker å°±ä¼šç¡®ä¿å®¢æˆ·ç«¯æ”¶åˆ°å‘å¸ƒåˆ° topic ä¸­çš„æ¶ˆæ¯ã€‚\n    \n- åŸºäºå†…å®¹çš„è¿‡æ»¤ï¼š\n    \n    åœ¨åŸºäºå†…å®¹çš„è¿‡æ»¤ä¸­ï¼Œbroker ä¼šæ ¹æ®ç‰¹å®šçš„å†…å®¹è¿‡æ»¤æ¶ˆæ¯ï¼Œæ¥å—å®¢æˆ·ç«¯ä¼šç»è¿‡è¿‡æ»¤ä»–ä»¬æ„Ÿå…´è¶£çš„å†…å®¹ã€‚è¿™ç§æ–¹æ³•çš„ä¸€ä¸ªæ˜¾è‘—çš„ç¼ºç‚¹å°±æ˜¯å¿…é¡»äº‹å…ˆçŸ¥é“æ¶ˆæ¯çš„å†…å®¹ï¼Œä¸èƒ½åŠ å¯†æˆ–è€…è½»æ˜“ä¿®æ”¹ã€‚\n    \n- åŸºäºç±»å‹çš„è¿‡æ»¤ï¼š\n    \n    å½“ä½¿ç”¨é¢å‘å¯¹è±¡çš„è¯­è¨€æ—¶ï¼ŒåŸºäºæ¶ˆæ¯ï¼ˆäº‹ä»¶ï¼‰çš„ç±»å‹/ç±»è¿›è¡Œè¿‡æ»¤æ˜¯ä¸€ç§å¸¸è§åšæ³•ã€‚ä¾‹å¦‚ï¼Œè®¢é˜…è€…å¯ä»¥æ”¶å¬æ‰€æœ‰ç±»å‹ä¸º Exception æˆ–ä»»ä½•å­ç±»å‹çš„æ¶ˆæ¯ã€‚\n\n## MQTT ä¸æ¶ˆæ¯é˜Ÿåˆ—çš„åŒºåˆ«\n\n- æ¶ˆæ¯é˜Ÿåˆ—å­˜å‚¨æ¶ˆæ¯ç›´åˆ°æ¶ˆæ¯è¢«æ¶ˆè´¹ï¼š\n    \n    ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—æ—¶ï¼Œæ¯æ¡ä¼ å…¥æ¶ˆæ¯éƒ½å­˜å‚¨åœ¨é˜Ÿåˆ—ä¸­ï¼Œç›´åˆ°è¢«å®¢æˆ·ç«¯ï¼ˆé€šå¸¸ç§°ä¸ºæ¶ˆè´¹è€…ï¼‰æ¥æ”¶ã€‚å¦‚æœæ²¡æœ‰å®¢æˆ·ç«¯æ¥æ”¶åˆ°æ¶ˆæ¯ï¼Œæ¶ˆæ¯å°†ä¿æŒåœ¨é˜Ÿåˆ—ä¸­å¹¶ç­‰å¾…è¢«æ¶ˆè´¹ã€‚åœ¨æ¶ˆæ¯é˜Ÿåˆ—ä¸­ï¼Œä¸ä¼šå­˜åœ¨æ¶ˆæ¯æ²¡æœ‰å®¢æˆ·ç«¯æ¶ˆè´¹çš„æƒ…å†µï¼Œä½†æ˜¯åœ¨ MQTT ä¸­ï¼Œå´å­˜åœ¨ topic æ—  subscriber è®¢é˜…çš„æƒ…å†µã€‚\n    \n- ä¸€æ¡æ¶ˆæ¯åªè¢«ä¸€ä¸ªå®¢æˆ·ç«¯æ¶ˆè´¹ï¼š\n    \n    åœ¨ä¼ ç»Ÿçš„æ¶ˆæ¯é˜Ÿåˆ—ä¸­ï¼Œä¸€æ¡æ¶ˆæ¯åªèƒ½è¢«ä¸€ä¸ªæ¶ˆè´¹è€…å¤„ç†ã€‚è´Ÿè½½åˆ†å¸ƒåœ¨é˜Ÿåˆ—çš„æ‰€æœ‰æ¶ˆè´¹è€…ä¹‹é—´ã€‚åœ¨ MQTT ä¸­ï¼Œè¡Œä¸ºå®Œå…¨ç›¸åï¼šè®¢é˜…ä¸»é¢˜çš„æ¯ä¸ªè®¢é˜…è€…éƒ½ä¼šæ”¶åˆ°æ¶ˆæ¯ï¼Œæ¯ä¸ªè®¢é˜…è€…æœ‰ç›¸åŒçš„è´Ÿè½½ã€‚\n    \n- é˜Ÿåˆ—æ˜¯å‘½åçš„ï¼Œå¿…é¡»æ˜¾å¼åˆ›å»ºï¼š\n    \n    é˜Ÿåˆ—æ¯”ä¸»é¢˜ä¸¥æ ¼å¾—å¤šã€‚åœ¨ä½¿ç”¨é˜Ÿåˆ—ä¹‹å‰ï¼Œå¿…é¡»ä½¿ç”¨å•ç‹¬çš„å‘½ä»¤æ˜¾å¼åˆ›å»ºé˜Ÿåˆ—ã€‚åªæœ‰åœ¨é˜Ÿåˆ—å‘½åå’Œåˆ›å»ºä¹‹åï¼Œæ‰å¯ä»¥å‘å¸ƒæˆ–æ¶ˆè´¹æ¶ˆæ¯ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼ŒMQTT ä¸»é¢˜éå¸¸çµæ´»ï¼Œå¯ä»¥å³æ—¶åˆ›å»ºã€‚\n\n# MQTT é‡è¦æ¦‚å¿µ\n\n## MQTT Client\n\n`publisher` å’Œ `subscriber` éƒ½å±äº MQTT Clientã€‚å‘å¸ƒè€…å’Œè®¢é˜…è€…æ˜¯ä¸€ç§ç›¸å¯¹çš„æ¦‚å¿µï¼ŒæŒ‡çš„æ˜¯å½“å‰å®¢æˆ·ç«¯æ˜¯åœ¨å‘å¸ƒæ¶ˆæ¯è¿˜æ˜¯åœ¨æ¥æ”¶æ¶ˆæ¯ã€‚å‘å¸ƒå’Œè®¢é˜…çš„åŠŸèƒ½ä¹Ÿå¯ä»¥ç”±åŒä¸€ä¸ª MQTT Client å®ç°ã€‚\n\n## MQTT Broker\n\nä¸ MQTT Client å¯¹åº”çš„å°±æ˜¯ MQTT Brokerã€‚ `Broker` æ˜¯ä»»ä½•å‘å¸ƒ-è®¢é˜…åè®®çš„æ ¸å¿ƒï¼Œæ ¹æ®å®ç°çš„ä¸åŒï¼Œä»£ç†å¯ä»¥å¤„ç†å¤šè¾¾æ•°ç™¾ä¸‡è¿æ¥çš„ MQTT Clientã€‚\n\nBroker çš„è´£ä»»ï¼š\n\n- æ¥æ”¶æ‰€æœ‰æ¶ˆæ¯ï¼Œè¿‡æ»¤æ¶ˆæ¯ï¼Œç¡®å®šæ˜¯å“ªä¸ª Client è®¢é˜…äº†æ¶ˆæ¯ï¼Œå¹¶å°†æ¶ˆæ¯å‘é€ç»™å¯¹åº”çš„ Clientï¼›\n- ä¿å­˜ä¼šè¯æ•°æ®ï¼Œè¿™äº›æ•°æ®åŒ…æ‹¬è®¢é˜…çš„å’Œé”™è¿‡çš„æ¶ˆæ¯ï¼›\n- å®¢æˆ·ç«¯çš„èº«ä»½éªŒè¯å’Œæˆæƒã€‚\n\n## MQTT Connection\n\n`TCP` åè®®ä½äºä¼ è¾“å±‚ï¼Œ`MQTT`Â åè®®ä½äºåº”ç”¨å±‚ï¼Œ`MQTT`Â åè®®æ„å»ºäº `TCP/IP` åè®®ä¸Šã€‚å®¢æˆ·ç«¯å’Œä»£ç†éƒ½éœ€è¦æœ‰ä¸€ä¸ª TCP/IP åè®®æ”¯æŒã€‚\n\n![MQTT layer](MQTT/MQTT_layer.png)\n\nMQTT è¿æ¥å§‹ç»ˆä½äºä¸€ä¸ªå®¢æˆ·ç«¯å’Œä»£ç†ä¹‹é—´ã€‚å®¢æˆ·ç«¯ä»ä¸ç›´æ¥ç›¸äº’è¿æ¥ã€‚è¦å‘èµ·è¿æ¥ï¼Œå®¢æˆ·ç«¯å‘ä»£ç†å‘é€ `CONNECT` æ¶ˆæ¯ã€‚ä»£ç†ä½¿ç”¨ `CONNACK` æ¶ˆæ¯å’ŒçŠ¶æ€ä»£ç è¿›è¡Œå“åº”ã€‚å»ºç«‹è¿æ¥åï¼Œä»£ç†å°†ä¿æŒæ‰“å¼€çŠ¶æ€ï¼Œç›´åˆ°å®¢æˆ·ç«¯å‘é€æ–­å¼€è¿æ¥å‘½ä»¤æˆ–è¿æ¥ä¸­æ–­ã€‚\n\n![MQTT Connection](MQTT/connection.png)\n\n# æ¶ˆæ¯åˆ—è¡¨\n\n## CONNECT\n\nä¸ºäº†åˆ›å»ºè¿æ¥ï¼Œå®¢æˆ·ç«¯å‘ä»£ç†å‘é€æ­¤å‘½ä»¤æ¶ˆæ¯ã€‚å¦‚æœæ­¤ CONNECT æ¶ˆæ¯æ ¼å¼é”™è¯¯æˆ–æ‰“å¼€ç½‘ç»œå¥—æ¥å­—å’Œå‘é€è¿æ¥æ¶ˆæ¯ä¹‹é—´çš„æ—¶é—´è¿‡é•¿ï¼Œä»£ç†å°†å…³é—­è¿æ¥ã€‚\n\nä¸€ä¸ª MQTT å®¢æˆ·ç«¯å‘é€ä¸€æ¡ CONNECT è¿æ¥ï¼Œè¿™æ¡ CONNECT è¿æ¥å¯èƒ½ä¼šåŒ…å«ä¸‹é¢è¿™äº›ä¿¡æ¯ï¼š\n\n![CONNECT](MQTT/CONNECT.png)\n\n- `clientId`ï¼š\n    \n    ClientId çš„é•¿åº¦å¯ä»¥æ˜¯ 1-23 ä¸ªå­—ç¬¦ï¼Œåœ¨ä¸€ä¸ªæœåŠ¡å™¨ä¸Š ClientId ä¸èƒ½é‡å¤ã€‚å¦‚æœè¶…è¿‡ 23 ä¸ªå­—ç¬¦ï¼Œåˆ™æœåŠ¡å™¨è¿”å› CONNACK æ¶ˆæ¯ä¸­çš„è¿”å›ç ä¸º Identifier Rejectedã€‚åœ¨ MQTT 3.1.1 ä¸­ï¼Œå¦‚æœä¸éœ€è¦ä»£ç†æŒæœ‰çŠ¶æ€ï¼Œå¯ä»¥å‘é€ä¸€ä¸ªç©ºçš„ ClientIdã€‚ç©ºçš„ ClientId å¯¼è‡´è¿æ¥æ²¡æœ‰ä»»ä½•çŠ¶æ€ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œclean session æ ‡å¿—å¿…é¡»è®¾ç½®ä¸º trueï¼Œå¦åˆ™ä»£ç†å°†æ‹’ç»è¿æ¥ã€‚\n    \n- `cleanSession`ï¼š\n    \n    Clean Session æ ‡å¿—å‘Šè¯‰ä»£ç†å®¢æˆ·ç«¯æ˜¯å¦è¦å»ºç«‹æŒä¹…ä¼šè¯ã€‚åœ¨æŒä¹…ä¼šè¯ (CleanSession = false) ä¸­ï¼Œä»£ç†å­˜å‚¨å®¢æˆ·ç«¯çš„æ‰€æœ‰è®¢é˜…ä»¥åŠä»¥æœåŠ¡è´¨é‡ï¼ˆQoSï¼‰çº§åˆ« 1 æˆ– 2 è®¢é˜…çš„å®¢æˆ·ç«¯çš„æ‰€æœ‰ä¸¢å¤±æ¶ˆæ¯ã€‚ å¦‚æœä¼šè¯ä¸æ˜¯æŒä¹…çš„ (CleanSession = true )ï¼Œä»£ç†ä¸ä¸ºå®¢æˆ·ç«¯å­˜å‚¨ä»»ä½•å†…å®¹ï¼Œå¹¶æ¸…é™¤ä»»ä½•å…ˆå‰æŒä¹…ä¼šè¯ä¸­çš„æ‰€æœ‰ä¿¡æ¯ã€‚\n    \n- `username/password`ï¼š\n    \n    MQTT å¯ä»¥å‘é€ç”¨æˆ·åå’Œå¯†ç è¿›è¡Œå®¢æˆ·ç«¯è®¤è¯å’Œæˆæƒã€‚ä½†æ˜¯ï¼Œå¦‚æœæ­¤ä¿¡æ¯æœªåŠ å¯†æˆ–æ•£åˆ—ï¼Œåˆ™å¯†ç å°†ä»¥çº¯æ–‡æœ¬å½¢å¼å‘é€ã€‚æˆ‘ä»¬å¼ºçƒˆå»ºè®®å°†ç”¨æˆ·åå’Œå¯†ç ä¸å®‰å…¨ä¼ è¾“ä¸€èµ·ä½¿ç”¨ã€‚åƒ HiveMQ è¿™æ ·çš„ä»£ç†å¯ä»¥ä½¿ç”¨ SSL è¯ä¹¦å¯¹å®¢æˆ·ç«¯è¿›è¡Œèº«ä»½éªŒè¯ï¼Œå› æ­¤ä¸éœ€è¦ç”¨æˆ·åå’Œå¯†ç ã€‚\n    \n- `willMessage`ï¼š\n    \n    LastWillxxx è¡¨ç¤ºçš„æ˜¯é—æ„¿ï¼Œclient åœ¨è¿æ¥ broker çš„æ—¶å€™å°†ä¼šè®¾ç«‹ä¸€ä¸ªé—æ„¿ï¼Œè¿™ä¸ªé—æ„¿ä¼šä¿å­˜åœ¨ broker ä¸­ï¼Œå½“ client å› ä¸ºéæ­£å¸¸åŸå› æ–­å¼€ä¸ broker çš„è¿æ¥æ—¶ï¼Œbroker ä¼šå°†é—æ„¿å‘é€ç»™è®¢é˜…äº†è¿™ä¸ª topicï¼ˆè®¢é˜…é—æ„¿çš„ topicï¼‰çš„ clientã€‚\n    \n- `keepAlive`ï¼š\n    \n    keepAlive æ˜¯ client åœ¨è¿æ¥å»ºç«‹æ—¶ä¸ broker é€šä¿¡çš„æ—¶é—´é—´éš”ï¼Œé€šå¸¸ä»¥ç§’ä¸ºå•ä½ã€‚è¿™ä¸ªæ—¶é—´æŒ‡çš„æ˜¯ client ä¸ broker åœ¨ä¸å‘é€æ¶ˆæ¯ä¸‹æ‰€èƒ½æ‰¿å—çš„æœ€å¤§æ—¶é•¿ã€‚\n\n## CONNACK\n\nå½“ broker æ”¶åˆ° CONNECT æ¶ˆæ¯æ—¶ï¼Œå®ƒæœ‰ä¹‰åŠ¡å›å¤ CONNACK æ¶ˆæ¯è¿›è¡Œå“åº”ã€‚CONNACK æ¶ˆæ¯åŒ…æ‹¬ä¸¤éƒ¨åˆ†å†…å®¹ï¼š\n\n![CONNACK](MQTT/CONNACK.png)\n\n- `sessionPresent`ï¼š\n    \n    ä¼šè¯å½“å‰æ ‡å¿—ï¼Œè¿™ä¸ªæ ‡å¿—ä¼šå‘Šè¯‰ client å½“å‰ broker æ˜¯å¦æœ‰ä¸€ä¸ªæŒä¹…æ€§ä¼šè¯ä¸ client è¿›è¡Œäº¤äº’ã€‚SessionPresent æ ‡å¿—å’Œ CleanSession æ ‡å¿—æœ‰å…³ï¼Œå½“ client åœ¨ CleanSession è®¾ç½®ä¸º true çš„æƒ…å†µä¸‹è¿æ¥æ—¶ï¼ŒSessionPresent å§‹ç»ˆä¸º falseï¼Œå› ä¸ºæ²¡æœ‰æŒä¹…æ€§ä¼šè¯å¯ä»¥ä½¿ç”¨ã€‚å¦‚æœ CleanSession è®¾ç½®ä¸º falseï¼Œåˆ™æœ‰ä¸¤ç§å¯èƒ½æ€§ï¼š\n    \n    - å¦‚æœ ClientId çš„ä¼šè¯ä¿¡æ¯å¯ç”¨ï¼Œå¹¶ä¸” broker å·²ç»å­˜å‚¨äº†ä¼šè¯ä¿¡æ¯ï¼Œé‚£ä¹ˆ SessionPresent ä¸º trueï¼›\n    - å¦åˆ™å¦‚æœæ²¡æœ‰ ClientId çš„ä»»ä½•ä¼šè¯ä¿¡æ¯ï¼Œé‚£ä¹ˆ SessionPresent ä¸º falseã€‚\n\n    ![sessionPresent](MQTT/sessionPresent.png)\n\n- `returnCode`ï¼š\n    \n    è¿æ¥è¿”å›ç ï¼Œå‘Šè¯‰å®¢æˆ·ç«¯è¿æ¥å°è¯•æ˜¯å¦æˆåŠŸã€‚è¿æ¥ç¡®è®¤æ ‡å¿—æœ‰ä¸‹é¢è¿™äº›é€‰é¡¹ï¼š\n\n    ![returnCode](MQTT/CONNACK_returnCode.png)\n\n## PUBLISH\n\nMQTT å®¢æˆ·ç«¯å¯ä»¥åœ¨è¿æ¥åˆ° broker åç«‹å³å‘å¸ƒæ¶ˆæ¯ã€‚MQTT ä½¿ç”¨çš„æ˜¯åŸºäº topic ä¸»é¢˜çš„è¿‡æ»¤ã€‚æ¯æ¡æ¶ˆæ¯éƒ½å¿…é¡»åŒ…å«ä¸€ä¸ªä¸»é¢˜ï¼Œbroker å¯ä»¥ä½¿ç”¨è¯¥ä¸»é¢˜å°†æ¶ˆæ¯è½¬å‘ç»™æ„Ÿå…´è¶£çš„å®¢æˆ·ç«¯ã€‚é€šå¸¸ï¼Œæ¯æ¡æ¶ˆæ¯éƒ½æœ‰ä¸€ä¸ªè´Ÿè½½ï¼ˆPayloadï¼‰ï¼Œå…¶ä¸­åŒ…å«è¦ä»¥å­—èŠ‚æ ¼å¼ä¼ è¾“çš„æ•°æ®ã€‚MQTT æ˜¯æ•°æ®æ— å…³æ€§çš„ï¼Œä¹Ÿå°±æ˜¯è¯´æ•°æ®æ˜¯ç”±å‘å¸ƒè€…å†³å®šè¦å‘é€çš„æ˜¯ XML ã€JSON è¿˜æ˜¯äºŒè¿›åˆ¶æ•°æ®ã€æ–‡æœ¬æ•°æ®ã€‚\n\n![PUBLISH](MQTT/PUBLISH.png)\n\n- `packetId`ï¼š\n    \n    è¿™ä¸ª packetId æ ‡è¯†åœ¨ client å’Œ broker ä¹‹é—´å”¯ä¸€çš„æ¶ˆæ¯æ ‡è¯†ã€‚packetId ä»…ä¸å¤§äºé›¶çš„ QoS çº§åˆ«ç›¸å…³ã€‚\n    \n- `topicName`ï¼š\n    \n    ä¸»é¢˜åç§°æ˜¯ä¸€ä¸ªç®€å•çš„å­—ç¬¦ä¸²ï¼Œå®ƒä»¥æ­£æ–œæ ä½œä¸ºåˆ†éš”ç¬¦è¿›è¡Œåˆ†å±‚ç»“æ„ã€‚ä¾‹å¦‚ï¼Œâ€œæˆ‘çš„å®¶/å®¢å…/æ¸©åº¦â€æˆ–â€œå¾·å›½/æ…•å°¼é»‘/åæœˆèŠ‚/äººâ€ã€‚\n    \n- `qos`ï¼š\n    \n    æ­¤æ•°å­—è¡¨ç¤ºæ¶ˆæ¯çš„æœåŠ¡è´¨é‡ (QoS)ã€‚æœ‰ä¸‰ä¸ªçº§åˆ«ï¼š0ã€1 å’Œ 2ã€‚æœåŠ¡çº§åˆ«å†³å®šäº†æ¶ˆæ¯åˆ°è¾¾é¢„æœŸæ¥æ”¶è€…ï¼ˆå®¢æˆ·ç«¯æˆ–ä»£ç†ï¼‰çš„ä¿è¯ç±»å‹ã€‚\n    \n- `retainFlag`ï¼š\n    \n    æ­¤æ ‡å¿—è¡¨ç¤º broker å°†æœ€è¿‘æ”¶åˆ°çš„ä¸€æ¡ RETAIN æ ‡å¿—ä½ä¸º true çš„æ¶ˆæ¯ä¿å­˜åœ¨æœåŠ¡å™¨ç«¯ï¼ˆå†…å­˜æˆ–è€…æ–‡ä»¶ï¼‰ã€‚\n    \n- `payload`ï¼š\n    \n    è¿™ä¸ªæ˜¯æ¯æ¡æ¶ˆæ¯çš„å®é™…å†…å®¹ã€‚MQTT æ˜¯æ•°æ®æ— å…³æ€§çš„ã€‚å¯ä»¥å‘é€ä»»ä½•æ–‡æœ¬ã€å›¾åƒã€åŠ å¯†æ•°æ®ä»¥åŠäºŒè¿›åˆ¶æ•°æ®ã€‚\n    \n- `dupFlag`ï¼š\n    \n    è¯¥æ ‡å¿—è¡¨æ˜è¯¥æ¶ˆæ¯æ˜¯é‡å¤çš„å¹¶ä¸”ç”±äºé¢„æœŸçš„æ¥æ”¶è€…ï¼ˆå®¢æˆ·ç«¯æˆ–ä»£ç†ï¼‰æ²¡æœ‰ç¡®è®¤åŸå§‹æ¶ˆæ¯è€Œè¢«é‡æ–°å‘é€ã€‚ä»…ä¸ QoS å¤§äº 0 çš„çº§åˆ«ç›¸å…³ã€‚\n    \n\nå½“å®¢æˆ·ç«¯å‘ MQTT broker å‘é€æ¶ˆæ¯è¿›è¡Œå‘å¸ƒæ—¶ï¼Œbroker è¯»å–æ¶ˆæ¯ã€ç¡®è®¤æ¶ˆæ¯ï¼ˆæ ¹æ® QoS çº§åˆ«ï¼‰å¹¶å¤„ç†æ¶ˆæ¯ã€‚broker çš„å¤„ç†åŒ…æ‹¬ç¡®å®šå“ªäº›å®¢æˆ·ç«¯è®¢é˜…äº†ä¸»é¢˜å¹¶å°†æ¶ˆæ¯å‘é€ç»™ä»–ä»¬ã€‚\n\n![PUBLISH broker](MQTT/PUBLISH_broker.png)\n\næœ€åˆå‘å¸ƒæ¶ˆæ¯çš„å®¢æˆ·ç«¯åªå…³å¿ƒå°† PUBLISH æ¶ˆæ¯ä¼ é€’ç»™ brokerã€‚ä¸€æ—¦ broker æ”¶åˆ° PUBLISH æ¶ˆæ¯ï¼Œbroker å°±æœ‰è´£ä»»å°†æ¶ˆæ¯ä¼ é€’ç»™æ‰€æœ‰è®¢é˜…è€…ã€‚å‘å¸ƒå®¢æˆ·ç«¯ä¸ä¼šå¾—åˆ°å…³äºæ˜¯å¦æœ‰äººå¯¹å‘å¸ƒçš„æ¶ˆæ¯æ„Ÿå…´è¶£æˆ–æœ‰å¤šå°‘å®¢æˆ·ç«¯ä» broker æ”¶åˆ°æ¶ˆæ¯çš„ä»»ä½•åé¦ˆã€‚\n\n## SUBSCRIBE\n\nclient ä¼šå‘ broker å‘é€ SUBSCRIBE æ¶ˆæ¯æ¥æ¥æ”¶æœ‰å…³æ„Ÿå…´è¶£çš„ topicã€‚\n\n![SUBSCRIBE](MQTT/SUBSCRIBE.png)\n\n- `packetId`ï¼š\n    \n    æ¶ˆæ¯çš„å”¯ä¸€æ ‡è¯†ç¬¦ã€‚ä¸ PUBLISH æ¶ˆæ¯çš„ packetId ä¸€æ ·ã€‚\n    \n- `List of Subscriptions`ï¼š\n    \n    è®¢é˜…åˆ—è¡¨ã€‚ä¸€ä¸ª SUBSCRIBE æ¶ˆæ¯å¯ä»¥åŒ…å«ä¸€ä¸ªå®¢æˆ·ç«¯çš„å¤šä¸ªè®¢é˜…ã€‚æ¯ä¸ªè®¢é˜…ç”±ä¸€ä¸ªä¸»é¢˜å’Œä¸€ä¸ª QoS çº§åˆ«ç»„æˆã€‚è®¢é˜…æ¶ˆæ¯ä¸­çš„ä¸»é¢˜å¯ä»¥åŒ…å«é€šé…ç¬¦ï¼Œä½¿è®¢é˜…ä¸»é¢˜æ¨¡å¼è€Œä¸æ˜¯ç‰¹å®šä¸»é¢˜æˆä¸ºå¯èƒ½ã€‚å¦‚æœä¸€ä¸ªå®¢æˆ·ç«¯å­˜åœ¨é‡å è®¢é˜…ï¼Œåˆ™ä»£ç†ä¼šä¼ é€è¯¥ä¸»é¢˜å…·æœ‰æœ€é«˜ QoS çº§åˆ«çš„æ¶ˆæ¯ã€‚\n\n## SUBACK\n\nä¸ºäº†ç¡®è®¤æ¯ä¸ªè®¢é˜…ï¼Œbroker å‘å®¢æˆ·ç«¯å‘é€ä¸€ä¸ª SUBACK ç¡®è®¤æ¶ˆæ¯ã€‚\n\n![SUBACK](MQTT/SUBACK.png)\n\n- `packetId`ï¼š\n    \n    æ¶ˆæ¯çš„å”¯ä¸€æ ‡è¯†ç¬¦ã€‚ä¸ SUBSCRIBE æ¶ˆæ¯çš„ä¸€æ ·ã€‚\n    \n- `returnCode`ï¼š\n    \n    broker ä¸ºå®ƒåœ¨ SUBSCRIBE æ¶ˆæ¯ä¸­æ”¶åˆ°çš„æ¯ä¸ªä¸»é¢˜/QoS å¯¹å‘é€ä¸€ä¸ªè¿”å›ä»£ç ã€‚ä¾‹å¦‚ï¼Œå¦‚æœ SUBSCRIBE æ¶ˆæ¯æœ‰äº”ä¸ªè®¢é˜…ï¼Œåˆ™ SUBACK æ¶ˆæ¯åŒ…å«äº”ä¸ªè¿”å›ç ã€‚è¿”å›ç ç¡®è®¤æ¯ä¸ªä¸»é¢˜å¹¶æ˜¾ç¤º broker æˆäºˆçš„ QoS çº§åˆ«ã€‚å¦‚æœ broker æ‹’ç»è®¢é˜…ï¼Œåˆ™ SUBACK æ¶ˆæ¯åŒ…å«è¯¥ç‰¹å®šä¸»é¢˜çš„å¤±è´¥è¿”å›ä»£ç ã€‚ä¾‹å¦‚ï¼Œå¦‚æœå®¢æˆ·ç«¯æ²¡æœ‰è¶³å¤Ÿçš„æƒé™è®¢é˜…ä¸»é¢˜æˆ–ä¸»é¢˜æ ¼å¼é”™è¯¯ã€‚\n\n    ![SUBACK returnCode](MQTT/SUBACK_returnCode.png)\n\nå®¢æˆ·ç«¯æˆåŠŸå‘é€ SUBSCRIBE æ¶ˆæ¯å¹¶æ”¶åˆ° SUBACK æ¶ˆæ¯åï¼Œå®ƒä¼šè·å–ä¸ SUBSCRIBE æ¶ˆæ¯åŒ…å«çš„è®¢é˜…ä¸­çš„ä¸»é¢˜åŒ¹é…çš„æ¯æ¡å·²å‘å¸ƒæ¶ˆæ¯ã€‚\n\n![SUBSCRIBE SUBACK](MQTT/SUBSCRIBE_SUBACK.png)\n\n## UNSUBSCRIBE\n\nSUBSCRIBE æ¶ˆæ¯çš„å¯¹åº”æ˜¯ UNSUBSCRIBE æ¶ˆæ¯ã€‚æ­¤æ¶ˆæ¯åˆ é™¤ broker ä¸Šå®¢æˆ·ç«¯çš„ç°æœ‰è®¢é˜…ã€‚\n\n![UNSUBSCRIBE](MQTT/UNSUBSCRIBE.png)\n\n- `packetId`ï¼š\n    \n    æ¶ˆæ¯çš„å”¯ä¸€æ ‡è¯†ç¬¦ã€‚ä¸ PUBLISH æ¶ˆæ¯çš„ packetId ä¸€æ ·ã€‚\n    \n- `List of Topics`ï¼š\n    \n    ä¸»é¢˜åˆ—è¡¨ã€‚éœ€è¦å–æ¶ˆè®¢é˜…çš„ä¸»é¢˜ã€‚\n    \n\n## UNSUBACK\n\nä¸ºäº†ç¡®è®¤å–æ¶ˆè®¢é˜…ï¼Œbroker å‘å®¢æˆ·ç«¯å‘é€ä¸€ä¸ª UNSUBACK ç¡®è®¤æ¶ˆæ¯ã€‚\n\n![UNSUBACK](MQTT/UNSUBACK.png)\n\n- `packetId`ï¼š\n    \n    æ¶ˆæ¯çš„å”¯ä¸€æ ‡è¯†ç¬¦ã€‚ä¸ UNSUBSCRIBE æ¶ˆæ¯çš„ packetId ä¸€æ ·ã€‚\n    \nå®¢æˆ·ç«¯æ”¶åˆ°æ¥è‡ª broker çš„ UNSUBACK åï¼Œå¯ä»¥è®¤ä¸º UNSUBSCRIBE æ¶ˆæ¯ä¸­çš„è®¢é˜…è¢«åˆ é™¤äº†ã€‚\n\n![UNSUBSCRIBE UNSUBACK](MQTT/UNSUBSCRIBE_UNSUBACK.png)\n\n# ä¸»é¢˜ï¼ˆTopicï¼‰\n\nåœ¨ MQTT ä¸­ï¼Œä¸»é¢˜æŒ‡çš„æ˜¯ broker ç”¨äºä¸ºæ¯ä¸ªè¿æ¥çš„å®¢æˆ·ç«¯è¿‡æ»¤æ¶ˆæ¯çš„ UTF-8 å­—ç¬¦ä¸²ã€‚ä¸»é¢˜ç”±ä¸€ä¸ªæˆ–å¤šä¸ªä¸»é¢˜çº§åˆ«ç»„æˆã€‚æ¯ä¸ªä¸»é¢˜çº§åˆ«ç”±æ­£æ–œæ ï¼ˆä¸»é¢˜çº§åˆ«åˆ†éš”ç¬¦ï¼‰åˆ†éš”ã€‚\n\n![topic](MQTT/topic.png)\n\nä¸æ¶ˆæ¯é˜Ÿåˆ—ç›¸æ¯”ï¼ŒMQTT ä¸»é¢˜éå¸¸è½»é‡çº§ã€‚å®¢æˆ·ç«¯åœ¨å‘å¸ƒæˆ–è®¢é˜…å®ƒä¹‹å‰ä¸éœ€è¦åˆ›å»ºæ‰€éœ€çš„ä¸»é¢˜ã€‚broker æ¥å—æ¯ä¸ªæœ‰æ•ˆä¸»é¢˜è€Œæ— éœ€ä»»ä½•äº‹å…ˆåˆå§‹åŒ–ã€‚\n\n## é€šé…ç¬¦\n\nå½“å®¢æˆ·ç«¯è®¢é˜…ä¸»é¢˜æ—¶ï¼Œå®ƒå¯ä»¥è®¢é˜…å·²å‘å¸ƒæ¶ˆæ¯çš„ç¡®åˆ‡ä¸»é¢˜ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨é€šé…ç¬¦åŒæ—¶è®¢é˜…å¤šä¸ªä¸»é¢˜ã€‚é€šé…ç¬¦åªèƒ½ç”¨äºè®¢é˜…ä¸»é¢˜ï¼Œä¸èƒ½ç”¨äºå‘å¸ƒæ¶ˆæ¯ã€‚æœ‰ä¸¤ç§ä¸åŒç±»å‹çš„é€šé…ç¬¦ï¼šå•çº§å’Œå¤šçº§ã€‚\n\n- å•çº§ï¼š+\n    \n    å•çº§é€šé…ç¬¦åªæ›¿æ¢ä¸€ä¸ªä¸»é¢˜çº§åˆ«ã€‚\n\n    ![single wildcard](MQTT/single_wildcard.png)\n\n    ä¸Šè¿°çš„ä¸»é¢˜åŒ¹é…å¯ä»¥äº§ç”Ÿä»¥ä¸‹ç»“æœ\n\n    ![single wildcard result](MQTT/single_wildcard_result.png)\n\n- å¤šçº§ï¼š#\n    \n    å¤šçº§é€šé…ç¬¦æ¶µç›–å¤šä¸ªä¸»é¢˜çº§åˆ«ã€‚å¤šçº§é€šé…ç¬¦å¿…é¡»ä½œä¸ºä¸»é¢˜ä¸­çš„æœ€åä¸€ä¸ªå­—ç¬¦æ”¾ç½®ï¼Œå¹¶ä»¥æ­£æ–œæ å¼€å¤´ã€‚\n\n    ![multi wildcard](MQTT/multi_wildcard_result.png)\n\n    ä¸Šè¿°çš„ä¸»é¢˜åŒ¹é…å¯ä»¥äº§ç”Ÿä»¥ä¸‹ç»“æœ\n\n    ![multi wildcard result](MQTT/multi_wildcard_result.png)\n\n## ä»¥ $ å¼€å¤´çš„ä¸»é¢˜\n\n$ ä¸»é¢˜ä¿ç•™ç”¨äº MQTT ä»£ç†çš„å†…éƒ¨ç»Ÿè®¡ä¿¡æ¯ã€‚å®¢æˆ·ç«¯æ— æ³•å‘è¿™äº›ä¸»é¢˜å‘å¸ƒæ¶ˆæ¯ã€‚ç›®å‰ï¼Œæ­¤ç±»ä¸»é¢˜å°šæ— å®˜æ–¹æ ‡å‡†åŒ–ï¼Œä»£ç†å®ç°å„ä¸ç›¸åŒï¼Œä½†é€šå¸¸ç”¨ `$SYS/` æ¥è¡¨ç¤ºè¿™ç±»ä¿¡æ¯ã€‚[MQTT GitHub wiki](https://github.com/mqtt/mqtt.org/wiki/SYS-Topics) ä¸­æä¾›äº†å¯¹ `$SYS-topics` çš„ä¸€é¡¹å»ºè®®ã€‚\n\n> $SYS/broker/clients/connected\n> \n> $SYS/broker/clients/disconnected\n> \n> $SYS/broker/clients/total\n> \n> $SYS/broker/messages/sent\n> \n> $SYS/broker/uptime\n\n# å‚è€ƒèµ„æ–™\n\n- [ä¸€æ–‡è¯»æ‡‚ç‰©è”ç½‘ MQTT åè®®ä¹‹åŸºç¡€ç‰¹æ€§ç¯‡](https://blog.csdn.net/riemann_/article/details/118686072)\n\n\n\n\n\n\n\n\n\n\n","tags":["è½¯ä»¶å¼€å‘"],"categories":["computer"]},{"title":"äºŒåˆ†æŸ¥æ‰¾","url":"/archives/42877/","content":"\nå‰æï¼šæœ‰åºæ•°ç»„\n\nè¾¹ç•Œæ¡ä»¶ï¼šæ ¹æ®å¯»æ‰¾åŒºé—´çš„å®šä¹‰æœ‰æ‰€ä¸åŒ\n\n1. å¯»æ‰¾åŒºé—´ä¸º [left, right]\n    * å¾ªç¯ç”¨ while(left â‰¤ right)ï¼Œå› ä¸ºå½“ left == right æ—¶ï¼Œ [left, right] æœ‰æ„ä¹‰ï¼›\n    * æ›´æ–°ç”¨ right = mid - 1 å’Œ left = mid + 1ã€‚\n  ```java\n  public int BinarySearch(int[] nums, int target) {\n    int n = nums.length;\n    int left = 0, right = n - 1;\n    while (left <= right) {\n      int mid = left + (right - left) / 2;\n      if (nums[mid] > target) {\n        right = mid - 1;\n      } else if (nums[mid] < target) {\n        left = mid + 1;\n      } else {\n        return mid;\n      }\n    }\n    return -1;\n  }\n  ```\n\n1. å¯»æ‰¾åŒºé—´ä¸º [left, right)\n    * å¾ªç¯ç”¨ while(left < right)ï¼Œå› ä¸ºå½“ left == right æ—¶ï¼Œ [left, right) æ— æ„ä¹‰ï¼›\n    * æ›´æ–°ç”¨ right = mid å’Œ left = mid + 1ã€‚\n  ```java\n  public int BinarySearch(int[] nums, int target) {\n    int n = nums.length;\n    int left = 0, right = n;\n    while (left < right) {\n      int mid = left + (right - left) / 2;\n      if (nums[mid] > target) {\n        right = mid;\n      } else if (nums[mid] < target) {\n        left = mid + 1;\n      } else {\n        return mid;\n      }\n    }\n    return -1;\n  }\n  ```\n","tags":["ç®—æ³•"],"categories":["computer"]},{"title":"Maven","url":"/archives/38008/","content":"\nMaven ä½œä¸ºä¸€ä¸ªæ„å»ºå·¥å…·ï¼Œä¸ä»…èƒ½è‡ªåŠ¨åŒ–æ„å»ºé¡¹ç›®ï¼Œè¿˜èƒ½å¤ŸæŠ½è±¡æ„å»ºè¿‡ç¨‹ï¼Œæä¾›æ„å»ºä»»åŠ¡å®ç°ï¼›å®ƒè·¨å¹³å°ï¼Œå¯¹å¤–æä¾›äº†ä¸€è‡´çš„æ“ä½œæ¥å£ï¼Œè¿™ä¸€åˆ‡è¶³ä»¥ä½¿å®ƒæˆä¸ºä¼˜ç§€çš„ã€æµè¡Œçš„æ„å»ºå·¥å…·ã€‚Maven ä¸ä»…æ˜¯æ„å»ºå·¥å…·ï¼Œè¿˜æ˜¯ä¸€ä¸ªä¾èµ–ç®¡ç†å·¥å…·å’Œé¡¹ç›®ç®¡ç†å·¥å…·ã€‚å®ƒæä¾›äº†ä¸­å¤®ä»“åº“ï¼Œä¸”èƒ½æŒ‰ç…§é…ç½®è‡ªåŠ¨ä¸‹è½½æ„ä»¶ã€‚\n\n<!-- more -->\n\n# Maven åæ ‡\n\né¡¹ç›®ä¸­ä¾èµ–çš„ç¬¬ä¸‰æ–¹åº“åŠæ’ä»¶å¯ç»Ÿç§°ä¸ºæ„ä»¶ï¼ˆartifactï¼‰ï¼Œæ¯ä¸ª artifact éƒ½å¯ç”¨ Maven åæ ‡å”¯ä¸€æ ‡è¯†ã€‚åæ ‡å…ƒç´ åŒ…æ‹¬ï¼š\n\n- å¿…é¡»å…ƒç´ \n    - **groupId**ï¼šå®šä¹‰äº†å½“å‰ Maven é¡¹ç›®éš¶å±çš„ç»„ç»‡æˆ–å…¬å¸ã€‚groupId ä¸€èˆ¬åˆ†ä¸ºå¤šæ®µï¼Œé€šå¸¸æƒ…å†µä¸‹ï¼Œç¬¬ä¸€æ®µä¸ºåŸŸï¼Œç¬¬äºŒæ®µä¸ºå…¬å¸åç§°ã€‚\n    - **artifactId**ï¼šå®šä¹‰äº†å½“å‰ Maven é¡¹ç›®çš„åç§°ï¼Œé¡¹ç›®çš„å”¯ä¸€çš„æ ‡è¯†ç¬¦ï¼Œå¯¹åº”é¡¹ç›®æ ¹ç›®å½•çš„åç§°ã€‚\n    - **version**ï¼šå®šä¹‰äº† Maven é¡¹ç›®å½“å‰æ‰€å¤„ç‰ˆæœ¬ã€‚\n- å¯é€‰å…ƒç´ \n    - **packaging**ï¼ˆå¯é€‰ï¼‰ï¼šå®šä¹‰äº† Maven é¡¹ç›®çš„æ‰“åŒ…æ–¹å¼ï¼ˆå¦‚jarï¼Œwarï¼Œâ€¦â€¦ï¼‰ï¼Œé»˜è®¤ä¸º jar\n    - **classifier**ï¼ˆå¯é€‰ï¼‰ï¼šå¸¸ç”¨äºåŒºåˆ†ä»åŒä¸€ POM æ„å»ºçš„å…·æœ‰ä¸åŒå†…å®¹çš„æ„ä»¶ï¼Œå¯ä»¥æ˜¯ä»»æ„çš„å­—ç¬¦ä¸²ï¼Œé™„åŠ åœ¨ç‰ˆæœ¬å·ä¹‹åã€‚\n\nå¼•å…¥ä¾èµ–ï¼Œä¸€èˆ¬æ¥è¯´åªéœ€è¦æŒ‡å®šå…¶ä¸­ä¸‰ä¸ªåæ ‡å…ƒç´ å³å¯ã€‚\n\n```xml\n<dependency>\n    <groupId>com.alibaba</groupId>\n    <artifactId>easyexcel</artifactId>\n    <version>3.1.1</version>\n</dependency>\n```\n\n# Maven ä¾èµ–\n\n## ä¾èµ–é…ç½®\n\nMaven ä¾èµ–é…ç½®å‡åœ¨é¡¹ç›®çš„ pom.xml ä¸‹ã€‚\n\n### é…ç½®ä¿¡æ¯ç¤ºä¾‹\n\n```xml\n<project>\n    <dependencies>\n        <dependency>\n            <groupId></groupId>\n            <artifactId></artifactId>\n            <version></version>\n            <type>...</type>\n            <scope>...</scope>\n            <optional>...</optional>\n            <exclusions>\n                <exclusion>\n                  <groupId>...</groupId>\n                  <artifactId>...</artifactId>\n                </exclusion>\n          </exclusions>\n        </dependency>\n      </dependencies>\n</project>\n```\n\n### é…ç½®è¯´æ˜\n\n- **dependencies**ï¼šä¸€ä¸ª pom.xml æ–‡ä»¶ä¸­åªèƒ½å­˜åœ¨ä¸€ä¸ªè¿™æ ·çš„æ ‡ç­¾ï¼Œæ˜¯ç”¨æ¥ç®¡ç†ä¾èµ–çš„æ€»æ ‡ç­¾ã€‚\n- **dependency**ï¼šåŒ…å«åœ¨ dependencies æ ‡ç­¾ä¸­ï¼Œå¯æœ‰å¤šä¸ªï¼Œæ¯ä¸ªè¡¨ç¤ºé¡¹ç›®çš„ä¸€ä¸ªä¾èµ–ã€‚\n- **groupId**ï¼Œ**artifactId**ï¼Œ**version**ï¼šä¾èµ–çš„åŸºæœ¬åæ ‡ã€‚\n- å¯é€‰é…ç½®\n    - **type**ï¼šä¾èµ–çš„ç±»å‹ï¼Œå¯¹åº”äºé¡¹ç›®åæ ‡å®šä¹‰çš„ packagingã€‚å¤§éƒ¨åˆ†æƒ…å†µä¸‹ä½¿ç”¨é»˜è®¤å€¼ jar å³å¯ã€‚\n    - **scope**ï¼šä¾èµ–çš„èŒƒå›´ï¼Œé»˜è®¤å€¼ä¸º compileã€‚\n    - **optional**ï¼šæ ‡è®°ä¾èµ–æ˜¯å¦å¯é€‰ã€‚\n    - **exclusions**ï¼šç”¨äºæ’é™¤ä¼ é€’æ€§ä¾èµ–ï¼Œé¿å… jar åŒ…å†²çªã€‚\n\n## ä¾èµ–èŒƒå›´\n\n**classpath** ç”¨äºæŒ‡å®š `.class` æ–‡ä»¶å­˜æ”¾çš„ä½ç½®ï¼Œç±»åŠ è½½å™¨ä¼šä»è¯¥è·¯å¾„ä¸­åŠ è½½æ‰€éœ€çš„ `.class` æ–‡ä»¶åˆ°å†…å­˜ä¸­ã€‚\n\nMaven åœ¨ç¼–è¯‘ã€æ‰§è¡Œæµ‹è¯•ã€å®é™…è¿è¡Œæœ‰ç€ä¸‰å¥—ä¸åŒçš„ classpathï¼š\n\n- **ç¼–è¯‘ classpath**ï¼šç¼–è¯‘ä¸»ä»£ç æœ‰æ•ˆ\n- **æµ‹è¯• classpath**ï¼šç¼–è¯‘ã€è¿è¡Œæµ‹è¯•ä»£ç æœ‰æ•ˆ\n- **è¿è¡Œ classpath**ï¼šé¡¹ç›®è¿è¡Œæ—¶æœ‰æ•ˆ\n\nMaven çš„ä¾èµ–èŒƒå›´å¦‚ä¸‹ï¼š\n\n- **compile**ï¼ˆé»˜è®¤ï¼‰ï¼šç¼–è¯‘ä¾èµ–èŒƒå›´ã€‚ä½¿ç”¨è¯¥ä¾èµ–èŒƒå›´å¯¹äºç¼–è¯‘ã€æµ‹è¯•ã€è¿è¡Œä¸‰ç§éƒ½æœ‰æ•ˆï¼Œå³åœ¨ç¼–è¯‘ã€æµ‹è¯•ã€è¿è¡Œçš„æ—¶å€™éƒ½è¦ä½¿ç”¨è¯¥ä¾èµ–ã€‚\n- **test**ï¼šæµ‹è¯•ä¾èµ–èŒƒå›´ã€‚è¡¨æ˜è¯¥ä¾èµ–åªèƒ½ç”¨äºæµ‹è¯•ã€‚\n- **provided**ï¼šå¯¹ç¼–è¯‘ã€æµ‹è¯•æœ‰æ•ˆï¼Œå¯¹è¿è¡Œæ— æ•ˆã€‚\n- **runtime**ï¼šè¿è¡Œæ—¶ä¾èµ–èŒƒå›´ã€‚å¯¹æµ‹è¯•å’Œè¿è¡Œæœ‰æ•ˆï¼Œä½†æ˜¯åœ¨ç¼–è¯‘ä¸»ä»£ç æ—¶æ— æ•ˆã€‚\n- **system**ï¼šç³»ç»Ÿä¾èµ–èŒƒå›´ã€‚ä½¿ç”¨æœ‰è¯¥èŒƒå›´çš„ä¾èµ–æ—¶å¿…é¡»é€šè¿‡ systemPath å…ƒç´ æ˜¾å¼åœ°æŒ‡å®šä¾èµ–æ–‡ä»¶çš„è·¯å¾„ï¼Œè€Œä¸ä¾èµ– Maven ä»“åº“è§£æï¼Œæ‰€ä»¥å¯èƒ½ä¼šé€ æˆæ„å»ºçš„ä¸å¯ç§»æ¤ã€‚\n\n## ä¼ é€’ä¾èµ–\n\n### ä¾èµ–å†²çª\n\n1. åŒä¸€ä¸ª `groupId` å’ŒåŒä¸€ä¸ª `artifactId` ä¸‹ï¼Œåªèƒ½ä½¿ç”¨ä¸€ä¸ª `version`ã€‚è‹¥æœ‰ä¸åŒï¼Œåˆ™åªä¼šå¼•å…¥åä¸€ä¸ªå£°æ˜çš„ä¾èµ–ã€‚\n\n```xml\n<dependency>\n    <groupId>in.hocg.boot</groupId>\n    <artifactId>mybatis-plus-spring-boot-starter</artifactId>\n    <version>1.0.48</version>\n</dependency>\n<!-- åªä¼šä½¿ç”¨ 1.0.49 è¿™ä¸ªç‰ˆæœ¬çš„ä¾èµ– -->\n<dependency>\n    <groupId>in.hocg.boot</groupId>\n    <artifactId>mybatis-plus-spring-boot-starter</artifactId>\n    <version>1.0.49</version>\n</dependency>\n```\n\n2. é¡¹ç›®çš„ä¸¤ä¸ªä¾èµ–åŒæ—¶å¼•å…¥äº†æŸä¸ªä¾èµ–\n\n    å³å¯¹äºé¡¹ç›® Aï¼Œå­˜åœ¨ä¸‹é¢çš„ä¾èµ–å…³ç³»ï¼š\n\n```mermaid\ngraph LR\n  A --> B --> C --> X_2.0\n  A --> D --> X_1.0\n```\n\nä¾èµ–è·¯å¾„ä¸Šæœ‰ä¸¤ä¸ªç‰ˆæœ¬çš„ Xï¼Œä¸ºäº†é¿å…ä¾èµ–é‡å¤ï¼ŒMaven åªä¼šé€‰æ‹©å…¶ä¸­çš„ä¸€ä¸ªè¿›è¡Œè§£æã€‚\n\n#### Maven ä¾èµ–è°ƒè§£\n\nåœ¨é‡åˆ°ä¸Šè¿°é—®é¢˜çš„æ—¶å€™ï¼ŒMaven ä¼šéµå¾ª **è·¯å¾„æœ€çŸ­ä¼˜å…ˆ**Â å’ŒÂ **å£°æ˜é¡ºåºä¼˜å…ˆ**Â ä¸¤å¤§åŸåˆ™æ¥è§£å†³ï¼Œè§£å†³çš„è¿‡ç¨‹è¢«ç§°ä½œ **Maven ä¾èµ–è°ƒè§£**ã€‚\n\n- **è·¯å¾„æœ€çŸ­ä¼˜å…ˆ**\n    \n    æ ¹æ®ä¸Šè¿°çš„ä¾èµ–è·¯å¾„ï¼ŒX 2.0 ä¼šè¢«è§£æä½¿ç”¨ã€‚è¿™æ˜¯å› ä¸ºç¬¬äºŒæ¡è·¯å¾„é•¿åº¦ï¼ˆ2ï¼‰å°äºç¬¬ä¸€æ¡ï¼ˆ3ï¼‰ã€‚\n    \n    ä½†æ˜¯è¯¥åŸåˆ™ä¹Ÿå¹¶éé€šç”¨çš„ï¼Œè‹¥é‡åˆ°è·¯å¾„é•¿åº¦ç›¸ç­‰çš„æƒ…å†µï¼Œå°±éœ€è¦ä½¿ç”¨å£°æ˜é¡ºåºä¼˜å…ˆåŸåˆ™äº†ã€‚\n\n```mermaid\ngraph LR\n  A --> B --> Y_2.0\n  A --> D --> Y_1.0\n```\n\n- **å£°æ˜é¡ºåºä¼˜å…ˆ**\n    \n    åœ¨ä¾èµ–è·¯å¾„é•¿åº¦ç›¸ç­‰çš„å‰æä¸‹ï¼Œåœ¨Â `pom.xml`Â ä¸­ä¾èµ–å£°æ˜çš„é¡ºåºå†³å®šäº†è°ä¼šè¢«è§£æä½¿ç”¨ï¼Œé¡ºåºæœ€å‰çš„é‚£ä¸ªä¾èµ–ä¼˜èƒœã€‚åœ¨ä¸Šè¿°ä¾‹å­ä¸­ï¼Œè‹¥ B çš„ä¾èµ–å£°æ˜åœ¨ D ä¹‹å‰ï¼Œé‚£ä¹ˆ Y 1.0 å°±ä¼šè¢«è§£æä½¿ç”¨ã€‚\n\n```xml\n<!-- A pom.xml -->\n<dependencies>\n    ...\n    dependency B\n    ...\n    dependency D\n\t\t...\n</dependencies>\n```\n\n### æ’é™¤ä¾èµ–\n\næœ‰æ—¶ä¾¯éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨æ’é™¤ä¾èµ–æ¥è§£å†³ä¾èµ–å†²çªé—®é¢˜ã€‚\n\nåŒæ ·çš„ä¾‹å­ï¼Œæ ¹æ®è·¯å¾„æœ€çŸ­ä¼˜å…ˆåŸåˆ™ï¼ŒX 1.0 ä¼šè¢«è§£æä½¿ç”¨ã€‚ä½†æ˜¯å¦‚æœä¾èµ– C ç”¨åˆ°äº† X 2.0 ä¸­æ‰æœ‰çš„ç±»æˆ–æ–¹æ³•æ—¶ï¼Œè¿è¡Œé¡¹ç›®å°±ä¼šæŠ¥ `NoClassDefFoundError` æˆ– `NoSuchMethodError` é”™è¯¯ã€‚\n\n```mermaid\ngraph LR\n  A --> B --> C --> X_2.0\n  A --> D --> X_1.0\n```\n\nè¦è§£å†³è¯¥é—®é¢˜ï¼Œéœ€è¦åœ¨å¼•å…¥ä¾èµ–æ—¶é€šè¿‡ `exclusion` æ ‡ç­¾æ‰‹åŠ¨å°† X 1.0 æ’é™¤ã€‚\n\n```xml\n<dependency>\n    ......\n    <exclusions>\n      <exclusion>\n        <artifactId>x</artifactId>\n        <groupId>group.x</groupId>\n      </exclusion>\n    </exclusions>\n</dependency>\n```\n\nä¸€èˆ¬éƒ½ä¼šä¼˜å…ˆä¿ç•™ç‰ˆæœ¬è¾ƒé«˜çš„ï¼Œå› ä¸ºå¤§éƒ¨åˆ† jar åœ¨å‡çº§çš„æ—¶å€™éƒ½ä¼šåšåˆ°å‘ä¸‹å…¼å®¹ã€‚\n\nä½†å¦‚æœå‡ºç° jar ä¸å‘ä¸‹å…¼å®¹çš„æƒ…å†µï¼Œåº”è€ƒè™‘å‡çº§å…¶ä¸Šå±‚ä¾èµ–ã€‚å¦‚åŒæ ·çš„ä¾‹å­ï¼Œè‹¥ X 2.0 åˆ é™¤äº†ä¸€äº› X 1.0 çš„ç±»æˆ–æ–¹æ³•ï¼Œé‚£ä¹ˆè¦è€ƒè™‘å‡çº§ä¾èµ– D çš„ç‰ˆæœ¬åˆ°ä¸€ä¸ª X 2.0 å…¼å®¹çš„ç‰ˆæœ¬ã€‚\n\n# Maven ä»“åº“\n\nMaven é€šè¿‡ä»“åº“æ¥ç»Ÿä¸€ç®¡ç†æ„ä»¶ï¼ˆartifactï¼‰ï¼Œæ¯ä¸ªæ„ä»¶éƒ½æœ‰ä¸€ç»„åæ ‡å”¯ä¸€æ ‡è¯†ã€‚é€šè¿‡è¯¥åæ ‡æˆ‘ä»¬å¯ä»¥åœ¨ä»“åº“ä¸­æ‰¾åˆ°è¯¥æ„ä»¶ã€‚\n\nMaven ä»“åº“åˆ†ä¸ºï¼š\n\n- æœ¬åœ°ä»“åº“ï¼š\n    \n    è¿è¡Œ Maven çš„è®¡ç®—æœºä¸Šçš„ä¸€ä¸ªç›®å½•ï¼Œç¼“å­˜æœ‰è¿œç¨‹ä¸‹è½½çš„æ„ä»¶å¹¶åŒ…æ‹¬å°šæœªå‘å¸ƒçš„ä¸´æ—¶æ„ä»¶ã€‚`settings.xml`Â æ–‡ä»¶ä¸­å¯ä»¥çœ‹åˆ° Maven çš„æœ¬åœ°ä»“åº“è·¯å¾„é…ç½®ï¼Œé»˜è®¤æœ¬åœ°ä»“åº“è·¯å¾„æ˜¯åœ¨Â `${user.home}/.m2/repository`ã€‚\n    \n- è¿œç¨‹ä»“åº“ï¼š\n    \n    å®˜æ–¹æˆ–å…¶ä»–ç»„ç»‡ç»´æŠ¤çš„ Maven ä»“åº“ã€‚\n    \nMaven è¿œç¨‹ä»“åº“åˆ†ä¸ºï¼š\n\n- ä¸­å¤®ä»“åº“ï¼š\n    \n    è¯¥ä»“åº“ç”± Maven ç¤¾åŒºç»´æŠ¤ï¼Œæ˜¯ Maven çš„é»˜è®¤è¿œç¨‹ä»“åº“ã€‚å¦å¤–ä¸ºäº†æ–¹ä¾¿æŸ¥è¯¢ï¼Œè¿˜æä¾›äº†ä¸€ä¸ªæŸ¥è¯¢åœ°å€ï¼Œå¼€å‘è€…å¯ä»¥é€šè¿‡è¿™ä¸ªåœ°å€æ›´å¿«çš„æœç´¢éœ€è¦æ„ä»¶çš„åæ ‡ã€‚[Maven Repository](https://mvnrepository.com/)\n\n- ç§æœï¼š\n    \n    ç§æœæ˜¯ä¸€ç§ç‰¹æ®Šçš„è¿œç¨‹ Maven ä»“åº“ï¼Œå®ƒæ˜¯æ¶è®¾åœ¨å±€åŸŸç½‘å†…çš„ä»“åº“æœåŠ¡ï¼Œç§æœä¸€èˆ¬è¢«é…ç½®ä¸ºäº’è”ç½‘è¿œç¨‹ä»“åº“çš„é•œåƒï¼Œä¾›å±€åŸŸç½‘å†…çš„ Maven ç”¨æˆ·ä½¿ç”¨ã€‚\n    \n- å…¶ä»–å…¬å…±ä»“åº“\n    \n    æœ‰ä¸€äº›å…¬å…±ä»“åº“æ˜¯ä¸ºäº†åŠ é€Ÿè®¿é—®ï¼ˆæ¯”å¦‚é˜¿é‡Œäº‘ Maven é•œåƒä»“åº“ï¼‰æˆ–è€…éƒ¨åˆ†æ„ä»¶ä¸å­˜åœ¨äºä¸­å¤®ä»“åº“ä¸­ã€‚\n\n**Maven ä¾èµ–åŒ…å¯»æ‰¾é¡ºåº**\n\n1. å…ˆå»æœ¬åœ°ä»“åº“æ‰¾ï¼Œè‹¥æœ‰ï¼Œç›´æ¥ä½¿ç”¨ã€‚\n2. è‹¥æœ¬åœ°ä»“åº“æ²¡æœ‰æ‰¾åˆ°ï¼Œä¼šå»è¿œç¨‹ä»“åº“æ‰¾ï¼Œå¹¶ä¸‹è½½åˆ°æœ¬åœ°ä»“åº“ã€‚\n3. è‹¥è¿œç¨‹ä»“åº“æ²¡æœ‰æ‰¾åˆ°ï¼Œä¼šæŠ¥é”™ã€‚\n\n# Maven ç”Ÿå‘½å‘¨æœŸ\n\nMaven çš„ç”Ÿå‘½å‘¨æœŸæ˜¯ä¸ºäº†å¯¹æ‰€æœ‰çš„æ„å»ºè¿‡ç¨‹è¿›è¡ŒæŠ½è±¡å’Œç»Ÿä¸€ï¼ŒåŒ…å«äº†é¡¹ç›®çš„æ¸…ç†ã€åˆå§‹åŒ–ã€ç¼–è¯‘ã€æµ‹è¯•ã€æ‰“åŒ…ã€é›†æˆæµ‹è¯•ã€éªŒè¯ã€éƒ¨ç½²å’Œç«™ç‚¹ç”Ÿæˆç­‰å‡ ä¹æ‰€æœ‰æ„å»ºæ­¥éª¤ã€‚\n\nMaven å®šä¹‰äº† 3 ä¸ªç”Ÿå‘½å‘¨æœŸ `META-INF/plexus/components.xml`ï¼š\n\n- `default`\n- `clean`\n- `site`\n\nè¿™äº›ç”Ÿå‘½å‘¨æœŸæ˜¯ç›¸äº’ç‹¬ç«‹çš„ï¼Œæ¯ä¸ªç”Ÿå‘½å‘¨æœŸåŒ…å«å¤šä¸ªé˜¶æ®µï¼ˆphaseï¼‰ã€‚å¹¶ä¸”ï¼Œè¿™äº›é˜¶æ®µæ˜¯æœ‰åºçš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåé¢çš„é˜¶æ®µä¾èµ–äºå‰é¢çš„é˜¶æ®µã€‚å½“æ‰§è¡ŒæŸä¸ªé˜¶æ®µçš„æ—¶å€™ï¼Œä¼šå…ˆæ‰§è¡Œå®ƒå‰é¢çš„é˜¶æ®µã€‚\n\næ‰§è¡Œ Maven ç”Ÿå‘½å‘¨æœŸçš„å‘½ä»¤æ ¼å¼å¦‚ä¸‹ï¼š\n\n```shell\nmvn é˜¶æ®µ [é˜¶æ®µ2] ... [é˜¶æ®µn]\n```\n\n## default ç”Ÿå‘½å‘¨æœŸ\n\n`default` ç”Ÿå‘½å‘¨æœŸæ˜¯åœ¨æ²¡æœ‰ä»»ä½•å…³è”æ’ä»¶çš„æƒ…å†µä¸‹å®šä¹‰çš„ï¼Œæ˜¯ Maven çš„ä¸»è¦ç”Ÿå‘½å‘¨æœŸï¼Œç”¨äºæ„å»ºåº”ç”¨ç¨‹åºï¼Œå…±åŒ…å« 23 ä¸ªé˜¶æ®µã€‚\n\n```xml\n<phases>\n  <!-- éªŒè¯é¡¹ç›®æ˜¯å¦æ­£ç¡®ï¼Œå¹¶ä¸”æ‰€æœ‰å¿…è¦çš„ä¿¡æ¯å¯ç”¨äºå®Œæˆæ„å»ºè¿‡ç¨‹ -->\n  <phase>validate</phase>\n  <!-- å»ºç«‹åˆå§‹åŒ–çŠ¶æ€ï¼Œä¾‹å¦‚è®¾ç½®å±æ€§ -->\n  <phase>initialize</phase>\n  <!-- ç”Ÿæˆè¦åŒ…å«åœ¨ç¼–è¯‘é˜¶æ®µçš„æºä»£ç  -->\n  <phase>generate-sources</phase>\n  <!-- å¤„ç†æºä»£ç  -->\n  <phase>process-sources</phase>\n  <!-- ç”Ÿæˆè¦åŒ…å«åœ¨åŒ…ä¸­çš„èµ„æº -->\n  <phase>generate-resources</phase>\n  <!-- å°†èµ„æºå¤åˆ¶å¹¶å¤„ç†åˆ°ç›®æ ‡ç›®å½•ä¸­ï¼Œä¸ºæ‰“åŒ…é˜¶æ®µåšå¥½å‡†å¤‡ã€‚ -->\n  <phase>process-resources</phase>\n  <!-- ç¼–è¯‘é¡¹ç›®çš„æºä»£ç   -->\n  <phase>compile</phase>\n  <!-- å¯¹ç¼–è¯‘ç”Ÿæˆçš„æ–‡ä»¶è¿›è¡Œåå¤„ç†ï¼Œä¾‹å¦‚å¯¹ Java ç±»è¿›è¡Œå­—èŠ‚ç å¢å¼º/ä¼˜åŒ– -->\n  <phase>process-classes</phase>\n  <!-- ç”Ÿæˆè¦åŒ…å«åœ¨ç¼–è¯‘é˜¶æ®µçš„ä»»ä½•æµ‹è¯•æºä»£ç  -->\n  <phase>generate-test-sources</phase>\n  <!-- å¤„ç†æµ‹è¯•æºä»£ç  -->\n  <phase>process-test-sources</phase>\n  <!-- ç”Ÿæˆè¦åŒ…å«åœ¨ç¼–è¯‘é˜¶æ®µçš„æµ‹è¯•æºä»£ç  -->\n  <phase>generate-test-resources</phase>\n  <!-- å¤„ç†ä»æµ‹è¯•ä»£ç æ–‡ä»¶ç¼–è¯‘ç”Ÿæˆçš„æ–‡ä»¶ -->\n  <phase>process-test-resources</phase>\n  <!-- ç¼–è¯‘æµ‹è¯•æºä»£ç  -->\n  <phase>test-compile</phase>\n  <!-- å¤„ç†ä»æµ‹è¯•ä»£ç æ–‡ä»¶ç¼–è¯‘ç”Ÿæˆçš„æ–‡ä»¶ -->\n  <phase>process-test-classes</phase>\n  <!-- ä½¿ç”¨åˆé€‚çš„å•å…ƒæµ‹è¯•æ¡†æ¶ï¼ˆJunit å°±æ˜¯å…¶ä¸­ä¹‹ä¸€ï¼‰è¿è¡Œæµ‹è¯• -->\n  <phase>test</phase>\n  <!-- åœ¨å®é™…æ‰“åŒ…ä¹‹å‰ï¼Œæ‰§è¡Œä»»ä½•çš„å¿…è¦çš„æ“ä½œä¸ºæ‰“åŒ…åšå‡†å¤‡ -->\n  <phase>prepare-package</phase>\n  <!-- è·å–å·²ç¼–è¯‘çš„ä»£ç å¹¶å°†å…¶æ‰“åŒ…æˆå¯åˆ†å‘çš„æ ¼å¼ï¼Œä¾‹å¦‚ JARã€WAR æˆ– EAR æ–‡ä»¶ -->\n  <phase>package</phase>\n  <!-- åœ¨æ‰§è¡Œé›†æˆæµ‹è¯•ä¹‹å‰æ‰§è¡Œæ‰€éœ€çš„æ“ä½œã€‚ ä¾‹å¦‚ï¼Œè®¾ç½®æ‰€éœ€çš„ç¯å¢ƒ -->\n  <phase>pre-integration-test</phase>\n  <!-- å¤„ç†å¹¶åœ¨å¿…è¦æ—¶éƒ¨ç½²è½¯ä»¶åŒ…åˆ°é›†æˆæµ‹è¯•å¯ä»¥è¿è¡Œçš„ç¯å¢ƒ -->\n  <phase>integration-test</phase>\n  <!-- æ‰§è¡Œé›†æˆæµ‹è¯•åæ‰§è¡Œæ‰€éœ€çš„æ“ä½œã€‚ ä¾‹å¦‚ï¼Œæ¸…ç†ç¯å¢ƒ  -->\n  <phase>post-integration-test</phase>\n  <!-- è¿è¡Œä»»ä½•æ£€æŸ¥ä»¥éªŒè¯æ‰“çš„åŒ…æ˜¯å¦æœ‰æ•ˆå¹¶ç¬¦åˆè´¨é‡æ ‡å‡†ã€‚ -->\n  <phase>verify</phase>\n  <!-- \tå°†åŒ…å®‰è£…åˆ°æœ¬åœ°ä»“åº“ä¸­ï¼Œå¯ä»¥ä½œä¸ºæœ¬åœ°å…¶ä»–é¡¹ç›®çš„ä¾èµ– -->\n  <phase>install</phase>\n  <!-- å°†æœ€ç»ˆçš„é¡¹ç›®åŒ…å¤åˆ¶åˆ°è¿œç¨‹ä»“åº“ä¸­ä¸å…¶ä»–å¼€å‘è€…å’Œé¡¹ç›®å…±äº« -->\n  <phase>deploy</phase>\n</phases>\n```\n\næ ¹æ®å‰é¢æåˆ°çš„é˜¶æ®µé—´ä¾èµ–å…³ç³»ç†è®ºï¼Œå½“æˆ‘ä»¬æ‰§è¡Œ `mvn test` å‘½ä»¤çš„æ—¶å€™ï¼Œä¼šæ‰§è¡Œä» validate åˆ° test çš„æ‰€æœ‰é˜¶æ®µï¼Œè¿™ä¹Ÿå°±è§£é‡Šäº†ä¸ºä»€ä¹ˆæ‰§è¡Œæµ‹è¯•çš„æ—¶å€™ï¼Œé¡¹ç›®çš„ä»£ç èƒ½å¤Ÿè‡ªåŠ¨ç¼–è¯‘ã€‚\n\n## clean ç”Ÿå‘½å‘¨æœŸ\n\nclean ç”Ÿå‘½å‘¨æœŸçš„ç›®çš„æ˜¯æ¸…ç†é¡¹ç›®ï¼Œå…±åŒ…å« 3 ä¸ªé˜¶æ®µï¼š\n\n1. pre-clean\n2. clean\n3. post-clean\n\n```xml\n<phases>\n  <!--  æ‰§è¡Œä¸€äº›éœ€è¦åœ¨cleanä¹‹å‰å®Œæˆçš„å·¥ä½œ -->\n  <phase>pre-clean</phase>\n  <!--  ç§»é™¤æ‰€æœ‰ä¸Šä¸€æ¬¡æ„å»ºç”Ÿæˆçš„æ–‡ä»¶ -->\n  <phase>clean</phase>\n  <!--  æ‰§è¡Œä¸€äº›éœ€è¦åœ¨cleanä¹‹åç«‹åˆ»å®Œæˆçš„å·¥ä½œ -->\n  <phase>post-clean</phase>\n</phases>\n<default-phases>\n  <clean>\n    org.apache.maven.plugins:maven-clean-plugin:2.5:clean\n  </clean>\n</default-phases>\n```\n\næ ¹æ®å‰é¢æåˆ°çš„é˜¶æ®µé—´ä¾èµ–å…³ç³»ç†è®ºï¼Œå½“æˆ‘ä»¬æ‰§è¡ŒÂ `mvn clean`Â çš„æ—¶å€™ï¼Œä¼šæ‰§è¡Œ clean ç”Ÿå‘½å‘¨æœŸä¸­çš„ pre-clean å’Œ clean é˜¶æ®µã€‚\n\n## site ç”Ÿå‘½å‘¨æœŸ\n\nsite ç”Ÿå‘½å‘¨æœŸçš„ç›®çš„æ˜¯å»ºç«‹å’Œå‘å¸ƒé¡¹ç›®ç«™ç‚¹ï¼Œå…±åŒ…å« 4 ä¸ªé˜¶æ®µï¼š\n\n1. pre-site\n2. site\n3. post-site\n4. site-deploy\n\n```xml\n<phases>\n  <!--  æ‰§è¡Œä¸€äº›éœ€è¦åœ¨ç”Ÿæˆç«™ç‚¹æ–‡æ¡£ä¹‹å‰å®Œæˆçš„å·¥ä½œ -->\n  <phase>pre-site</phase>\n  <!--  ç”Ÿæˆé¡¹ç›®çš„ç«™ç‚¹æ–‡æ¡£ä½œ -->\n  <phase>site</phase>\n  <!--  æ‰§è¡Œä¸€äº›éœ€è¦åœ¨ç”Ÿæˆç«™ç‚¹æ–‡æ¡£ä¹‹åå®Œæˆçš„å·¥ä½œï¼Œå¹¶ä¸”ä¸ºéƒ¨ç½²åšå‡†å¤‡ -->\n  <phase>post-site</phase>\n  <!--  å°†ç”Ÿæˆçš„ç«™ç‚¹æ–‡æ¡£éƒ¨ç½²åˆ°ç‰¹å®šçš„æœåŠ¡å™¨ä¸Š -->\n  <phase>site-deploy</phase>\n</phases>\n<default-phases>\n  <site>\n    org.apache.maven.plugins:maven-site-plugin:3.3:site\n  </site>\n  <site-deploy>\n    org.apache.maven.plugins:maven-site-plugin:3.3:deploy\n  </site-deploy>\n</default-phases>\n```\n\nMaven èƒ½å¤ŸåŸºäºÂ `pom.xml`Â æ‰€åŒ…å«çš„ä¿¡æ¯ï¼Œè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªå‹å¥½çš„ç«™ç‚¹ï¼Œæ–¹ä¾¿å›¢é˜Ÿäº¤æµå’Œå‘å¸ƒé¡¹ç›®ä¿¡æ¯ã€‚\n\n# Maven æ’ä»¶\n\nMaven æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªæ’ä»¶æ‰§è¡Œæ¡†æ¶ï¼Œæ‰€æœ‰çš„æ‰§è¡Œè¿‡ç¨‹éƒ½ç”±ä¸€ä¸ªä¸ªæ’ä»¶ç‹¬ç«‹å®Œæˆã€‚ä¸Šè¿°æ‰€ä½¿ç”¨åˆ°çš„ installã€clean ç­‰å‘½ä»¤ï¼Œåº•å±‚éƒ½æ˜¯ä¸€ä¸ªä¸ª Maven æ’ä»¶ã€‚æœ¬åœ°çš„é»˜è®¤æ’ä»¶è·¯å¾„ä¸º `${user.home}/.m2/repository/org/apache/maven/plugins`ã€‚å…³äº Maven çš„æ ¸å¿ƒæ’ä»¶å¯ä»¥å‚è€ƒ [Maven Plugins](https://maven.apache.org/plugins/index.html)ã€‚\n\nMaven æ’ä»¶å¯ä»¥ç†è§£ä¸ºä¸€ç»„ä»»åŠ¡çš„é›†åˆï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡å‘½ä»¤è¡Œç›´æ¥è¿è¡ŒæŒ‡å®šæ’ä»¶çš„ä»»åŠ¡ï¼Œä¹Ÿå¯ä»¥å°†æ’ä»¶ä»»åŠ¡æŒ‚è½½åˆ°æ„å»ºç”Ÿå‘½å‘¨æœŸï¼Œéšç€ç”Ÿå‘½å‘¨æœŸè¿è¡Œã€‚\n\nMaven æ’ä»¶è¢«åˆ†ä¸ºä¸‹é¢ä¸¤ç§ç±»å‹ï¼š\n\n- **Build plugins**ï¼šåœ¨æ„å»ºæ—¶æ‰§è¡Œã€‚\n- **Reporting plugins**ï¼šåœ¨ç½‘ç«™ç”Ÿæˆè¿‡ç¨‹ä¸­æ‰§è¡Œã€‚\n\n# Maven å¤šæ¨¡å—ç®¡ç†\n\nå¤šæ¨¡å—ç®¡ç†ç®€å•åœ°æ¥è¯´å°±æ˜¯å°†ä¸€ä¸ªé¡¹ç›®åˆ†ä¸ºå¤šä¸ªæ¨¡å—ï¼Œæ¯ä¸ªæ¨¡å—åªè´Ÿè´£å•ä¸€çš„åŠŸèƒ½å®ç°ã€‚ç›´è§‚çš„è¡¨ç°å°±æ˜¯ä¸€ä¸ª Maven é¡¹ç›®ä¸­ä¸æ­¢æœ‰ä¸€ä¸ª `pom.xml` æ–‡ä»¶ï¼Œä¼šåœ¨ä¸åŒçš„ç›®å½•ä¸­æœ‰å¤šä¸ª `pom.xml` æ–‡ä»¶ï¼Œè¿›è€Œå®ç°å¤šæ¨¡å—ç®¡ç†ã€‚\n\nå¤šæ¨¡å—ç®¡ç†é™¤äº†å¯ä»¥æ›´åŠ ä¾¿äºé¡¹ç›®å¼€å‘å’Œç®¡ç†ï¼Œè¿˜æœ‰å¦‚ä¸‹å¥½å¤„ï¼š\n\n1. é™ä½ä»£ç ä¹‹é—´çš„è€¦åˆæ€§ï¼ˆä»ç±»çº§åˆ«çš„è€¦åˆæå‡åˆ° jar åŒ…çº§åˆ«çš„è€¦åˆï¼‰ï¼›\n2. å‡å°‘é‡å¤ï¼Œæå‡å¤ç”¨æ€§ï¼›\n3. æ¯ä¸ªæ¨¡å—éƒ½å¯ä»¥æ˜¯è‡ªè§£é‡Šçš„ï¼ˆé€šè¿‡æ¨¡å—åæˆ–è€…æ¨¡å—æ–‡æ¡£ï¼‰ï¼›\n4. æ¨¡å—è¿˜è§„èŒƒäº†ä»£ç è¾¹ç•Œçš„åˆ’åˆ†ï¼Œå¼€å‘è€…å¾ˆå®¹æ˜“é€šè¿‡æ¨¡å—ç¡®å®šè‡ªå·±æ‰€è´Ÿè´£çš„å†…å®¹ã€‚\n\nå¤šæ¨¡å—ç®¡ç†ä¸‹ï¼Œä¼šæœ‰ä¸€ä¸ªçˆ¶æ¨¡å—ï¼Œå…¶ä»–çš„éƒ½æ˜¯å­æ¨¡å—ã€‚çˆ¶æ¨¡å—é€šå¸¸åªæœ‰ä¸€ä¸ª `pom.xml`ï¼Œæ²¡æœ‰å…¶ä»–å†…å®¹ã€‚çˆ¶æ¨¡å—çš„ `pom.xml` ä¸€èˆ¬åªå®šä¹‰äº†å„ä¸ªä¾èµ–çš„ç‰ˆæœ¬å·ã€åŒ…å«å“ªäº›å­æ¨¡å—ä»¥åŠæ’ä»¶æœ‰å“ªäº›ã€‚ä¸è¿‡ï¼Œè¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœä¾èµ–åªåœ¨æŸä¸ªå­é¡¹ç›®ä¸­ä½¿ç”¨ï¼Œåˆ™å¯ä»¥åœ¨å­é¡¹ç›®çš„ pom.xml ä¸­ç›´æ¥å¼•å…¥ï¼Œé˜²æ­¢çˆ¶ pom çš„è¿‡äºè‡ƒè‚¿ã€‚\n","tags":["é…ç½®","è½¯ä»¶å¼€å‘","Maven"],"categories":["computer"]},{"title":"è®¾è®¡æ¨¡å¼","url":"/archives/41682/","content":"\nè®¾è®¡æ¨¡å¼ï¼ˆDesign patternï¼‰ä»£è¡¨äº†è½¯ä»¶å¼€å‘ä¸­æœ€ä½³çš„å®è·µï¼Œé€šå¸¸è¢«æœ‰ç»éªŒçš„é¢å‘å¯¹è±¡çš„è½¯ä»¶å¼€å‘äººå‘˜æ‰€é‡‡ç”¨ã€‚\n\n<!-- more -->\n\n# GOFï¼ˆGang of Fourï¼‰\n\nç”± Erich Gammaã€Richard Helmã€Ralph Johnson å’Œ John Vlissides å››äººåˆè‘—å‡ºç‰ˆäº†ä¸€æœ¬åä¸ºÂ **Design Patterns - Elements of Reusable Object-Oriented Softwareï¼ˆä¸­æ–‡è¯‘åï¼šè®¾è®¡æ¨¡å¼ - å¯å¤ç”¨çš„é¢å‘å¯¹è±¡è½¯ä»¶å…ƒç´ ï¼‰**Â çš„ä¹¦ï¼Œè¯¥ä¹¦é¦–æ¬¡æåˆ°äº†è½¯ä»¶å¼€å‘ä¸­è®¾è®¡æ¨¡å¼çš„æ¦‚å¿µã€‚\n\n# è®¾è®¡æ¨¡å¼çš„ç±»å‹\n\n| ç±»å‹ | æè¿° | è®¾è®¡æ¨¡å¼ |\n| --- | --- | --- |\n| åˆ›å»ºå‹æ¨¡å¼ | åœ¨åˆ›å»ºå¯¹è±¡çš„åŒæ—¶éšè—åˆ›å»ºé€»è¾‘çš„æ–¹å¼ | å·¥å‚æ¨¡å¼ï¼ˆFactory Patternï¼‰<br> æŠ½è±¡å·¥å‚æ¨¡å¼ï¼ˆAbstract Factory Patternï¼‰<br> å•ä¾‹æ¨¡å¼ï¼ˆSingleton Patternï¼‰<br> å»ºé€ è€…æ¨¡å¼ï¼ˆBuilder Patternï¼‰<br> åŸå‹æ¨¡å¼ï¼ˆPrototype Patternï¼‰ |\n| ç»“æ„å‹æ¨¡å¼ | å…³æ³¨å¯¹è±¡ä¹‹é—´çš„ç»„åˆå’Œå…³ç³»ï¼Œæ—¨åœ¨è§£å†³å¦‚ä½•æ„å»ºçµæ´»ä¸”å¯å¤ç”¨çš„ç±»å’Œå¯¹è±¡ç»“æ„ | é€‚é…å™¨æ¨¡å¼ï¼ˆAdapter Patternï¼‰<br> æ¡¥æ¥æ¨¡å¼ï¼ˆBridge Patternï¼‰<br> è¿‡æ»¤å™¨æ¨¡å¼ï¼ˆFilterã€Criteria Patternï¼‰<br> ç»„åˆæ¨¡å¼ï¼ˆComposite Patternï¼‰<br> è£…é¥°å™¨æ¨¡å¼ï¼ˆDecorator Patternï¼‰<br> å¤–è§‚æ¨¡å¼ï¼ˆFacade Patternï¼‰<br> äº«å…ƒæ¨¡å¼ï¼ˆFlyweight Patternï¼‰<br> ä»£ç†æ¨¡å¼ï¼ˆProxy Patternï¼‰ |\n| è¡Œä¸ºå‹æ¨¡å¼ | å…³æ³¨å¯¹è±¡ä¹‹é—´çš„é€šä¿¡å’Œäº¤äº’ï¼Œæ—¨åœ¨è§£å†³å¯¹è±¡ä¹‹é—´çš„è´£ä»»åˆ†é…å’Œç®—æ³•çš„å°è£…ã€‚ | è´£ä»»é“¾æ¨¡å¼ï¼ˆChain of Responsibility Patternï¼‰<br> å‘½ä»¤æ¨¡å¼ï¼ˆCommand Patternï¼‰<br> è§£é‡Šå™¨æ¨¡å¼ï¼ˆInterpreter Patternï¼‰<br> è¿­ä»£å™¨æ¨¡å¼ï¼ˆIterator Patternï¼‰<br> ä¸­ä»‹è€…æ¨¡å¼ï¼ˆMediator Patternï¼‰<br> å¤‡å¿˜å½•æ¨¡å¼ï¼ˆMemento Patternï¼‰<br> è§‚å¯Ÿè€…æ¨¡å¼ï¼ˆObserver Patternï¼‰<br> çŠ¶æ€æ¨¡å¼ï¼ˆState Patternï¼‰<br> ç©ºå¯¹è±¡æ¨¡å¼ï¼ˆNull Object Patternï¼‰<br> ç­–ç•¥æ¨¡å¼ï¼ˆStrategy Patternï¼‰<br> æ¨¡æ¿æ¨¡å¼ï¼ˆTemplate Patternï¼‰<br> è®¿é—®è€…æ¨¡å¼ï¼ˆVisitor Patternï¼‰ |\n| J2EE æ¨¡å¼ | ç‰¹åˆ«å…³æ³¨è¡¨ç¤ºå±‚ï¼Œæ˜¯ç”± Sun Java Center é‰´å®šçš„ | MVC æ¨¡å¼ï¼ˆMVC Patternï¼‰<br> ä¸šåŠ¡ä»£è¡¨æ¨¡å¼ï¼ˆBusiness Delegate Patternï¼‰<br> ç»„åˆå®ä½“æ¨¡å¼ï¼ˆComposite Entity Patternï¼‰<br> æ•°æ®è®¿é—®å¯¹è±¡æ¨¡å¼ï¼ˆData Access Object Patternï¼‰<br> å‰ç«¯æ§åˆ¶å™¨æ¨¡å¼ï¼ˆFront Controller Patternï¼‰<br> æ‹¦æˆªè¿‡æ»¤å™¨æ¨¡å¼ï¼ˆIntercepting Filter Patternï¼‰<br> æœåŠ¡å®šä½å™¨æ¨¡å¼ï¼ˆService Locator Patternï¼‰<br> ä¼ è¾“å¯¹è±¡æ¨¡å¼ï¼ˆTransfer Object Patternï¼‰ |\n\n# è®¾è®¡æ¨¡å¼å…­å¤§åŸåˆ™\n\n1. å¼€é—­åŸåˆ™ï¼ˆOpen Close Principleï¼‰\n    \n    å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­ã€‚\n    \n2. é‡Œæ°æ›¿æ¢åŸåˆ™ï¼ˆLiskov Substitution Principleï¼‰\n    \n    ä»»ä½•åŸºç±»å¯ä»¥å‡ºç°çš„åœ°æ–¹ï¼Œæ´¾ç”Ÿç±»ä¸€å®šå¯ä»¥å‡ºç°ã€‚é‡Œæ°ä»£æ¢åŸåˆ™æ˜¯å¯¹å¼€é—­åŸåˆ™çš„è¡¥å……ã€‚\n    \n3. ä¾èµ–å€’è½¬åŸåˆ™ï¼ˆDependence Inversion Principleï¼‰\n    \n    è¿™ä¸ªåŸåˆ™æ˜¯å¼€é—­åŸåˆ™çš„åŸºç¡€ï¼Œå…·ä½“å†…å®¹ï¼šé’ˆå¯¹æ¥å£ç¼–ç¨‹ï¼Œä¾èµ–äºæŠ½è±¡è€Œä¸ä¾èµ–äºå…·ä½“ã€‚\n    \n4. æ¥å£éš”ç¦»åŸåˆ™ï¼ˆInterface Segregation Principleï¼‰\n    \n    è¿™ä¸ªåŸåˆ™çš„æ„æ€æ˜¯ï¼šä½¿ç”¨å¤šä¸ªéš”ç¦»çš„æ¥å£ï¼Œæ¯”ä½¿ç”¨å•ä¸ªæ¥å£è¦å¥½ã€‚å®ƒè¿˜æœ‰å¦å¤–ä¸€ä¸ªæ„æ€æ˜¯ï¼šé™ä½ç±»ä¹‹é—´çš„è€¦åˆåº¦ã€‚ç”±æ­¤å¯è§ï¼Œå…¶å®è®¾è®¡æ¨¡å¼å°±æ˜¯ä»å¤§å‹è½¯ä»¶æ¶æ„å‡ºå‘ã€ä¾¿äºå‡çº§å’Œç»´æŠ¤çš„è½¯ä»¶è®¾è®¡æ€æƒ³ï¼Œå®ƒå¼ºè°ƒé™ä½ä¾èµ–ï¼Œé™ä½è€¦åˆã€‚\n    \n5. è¿ªç±³ç‰¹æ³•åˆ™ï¼ˆDemeter Principleï¼‰\n    \n    åˆç§°æœ€å°‘çŸ¥è¯†åŸåˆ™ï¼ˆLeast Knowledge Principleï¼‰ï¼ŒæŒ‡ï¼šä¸€ä¸ªå®ä½“åº”å½“å°½é‡å°‘åœ°ä¸å…¶ä»–å®ä½“ä¹‹é—´å‘ç”Ÿç›¸äº’ä½œç”¨ï¼Œä½¿å¾—ç³»ç»ŸåŠŸèƒ½æ¨¡å—ç›¸å¯¹ç‹¬ç«‹ã€‚\n    \n6. åˆæˆå¤ç”¨åŸåˆ™ï¼ˆComposite Reuse Principleï¼‰\n    \n    åˆæˆå¤ç”¨åŸåˆ™æ˜¯æŒ‡ï¼šå°½é‡ä½¿ç”¨åˆæˆ/èšåˆçš„æ–¹å¼ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ç»§æ‰¿ã€‚\n\n\n\n","tags":["è½¯ä»¶å¼€å‘","è®¾è®¡æ¨¡å¼"],"categories":["computer"]},{"title":"è®¾è®¡æ¨¡å¼ï¼šå·¥å‚æ¨¡å¼","url":"/archives/17223/","content":"\n**å·¥å‚æ–¹æ³•æ¨¡å¼**æ˜¯ä¸€ç§åˆ›å»ºå‹è®¾è®¡æ¨¡å¼ï¼ŒÂ å…¶åœ¨çˆ¶ç±»ä¸­æä¾›ä¸€ä¸ªåˆ›å»ºå¯¹è±¡çš„æ–¹æ³•ï¼ŒÂ å…è®¸å­ç±»å†³å®šå®ä¾‹åŒ–å¯¹è±¡çš„ç±»å‹ã€‚\n\n<!-- more -->\n\n**æ„å›¾ï¼š** å®šä¹‰ä¸€ä¸ªåˆ›å»ºå¯¹è±¡çš„æ¥å£ï¼Œè®©å…¶å­ç±»è‡ªå·±å†³å®šå®ä¾‹åŒ–å“ªä¸€ä¸ªå·¥å‚ç±»ï¼Œå·¥å‚æ¨¡å¼ä½¿å…¶åˆ›å»ºè¿‡ç¨‹å»¶è¿Ÿåˆ°å­ç±»è¿›è¡Œã€‚\n\n**ä¸»è¦è§£å†³ï¼š** ä¸»è¦è§£å†³æ¥å£é€‰æ‹©çš„é—®é¢˜ã€‚\n\n**ä½•æ—¶ä½¿ç”¨ï¼š** æˆ‘ä»¬æ˜ç¡®åœ°è®¡åˆ’ä¸åŒæ¡ä»¶ä¸‹åˆ›å»ºä¸åŒå®ä¾‹æ—¶ã€‚\n\n**å¦‚ä½•è§£å†³ï¼š** è®©å…¶å­ç±»å®ç°å·¥å‚æ¥å£ï¼Œè¿”å›çš„ä¹Ÿæ˜¯ä¸€ä¸ªæŠ½è±¡çš„äº§å“ã€‚\n\n**å…³é”®ä»£ç ï¼š** åˆ›å»ºè¿‡ç¨‹åœ¨å…¶å­ç±»æ‰§è¡Œã€‚\n\n**ä¼˜ç‚¹ï¼š**\n\n1. ä¸€ä¸ªè°ƒç”¨è€…æƒ³åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œåªè¦çŸ¥é“å…¶åç§°å°±å¯ä»¥äº†ã€‚ \n2. æ‰©å±•æ€§é«˜ï¼Œå¦‚æœæƒ³å¢åŠ ä¸€ä¸ªäº§å“ï¼Œåªè¦æ‰©å±•ä¸€ä¸ªå·¥å‚ç±»å°±å¯ä»¥ã€‚\n3. å±è”½äº§å“çš„å…·ä½“å®ç°ï¼Œè°ƒç”¨è€…åªå…³å¿ƒäº§å“çš„æ¥å£ã€‚\n\n**ç¼ºç‚¹ï¼š** æ¯æ¬¡å¢åŠ ä¸€ä¸ªäº§å“æ—¶ï¼Œéƒ½éœ€è¦å¢åŠ ä¸€ä¸ªå…·ä½“ç±»å’Œå¯¹è±¡å®ç°å·¥å‚ï¼Œä½¿å¾—ç³»ç»Ÿä¸­ç±»çš„ä¸ªæ•°æˆå€å¢åŠ ï¼Œåœ¨ä¸€å®šç¨‹åº¦ä¸Šå¢åŠ äº†ç³»ç»Ÿçš„å¤æ‚åº¦ï¼ŒåŒæ—¶ä¹Ÿå¢åŠ äº†ç³»ç»Ÿå…·ä½“ç±»çš„ä¾èµ–ã€‚","tags":["è½¯ä»¶å¼€å‘","è®¾è®¡æ¨¡å¼"],"categories":["computer"]},{"title":"åƒåœ¾å›æ”¶ç­–ç•¥ä¸ç®—æ³•","url":"/archives/64652/","content":"\nåƒåœ¾æ”¶é›†å™¨ï¼ˆgarbage collectorï¼‰æ˜¯ä¸€ç§åŠ¨æ€å­˜å‚¨åˆ†é…å™¨ï¼Œå®ƒè‡ªåŠ¨é‡Šæ”¾ç¨‹åºä¸å†éœ€è¦çš„å†…å­˜å—ï¼Œè¿™äº›å—ä¹Ÿç§°ä¸º`åƒåœ¾`ã€‚è‡ªåŠ¨å›æ”¶åƒåœ¾çš„è¿‡ç¨‹åˆ™ç§°ä¸º`åƒåœ¾æ”¶é›†ï¼ˆgarbage collectionï¼‰`ã€‚åœ¨ä¸€ä¸ªæ”¯æŒåƒåœ¾æ”¶é›†çš„è¯­è¨€ä¸­ï¼Œç¨‹åºæ˜¾å¼åœ°ç”³è¯·å†…å­˜ï¼Œä½†ä»ä¸éœ€è¦æ˜¾å¼çš„é‡Šæ”¾å®ƒä»¬ã€‚åƒåœ¾æ”¶é›†å™¨ä¼šå®šæœŸè¯†åˆ«åƒåœ¾å—ï¼Œå¹¶å°†åƒåœ¾å—æ”¾å›ç©ºé—²é“¾è¡¨ä¸­ã€‚\n\n<!-- more -->\n\n# åƒåœ¾å›æ”¶ç­–ç•¥\n\n## å¼•ç”¨è®¡æ•°æ³•\n\nå½“å¯¹è±¡è¢«å¼•ç”¨æ—¶ç¨‹åºè®¡æ•°å™¨ +1ï¼Œé‡Šæ”¾æ—¶ -1ã€‚å½“ä¸º 0 æ—¶è¯æ˜å¯¹è±¡æœªè¢«å¼•ç”¨ï¼Œå¯ä»¥å›æ”¶ã€‚\n\nä½†æ˜¯è¿™ä¸ªç®—æ³•æœ‰æ˜æ˜¾çš„ç¼ºé™·ï¼Œå¯¹äºå¾ªç¯å¼•ç”¨çš„æƒ…å†µä¸‹ï¼Œå¾ªç¯å¼•ç”¨çš„å¯¹è±¡å°±ä¸ä¼šè¢«å›æ”¶ã€‚ä¾‹å¦‚ä¸‹å›¾ï¼šå¯¹è±¡ Aä¸ B å¾ªç¯å¼•ç”¨ï¼Œå³ä¾¿æ²¡æœ‰å…¶ä»–çš„å¯¹è±¡å¼•ç”¨ A å’Œ Bï¼ŒA å’Œ B ä¹Ÿéƒ½ä¸ä¼šè¢«å›æ”¶ã€‚\n\n![ref_count](åƒåœ¾å›æ”¶ç­–ç•¥ä¸ç®—æ³•/ref_count.png)\n\n## å¯è¾¾æ€§åˆ†æ\n\né€šè¿‡ä¸€ç³»åˆ—ç§°ä¹‹ä¸º `GC Roots` çš„å¯¹è±¡ä½œä¸ºèµ·ç‚¹ï¼Œä»æ­¤èµ·ç‚¹å‘ä¸‹æœç´¢ï¼Œæ‰€èµ°è¿‡çš„è·¯å¾„ç§°ä¹‹ä¸ºå¼•ç”¨é“¾ã€‚å½“ä¸€ä¸ªå¯¹è±¡åˆ° GC Roots æ²¡æœ‰ä»»ä½•å¼•ç”¨é“¾ç›¸è¿æ¥ï¼Œä»£è¡¨æ­¤å¯¹è±¡ä¸å¯è¾¾ã€‚\n\n![achievable](åƒåœ¾å›æ”¶ç­–ç•¥ä¸ç®—æ³•/achievable.png)\n\nåœ¨ Java å¯ä»¥ä½œä¸º GC Roots çš„å¯¹è±¡åŒ…æ‹¬ï¼š\n\n1. è™šæ‹Ÿæœºæ ˆï¼ˆå¸§æ ˆä¸­çš„å±€éƒ¨å˜é‡è¡¨ï¼‰ä¸­çš„å¼•ç”¨å¯¹è±¡ï¼›\n2. æ–¹æ³•åŒºä¸­ç±»é™æ€å±æ€§ï¼ˆstaticï¼‰å¼•ç”¨çš„å¯¹è±¡ï¼›\n3. æ–¹æ³•åŒºä¸­å¸¸é‡ï¼ˆconstantï¼‰å¼•ç”¨çš„å¯¹è±¡ï¼›\n4. æœ¬åœ°æ–¹æ³•æ ˆä¸­ JNIï¼ˆå³ä¸€èˆ¬è¯´çš„ Native æ–¹æ³•ï¼‰çš„å¼•ç”¨å¯¹è±¡ï¼›\n\n# åƒåœ¾å›æ”¶ç®—æ³•\n\n## æ ‡è®°-æ¸…é™¤ç®—æ³•ï¼ˆMark-Sweepï¼‰\n\né¦–å…ˆåˆ©ç”¨å¯è¾¾æ€§å»éå†å†…å­˜ï¼ŒæŠŠå­˜æ´»å¯¹è±¡å’Œåƒåœ¾å¯¹è±¡è¿›è¡Œæ ‡è®°ã€‚æ ‡è®°ç»“æŸåç»Ÿä¸€å°†æ‰€æœ‰æ ‡è®°çš„å¯¹è±¡å›æ”¶æ‰ã€‚\n\n- æ ‡è®°é˜¶æ®µï¼šæ ‡è®°å‡ºæ‰€æœ‰éœ€è¦å›æ”¶çš„å¯¹è±¡ï¼›\n- æ¸…é™¤é˜¶æ®µï¼šå›æ”¶è¢«æ ‡è®°çš„å¯¹è±¡æ‰€å ç”¨çš„ç©ºé—´ã€‚\n\n![mark_sweep](åƒåœ¾å›æ”¶ç­–ç•¥ä¸ç®—æ³•/mark_sweep.png)\n\nä¼˜ç‚¹ï¼šå®ç°ç®€å•\n\nç¼ºç‚¹ï¼šæ•ˆç‡è¾ƒä½ï¼Œå¹¶ä¸”ä¼šäº§ç”Ÿå¤§é‡ä¸è¿ç»­çš„å†…å­˜ç©ºé—´ç¢ç‰‡ï¼Œåç»­å¯èƒ½å‘ç”Ÿå¤§å¯¹è±¡ä¸èƒ½æ‰¾åˆ°å¯åˆ©ç”¨ç©ºé—´çš„é—®é¢˜\n\n## æ ‡è®°-æ•´ç†ç®—æ³•ï¼ˆMark-Compactï¼‰\n\næ ‡è®°åä¸æ˜¯æ¸…ç†å¯¹è±¡ï¼Œè€Œæ˜¯å°†å­˜æ´»å¯¹è±¡ç§»å‘å†…å­˜çš„ä¸€ç«¯ã€‚ç„¶åæ¸…é™¤ç«¯è¾¹ç•Œå¤–çš„å¯¹è±¡ã€‚\n\n![mark_compact](åƒåœ¾å›æ”¶ç­–ç•¥ä¸ç®—æ³•/mark_compact.png)\n\n## å¤åˆ¶ç®—æ³•ï¼ˆCopyingï¼‰\n\næŒ‰å†…å­˜å®¹é‡å°†å†…å­˜åˆ’åˆ†ä¸ºç­‰å¤§å°çš„ä¸¤å—ã€‚æ¯æ¬¡åªä½¿ç”¨å…¶ä¸­ä¸€å—ï¼Œå½“è¿™ä¸€å—å†…å­˜æ»¡åå°†å°šå­˜æ´»çš„å¯¹è±¡å¤åˆ¶åˆ°å¦ä¸€å—ä¸Šå»ï¼ŒæŠŠå·²ä½¿ç”¨çš„å†…å­˜æ¸…æ‰ã€‚\n\n![copying](åƒåœ¾å›æ”¶ç­–ç•¥ä¸ç®—æ³•/copying.png)\n\nä¼˜ç‚¹ï¼šå®ç°ç®€å•ï¼Œè¿è¡Œé«˜æ•ˆï¼Œä¸æ˜“äº§ç”Ÿç¢ç‰‡\n\nç¼ºç‚¹ï¼šå¯ç”¨å†…å­˜ç¼©å°ä¸ºäº†åŸæ¥çš„ä¸€åŠï¼Œæµªè´¹ç©ºé—´ã€‚è‹¥å­˜æ´»å¯¹è±¡å¢å¤šçš„è¯ï¼Œè¯¥ç®—æ³•çš„æ•ˆç‡ä¼šå¤§å¤§é™ä½\n\n## åˆ†ä»£æ”¶é›†ç®—æ³•ï¼ˆGenerational Collectionï¼‰\n\nåˆ†ä»£æ”¶é›†æ³•æ˜¯ç›®å‰å¤§éƒ¨åˆ† JVM æ‰€é‡‡ç”¨çš„æ–¹æ³•ï¼ŒGC å †åˆ’åˆ†ä¸ºæ–°ç”Ÿä»£ï¼ˆYoung Generationï¼‰å’Œè€ç”Ÿä»£ï¼ˆTenured/Old Generationï¼‰ã€‚æ–°ç”Ÿä»£å’Œè€å¹´ä»£çš„é»˜è®¤æ¯”ä¾‹ä¸º 1 : 2ï¼›æ–°ç”Ÿä»£åˆåˆ†ä¸º Eden åŒºï¼Œ from Survivor åŒºï¼ˆç®€ç§° S0 ï¼‰ï¼Œto Survivor åŒºï¼ˆç®€ç§° S1 ï¼‰ï¼Œä¸‰è€…çš„æ¯”ä¾‹ä¸º 8: 1 : 1ã€‚\n\n![generational_collection](åƒåœ¾å›æ”¶ç­–ç•¥ä¸ç®—æ³•/generational_collection.png)\n\næˆ‘ä»¬æŠŠæ–°ç”Ÿä»£å‘ç”Ÿçš„ GC ç§°ä¸º Young GCï¼ˆä¹Ÿå« Minor GC ï¼‰,è€å¹´ä»£å‘ç”Ÿçš„ GC ç§°ä¸º Old GCï¼ˆä¹Ÿç§°ä¸º Full GC ï¼‰ã€‚æ–°è€ç”Ÿä»£ä¼šä½¿ç”¨ä¸åŒçš„åƒåœ¾å›æ”¶ç®—æ³•ï¼Œä¸€èˆ¬æƒ…å†µä¸‹\n\n- æ–°ç”Ÿä»£ä½¿ç”¨å¤åˆ¶ç®—æ³•\n- è€å¹´ä»£ä½¿ç”¨æ ‡è®°æ¸…é™¤ç®—æ³•æˆ–è€…æ ‡è®°æ•´ç†ç®—æ³•\n\nåœ¨æ–°ç”Ÿä»£ä¸­ï¼Œæ¯æ¬¡åƒåœ¾æ”¶é›†æ—¶éƒ½æœ‰å¤§æ‰¹å¯¹è±¡æ­»å»ï¼Œåªæœ‰å°‘é‡å­˜æ´»ï¼Œä½¿ç”¨å¤åˆ¶ç®—æ³•æ¯”è¾ƒåˆé€‚ï¼Œåªéœ€è¦ä»˜å‡ºå°‘é‡å­˜æ´»å¯¹è±¡çš„å¤åˆ¶æˆæœ¬å°±å¯ä»¥å®Œæˆæ”¶é›†ã€‚è€å¹´ä»£å¯¹è±¡å­˜æ´»ç‡é«˜ï¼Œé€‚åˆä½¿ç”¨æ ‡è®°-æ¸…ç†æˆ–è€…æ ‡è®°-æ•´ç†ç®—æ³•è¿›è¡Œåƒåœ¾å›æ”¶ã€‚\n\n![new_generation](åƒåœ¾å›æ”¶ç­–ç•¥ä¸ç®—æ³•/new_generation.png)\n\nå¯¹è±¡çš„å†…å­˜åˆ†é…ä¸»è¦åœ¨æ–°ç”Ÿä»£çš„ `Eden Space` å’Œ Survivor åŒºçš„ `From Space`ï¼ˆSurvivor ç›®å‰å­˜æ”¾å¯¹è±¡çš„é‚£ä¸€å—ï¼‰ï¼Œå°‘æ•°æƒ…å†µä¼šç›´æ¥åˆ†é…åˆ°è€ç”Ÿä»£ã€‚å½“æ–°ç”Ÿä»£çš„ Eden Space å’Œ From Space ç©ºé—´ä¸è¶³æ—¶å°±ä¼šå‘ç”Ÿä¸€æ¬¡ GCï¼Œè¿›è¡Œ GC åï¼ŒEden Space å’Œ From Space åŒºçš„å­˜æ´»å¯¹è±¡ä¼šè¢«æŒªåˆ° To Spaceï¼Œç„¶åå°† Eden Space å’Œ From Space è¿›è¡Œæ¸…ç†ã€‚å¦‚æœ To Space æ— æ³•è¶³å¤Ÿå­˜å‚¨æŸä¸ªå¯¹è±¡ï¼Œåˆ™å°†è¿™ä¸ªå¯¹è±¡å­˜å‚¨åˆ°è€ç”Ÿä»£ã€‚åœ¨è¿›è¡Œ GC åï¼Œä½¿ç”¨çš„ä¾¿æ˜¯ Eden Space å’Œ To Space äº†ï¼Œå¦‚æ­¤åå¤å¾ªç¯ã€‚å½“å¯¹è±¡åœ¨ Survivor åŒºèº²è¿‡ä¸€æ¬¡ GC åï¼Œå…¶å¹´é¾„å°±ä¼š+1ã€‚é»˜è®¤æƒ…å†µä¸‹å¹´é¾„åˆ°è¾¾ 15 çš„å¯¹è±¡ä¼šè¢«ç§»åˆ°è€ç”Ÿä»£ä¸­ã€‚\n\n# å‚è€ƒèµ„æ–™\n\n- [åƒåœ¾å›æ”¶ç®—æ³•ä¹‹åˆ†ä»£å›æ”¶ç®—æ³•](https://blog.csdn.net/sinat_36246371/article/details/52998505)\n- [åƒåœ¾å›æ”¶ç­–ç•¥å’Œç®—æ³•ï¼Œçœ‹è¿™ç¯‡å°±å¤Ÿäº†](https://baijiahao.baidu.com/s?id=1674235021824640450&wfr=spider&for=pc)","tags":["GC"],"categories":["computer"]},{"title":"RBACæƒé™ç®¡ç†","url":"/archives/27652/","content":"\nRBACï¼ˆRole-Based Access Controlï¼‰ä½œä¸ºå½“å‰ä½¿ç”¨èŒƒå›´æœ€å¹¿çš„ä¸€ç§æƒé™è®¾è®¡æ¨¡å‹ï¼Œæœ‰ 3 ä¸ªåŸºç¡€ç»„æˆéƒ¨åˆ†ï¼Œåˆ†åˆ«æ˜¯ï¼šç”¨æˆ·ã€è§’è‰²å’Œæƒé™ã€‚RBAC é€šè¿‡å®šä¹‰è§’è‰²çš„æƒé™ï¼Œå¹¶å¯¹ç”¨æˆ·æˆäºˆæŸä¸ªè§’è‰²ä»è€Œæ¥æ§åˆ¶ç”¨æˆ·çš„æƒé™ï¼Œå®ç°äº†ç”¨æˆ·å’Œæƒé™çš„é€»è¾‘åˆ†ç¦»ï¼ˆåŒºåˆ«äºACLæ¨¡å‹ï¼‰ã€‚ä¸åŒè§’è‰²å¯¹åº”ä¸åŒæƒé™ï¼Œç”¨æˆ·å¯å……å½“å¤šä¸ªè§’è‰²ã€‚\n\n<!-- more -->\n\n# åŸåˆ™\n\n* æƒé™åˆ’åˆ†\n    \n    åœ¨æƒé™ç®¡ç†ç³»ç»Ÿå½“ä¸­ä¸€èˆ¬åˆ’åˆ†ä¸ºä»¥ä¸‹å‡ ç§æƒé™ï¼š\n    * é¡µé¢æƒé™ï¼šå¯çœ‹åˆ°çš„é¡µé¢\n    * æ“ä½œæƒé™ï¼šå¯è¿›è¡Œçš„äº¤äº’è¡Œä¸º\n    * æ•°æ®æƒé™ï¼šå¯æŸ¥çœ‹çš„æ•°æ®\n\n* å®‰å…¨åŸåˆ™\n\n    RBACçš„ä¸‰ä¸ªè‘—åå®‰å…¨åŸåˆ™ï¼šæœ€å°æƒé™åŸåˆ™ã€è´£ä»»åˆ†ç¦»åŸåˆ™å’Œæ•°æ®æŠ½è±¡åŸåˆ™\n    * æœ€å°æƒé™åŸåˆ™ï¼šRBACå¯ä»¥å°†è§’è‰²é…ç½®æˆå…¶å®Œæˆä»»åŠ¡æ‰€éœ€çš„æœ€å°æƒé™é›†åˆã€‚\n    * è´£ä»»åˆ†ç¦»åŸåˆ™ï¼šå¯ä»¥é€šè¿‡è°ƒç”¨ç›¸äº’ç‹¬ç«‹äº’æ–¥çš„è§’è‰²æ¥å…±åŒå®Œæˆæ•æ„Ÿçš„ä»»åŠ¡ï¼Œä¾‹å¦‚è¦æ±‚ä¸€ä¸ªè®¡è´¦å‘˜å’Œè´¢åŠ¡ç®¡ç†å‘˜å…±åŒå‚ä¸ç»Ÿä¸€è¿‡è´¦æ“ä½œã€‚\n    * æ•°æ®æŠ½è±¡åŸåˆ™ï¼šå¯ä»¥é€šè¿‡æƒé™çš„æŠ½è±¡æ¥ä½“ç°ï¼Œä¾‹å¦‚è´¢åŠ¡æ“ä½œç”¨å€Ÿæ¬¾ã€å­˜æ¬¾ç­‰æŠ½è±¡æƒé™ï¼Œè€Œä¸æ˜¯ä½¿ç”¨å…¸å‹çš„è¯»ã€å†™ã€æ‰§è¡Œæƒé™ã€‚\n\n# åˆ†ç±»\n\næ ‡å‡†çš„RBACæ¨¡å‹åŒ…æ‹¬å››ä¸ªéƒ¨ä»¶æ¨¡å‹ï¼Œåˆ†åˆ«ä¸ºåŸºæœ¬æ¨¡å‹RABC0ã€è§’è‰²åˆ†çº§æ¨¡å‹RABC1ã€è§’è‰²é™åˆ¶æ¨¡å‹RABC2ã€ç»Ÿä¸€æ¨¡å‹RABC3ã€‚\n\n* RBAC0ï¼ˆåŸºæœ¬æ¨¡å‹ï¼‰å®šä¹‰äº†å®Œå…¨æ”¯æŒRBACæ¦‚å¿µçš„ä»»ä½•ç³»ç»Ÿçš„**æœ€ä½éœ€æ±‚**ã€‚RBAC0çš„æ¨¡å‹ä¸­åŒ…æ‹¬ç”¨æˆ·ï¼ˆUï¼‰ã€è§’è‰²ï¼ˆRï¼‰å’Œè®¸å¯æƒï¼ˆPï¼‰ç­‰3ç±»å®ä½“é›†åˆï¼ŒRABC0æ˜¯æƒé™ç®¡ç†çš„æ ¸å¿ƒéƒ¨åˆ†ï¼Œå…¶ä»–çš„ç‰ˆæœ¬éƒ½æ˜¯å»ºç«‹åœ¨0çš„åŸºç¡€ä¸Šã€‚\n* RBAC1ï¼ˆè§’è‰²åˆ†çº§æ¨¡å‹ï¼‰åŸºäºRBAC0æ¨¡å‹ï¼Œå¼•å…¥è§’è‰²é—´çš„**ç»§æ‰¿å…³ç³»**ï¼ˆHierarchical Roleï¼‰ï¼Œå³è§’è‰²ä¸Šæœ‰äº†ä¸Šä¸‹çº§çš„åŒºåˆ«ï¼Œè§’è‰²é—´çš„ç»§æ‰¿å…³ç³»å¯åˆ†ä¸ºä¸€èˆ¬ç»§æ‰¿å…³ç³»å’Œå—é™ç»§æ‰¿å…³ç³»ï¼š\n  * ä¸€èˆ¬ç»§æ‰¿å…³ç³»ä»…è¦æ±‚è§’è‰²ç»§æ‰¿å…³ç³»æ˜¯ä¸€ä¸ªç»å¯¹ååºå…³ç³»ï¼Œå…è®¸è§’è‰²é—´çš„å¤šç»§æ‰¿ã€‚\n  * å—é™ç»§æ‰¿å…³ç³»åˆ™è¿›ä¸€æ­¥è¦æ±‚è§’è‰²ç»§æ‰¿å…³ç³»æ˜¯ä¸€ä¸ªæ ‘ç»“æ„ï¼Œå®ç°è§’è‰²é—´çš„å•ç»§æ‰¿ã€‚è¿™ç§æ¨¡å‹åˆé€‚äºè§’è‰²ä¹‹é—´çš„å±‚æ¬¡æ˜ç¡®ï¼ŒåŒ…å«æ˜ç¡®ã€‚\n\n| ä¸€èˆ¬ç»§æ‰¿å…³ç³»ï¼šä¸Šçº§å¯ç»§æ‰¿ä¸‹çº§è§’è‰²çš„æƒé™ï¼Œè€Œä¸å—åˆ°ä¸‹çº§è§’è‰²æ‰€å±çš„é™åˆ¶ | å—é™ç»§æ‰¿å…³ç³»ï¼šä¸Šçº§ç»§æ‰¿ä¸‹çº§è§’è‰²çš„æƒé™ï¼Œä½†æ˜¯å¿…é¡»æ˜¯ä¸‹çº§è§’è‰²æ‰€å±çš„ä¸Šçº§ |\n| ---------------------------------------------------- | ---------------------------------------------------- |\n|  ![General_inheritance](RBACæƒé™ç®¡ç†/General_inheritance.png)                                                    |  ![General_inheritance](RBACæƒé™ç®¡ç†/Restricted_inheritance.png)                                                     |\n\n* RBAC2ï¼ˆè§’è‰²é™åˆ¶æ¨¡å‹ï¼‰å¼•å…¥äº†è§’è‰²é—´çš„**çº¦æŸå…³ç³»**ï¼Œä¸»è¦çº¦æŸè§„åˆ™åŒ…æ‹¬ï¼šè§’è‰²é—´çš„äº’æ–¥å…³ç³»ï¼Œåœ¨å¤„ç†ç”¨æˆ·å’Œè¿™äº›è§’è‰²ä¹‹é—´çš„å…³ç³»æ—¶ï¼ŒåŒ…æ‹¬é™æ€åˆ†ç¦»å’ŒåŠ¨æ€åˆ†ç¦»ï¼Œé™æ€åˆ†ç¦»æŒ‡äº’æ–¥çš„è§’è‰²ä¸èƒ½åŒæ—¶èµ‹äºˆåŒä¸€ä¸ªç”¨æˆ·ï¼›åŠ¨æ€åˆ†ç¦»æŒ‡ç”¨æˆ·ä¸èƒ½åŒæ—¶æ“ä½œä¸¤ä¸ªäº’æ–¥çš„è§’è‰²è¿›è¡Œç™»å½•ã€‚\n\n| å½“é‡‡ç”¨é™æ€åˆ†ç¦»æ—¶ï¼Œäº’æ–¥çš„è§’è‰²ä¸èƒ½åŒæ—¶è¢«èµ‹äºˆåŒä¸€ä¸ªç”¨æˆ· | åŠ¨æ€åˆ†ç¦»æ—¶ï¼Œäº’æ–¥çš„è§’è‰²å¯ä»¥åŒæ—¶è¢«èµ‹äºˆåŒä¸€ä¸ªç”¨æˆ·ï¼Œåˆ™ç”¨æˆ·ç™»å½•åéœ€è¦é€‰æ‹©ä½¿ç”¨çš„è§’è‰²ï¼ŒåŒæ—¶è¦æ”¯æŒæ ¹æ®éœ€è¦åˆ‡æ¢è§’è‰² |\n| ---------------------------------------------------- | ---------------------------------------------------- |\n|  ![static_separation](RBACæƒé™ç®¡ç†/static_separation.png)                                                    |  ![dynamic_separation](RBACæƒé™ç®¡ç†/dynamic_separation.png)                                                     |\n\n* RBAC3ï¼ˆç»Ÿä¸€æ¨¡å‹ï¼‰åŒæ—¶åŒ…å«äº†1å’Œ2çš„ç‰¹æ€§ï¼ˆç»§æ‰¿å…³ç³»å’Œçº¦æŸå…³ç³»ï¼‰ã€‚\n\n# å‚è€ƒèµ„æ–™\n\n- [æƒé™ç®¡ç†_RABCçš„æƒé™æ¨¡å‹åˆ†æ](https://zhuanlan.zhihu.com/p/157646519)\n\n","tags":["è½¯ä»¶å¼€å‘","æƒé™ç®¡ç†"],"categories":["computer"]},{"title":"é…ç½®ä¸­å¿ƒ","url":"/archives/6253/","content":"\n## é—®é¢˜\n\n1. é™æ€åŒ–é…ç½®\n\nå¤§å¤šæ•°åœ¨é¡¹ç›®é…ç½®å†™åœ¨ä¾‹å¦‚ **application.yml**ï¼Œç„¶åå°†å„ç±»å‚æ•°é…ç½®ã€åº”ç”¨é…ç½®ã€ç¯å¢ƒé…ç½®ã€å®‰å…¨é…ç½®ã€ä¸šåŠ¡é…ç½®éƒ½å†™åˆ°è¿™ä¸ªæ–‡ä»¶é‡Œã€‚å½“é¡¹ç›®ä»£ç é€»è¾‘ä¸­éœ€è¦ä½¿ç”¨é…ç½®çš„æ—¶å€™ï¼Œå°±ä»è¿™ä¸ªé…ç½®æ–‡ä»¶ä¸­è¯»å–ã€‚è¿™ç§åšæ³•è™½ç„¶ç®€å•ï¼Œä½†å¦‚æœå‚æ•°éœ€è¦ä¿®æ”¹ï¼Œ**å°±éœ€è¦é‡å¯è¿è¡Œä¸­çš„é¡¹ç›®æ‰èƒ½ç”Ÿæ•ˆ**ã€‚\n\n2. é…ç½®æ–‡ä»¶æ— æ³•åŒºåˆ†ç¯å¢ƒã€‚\n\nç”±äºé…ç½®æ–‡ä»¶æ˜¯æ”¾åœ¨é¡¹ç›®ä¸­çš„ï¼Œä½†æ˜¯æˆ‘ä»¬é¡¹ç›®å¯èƒ½ä¼šæœ‰å¤šä¸ªç¯å¢ƒï¼Œä¾‹å¦‚ï¼šæµ‹è¯•ç¯å¢ƒã€é¢„å‘å¸ƒç¯å¢ƒã€ç”Ÿäº§ç¯å¢ƒã€‚æ¯ä¸€ä¸ªç¯å¢ƒæ‰€ä½¿ç”¨çš„é…ç½®å‚æ•°ç†è®ºä¸Šéƒ½æ˜¯ä¸åŒçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨é…ç½®æ–‡ä»¶ä¸­æ ¹æ®**ä¸åŒç¯å¢ƒé…ç½®ä¸åŒçš„å‚æ•°ï¼Œè¿™äº›éƒ½æ˜¯æ‰‹åŠ¨ç»´æŠ¤**ï¼Œåœ¨é¡¹ç›®å‘å¸ƒçš„æ—¶å€™ï¼Œæå…¶å®¹æ˜“å› å¼€å‘äººå‘˜çš„å¤±è¯¯å¯¼è‡´å‡ºé”™ã€‚\n\n3. é…ç½®æ–‡ä»¶è¿‡äºåˆ†æ•£\n\nå¦‚æœä¸€ä¸ªé¡¹ç›®ä¸­å­˜åœ¨å¤šä¸ªé€»è¾‘æ¨¡å—ç‹¬ç«‹éƒ¨ç½²ï¼Œæ¯ä¸ªæ¨¡å—æ‰€ä½¿ç”¨çš„é…ç½®å†…å®¹åˆä¸ç›¸åŒï¼Œä¼ ç»Ÿçš„åšæ³•æ˜¯ä¼šåœ¨æ¯ä¸€ä¸ªæ¨¡å—ä¸­éƒ½æ”¾ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œç”šè‡³ä¸åŒæ¨¡å—çš„é…ç½®æ–‡ä»¶æ ¼å¼è¿˜ä¸ä¸€æ ·ã€‚é‚£ä¹ˆé•¿æœŸçš„ç»“æœå°±æ˜¯**é…ç½®æ–‡ä»¶è¿‡äºåˆ†æ•£æ··ä¹±ï¼Œéš¾ä»¥ç®¡ç†**ã€‚\n\n4. é…ç½®ä¿®æ”¹æ— æ³•è¿½æº¯\n\nå› ä¸ºé‡‡ç”¨çš„é™æ€é…ç½®æ–‡ä»¶æ–¹å¼ï¼Œæ‰€ä»¥å½“é…ç½®è¿›è¡Œä¿®æ”¹ä¹‹åï¼Œ**ä¸å®¹æ˜“å½¢æˆè®°å½•**ï¼Œæ›´æ— æ³•è¿½æº¯æ˜¯è°ä¿®æ”¹çš„ã€ä¿®æ”¹æ—¶é—´æ˜¯ä»€ä¹ˆã€ä¿®æ”¹å‰æ˜¯ä»€ä¹ˆå†…å®¹ã€‚æ—¢ç„¶æ— æ³•è¿½æº¯ï¼Œé‚£ä¹ˆå½“é…ç½®å‡ºé”™æ—¶ï¼Œæ›´æ²¡åŠæ³•å›æ»šé…ç½®äº†ã€‚\n\n## ç›®æ ‡\n\næ˜¯å¦æœ‰ä¸€ç§æ–¹æ³•èƒ½åœ¨ä¸é‡å¯é¡¹ç›®ä¹Ÿèƒ½åŠ¨æ€ä¿®æ”¹é…ç½®å‘¢ï¼Ÿ\n\n## è§£å†³åŠæ³•\n\nnacos çš„é…ç½®ä¸­å¿ƒæä¾›äº†è¿™ä¸ªåŠŸèƒ½ã€‚\n\næˆ‘ä»¬å¯ä»¥åœ¨é…ç½®ç®¡ç† -> é…ç½®åˆ—è¡¨ä¸­åˆ›å»ºæˆ‘ä»¬çš„é…ç½®ï¼Œæ¯æ¬¡ä¿®æ”¹è¿™ä¸ªé…ç½®æ—¶æœåŠ¡ä¼šçƒ­æ›´æ–°è€Œä¸ç”¨é‡å¯ã€‚\n\n![nacos](é…ç½®ä¸­å¿ƒ/nacos.png)\n\nåŒæ—¶ï¼Œæˆ‘ä»¬åœ¨é¡¹ç›®çš„æ¯ä¸ªæœåŠ¡çš„é…ç½®æ–‡ä»¶ application.yml ä¸­ä¿®æ”¹å¦‚ä¸‹ï¼š\n\n```yaml\nserver:\n  port: xxx # ç«¯å£å½“ç„¶è¦ä¸ä¸€æ ·\n\nspring:\n  application:\n    name: @artifactId@\n  cloud:\n    nacos:\n      discovery:\n        server-addr: ${NACOS_HOST:localhost}:${NACOS_PORT:8848}\n        namespace: @nacos.namespace@\n      config:\n        server-addr: ${spring.cloud.nacos.discovery.server-addr}\n        namespace: @nacos.namespace@\n  config:\n    import:\n      - optional:nacos:application-@profiles.active@.@file.extension@\n      - optional:nacos:${spring.application.name}-@profiles.active@.@file.extension@\n```\n\nå…¶ä¸­ï¼Œ@artifactId@ åœ¨å½“å‰æœåŠ¡çš„ pom.xml ä¸­é…ç½®ï¼Œä¹Ÿå³å½“å‰æœåŠ¡çš„ artifactId\n\n```xml\n<artifactId>the_artifactId_to_change</artifactId>\n```\n\nå…¶ä»–@@çš„å†…å®¹åœ¨æœ€å¤–å±‚çš„ pom.xml ä¸­é…ç½®ï¼Œä¸»è¦æ˜¯ç”¨äºåŒºåˆ†å¼€å‘ï¼ˆdevï¼‰ã€æµ‹è¯•ï¼ˆtestï¼‰ã€ä¸Šçº¿ï¼ˆprodï¼‰é…ç½®ã€‚\n\n```xml\n<!-- using in application.yml, surrounded with @ -->\n    <profiles>\n        <profile>\n            <id>dev</id>\n            <properties>\n                <profiles.active>dev</profiles.active>\n                <nacos.namespace>the_namspace_to_change</nacos.namespace>\n                <file.extension>yml</file.extension>\n            </properties>\n            <activation>\n                <!-- if default environment -->\n                <activeByDefault>true</activeByDefault>\n            </activation>\n        </profile>\n    </profiles>\n```\n\n## å‚è€ƒèµ„æ–™\n\n- [å¾®æœåŠ¡æ¶æ„ä¹‹ã€Œ é…ç½®ä¸­å¿ƒ ã€](https://zhuanlan.zhihu.com/p/66097586)\n- [ä¸ºä»€ä¹ˆéœ€è¦åˆ†å¸ƒå¼é…ç½®ä¸­å¿ƒï¼Ÿ](https://zhuanlan.zhihu.com/p/58113078)","tags":["é…ç½®","è½¯ä»¶å¼€å‘"],"categories":["computer"]},{"title":"æ•°æ®åº“äº‹åŠ¡","url":"/archives/25534/","content":"\n# äº‹åŠ¡çš„å®šä¹‰\n\näº‹åŠ¡æ˜¯é€»è¾‘ä¸Šçš„ä¸€ç»„åŸå­æ“ä½œï¼Œå³è¦ä¹ˆéƒ½æ‰§è¡Œï¼Œè¦ä¹ˆéƒ½ä¸æ‰§è¡Œã€‚åœ¨æ•°æ®åº“ä¸­ï¼Œ`START TRANSACTION;` å’Œ `COMMIT;` åŠå…¶ä¹‹é—´çš„æ‰€æœ‰è¯­å¥è¢«è§†ä¸ºä¸€ä¸ªäº‹åŠ¡ã€‚\n\n```\n# å¼€å¯ä¸€ä¸ªäº‹åŠ¡\nSTART TRANSACTION;\n# å¤šæ¡ SQL è¯­å¥\nSQL1,SQL2...\n# æäº¤äº‹åŠ¡\nCOMMIT;\n\n# å›æ»š\nROLLBACK;\n```\n\n```mermaid\nflowchart LR\n  start((å¼€å¯äº‹åŠ¡)) --> sql(sql1 --> sql2 --> ... --> sqln) --sqlå…¨éƒ¨æ‰§è¡ŒæˆåŠŸ--> commit((æäº¤äº‹åŠ¡))\n  sql --æœ‰ä¸€ä¸ªsqlæ‰§è¡Œå¤±è´¥--> rollback((å›æ»šäº‹åŠ¡)) \n```\n\n# ACID\n\nç°ä»£å…³ç³»å‹æ•°æ®åº“ä¸­çš„äº‹åŠ¡éƒ½æœ‰ ACID çš„ç‰¹æ€§\n\n- åŸå­æ€§ï¼ˆAtomicityï¼‰ï¼šäº‹åŠ¡æ˜¯æœ€å°çš„æ‰§è¡Œå•ä½ï¼Œä¸å…è®¸åˆ†å‰²ã€‚äº‹åŠ¡çš„åŸå­æ€§ç¡®ä¿åŠ¨ä½œè¦ä¹ˆå…¨éƒ¨å®Œæˆï¼Œè¦ä¹ˆå®Œå…¨ä¸èµ·ä½œç”¨ï¼›\n- ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰ï¼šæ‰§è¡Œäº‹åŠ¡å‰åï¼Œæ•°æ®ä¿æŒä¸€è‡´ã€‚ä¾‹å¦‚è½¬è´¦ä¸šåŠ¡ä¸­ï¼Œæ— è®ºäº‹åŠ¡æ˜¯å¦æˆåŠŸï¼Œè½¬è´¦è€…å’Œæ”¶æ¬¾äººçš„æ€»é¢åº”è¯¥æ˜¯ä¸å˜çš„ï¼›\n- éš”ç¦»æ€§ï¼ˆIsolationï¼‰ï¼šå¹¶å‘è®¿é—®æ•°æ®åº“æ—¶ï¼Œä¸€ä¸ªç”¨æˆ·çš„äº‹åŠ¡ä¸è¢«å…¶ä»–äº‹åŠ¡æ‰€å¹²æ‰°ï¼Œå„å¹¶å‘äº‹åŠ¡ä¹‹é—´æ•°æ®åº“æ˜¯ç‹¬ç«‹çš„ï¼›\n- æŒä¹…æ€§ï¼ˆDurabilityï¼‰ï¼šä¸€ä¸ªäº‹åŠ¡è¢«æäº¤ä¹‹åã€‚å®ƒå¯¹æ•°æ®åº“ä¸­æ•°æ®çš„æ”¹å˜æ˜¯æŒä¹…çš„ï¼Œå³ä½¿æ•°æ®åº“å‘ç”Ÿæ•…éšœä¹Ÿä¸åº”è¯¥å¯¹å…¶æœ‰ä»»ä½•å½±å“ã€‚\n\nä½†æ˜¯ï¼Œè¿™å››ä¸ªç‰¹æ€§ä¸æ˜¯å¹³çº§å…³ç³»ã€‚Aã€Iã€D æ˜¯æ‰‹æ®µï¼ŒC æ˜¯ç›®çš„ã€‚æˆ‘ä»¬éœ€è¦ä¿è¯äº‹åŠ¡çš„åŸå­æ€§ã€éš”ç¦»æ€§ã€æŒä¹…æ€§ä¹‹åï¼Œæ‰èƒ½æœ‰äº‹åŠ¡çš„ä¸€è‡´æ€§ã€‚\n\n```mermaid\nflowchart TB\n  Atomicity --> Consistency\n  Isolation --> Consistency\n  Durability --> Consistency\n```\n\n# äº‹åŠ¡å¹¶å‘é—®é¢˜\n\nåœ¨å¤šä¸ªäº‹åŠ¡å¹¶å‘æ“ä½œæ•°æ®åº“æ—¶ï¼Œå¦‚æœæ²¡æœ‰æœ‰æ•ˆçš„æœºåˆ¶è¿›è¡Œé¿å…å°±ä¼šå¯¼è‡´ä¸¢å¤±ä¿®æ”¹ï¼ˆLost to modifyï¼‰ï¼Œè„è¯»ï¼ˆDirty Readï¼‰ï¼Œä¸å¯é‡å¤è¯»ï¼ˆUnrepeatable Readï¼‰ï¼Œå¹»è¯»ï¼ˆPhantom Readï¼‰ã€‚\n\n## ä¸¢å¤±ä¿®æ”¹\n\n1. äº‹åŠ¡ A å¯¹æ•°æ®è¿›è¡Œäº†ä¿®æ”¹ï¼Œç„¶åäº‹åŠ¡ B åœ¨äº‹åŠ¡ A æäº¤ä¹‹å‰ä¹Ÿå¯¹æ•°æ®è¿›è¡Œäº†ä¿®æ”¹ï¼›\n2. äº‹åŠ¡ B æäº¤åï¼Œäº‹åŠ¡ A çš„ä¿®æ”¹è¢«è¦†ç›–ã€‚\n\n| äº‹åŠ¡ A                               | äº‹åŠ¡ B                               |\n| ------------------------------------ | ------------------------------------ |\n| `UPDATE user SET age=21 WHERE id=1;` |                                      |\n|                                      | `UPDATE user SET age=20 WHERE id=1;` |\n| `COMMIT;`                            |                                      |\n|                                      | `COMMIT;`                            |\n\n```mermaid\nflowchart LR\n  A((A)) --> age1A[age=10] --SET age=21--> age2[age=21] --COMMIT--> age3[age=10]\n  B((B)) --> age1B[age=10]  --SET age=20--> age4[age=20] --COMMIT---> age5[age=20]\n```\n\n## è„è¯»\n\n1. äº‹åŠ¡ A å¯¹æ•°æ®è¿›è¡Œäº†ä¿®æ”¹ï¼Œäº‹åŠ¡ B è¯»å–äº†äº‹åŠ¡ A ä¿®æ”¹åçš„æ•°æ®ï¼›\n2. ç”±äºæŸäº›åŸå› ï¼Œäº‹åŠ¡ A å¹¶æ²¡æœ‰å®Œæˆæäº¤ï¼Œå›æ»šäº†æ“ä½œï¼Œåˆ™äº‹åŠ¡ B è¯»å–çš„æ•°æ®å°±æ˜¯è„æ•°æ®ã€‚\n\n| äº‹åŠ¡ A                               | äº‹åŠ¡ B                           |\n| ------------------------------------ | -------------------------------- |\n| `UPDATE user SET age=21 WHERE id=1;` |                                  |\n|                                      | `SELECT * FROM user WHERE id=1;` |\n| `ROLLBACK;`                          |                                  |\n\n```mermaid\nflowchart LR\n  A((A)) --> age1[age=10] --SET age=21--> age2[age=21] --ROLLBACK--> age3[age=10]\n  B((B)) ---> age4[age=21]\n```\n\n## ä¸å¯é‡å¤è¯»\n\n1. åœ¨äº‹åŠ¡ A æœªç»“æŸæ—¶ï¼Œäº‹åŠ¡ B å…ˆè¯»å–äº†ä¸€æ¬¡æ•°æ®ï¼›\n2. äº‹åŠ¡ A ä¿®æ”¹äº†æ•°æ®ï¼Œäº‹åŠ¡ B å†æ¬¡è¯»å–åŒä¸€æ•°æ®ï¼Œä¸¤æ¬¡è¯»å–çš„æ•°æ®ä¸ä¸€æ ·ã€‚\n\n| äº‹åŠ¡ A                               | äº‹åŠ¡ B                           |\n| ------------------------------------ | -------------------------------- |\n|                                      | `SELECT * FROM user WHERE id=1;` |\n| `UPDATE user SET age=21 WHERE id=1;` |                                  |\n|                                      | `SELECT * FROM user WHERE id=1;` |\n\n```mermaid\nflowchart LR\n  A((A)) --> age1[age=10] --SET age=21--> age2[age=21]\n  B((B)) --SELECT--> age3[age=10] --SELECT---> age4[age=21]\n```\n\n\n## å¹»è¯»\n\n1. åœ¨äº‹åŠ¡ B è¯»å–æ•°æ®è¡Œæ•°åï¼Œäº‹åŠ¡ A æ’å…¥æ•°æ®ï¼›\n2. äº‹åŠ¡ B å†æ¬¡è¯»å–æ•°æ®è¡Œæ•°ï¼Œå‘ç°æœ‰æ–°çš„è®°å½•ã€‚\n\n| äº‹åŠ¡ A                                 | äº‹åŠ¡ B                       |\n| -------------------------------------- | ---------------------------- |\n|                                        | `SELECT count(*) FROM user;` |\n| `INSERT INTO user VALUES (1,2,3,4,5);` |                              |\n|                                        | `SELECT count(*) FROM user;` |\n\n```mermaid\nflowchart LR\n  A((A)) ----INSERT---> END((end))\n  B((B)) --SELECT count(*)--> num2[num=10] --SELECT count(*)---> num3[num=11] --> END\n```\n\n## ä¸å¯é‡å¤è¯»å’Œå¹»è¯»çš„åŒºåˆ«\n\n- ä¸å¯é‡å¤è¯»çš„é‡ç‚¹åœ¨äºå†…å®¹`ä¿®æ”¹`æˆ–è€…è®°å½•`å‡å°‘`ï¼›\n- å¹»è¯»çš„é‡ç‚¹åœ¨äºè®°å½•`æ–°å¢`ã€‚\n\nå¹»è¯»æœ¬è´¨ä¸Šæ˜¯ä¸å¯é‡å¤è¯»çš„ç‰¹æ®Šæƒ…å†µï¼Œå•ç‹¬åŒºåˆ†å¹»è¯»çš„åŸå› æ˜¯è§£å†³å¹»è¯»å’Œä¸å¯é‡å¤è¯»çš„æ–¹æ¡ˆä¸ä¸€æ ·ã€‚\n\n> æ‰§è¡Œ `delete` å’Œ `update` æ“ä½œçš„æ—¶å€™ï¼Œå¯ä»¥ç›´æ¥å¯¹è®°å½•åŠ é”ã€‚è€Œæ‰§è¡Œ `insert` æ“ä½œçš„æ—¶å€™ï¼Œç”±äºè®°å½•é”ï¼ˆRecord Lockï¼‰åªèƒ½é”ä½å·²ç»å­˜åœ¨çš„è®°å½•ï¼Œä¸ºäº†é¿å…æ’å…¥æ–°è®°å½•ï¼Œéœ€è¦ä¾èµ–é—´éš™é”ï¼ˆGap Lockï¼‰ã€‚ä¹Ÿå°±æ˜¯è¯´æ‰§è¡Œ `insert` æ“ä½œçš„æ—¶å€™éœ€è¦ä¾èµ– Next-Key Lockï¼ˆRecord Lock+Gap Lockï¼‰æ¥ä¿è¯ä¸å‡ºç°å¹»è¯»ã€‚\n\n# äº‹åŠ¡éš”ç¦»\n\nSQL æ ‡å‡†å®šä¹‰äº†å››ä¸ªéš”ç¦»çº§åˆ«\n\n- è¯»å–æœªæäº¤ï¼ˆREAD-UNCOMMITTEDï¼‰ï¼šå…è®¸è¯»å–å°šæœªæäº¤çš„æ•°æ®å˜æ›´ï¼Œå¯èƒ½ä¼šå¯¼è‡´è„è¯»ã€å¹»è¯»æˆ–ä¸å¯é‡å¤è¯»ã€‚\n- è¯»å–å·²æäº¤ï¼ˆREAD-COMMITTEDï¼‰ï¼šåªèƒ½è¯»å–å·²ç»æäº¤çš„äº‹åŠ¡æ‰€åšçš„ä¿®æ”¹ã€‚\n- å¯é‡å¤è¯»ï¼ˆREPEATABLE-READï¼‰ï¼šä¿è¯åœ¨äº‹åŠ¡ä¸­å¤šæ¬¡è¯»å–åŒä¸€æ•°æ®çš„ç»“æœæ˜¯ä¸€æ ·çš„ã€‚\n- å¯ä¸²è¡ŒåŒ–ï¼ˆSERIALIZABLEï¼‰ï¼šå®Œå…¨æœä» ACID çš„éš”ç¦»çº§åˆ«ã€‚å¼ºåˆ¶æ‰€æœ‰äº‹åŠ¡ä¸²è¡Œæ‰§è¡Œï¼Œè¿™æ ·äº‹åŠ¡ä¹‹é—´å°±å®Œå…¨äº’ä¸å¹²æ‰°ã€‚\n\n\n| éš”ç¦»çº§åˆ«         | è„è¯» | ä¸å¯é‡å¤è¯» | å¹»è¯» |\n| ---------------- | ---- | ---------- | ---- |\n| READ-UNCOMMITTED | âˆš    | âˆš          | âˆš    |\n| READ-COMMITTED   | Ã—    | âˆš          | âˆš    |\n| REPEATABLE-READ  | Ã—    | Ã—          | âˆš    |\n| SERIALIZABLE     | Ã—    | Ã—          | Ã—    |\n\n# å¦‚ä½•å®ç°éš”ç¦»çº§åˆ«\n\nç”±é”å’Œ MVCCï¼ˆMultiversion concurrency controlï¼‰æœºåˆ¶å…±åŒå®ç°ã€‚\n\nSERIALIZABLE éš”ç¦»çº§åˆ«æ˜¯é€šè¿‡é”æ¥å®ç°çš„ï¼ŒREAD-COMMITTED å’Œ REPEATABLE-READ éš”ç¦»çº§åˆ«æ˜¯åŸºäº MVCC å®ç°çš„ã€‚ä¸è¿‡ï¼Œ SERIALIZABLE ä¹‹å¤–çš„å…¶ä»–éš”ç¦»çº§åˆ«å¯èƒ½ä¹Ÿéœ€è¦ç”¨åˆ°é”æœºåˆ¶ï¼Œå°±æ¯”å¦‚ REPEATABLE-READ åœ¨å½“å‰è¯»æƒ…å†µä¸‹éœ€è¦ä½¿ç”¨åŠ é”è¯»æ¥ä¿è¯ä¸ä¼šå‡ºç°å¹»è¯»ã€‚\n\n# MySQL çš„é»˜è®¤éš”ç¦»çº§åˆ«\n\nMySQL InnoDB å­˜å‚¨å¼•æ“çš„é»˜è®¤æ”¯æŒçš„éš”ç¦»çº§åˆ«æ˜¯ REPEATABLE-READï¼ˆå¯é‡å¤è¯»ï¼‰ã€‚å¯ä»¥é€šè¿‡ `SELECT @@tx_isolation;` å‘½ä»¤æ¥æŸ¥çœ‹\n\n# å‚è€ƒèµ„æ–™\n\n- [MySQLå¸¸è§é¢è¯•é¢˜æ€»ç»“](https://javaguide.cn/database/mysql/mysql-questions-01.html#mysql-%E4%BA%8B%E5%8A%A1)\n- [æ•°æ®åº“ç³»ç»ŸåŸç†](https://cyc2018.xyz/%E6%95%B0%E6%8D%AE%E5%BA%93/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E5%8E%9F%E7%90%86.html#%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E5%8E%9F%E7%90%86)","tags":["æ•°æ®åº“"],"categories":["computer"]},{"title":"MySQLé”","url":"/archives/1461/","content":"\né”ï¼ˆlockï¼‰æ˜¯è®¡ç®—æœºç”¨ä»¥åè°ƒå¤šä¸ªè¿›ç¨‹é—´å¹¶å‘ï¼ˆconcurrentï¼‰è®¿é—®åŒä¸€å…±äº«èµ„æºçš„ä¸€ç§æœºåˆ¶ã€‚MySQL ä¸­ä¸ºäº†ä¿è¯æ•°æ®è®¿é—®çš„ä¸€è‡´æ€§ä¸æœ‰æ•ˆæ€§ç­‰åŠŸèƒ½ï¼Œå®ç°äº†é”æœºåˆ¶ã€‚MySQL ä¸­çš„é”æ˜¯åœ¨æœåŠ¡å™¨å±‚æˆ–è€…å­˜å‚¨å¼•æ“å±‚å®ç°çš„ã€‚\n\n<!-- more -->\n\n# é”çš„åŠŸèƒ½\n\næˆ‘ä»¬éœ€è¦åœ¨æœ€å¤§ç¨‹åº¦åœ°åˆ©ç”¨æ•°æ®åº“çš„å¹¶å‘è®¿é—®èƒ½åŠ›çš„åŒæ—¶ï¼Œä¹Ÿè¦ç¡®ä¿æ¯ä¸ªç”¨æˆ·èƒ½ä»¥ä¸€è‡´çš„æ–¹å¼è¯»å–å’Œä¿®æ”¹æ•°æ®ã€‚ä½†æ˜¯ï¼Œäº‹åŠ¡å¹¶å‘æ‰§è¡Œæ—¶å¯èƒ½ä¼šå¸¦æ¥å„ç§é—®é¢˜ï¼ˆè¯¦è§{% post_link æ•°æ®åº“äº‹åŠ¡ %}ï¼‰ã€‚è¦è§£å†³å¹¶å‘äº‹åŠ¡çš„é—®é¢˜ï¼Œå°±éœ€è¦å€ŸåŠ©åˆ°é”ã€‚\n\n# é”çš„åˆ†ç±»\n\n```mermaid\nflowchart TB\n  æ¨¡å¼åˆ†ç±» --> ä¹è§‚é”\n  æ¨¡å¼åˆ†ç±» --> æ‚²è§‚é”\n\n  ç²’åº¦åˆ†ç±» --> å…¨å±€é”\n  ç²’åº¦åˆ†ç±» --> è¡¨çº§é”\n  ç²’åº¦åˆ†ç±» --> é¡µçº§é”\n  ç²’åº¦åˆ†ç±» --> è¡Œçº§é”\n\n  å±æ€§åˆ†ç±» --> id1[å…±äº«é”ï¼ˆSï¼‰]\n  å±æ€§åˆ†ç±» --> id2[æ’ä»–é”ï¼ˆXï¼‰]\n\n  çŠ¶æ€åˆ†ç±» --> æ„å‘å…±äº«é”\n  çŠ¶æ€åˆ†ç±» --> æ„å‘æ’ä»–é”\n\n  ç®—æ³•åˆ†ç±» --> é—´éš™é”\n  ç®—æ³•åˆ†ç±» --> ä¸´é”®é”\n  ç®—æ³•åˆ†ç±» --> è®°å½•é”\n```\n\n# ä¹è§‚/æ‚²è§‚é”\n\n## ä¹è§‚é”\n\nä¹è§‚é”è®¤ä¸ºæ•°æ®ä¸€èˆ¬æƒ…å†µä¸‹ä¸ä¼šé€ æˆå†²çªï¼Œæ‰€ä»¥åœ¨æ•°æ®æäº¤æ›´æ–°çš„æ—¶å€™æ‰ä¼šå»æ£€æµ‹ã€‚é€‚ç”¨äºè¯»å¤šå†™å°‘çš„åœºæ™¯ã€‚\n\n### å®ç°\n\nä¹è§‚é”æ˜¯åŸºæœ¬ç‰ˆæœ¬å·æœºåˆ¶å®ç°çš„ã€‚è¡¨ä¸­å¢åŠ ä¸€ä¸ª `version` å­—æ®µï¼Œè¯»å–æ•°æ®æ—¶å°† version ä¸€èµ·è¯»å‡ºã€‚æ•°æ®æ¯æ›´æ–°ä¸€æ¬¡ï¼Œ`version += 1`ã€‚å½“ä¿®æ”¹éœ€è¦æäº¤æ—¶ï¼Œå°†è¯»å–æ—¶çš„ version ä¸è¡¨å½“å‰çš„ version åšæ¯”è¾ƒï¼šå¦‚æœä¸€è‡´ï¼Œè¯´æ˜åœ¨æ­¤æœŸé—´æ— äººä¿®æ”¹è¿™æ¡è®°å½•ï¼Œä¸ä¸€è‡´åˆ™è¯´æ˜å·²ç»è¢«ä¿®æ”¹äº†ï¼Œæäº¤å¤±è´¥ã€‚\n\n## æ‚²è§‚é”\n\næ‚²è§‚é”è®¤ä¸ºæ•°æ®æ¯æ¬¡æ“ä½œéƒ½ä¼šè¢«ä¿®æ”¹ï¼Œæ‰€ä»¥åœ¨æ¯æ¬¡æ“ä½œæ•°æ®æ—¶éƒ½ä¼šåŠ ä¸Šé”ã€‚é€‚ç”¨äºå¹¶å‘é‡ä¸å¤§ã€å†™å¤šè¯»å°‘çš„åœºæ™¯ã€‚\n\n### å®ç°\n\né€šè¿‡å…±äº«é”å’Œæ’ä»–é”å®ç°ã€‚\n\n# å…±äº«/æ’ä»–é”\n\n## å…±äº«é”\n\nå…±äº«é”ï¼Œåˆç§°è¯»é”ï¼Œç®€ç§° S é”ã€‚å½“äº‹åŠ¡å¯¹æŸæ•°æ®åŠ ä¸Šè¯»é”åï¼Œå…¶ä»–äº‹åŠ¡åªèƒ½å¯¹è¯¥æ•°æ®åŠ è¯»é”ï¼Œä¸èƒ½åŠ å†™é”ã€‚\n\n### å®ç°\n\n```sql\n# MySQL 5.7 å’Œ MySQL 8.0\nSELECT ... LOCK IN SHARE; MODE\n# MySQL 8.0\nSELECT ... FOR SHARE;\n```\n\n## æ’ä»–é”\n\næ’ä»–é”ï¼Œåˆç§°ä¸ºå†™é”ï¼Œç®€ç§° X é”ï¼Œå½“äº‹åŠ¡å¯¹æ•°æ®åŠ ä¸Šæ’ä»–é”åï¼Œå…¶ä»–äº‹åŠ¡æ— æ³•å¯¹è¯¥æ•°æ®è¿›è¡ŒæŸ¥è¯¢æˆ–è€…ä¿®æ”¹ã€‚\n\nMySQL InnoDB å¼•æ“é»˜è®¤ `update`ï¼Œ`delete`ï¼Œ`insert` éƒ½ä¼šè‡ªåŠ¨ç»™æ¶‰åŠåˆ°çš„æ•°æ®åŠ ä¸Šæ’ä»–é”ï¼Œ`select` è¯­å¥é»˜è®¤ä¸ä¼šåŠ ä»»ä½•é”ç±»å‹ã€‚\n\n### å®ç°\n\n```sql\nSELECT ... FOR UPDATE;\n```\n\n## å…¼å®¹æ€§\n\n|             | å…±äº«é”ï¼ˆSï¼‰ | æ’ä»–é”ï¼ˆXï¼‰ |\n| ----------- | ----------- | ----------- |\n| å…±äº«é”ï¼ˆSï¼‰ | å…¼å®¹        | äº’æ–¥        |\n| æ’ä»–é”ï¼ˆXï¼‰ | äº’æ–¥        | äº’æ–¥        |\n\n# ç²’åº¦é”\n\n## å…¨å±€é”\n\nå¯¹æ•´ä¸ª MySQL æ•°æ®åº“å®ä¾‹åŠ é”ï¼ŒåŠ é”æœŸé—´ï¼Œå¯¹æ•°æ®åº“çš„ä»»ä½•å¢åˆ æ”¹æ“ä½œéƒ½æ— æ³•æ‰§è¡Œã€‚åªé€‚ç”¨äºå…¨åº“æ•°æ®å¤‡ä»½ã€‚\n\n### å®ç°\n\n```bash\nFlush tables with read lock (FTWRL)\n```\n\n## è¡¨çº§é”\n\nç»™å½“å‰æ“ä½œçš„è¿™å¼ è¡¨åŠ é”ã€‚\n\n### å®ç°\n\n```sql\nLOCK TABLE READ\nLOCK TABLE WRITE\n```\n\n## é¡µçº§é”\n\nè¡¨çº§é”é€Ÿåº¦å¿«ï¼Œä½†å†²çªå¤šï¼Œè¡Œçº§å†²çªå°‘ï¼Œä½†é€Ÿåº¦æ…¢ã€‚å› æ­¤é‡‡å–äº†æŠ˜è¡·çš„é¡µçº§é”ï¼Œä¸€æ¬¡é”å®šç›¸é‚»çš„ä¸€ç»„è®°å½•ã€‚BDB å¼•æ“æ”¯æŒé¡µçº§é”ã€‚\n\n## è¡Œçº§é”\n\nå‘ç”Ÿé”å†²çªæ¦‚ç‡æœ€ä½ï¼Œä½†æ˜¯åŠ é”æ…¢ï¼Œå¼€é”€å¤§ã€‚MySQL ä¸­åªæœ‰ InnoDB å¼•æ“æ”¯æŒè¡Œé”ï¼Œå…¶ä»–ä¸æ”¯æŒã€‚\n\n### å®ç°\n\nMySQL ä¸­ï¼Œè¡Œçº§é”å¹¶ä¸æ˜¯ä¹‹é—´é”è®°å½•ï¼Œè€Œæ˜¯é”çš„ç´¢å¼•ã€‚MySQL åœ¨æ‰§è¡Œ `update`ã€`delete` è¯­å¥æ—¶ä¼šè‡ªåŠ¨åŠ ä¸Šè¡Œé”ã€‚\n\n# æ„å‘é”\n\næ„å‘é”æ˜¯è¡¨é”ã€‚ä¸ºäº†åè°ƒè¡Œé”å’Œè¡¨é”çš„å…³ç³»ï¼Œæ”¯æŒå¤šç²’åº¦ï¼ˆè¡¨é”ä¸è¡Œé”ï¼‰çš„é”å¹¶å­˜ã€‚\n\n## ä½œç”¨\n\nå½“æœ‰äº‹åŠ¡ A æœ‰è¡Œé”æ—¶ï¼ŒMySQLä¼šè‡ªåŠ¨ä¸ºè¯¥è¡¨æ·»åŠ æ„å‘é”ã€‚äº‹åŠ¡ B å¦‚æœæƒ³ç”³è¯·æ•´ä¸ªè¡¨çš„å†™é”ï¼Œé‚£ä¹ˆä¸éœ€è¦éå†æ¯ä¸€è¡Œåˆ¤æ–­æ˜¯å¦å­˜åœ¨è¡Œé”ï¼Œè€Œç›´æ¥åˆ¤æ–­æ˜¯å¦å­˜åœ¨æ„å‘é”ï¼Œå¢å¼ºæ€§èƒ½ã€‚\n\n## å®ç°\n\næ„å‘é”æ˜¯ç”±æ•°æ®å¼•æ“è‡ªå·±ç»´æŠ¤çš„ï¼Œç”¨æˆ·æ— æ³•æ‰‹åŠ¨æ“ä½œæ„å‘é”ã€‚åœ¨ä¸ºæ•°æ®è¡ŒåŠ å…±äº«/æ’ä»–é”ä¹‹å‰ï¼ŒInnoDB ä¼šå…ˆè·å–è¯¥æ•°æ®è¡Œæ‰€åœ¨åœ¨æ•°æ®è¡¨çš„å¯¹åº”æ„å‘é”ã€‚\n\n## å…¼å®¹æ€§\n\n|                | æ„å‘å…±äº«é”(IS) | æ„å‘æ’ä»–é”(IX) |\n| -------------- | -------------- | -------------- |\n| æ„å‘å…±äº«é”(IS) | å…¼å®¹           | å…¼å®¹           |\n| æ„å‘æ’ä»–é”(IX) | å…¼å®¹           | å…¼å®¹           |\n\n|        | æ„å‘å…±äº«é”(IS) | æ„å‘æ’ä»–é”(IX) |\n| ------ | -------------- | -------------- |\n| å…±äº«é” | å…¼å®¹           | äº’æ–¥           |\n| æ’ä»–é” | äº’æ–¥           | äº’æ–¥           |\n\n# é—´éš™/ä¸´é”®/è®°å½•é”\n\nè®°å½•é”ã€é—´éš™é”ã€ä¸´é”®é”éƒ½æ˜¯æ’å®ƒé”ã€‚\n\n## è®°å½•é”ï¼ˆRecord Lockï¼‰\n\nè®°å½•é”é”å®šä¸€æ¡è®°å½•ï¼Œè®°å½•é”ä¹Ÿå«è¡Œé”ã€‚\n\n```sql\nselect * from user where id = 1 for update;\n```\n\n## é—´éš™é”ï¼ˆGap Lockï¼‰\n\né—´éš™é”é”å®šä¸€æ®µåŒºé—´å†…çš„ç´¢å¼•è®°å½•ï¼Œè€Œä¸ä»…ä»…æ˜¯è¿™ä¸ªåŒºé—´ä¸­çš„æ¯ä¸€æ¡æ•°æ®ã€‚\n\n```sql\nselect * from user where id < 10 for update;\n```\n\nå³æ‰€æœ‰åœ¨ `[1ï¼Œ10)` åŒºé—´å†…çš„è®°å½•è¡Œéƒ½ä¼šè¢«é”ä½ï¼Œæ‰€æœ‰id ä¸º 1ã€2ã€3ã€4ã€5ã€6ã€7ã€8ã€9 çš„æ•°æ®è¡Œçš„æ’å…¥ä¼šè¢«é˜»å¡\n\n## ä¸´é”®é”ï¼ˆNext-Key Lockï¼‰\n\nä¸´é”®é”æ˜¯è®°å½•é”ä¸é—´éš™é”çš„ç»„åˆã€‚å…¶å°é”èŒƒå›´æ—¢åŒ…å«ç´¢å¼•è®°å½•ï¼ŒåˆåŒ…å«å·¦é—­å³å¼€çš„ç´¢å¼•åŒºé—´ã€‚ä¸´é”®é”ä¸»è¦ä¸ºäº†é¿å…å¹»è¯»ã€‚\n\næ¯ä¸ªæ•°æ®è¡Œä¸Šçš„éå”¯ä¸€ç´¢å¼•åˆ—ä¸Šéƒ½ä¼šå­˜åœ¨ä¸€æŠŠä¸´é”®é”ï¼Œå½“æŸä¸ªäº‹åŠ¡æŒæœ‰è¯¥æ•°æ®è¡Œçš„ä¸´é”®é”æ—¶ï¼Œä¼šé”ä½ä¸€æ®µå·¦å¼€å³é—­åŒºé—´çš„æ•°æ®ã€‚éœ€è¦å¼ºè°ƒçš„ä¸€ç‚¹æ˜¯ï¼ŒInnoDB ä¸­è¡Œçº§é”æ˜¯åŸºäºç´¢å¼•å®ç°çš„ï¼Œä¸´é”®é”åªä¸éå”¯ä¸€ç´¢å¼•åˆ—æœ‰å…³ï¼Œåœ¨å”¯ä¸€ç´¢å¼•åˆ—ï¼ˆåŒ…æ‹¬ä¸»é”®åˆ—ï¼‰ä¸Šä¸å­˜åœ¨ä¸´é”®é”ã€‚\n\n# å‚è€ƒèµ„æ–™\n\n- [ä¸€æ–‡è¯»æ‡‚ MySQL é”](https://www.cnblogs.com/wugongzi/p/16784313.html)\n- [MySQL é”](https://javaguide.cn/database/mysql/mysql-questions-01.html#mysql-%E9%94%81)","tags":["æ•°æ®åº“"],"categories":["computer"]},{"title":"Windowsä¸‹ä½¿ç”¨Redis","url":"/archives/63125/","content":"\n\nRedis å®˜æ–¹ä¸æ”¯æŒ Windowsï¼Œåªæ”¯æŒ Linuxã€‚ä½†æ˜¯å¾®è½¯å¼€å‘äº† Windows ç‰ˆæœ¬çš„ï¼Œå¯è§äº[Releases Â· microsoftarchive/redis (github.com)](https://github.com/MicrosoftArchive/redis/releases)\n\nä¸‹è½½éœ€è¦çš„ç‰ˆæœ¬åˆ°åˆé€‚çš„ä½ç½®å¹¶è§£å‹ï¼Œç„¶åè¿›å…¥ç›¸åº”çš„ç›®å½•ï¼Œæ‰“å¼€å‘½ä»¤è¡Œå¹¶è¾“å…¥å‘½ä»¤ `redis-server.exe redis.windows.conf` å³å¯å¯åŠ¨ Redis æœåŠ¡å™¨ã€‚\n\n![Redis](Windowsä¸‹ä½¿ç”¨Redis/Redis.png)\n\n![start](Windowsä¸‹ä½¿ç”¨Redis/start.png)\n\n# å¸¸è§é—®é¢˜\n\n> Creating Server TCP listening socket *:6379: bind: Unknown error\n\n![error](Windowsä¸‹ä½¿ç”¨Redis/error.png)\n\nåŒæ ·çš„ç›®å½•ä¸‹ï¼Œè¾“å…¥å¦‚ä¸‹å‘½ä»¤ï¼Œå°±å¯ä»¥æ­£å¸¸ä½¿ç”¨äº†ã€‚\n\n```bash\nredis-cli.exe                         # è¿›å…¥å‘½ä»¤è¡Œ\nshutdown                              # å…³é—­ redis\nexit                                  # æ¨å‡ºå‘½ä»¤è¡Œ\nredis-server.exe redis.windows.conf   # å†æ¬¡å¯åŠ¨ redis\n```\n\n![reboot](Windowsä¸‹ä½¿ç”¨Redis/reboot.png)\n","tags":["é…ç½®"],"categories":["computer"]},{"title":"Kotlinï¼šå†…ç½®æ’åºæ–¹æ³•","url":"/archives/10423/","content":"\nKotlinä¸­å†…ç½®çš„æ•°ç»„æ’åºçš„æ–¹æ³•æœ‰`sort`, `sorted`, `sortBy`, `sortedBy`, `sortWith`, `sortedWith`ã€‚å¯ä»¥ç²—ç•¥åœ°å¯¹è¿™äº›æ–¹æ³•è¿›è¡Œåˆ†ç±»ã€‚\n\n<!-- more -->\n\n- æŒ‰è¿”å›å€¼åˆ†ï¼š\n\n`sort`,  `sortBy`,  `sortWith`ï¼šæ²¡æœ‰è¿”å›å€¼ï¼Œæ’åºå®Œæˆåä¼šæ”¹å˜åŸæœ‰çš„æ•°ç»„ï¼›\n\n`sorted`, `sortedBy`, `sortedWith`ï¼šç›´æ¥è¿”å›ä¸€ä¸ªæ’åºå®Œä¹‹åçš„æ•°ç»„ï¼Œä¸ä¼šæ”¹å˜åŸæœ‰çš„æ•°ç»„ã€‚\n\n- æŒ‰å‚æ•°åˆ†ï¼š\n\n`sort`, `sorted`ï¼šæ— ä¼ å‚ï¼Œä¸”åªé€‚ç”¨äºå…ƒç´ ä¸ºåŸºæœ¬æ•°æ®ç±»å‹çš„æ•°ç»„ã€‚å¦‚æœæ˜¯è‡ªå®šä¹‰å¯¹è±¡ï¼Œåˆ™æ— æ³•ä½¿ç”¨ã€‚æŒ‰ç…§é€’å¢æ’åºï¼›\n\n`sortBy`, `sortedBy`ï¼šä¼ å…¥æ•°ç»„çš„æŸä¸ªå…ƒç´ æˆ–è€…å¯¹è±¡çš„æŸä¸ªå±æ€§å€¼ï¼Œç„¶åæŒ‰ç…§è¯¥å±æ€§å€¼è¿›è¡Œé€’å¢æ’åºï¼›\n\n`sortWith`, `sortedWith`ï¼šä¼ å…¥ä¸€ä¸ªcomparatorï¼Œå¯ä»¥è‡ªå®šä¹‰æ’åºè§„åˆ™ï¼Œé€‚ç”¨äºå¤šè¦ç´ æ’åºã€‚","tags":["Kotlin"],"categories":["computer"]},{"title":"Kotlinï¼šæ„é€ å™¨å’Œåˆå§‹åŒ–","url":"/archives/20650/","content":"\nKotlin ä¸­æœ‰ä¸¤ç§æ„é€ å™¨ï¼šä¸»æ„é€ å™¨å’Œæ¬¡æ„é€ å™¨ã€‚éƒ½ç”¨å…³é”®å­— constructor æ¥è¡¨ç¤ºã€‚ä½†æ˜¯åœ¨æ¯ä¸ªç±»ä¸­ï¼Œä¸»æ„é€ å™¨**æœ‰ä¸”ä»…æœ‰ä¸€ä¸ª**ï¼ˆå¦‚æœæ²¡æœ‰å®šä¹‰ï¼Œåˆ™ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨æä¾›ä¸€ä¸ªç©ºæ„é€ å™¨ï¼‰ï¼Œè€Œæ¬¡æ„é€ å™¨å¯ä»¥æœ‰ 0 ä¸ªæˆ–å¤šä¸ªã€‚\n\n<!-- more -->\n\n# ä¸»æ„é€ å™¨å£°æ˜\n\nä¸»æ„é€ å™¨å£°æ˜åœ¨ç±»ååé¢ï¼Œæ¯ä¸ªç±»æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªã€‚\n\n## ç©ºå‚/æœ‰å‚ä¸»æ„é€ å™¨\n\n```kotlin\n// æ— å‚\nclass People constructor() {\n    var name: String? = null\n    var age: Int = 10\n    lateinit var cards: MutableList<Card>\n}\n\n// æœ‰å‚\nclass People constructor(name: String, age: Int) {\n    var name: String? = null\n    var age: Int = 10\n    lateinit var cards: MutableList<Card>\n}\n```\n\nä¸»æ„é€ å™¨çš„ constructor å…³é”®å­—å¯ä»¥çœç•¥\n\n```kotlin\n// æ— å‚\nclass People() {\n    var name: String? = null\n    var age: Int = 10\n    lateinit var cards: MutableList<Card>\n}\n\n// æœ‰å‚\nclass People(name: String?, age: Int) {\n    var name: String? = null\n    var age: Int = 10\n    lateinit var cards: MutableList<Card>\n}\n```\n\nå½“ç„¶ï¼Œå¦‚æœéœ€è¦åŠ æƒé™ä¿®é¥°ç¬¦ï¼Œé‚£ä¹ˆå°±ä¸èƒ½çœç•¥ constructor å…³é”®å­—äº†ï¼Œè€Œä¸”è¯¥æƒé™ä¿®é¥°ç¬¦åœ¨ constructor å…³é”®å­—å‰é¢ã€‚\n\n```kotlin\n// æ— å‚\nclass People private constructor() {\n    var name: String? = null\n    var age: Int = 10\n    lateinit var cards: MutableList<Card>\n}\n\n// æœ‰å‚\nclass People private constructor(name: String?, age: Int) {\n    var name: String? = null\n    var age: Int = 10\n    lateinit var cards: MutableList<Card>\n}\n```\n\n## `init` ä»£ç å—\n\n**Kotlinçš„ä¸»æ„é€ å™¨æ˜¯æ²¡æœ‰æ–¹æ³•ä½“çš„**ï¼Œè¿™å°±æ„å‘³ç€æˆ‘ä»¬æ— æ³•åœ¨ä¸»æ„é€ å™¨ä¸­è¿›è¡Œä»»ä½•æ“ä½œã€‚\n\nä½† Kotlin ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ä¸ª `init` ä»£ç å—ï¼Œè¿™ä¸ªä»£ç å—çš„æ‰§è¡Œé¡ºåº**åœ¨ä¸»æ„é€ æ–¹æ³•ä¹‹åï¼Œæ¬¡æ„é€ æ–¹æ³•ä¹‹å‰**ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¿™ä¸ªä»£ç å—ä¸­è¿›è¡Œå„ç§åˆå§‹åŒ–çš„æ“ä½œï¼ŒåŒ…æ‹¬è®¿é—®ä¸»æ„é€ æ–¹æ³•ä¸­çš„å‚æ•°ã€‚\n\n```kotlin\nclass People(name: String?, age: Int) {\n    var name: String? = null\n    var age: Int = 10\n    lateinit var cards: MutableList<Card>\n    \n    init {\n        this.name = name\n        this.age = age\n    }\n}\n```\n\nå¯ä»¥çœ‹åˆ°åœ¨è¿™é‡Œï¼Œinit ä»£ç å—å°†å±æ€§ name å’Œ age åˆå§‹åŒ–äº†ã€‚ä½†æ˜¯ï¼Œè¿™æ ·ç±»ä¼¼ Java çš„åšæ³•çœ‹èµ·æ¥éå¸¸ç¹çï¼ŒKotlin æä¾›äº†ä¸€ä¸ªæ¯”è¾ƒç®€æ´çš„æ–¹æ³•ï¼Œå³åœ¨ä¸»æ„é€ å™¨ä¸­å£°æ˜å±æ€§ã€‚ä¸‹é¢çš„å†™æ³•ä¸ä¸Šé¢çš„å®Œå…¨ç­‰ä»·ã€‚\n\n```kotlin\nclass People(var name: String? = null, var age: Int = 10) {\n    lateinit var cards: MutableList<Card>\n}\n```\n\nå½“ç„¶ï¼Œä¸»æ„é€ å™¨ä¸­å£°æ˜çš„å±æ€§ä¹Ÿå¯ä»¥åŠ ä¸Šæƒé™ä¿®é¥°ç¬¦ã€‚\n\n```kotlin\nclass People(private var name: String? = null, private var age: Int = 10) {\n    lateinit var cards: MutableList<Card>\n}\n```\n\n# æ¬¡æ„é€ å™¨å£°æ˜\n\næ¬¡æ„é€ å™¨å£°æ˜åœ¨ç±»å†…ï¼Œæ¯ä¸ªç±»å¯ä»¥æœ‰ 0 ä¸ªæˆ–å¤šä¸ªã€‚\n\n## ç©ºå‚/æœ‰å‚æ¬¡æ„é€ å™¨\n\n```kotlin\nclass People {\n    var name: String? = null\n    var age: Int = 10\n    lateinit var Cards: MutableList<Card>\n\n    // ç©ºå‚æ¬¡æ„é€ å™¨\n    constructor() {}\n\n    // æœ‰å‚æ¬¡æ„é€ å™¨\n    constructor(name: String?, age: Int) {\n        this.name = name\n        this.age = age\n    }\n\n\t\t// å½“æ„é€ å™¨æ–¹æ³•ä½“å†…éƒ¨æ²¡æœ‰é€»è¾‘çš„æ—¶å€™ï¼Œå¯ä»¥çœç•¥å¤§æ‹¬å·ï¼Œå³\n\t\t// constructor()\n\t\t// æœ‰å‚æ„é€ å™¨ä¹Ÿå¯ä»¥çœç•¥æ²¡æœ‰é€»è¾‘çš„æ–¹æ³•ä½“ï¼Œå³\n\t\t// constructor(name: String?, age: Int)\n\t\t// ä½†æ˜¯æœ‰å‚çš„ç©ºæ„é€ æ–¹æ³•æ˜¯æ²¡æœ‰æ„ä¹‰çš„\n\n\t\t// ä¹Ÿå¯ä»¥åŠ æƒé™ä¿®é¥°ç¬¦\n\t\tprivate constructor(name: String?, age: Int, cards: MutableList<Card>) {\n        this.name = name\n        this.age = age\n        this.cards = cards\n    }\n}\n```\n\næ²¡æœ‰ä¸»æ„é€ å™¨æ—¶ï¼Œæ¬¡æ„é€ å™¨å°±ä»£æ›¿äº†ä¸»æ„é€ å™¨çš„ä½œç”¨ã€‚ï¼ˆä½†æ˜¯å…¶å®ä»ç„¶è°ƒç”¨äº†ç©ºçš„ä¸»æ„é€ å™¨ï¼‰\n\nå½“ä¸»æ„é€ å™¨å’Œæ¬¡æ„é€ å™¨åŒæ—¶å­˜åœ¨æ—¶ï¼Œæ¬¡æ„é€ å™¨**å¿…é¡»**ç›´æ¥æˆ–è€…é—´æ¥è°ƒç”¨ä¸»æ„é€ å™¨ã€‚\n\n```kotlin\nclass People(name: String?) {\n    var name: String? = null\n    var age: Int = 10\n    lateinit var cards: MutableList<Card>\n\n    // è°ƒç”¨äº†ä¸‹é¢çš„æœ‰å‚æ„é€ å™¨ï¼Œé—´æ¥åœ°è°ƒç”¨äº†ä¸»æ„é€ å™¨\n    constructor() : this(\"ä½ å¥½\", 100)\n\n    // ç›´æ¥è°ƒç”¨äº†ä¸»æ„é€ å™¨\n    constructor(name: String?, age: Int) : this(name) {\n        this.name = name\n        this.age = age\n    }\n}\n```\n\nå¯ä»¥çœ‹åˆ°ï¼Œ**åœ¨æ‰§è¡Œé¡ºåºä¸Šï¼Œä¸»æ„é€ å™¨ > initä»£ç å— > æ¬¡æ„é€ å™¨**","tags":["Kotlin"],"categories":["computer"]},{"title":"Javaå­—èŠ‚ç ","url":"/archives/57096/","content":"\nåœ¨ Java è™šæ‹Ÿæœºçš„æŒ‡ä»¤é›†ä¸­ï¼Œå¤§å¤šæ•°çš„æŒ‡ä»¤éƒ½åŒ…å«äº†å…¶æ“ä½œæ‰€å¯¹åº”çš„æ•°æ®ç±»å‹ä¿¡æ¯ã€‚\n\n<!-- more -->\n\n## 1.å°†å¸¸é‡å‹å…¥æ“ä½œæ•°æ ˆä¸­çš„æŒ‡ä»¤\n\n### ï¼ˆ1ï¼‰iconst_nã€ lconst_nã€fconst_nã€dconst_n\n\n- aconst_null â€”â€”å°†nullå¯¹è±¡å¼•ç”¨å‹å…¥æ ˆ\n- iconst_m1 â€”â€”å°†intç±»å‹å¸¸é‡-1å‹å…¥æ ˆ\n- iconst_n â€”â€” å°†intç±»å‹å¸¸é‡nå‹å…¥æ ˆ (nä¸ºä»»æ„æ•´æ•°)\n- lconst_nâ€”â€”å°†longç±»å‹å¸¸é‡nå‹å…¥æ ˆ\n- fconst_nâ€”â€”å°†floatç±»å‹å¸¸é‡nå‹å…¥æ ˆ\n- dconst_nâ€”â€”å°†doubleç±»å‹å¸¸é‡nå‹å…¥æ ˆ\n\n### ï¼ˆ2ï¼‰bipushã€sipush\n\n- bipushâ€”â€”å°†ä¸€ä¸ª8ä½å¸¦ç¬¦å·æ•´æ•°å‹å…¥æ ˆ\n- sipushâ€”â€”å°†16ä½å¸¦ç¬¦å·æ•´æ•°å‹å…¥æ ˆ\n\n### ï¼ˆ3ï¼‰idc\n\n- ldc â€”â€”æŠŠå¸¸é‡æ± ä¸­çš„é¡¹å‹å…¥æ ˆ\n- ldc_w â€”â€”æŠŠå¸¸é‡æ± ä¸­çš„é¡¹å‹å…¥æ ˆï¼ˆä½¿ç”¨å®½ç´¢å¼•ï¼‰\n- ldc2_wâ€”â€”æŠŠå¸¸é‡æ± ä¸­longç±»å‹æˆ–è€…doubleç±»å‹çš„é¡¹å‹å…¥æ ˆï¼ˆä½¿ç”¨å®½ç´¢å¼•ï¼‰\n\n## 2.å°†æ“ä½œæ•°æ ˆä¸­çš„å€¼å­˜å…¥å±€éƒ¨å˜é‡è¡¨ä¸­çš„æŒ‡ä»¤\n\n### ï¼ˆ1ï¼‰istore_nã€lstore_nã€fstore_nã€dstore_nã€astore_n\n\n- istore_nâ€”â€”å°†intç±»å‹å€¼å­˜å…¥å±€éƒ¨å˜é‡n (nä¸ºä»»æ„æ•´æ•°)\n- lstore_nâ€”â€” å°†longç±»å‹å€¼å­˜å…¥å±€éƒ¨å˜é‡n\n- fstore_nâ€”â€”å°†floatç±»å‹å€¼å­˜å…¥å±€éƒ¨å˜é‡n\n- dstore_nâ€”â€”å°†doubleç±»å‹å€¼å­˜å…¥å±€éƒ¨å˜é‡n\n\n### ï¼ˆ2ï¼‰astore_nã€iastoreã€lastoreã€fastore ã€dastore ã€aastore ã€bastoreã€castoreã€sastore\n\n- astore_nâ€”â€”å°†å¼•ç”¨ç±»å‹æˆ–returnAddressç±»å‹å€¼å­˜å…¥å±€éƒ¨å˜é‡n\n- iastoreâ€”â€”å°†intç±»å‹å€¼å­˜å…¥æ•°ç»„ä¸­\n- lastoreâ€”â€”å°†longç±»å‹å€¼å­˜å…¥æ•°ç»„ä¸­\n- fastore â€”â€”å°†floatç±»å‹å€¼å­˜å…¥æ•°ç»„ä¸­\n- dastoreâ€”â€”å°†doubleç±»å‹å€¼å­˜å…¥æ•°ç»„ä¸­\n- aastoreâ€”â€”å°†å¼•ç”¨ç±»å‹å€¼å­˜å…¥æ•°ç»„ä¸­\n- bastoreâ€”â€”å°†byteç±»å‹æˆ–è€…booleanç±»å‹å€¼å­˜å…¥æ•°ç»„ä¸­\n- castore â€”â€”å°†charç±»å‹å€¼å­˜å…¥æ•°ç»„ä¸­\n- sastoreâ€”â€”å°†shortç±»å‹å€¼å­˜å…¥æ•°ç»„ä¸­\n\n### ï¼ˆ3ï¼‰wide\n\n- wideâ€”â€”ä½¿ç”¨é™„åŠ å­—èŠ‚æ‰©å±•å±€éƒ¨å˜é‡ç´¢å¼•\n\n## 3.ä»æ ˆä¸­ç»™å±€éƒ¨å˜é‡ä¸­è£…è½½å€¼çš„æŒ‡ä»¤\n\n### ï¼ˆ1ï¼‰iload_nã€lload_n ã€fload_nã€dload_n\n\n- iload_nâ€”â€”ä»å±€éƒ¨å˜é‡nä¸­è£…è½½intç±»å‹å€¼\n- lload_nâ€”â€”ä»å±€éƒ¨å˜é‡nä¸­è£…è½½longç±»å‹å€¼\n- fload_nâ€”â€”ä»å±€éƒ¨å˜é‡nä¸­è£…è½½floatç±»å‹å€¼\n- dload_nâ€”â€”ä»å±€éƒ¨å˜é‡nä¸­è£…è½½doubleç±»å‹å€¼\n\n### ï¼ˆ2ï¼‰aload_nã€ialoadã€laloadã€faload ã€daloadã€aaloadã€baloadã€caloadã€saload\n\n- aload_nâ€”â€”ä»å±€éƒ¨å˜é‡nä¸­è£…è½½å¼•ç”¨ç±»å‹å€¼\n- ialoadâ€”â€”ä»æ•°ç»„ä¸­è£…è½½intç±»å‹å€¼\n- laloadâ€”â€”ä»æ•°ç»„ä¸­è£…è½½longç±»å‹å€¼\n- faloadâ€”â€”ä»æ•°ç»„ä¸­è£…è½½floatç±»å‹å€¼\n- daloadâ€”â€”ä»æ•°ç»„ä¸­è£…è½½doubleç±»å‹å€¼\n- aaload â€”â€”ä»æ•°ç»„ä¸­è£…è½½å¼•ç”¨ç±»å‹å€¼\n- baloadâ€”â€”ä»æ•°ç»„ä¸­è£…è½½byteç±»å‹æˆ–booleanç±»å‹å€¼\n- caloadâ€”â€”ä»æ•°ç»„ä¸­è£…è½½charç±»å‹å€¼\n- saload â€”â€”ä»æ•°ç»„ä¸­è£…è½½shortç±»å‹å€¼\n\n## 4.ç±»å‹è½¬åŒ–çš„æŒ‡ä»¤ï¼ˆi2lã€i2dã€l2fã€f2dã€i2bã€i2cã€i2sâ€¦ï¼‰\n\n- i2lâ€”â€”æŠŠintç±»å‹çš„æ•°æ®è½¬åŒ–ä¸ºlongç±»å‹\n- i2fâ€”â€”æŠŠintç±»å‹çš„æ•°æ®è½¬åŒ–ä¸ºfloatç±»å‹\n- i2dâ€”â€”æŠŠintç±»å‹çš„æ•°æ®è½¬åŒ–ä¸ºdoubleç±»å‹\n- l2iâ€”â€”æŠŠlongç±»å‹çš„æ•°æ®è½¬åŒ–ä¸ºintç±»å‹\n- l2fâ€”â€”æŠŠlongç±»å‹çš„æ•°æ®è½¬åŒ–ä¸ºfloatç±»å‹\n- l2dâ€”â€”æŠŠlongç±»å‹çš„æ•°æ®è½¬åŒ–ä¸ºdoubleç±»å‹\n- f2iâ€”â€”æŠŠfloatç±»å‹çš„æ•°æ®è½¬åŒ–ä¸ºintç±»å‹\n- f2l â€”â€”æŠŠfloatç±»å‹çš„æ•°æ®è½¬åŒ–ä¸ºlongç±»å‹\n- f2dâ€”â€”æŠŠfloatç±»å‹çš„æ•°æ®è½¬åŒ–ä¸ºdoubleç±»å‹\n- d2i â€”â€”æŠŠdoubleç±»å‹çš„æ•°æ®è½¬åŒ–ä¸ºintç±»å‹\n- d2l â€”â€”æŠŠdoubleç±»å‹çš„æ•°æ®è½¬åŒ–ä¸ºlongç±»å‹\n- d2fâ€”â€”æŠŠdoubleç±»å‹çš„æ•°æ®è½¬åŒ–ä¸ºfloatç±»å‹\n- i2bâ€”â€”æŠŠintç±»å‹çš„æ•°æ®è½¬åŒ–ä¸ºbyteç±»å‹\n- i2câ€”â€” æŠŠintç±»å‹çš„æ•°æ®è½¬åŒ–ä¸ºcharç±»å‹\n- i2s â€”â€” æŠŠintç±»å‹çš„æ•°æ®è½¬åŒ–ä¸ºshortç±»å‹\n\n## 5.æ•´æ•°è¿ç®—ï¼ˆiaddã€ladd ã€isubã€imul ã€idivã€irem ã€ineg ã€iinc â€¦ï¼‰\n\n- iaddâ€”â€”æ‰§è¡Œintç±»å‹çš„åŠ æ³•\n- laddâ€”â€” æ‰§è¡Œlongç±»å‹çš„åŠ æ³•\n- isubâ€”â€”æ‰§è¡Œintç±»å‹çš„å‡æ³•\nlsubâ€”â€”æ‰§è¡Œlongç±»å‹çš„å‡æ³•\n- imulâ€”â€”æ‰§è¡Œintç±»å‹çš„ä¹˜æ³•\n- lmulâ€”â€”æ‰§è¡Œlongç±»å‹çš„ä¹˜æ³•\n- idivâ€”â€”æ‰§è¡Œintç±»å‹çš„é™¤æ³•\n- ldivâ€”â€”æ‰§è¡Œlongç±»å‹çš„é™¤æ³•\n- iremâ€”â€”è®¡ç®—intç±»å‹é™¤æ³•çš„ä½™æ•°\n- lremâ€”â€”è®¡ç®—longç±»å‹é™¤æ³•çš„ä½™æ•°\n- inegâ€”â€”å¯¹ä¸€ä¸ªintç±»å‹å€¼è¿›è¡Œå–åæ“ä½œ\n- lnegâ€”â€”å¯¹ä¸€ä¸ªlongç±»å‹å€¼è¿›è¡Œå–åæ“ä½œ\n- iinc (å¦‚1 by 1ï¼‰ â€”â€”æŠŠä¸€ä¸ªå¸¸é‡å€¼åŠ åˆ°ä¸€ä¸ªintç±»å‹çš„å±€éƒ¨å˜é‡ä¸Š\n\n## 6.é€»è¾‘è¿ç®—\n\n### ï¼ˆ1ï¼‰ç§»ä½æ“ä½œ ï¼ˆishlã€lshlã€ishrã€lshrã€iushrã€lushrï¼‰\n\n- ishlâ€”â€”æ‰§è¡Œintç±»å‹çš„å‘å·¦ç§»ä½æ“ä½œ\n- lshlâ€”â€”æ‰§è¡Œlongç±»å‹çš„å‘å·¦ç§»ä½æ“ä½œ\n- ishrâ€”â€” æ‰§è¡Œintç±»å‹çš„å‘å³ç§»ä½æ“ä½œ\n- lshrâ€”â€”æ‰§è¡Œlongç±»å‹çš„å‘å³ç§»ä½æ“ä½œ\n- iushrâ€”â€”æ‰§è¡Œintç±»å‹çš„å‘å³é€»è¾‘ç§»ä½æ“ä½œ\n- lushrâ€”â€”æ‰§è¡Œlongç±»å‹çš„å‘å³é€»è¾‘ç§»ä½æ“ä½œ\n\n### ï¼ˆ2ï¼‰æŒ‰ä½å¸ƒå°”è¿ç®— ï¼ˆiandã€landã€ior ã€lorã€ixorã€lxorï¼‰\n\n- iandâ€”â€”å¯¹intç±»å‹å€¼è¿›è¡Œâ€œé€»è¾‘ä¸â€æ“ä½œ\n- landâ€”â€”å¯¹longç±»å‹å€¼è¿›è¡Œâ€œé€»è¾‘ä¸â€æ“ä½œ\n- iorâ€”â€”å¯¹intç±»å‹å€¼è¿›è¡Œâ€œé€»è¾‘æˆ–â€æ“ä½œ\n- lorâ€”â€”å¯¹longç±»å‹å€¼è¿›è¡Œâ€œé€»è¾‘æˆ–â€æ“ä½œ\n- ixorâ€”â€”å¯¹intç±»å‹å€¼è¿›è¡Œâ€œé€»è¾‘å¼‚æˆ–â€æ“ä½œ\n- lxorâ€”â€”å¯¹longç±»å‹å€¼è¿›è¡Œâ€œé€»è¾‘å¼‚æˆ–â€æ“ä½œ\n\n### ï¼ˆ3ï¼‰æµ®ç‚¹è¿ç®—\n\n- faddâ€”â€”æ‰§è¡Œfloatç±»å‹çš„åŠ æ³•\n- daddâ€”â€”æ‰§è¡Œdoubleç±»å‹çš„åŠ æ³•\n- fsubâ€”â€”æ‰§è¡Œfloatç±»å‹çš„å‡æ³•\n- dsubâ€”â€”æ‰§è¡Œdoubleç±»å‹çš„å‡æ³•\n- fmulâ€”â€”æ‰§è¡Œfloatç±»å‹çš„ä¹˜æ³•\n- dmulâ€”â€”æ‰§è¡Œdoubleç±»å‹çš„ä¹˜æ³•\n- fdivâ€”â€”æ‰§è¡Œfloatç±»å‹çš„é™¤æ³•\n- ddivâ€”â€”æ‰§è¡Œdoubleç±»å‹çš„é™¤æ³•\n- fremâ€”â€”è®¡ç®—floatç±»å‹é™¤æ³•çš„ä½™æ•°\n- dremâ€”â€” è®¡ç®—doubleç±»å‹é™¤æ³•çš„ä½™æ•°\n- fnegâ€”â€”å°†ä¸€ä¸ªfloatç±»å‹çš„æ•°å€¼å–å\n- dnegâ€”â€”å°†ä¸€ä¸ªdoubleç±»å‹çš„æ•°å€¼å–å\n\n## 7.å¯¹è±¡å’Œæ•°ç»„æŒ‡ä»¤\n\n### ï¼ˆ1ï¼‰å¯¹è±¡æ“ä½œæŒ‡ä»¤ ï¼ˆgetstaticã€putstaticâ€¦ï¼‰\n\n- newâ€”â€”åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡\n- checkcastâ€”â€”ç¡®å®šå¯¹è±¡ä¸ºæ‰€ç»™å®šçš„ç±»å‹\n- getfieldâ€”â€”ä»å¯¹è±¡ä¸­è·å–å­—æ®µ\n- putfieldâ€”â€”è®¾ç½®å¯¹è±¡ä¸­å­—æ®µçš„å€¼\n- getstaticâ€”â€”ä»ç±»ä¸­è·å–é™æ€å­—æ®µ\n- putstaticâ€”â€”è®¾ç½®ç±»ä¸­é™æ€å­—æ®µçš„å€¼\n- instanceofâ€”â€”åˆ¤æ–­å¯¹è±¡æ˜¯å¦ä¸ºç»™å®šçš„ç±»å‹\n\n### ï¼ˆ2ï¼‰æ•°ç»„æ“ä½œæŒ‡ä»¤ ï¼ˆnewarrayã€arraylengthâ€¦ï¼‰\n\n- newarrayâ€”â€”åˆ†é…æ•°æ®æˆå‘˜ç±»å‹ä¸ºåŸºæœ¬ä¸Šæ•°æ®ç±»å‹çš„æ–°æ•°ç»„\n- anewarrayâ€”â€”åˆ†é…æ•°æ®æˆå‘˜ç±»å‹ä¸ºå¼•ç”¨ç±»å‹çš„æ–°æ•°ç»„\n- arraylengthâ€”â€”è·å–æ•°ç»„é•¿åº¦\n- multianewarrayâ€”â€”åˆ†é…æ–°çš„å¤šç»´æ•°ç»„\n\n## 7.æ§åˆ¶æµç›¸å…³æŒ‡ä»¤\n\n### ï¼ˆ1ï¼‰æ¡ä»¶åˆ†æ”¯æŒ‡ä»¤ ï¼ˆifeqã€iflt ã€ifge ã€ifleã€if_icmpcqã€if_icmpltã€if_icmpleã€if_icmpneã€ifnullã€if_acmpeq ã€if_acmpncã€â€¦ ï¼‰\n\n- ifeqâ€”â€”å¦‚æœç­‰äº0ï¼Œåˆ™è·³è½¬\n- ifneâ€”â€” å¦‚æœä¸ç­‰äº0ï¼Œåˆ™è·³è½¬\n- ifltâ€”â€” å¦‚æœå°äº0ï¼Œåˆ™è·³è½¬\n- ifgeâ€”â€”å¦‚æœå¤§äºç­‰äº0ï¼Œåˆ™è·³è½¬\n- ifgtâ€”â€”å¦‚æœå¤§äº0ï¼Œåˆ™è·³è½¬\n- ifleâ€”â€”å¦‚æœå°äºç­‰äº0ï¼Œåˆ™è·³è½¬\n- if_icmpcqâ€”â€” å¦‚æœä¸¤ä¸ªintå€¼ç›¸ç­‰ï¼Œåˆ™è·³è½¬\n- if_icmpneâ€”â€”å¦‚æœä¸¤ä¸ªintç±»å‹å€¼ä¸ç›¸ç­‰ï¼Œåˆ™è·³è½¬\n- if_icmpltâ€”â€”å¦‚æœä¸€ä¸ªintç±»å‹å€¼å°äºå¦å¤–ä¸€ä¸ªintç±»å‹å€¼ï¼Œåˆ™è·³è½¬\n- if_icmpgeâ€”â€”å¦‚æœä¸€ä¸ªintç±»å‹å€¼å¤§äºæˆ–è€…ç­‰äºå¦å¤–ä¸€ä¸ªintç±»å‹å€¼ï¼Œåˆ™è·³è½¬\n- if_icmpgtâ€”â€”å¦‚æœä¸€ä¸ªintç±»å‹å€¼å¤§äºå¦å¤–ä¸€ä¸ªintç±»å‹å€¼ï¼Œåˆ™è·³è½¬\n- if_icmpleâ€”â€”å¦‚æœä¸€ä¸ªintç±»å‹å€¼å°äºæˆ–è€…ç­‰äºå¦å¤–ä¸€ä¸ªintç±»å‹å€¼ï¼Œåˆ™è·³è½¬\n- ifnullâ€”â€”å¦‚æœç­‰äºnullï¼Œåˆ™è·³è½¬\n- ifnonnullâ€”â€”å¦‚æœä¸ç­‰äºnullï¼Œåˆ™è·³è½¬\n- if_acmpeqâ€”â€” å¦‚æœä¸¤ä¸ªå¯¹è±¡å¼•ç”¨ç›¸ç­‰ï¼Œåˆ™è·³è½¬\n- if_acmpncâ€”â€”å¦‚æœä¸¤ä¸ªå¯¹è±¡å¼•ç”¨ä¸ç›¸ç­‰ï¼Œåˆ™è·³è½¬\n\n### ï¼ˆ2ï¼‰æ¯”è¾ƒæŒ‡ä»¤ ï¼ˆlcmpã€fcmpl ã€fcmpg ã€dcmplã€dcmpg ï¼‰\n\n- lcmpâ€”â€”æ¯”è¾ƒlongç±»å‹å€¼\n- fcmplâ€”â€”æ¯”è¾ƒfloatç±»å‹å€¼ï¼ˆå½“é‡åˆ°NaNæ—¶ï¼Œè¿”å›-1ï¼‰\n- fcmpgâ€”â€” æ¯”è¾ƒfloatç±»å‹å€¼ï¼ˆå½“é‡åˆ°NaNæ—¶ï¼Œè¿”å›1ï¼‰\n- dcmplâ€”â€”æ¯”è¾ƒdoubleç±»å‹å€¼ï¼ˆå½“é‡åˆ°NaNæ—¶ï¼Œè¿”å›-1ï¼‰\n- dcmpgâ€”â€” æ¯”è¾ƒdoubleç±»å‹å€¼ï¼ˆå½“é‡åˆ°NaNæ—¶ï¼Œè¿”å›1ï¼‰\n\n// NaN æ˜¯è®¡ç®—æœºç§‘å­¦ä¸­æ•°å€¼æ•°æ®ç±»å‹çš„ä¸€ç±»å€¼ï¼Œè¡¨ç¤ºæœªå®šä¹‰æˆ–ä¸å¯è¡¨ç¤ºçš„å€¼ã€‚\n\n### ï¼ˆ3ï¼‰æ— æ¡ä»¶è½¬ç§»æŒ‡ä»¤ ï¼ˆgotoã€tableswitchã€lookupswitchï¼‰\n\n- gotoâ€”â€”æ— æ¡ä»¶è·³è½¬\n- goto_wâ€”â€”æ— æ¡ä»¶è·³è½¬ï¼ˆå®½ç´¢å¼•ï¼‰\n\n// è¡¨è·³è½¬æŒ‡ä»¤\n\n- tableswitchâ€”â€”é€šè¿‡ç´¢å¼•è®¿é—®è·³è½¬è¡¨ï¼Œå¹¶è·³è½¬\n- lookupswitchâ€”â€”é€šè¿‡é”®å€¼åŒ¹é…è®¿é—®è·³è½¬è¡¨ï¼Œå¹¶æ‰§è¡Œè·³è½¬æ“ä½œ\n\n### ï¼ˆ4ï¼‰å¼‚å¸¸ ï¼ˆathrowï¼‰\n\n- athrowâ€”â€”æŠ›å‡ºå¼‚å¸¸æˆ–é”™è¯¯\n\n### ï¼ˆ5ï¼‰finallyå­å¥ ï¼ˆjsrã€jsr_wã€rctï¼‰\n\n- jsrâ€”â€” è·³è½¬åˆ°å­ä¾‹ç¨‹\n- jsr_wâ€”â€”è·³è½¬åˆ°å­ä¾‹ç¨‹ï¼ˆå®½ç´¢å¼•ï¼‰\n- rctâ€”â€” ä»å­ä¾‹ç¨‹è¿”å›\n\n### ï¼ˆ6ï¼‰æ–¹æ³•è°ƒç”¨ä¸è¿”å›\n\n<1>æ–¹æ³•è°ƒç”¨æŒ‡ä»¤ï¼ˆinvokcvirtualã€invokespecialã€invokestaticã€invokcinterfaceï¼‰\n\n- invokcvirtualâ€”â€”è¿è¡Œæ—¶æŒ‰ç…§å¯¹è±¡çš„ç±»æ¥è°ƒç”¨å®ä¾‹æ–¹æ³•\n- invokespecialâ€”â€”æ ¹æ®ç¼–è¯‘æ—¶ç±»å‹æ¥è°ƒç”¨å®ä¾‹æ–¹æ³•\n- invokestaticâ€”â€”è°ƒç”¨ç±»ï¼ˆé™æ€ï¼‰æ–¹æ³•\n- invokcinterfaceâ€”â€”è°ƒç”¨æ¥å£æ–¹æ³•\n\n<2>æ–¹æ³•è¿”å›æŒ‡ä»¤ ï¼ˆireturn ã€lreturnã€freturnã€dreturnã€areturnã€returnï¼‰\n\n- ireturnâ€”â€”ä»æ–¹æ³•ä¸­è¿”å›intç±»å‹çš„æ•°æ®\n- lreturnâ€”â€”ä»æ–¹æ³•ä¸­è¿”å›longç±»å‹çš„æ•°æ®\n- freturnâ€”â€”ä»æ–¹æ³•ä¸­è¿”å›floatç±»å‹çš„æ•°æ®\n- dreturnâ€”â€” ä»æ–¹æ³•ä¸­è¿”å›doubleç±»å‹çš„æ•°æ®\n- areturnâ€”â€”ä»æ–¹æ³•ä¸­è¿”å›å¼•ç”¨ç±»å‹çš„æ•°æ®\n- returnâ€”â€” ä»æ–¹æ³•ä¸­è¿”å›ï¼Œè¿”å›å€¼ä¸ºvoid\n\n### ï¼ˆ8ï¼‰çº¿ç¨‹åŒæ­¥ ï¼ˆmontiorenterã€monitorexitï¼‰\n\n- montiorenterâ€”â€”è¿›å…¥å¹¶è·å–å¯¹è±¡ç›‘è§†å™¨\n- monitorexitâ€”â€” é‡Šæ”¾å¹¶é€€å‡ºå¯¹è±¡ç›‘è§†å™¨","tags":["é€†å‘","Java"],"categories":["computer"]},{"title":"Base64ç¼–ç ","url":"/archives/24050/","content":"\nBase64 æ˜¯ä¸€ç§åŸºäº**64ä¸ªå¯æ‰“å°å­—ç¬¦**æ¥è¡¨ç¤º**äºŒè¿›åˆ¶æ•°æ®**çš„è¡¨ç¤ºæ–¹æ³•ã€‚\n\n<!-- more -->\n\nå› ä¸º\n\n$$\n\\begin{align*}\n    64 &= 2^{6} \\\\\n    3 \\times 8 &= 4 \\times 6 = 24\n\\end{align*}\n$$\n\næ‰€ä»¥ä»¥**æ¯6ä¸ªbit**ä¸ºä¸€ç»„æ¥è¡¨ç¤ºæŸä¸ªå¯æ‰“å°å­—ç¬¦ã€‚**æ¯3ä¸ªbyte**çš„äºŒè¿›åˆ¶æ•°æ®å¯ç”±**4ä¸ªå¯æ‰“å°å­—ç¬¦**æ¥è¡¨ç¤ºï¼Œç„¶åæŠŠæ¯ä¸ªå¯æ‰“å°å­—ç¬¦çš„6bitå†æ·»ä¸¤ä½é«˜ä½0ï¼Œç»„æˆ8bitï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè½¬æ¢åçš„å­—ç¬¦ä¸²ç†è®ºä¸Šå°†è¦æ¯”åŸæ¥çš„**é•¿1/3**ã€‚\n\nåœ¨Base64ä¸­çš„å¯æ‰“å°å­—ç¬¦åŒ…æ‹¬å¤§å°å†™å­—æ¯ `A-Z`ã€`a-z`ã€æ•°å­— `0-9`ï¼Œä»¥åŠä¸¤ä¸ªå¯æ‰“å°ç¬¦å·ï¼ˆè¿™ä¸¤ä¸ªå¯æ‰“å°ç¬¦å·åœ¨ä¸åŒçš„ç³»ç»Ÿä¸­ä¸åŒï¼‰ã€‚ä¸‹è¡¨æ˜¯æ ‡å‡†çš„Base64è¡¨\n\n| Index | Char | Index | Char | Index | Char | Index | Char |\n| --- | --- | --- | --- | --- | --- | --- | --- |\n| 0 | A | 16 | Q | 32 | g | 48 | w |\n| 1 | B | 17 | R | 33 | h | 49 | x |\n| 2 | C | 18 | S | 34 | i | 50 | y |\n| 3 | D | 19 | T | 35 | j | 51 | z |\n| 4 | E | 20 | U | 36 | k | 52 | 0 |\n| 5 | F | 21 | V | 37 | l | 53 | 1 |\n| 6 | G | 22 | W | 38 | m | 54 | 2 |\n| 7 | H | 23 | X | 39 | n | 55 | 3 |\n| 8 | I | 24 | Y | 40 | o | 56 | 4 |\n| 9 | J | 25 | Z | 41 | p | 57 | 5 |\n| 10 | K | 26 | a | 42 | q | 58 | 6 |\n| 11 | L | 27 | b | 43 | r | 59 | 7 |\n| 12 | M | 28 | c | 44 | s | 60 | 8 |\n| 13 | N | 29 | d | 45 | t | 61 | 9 |\n| 14 | O | 30 | e | 46 | u | 62 | + |\n| 15 | P | 31 | f | 47 | v | 63 | / |\n\næ³¨æ„åˆ°ç¬¬62ï¼Œ63ä¸ªå­—ç¬¦ï¼Œè¿™ä¸¤ä¸ªå­—ç¬¦ä¼šéšç³»ç»Ÿçš„ä¸åŒè€Œä¸åŒã€‚\n\n- URLç¼–ç å™¨ä¼šæŠŠæ ‡å‡†Base64ä¸­çš„ â€˜/â€™ å’Œ â€˜+â€™ å­—ç¬¦å˜ä¸ºå½¢å¦‚ â€™%XXâ€™ çš„å½¢å¼ï¼Œè€Œè¿™äº› â€˜%â€™ å·åœ¨å­˜å…¥æ•°æ®åº“æ—¶è¿˜éœ€è¦å†è¿›è¡Œè½¬æ¢ï¼Œå› ä¸ºANSI SQLä¸­å·²å°† â€™%â€™ å·ç”¨ä½œé€šé…ç¬¦ã€‚ä¸ºè§£å†³æ­¤é—®é¢˜ï¼Œå¯é‡‡ç”¨ä¸€ç§ç”¨äºURLçš„æ”¹è¿›Base64ç¼–ç ï¼Œå®ƒåœ¨æœ«å°¾å¡«å…… '=' å·ï¼Œå¹¶å°†æ ‡å‡†Base64ä¸­çš„ â€˜+â€™ å’Œ â€˜/â€™ åˆ†åˆ«æ”¹æˆäº† â€˜-â€™ å’Œ â€˜_â€™ ã€‚\n- ç”¨äºæ­£åˆ™è¡¨è¾¾å¼çš„æ”¹è¿›Base64å˜ç§ï¼Œå°† â€™+â€™ å’Œ â€˜/â€™ æ”¹æˆäº† â€˜!â€™ å’Œ â€˜-â€™\n- å°† â€˜+/â€™ æ”¹ä¸º â€˜_-â€™ æˆ– â€˜*._â€™*ï¼ˆç”¨ä½œç¼–ç¨‹è¯­è¨€ä¸­çš„æ ‡è¯†ç¬¦åç§°ï¼‰æˆ– â€˜.-â€™ï¼ˆç”¨äºXMLä¸­çš„Nmtokenï¼‰ç”šè‡³ â€˜_:â€™ï¼ˆç”¨äºXMLä¸­çš„Nameï¼‰\n\nä¸‹é¢ç»™å‡ºäº†æ ‡å‡† Base64 ç¼–ç å®ç°çš„ç®—æ³•ï¼ˆCè¯­è¨€å’ŒPythonï¼‰\n\n```c\n#include <stdio.h>\n#include <stdlib.h>\n \n// base64 è½¬æ¢è¡¨, å…±64ä¸ª\nstatic const char base64_alphabet[] = {\n    'A', 'B', 'C', 'D', 'E', 'F', 'G',\n    'H', 'I', 'J', 'K', 'L', 'M', 'N',\n    'O', 'P', 'Q', 'R', 'S', 'T',\n    'U', 'V', 'W', 'X', 'Y', 'Z',\n    'a', 'b', 'c', 'd', 'e', 'f', 'g',\n    'h', 'i', 'j', 'k', 'l', 'm', 'n',\n    'o', 'p', 'q', 'r', 's', 't',\n    'u', 'v', 'w', 'x', 'y', 'z',\n    '0', '1', '2', '3', '4', '5', '6', '7', '8', '9',\n    '+', '/'\n    };\n \n// è§£ç æ—¶ä½¿ç”¨    base64DecodeChars\nstatic const unsigned char base64_suffix_map[256] = {\n    255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 253, 255,\n    255, 253, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,\n    255, 255, 255, 255, 255, 255, 255, 255, 253, 255, 255, 255,\n    255, 255, 255, 255, 255, 255, 255,  62, 255, 255, 255,  63,\n    52,  53,  54,  55,  56,  57,  58,  59,  60,  61, 255, 255,\n    255, 254, 255, 255, 255,   0,   1,   2,   3,   4,   5,   6,\n    7,   8,   9,  10,  11,  12,  13,  14,  15,  16,  17,  18,\n    19,  20,  21,  22,  23,  24,  25, 255, 255, 255, 255, 255,\n    255,  26,  27,  28,  29,  30,  31,  32,  33,  34,  35,  36,\n    37,  38,  39,  40,  41,  42,  43,  44,  45,  46,  47,  48,\n    49,  50,  51, 255, 255, 255, 255, 255, 255, 255, 255, 255,\n    255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,\n    255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,\n    255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,\n    255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,\n    255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,\n    255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,\n    255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,\n    255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,\n    255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,\n    255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,\n    255, 255, 255, 255 \n    };\n \nstatic char cmove_bits(unsigned char src, unsigned lnum, unsigned rnum) {\n    src <<= lnum; \n    src >>= rnum;\n    return src;\n}\n \nint base64_encode(  char *indata, int inlen, char *outdata, int *outlen) {\n    int ret = 0; // return value\n    if (indata == NULL || inlen == 0) {\n        return ret = -1;\n    }\n    \n    int in_len = 0; // æºå­—ç¬¦ä¸²é•¿åº¦, å¦‚æœin_lenä¸æ˜¯3çš„å€æ•°, é‚£ä¹ˆéœ€è¦è¡¥æˆ3çš„å€æ•°\n    int pad_num = 0; // éœ€è¦è¡¥é½çš„å­—ç¬¦ä¸ªæ•°, è¿™æ ·åªæœ‰2, 1, 0(0çš„è¯ä¸éœ€è¦æ‹¼æ¥, )\n    if (inlen % 3 != 0) {\n        pad_num = 3 - inlen % 3;\n    }\n    in_len = inlen + pad_num; // æ‹¼æ¥åçš„é•¿åº¦, å®é™…ç¼–ç éœ€è¦çš„é•¿åº¦(3çš„å€æ•°)\n    \n    int out_len = in_len * 8 / 6; // ç¼–ç åçš„é•¿åº¦\n    \n    char *p = outdata; // å®šä¹‰æŒ‡é’ˆæŒ‡å‘ä¼ å‡ºdataçš„é¦–åœ°å€\n    \n    //ç¼–ç , é•¿åº¦ä¸ºè°ƒæ•´åçš„é•¿åº¦, 3å­—èŠ‚ä¸€ç»„\n    for (int i = 0; i < in_len; i+=3) {\n        int value = *indata >> 2; // å°†indataç¬¬ä¸€ä¸ªå­—ç¬¦å‘å³ç§»åŠ¨2bit(ä¸¢å¼ƒ2bit)\n        char c = base64_alphabet[value]; // å¯¹åº”base64è½¬æ¢è¡¨çš„å­—ç¬¦\n        *p = c; // å°†å¯¹åº”å­—ç¬¦(ç¼–ç åå­—ç¬¦)èµ‹å€¼ç»™outdataç¬¬ä¸€å­—èŠ‚\n        \n        //å¤„ç†æœ€åä¸€ç»„(æœ€å3å­—èŠ‚)çš„æ•°æ®\n        if (i == inlen + pad_num - 3 && pad_num != 0) {\n            if(pad_num == 1) {\n                *(p + 1) = base64_alphabet[(int)(cmove_bits(*indata, 6, 2) + cmove_bits(*(indata + 1), 0, 4))];\n                *(p + 2) = base64_alphabet[(int)cmove_bits(*(indata + 1), 4, 2)];\n                *(p + 3) = '=';\n            } else if (pad_num == 2) { // ç¼–ç åçš„æ•°æ®è¦è¡¥ä¸¤ä¸ª '='\n                *(p + 1) = base64_alphabet[(int)cmove_bits(*indata, 6, 2)];\n                *(p + 2) = '=';\n                *(p + 3) = '=';\n            }\n        } else { // å¤„ç†æ­£å¸¸çš„3å­—èŠ‚çš„æ•°æ®\n            *(p + 1) = base64_alphabet[cmove_bits(*indata, 6, 2) + cmove_bits(*(indata + 1), 0, 4)];\n            *(p + 2) = base64_alphabet[cmove_bits(*(indata + 1), 4, 2) + cmove_bits(*(indata + 2), 0, 6)];\n            *(p + 3) = base64_alphabet[*(indata + 2) & 0x3f];\n        }\n        \n        p += 4;\n        indata += 3;\n    }\n    \n    if(outlen != NULL) {\n        *outlen = out_len;\n    }\n    \n    return ret;\n}\n \n \nint base64_decode(const char *indata, int inlen, char *outdata, int *outlen) {\n    int ret = 0;\n    if (indata == NULL || inlen <= 0 || outdata == NULL || outlen == NULL) {\n        return ret = -1;\n    }\n    if (inlen % 4 != 0) { // éœ€è¦è§£ç çš„æ•°æ®ä¸æ˜¯4å­—èŠ‚å€æ•°\n        return ret = -2;\n    }\n    \n    int t = 0, x = 0, y = 0, i = 0;\n    unsigned char c = 0;\n    int g = 3;\n    \n    //while (indata[x] != 0) {\n    while (x < inlen) {\n        // éœ€è¦è§£ç çš„æ•°æ®å¯¹åº”çš„ASCIIå€¼å¯¹åº”base64_suffix_mapçš„å€¼\n        c = base64_suffix_map[indata[x++]];\n        if (c == 255) return -1;// å¯¹åº”çš„å€¼ä¸åœ¨è½¬ç è¡¨ä¸­\n        if (c == 253) continue;// å¯¹åº”çš„å€¼æ˜¯æ¢è¡Œæˆ–è€…å›è½¦\n        if (c == 254) { c = 0; g--; }// å¯¹åº”çš„å€¼æ˜¯'='\n        t = (t<<6) | c; // å°†å…¶ä¾æ¬¡æ”¾å…¥ä¸€ä¸ªintå‹ä¸­å 3å­—èŠ‚\n        if (++y == 4) {\n            outdata[i++] = (unsigned char)((t>>16)&0xff);\n            if (g > 1) outdata[i++] = (unsigned char)((t>>8)&0xff);\n            if (g > 2) outdata[i++] = (unsigned char)(t&0xff);\n            y = t = 0;\n        }\n    }\n    if (outlen != NULL) {\n        *outlen = i;\n    }\n    return ret;\n}\n```\n\n```python\nbase64_list = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P',\n               'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z', 'a', 'b', 'c', 'd', 'e', 'f',\n               'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v',\n               'w', 'x', 'y', 'z', '0', '1', '2', '3', '4', '5', '6', '7', '8', '9', '+', '/']\n\n\ndef base64_encode(string: str) -> str:\n    oldstr = ''\n    newstr = []\n    base64 = ''\n    global base64_list\n    # æŠŠåŸå§‹å­—ç¬¦ä¸²è½¬æ¢ä¸ºäºŒè¿›åˆ¶ï¼Œç”¨binè½¬æ¢åæ˜¯0bå¼€å¤´çš„ï¼Œæ‰€ä»¥æŠŠbæ›¿æ¢äº†ï¼Œé¦–ä½è¡¥0è¡¥é½8ä½\n    for i in string:\n        oldstr += '{:08}'.format(int(str(bin(ord(i))).replace('0b', '')))\n    # æŠŠè½¬æ¢å¥½çš„äºŒè¿›åˆ¶æŒ‰ç…§6ä½ä¸€ç»„åˆ†å¥½ï¼Œæœ€åä¸€ç»„ä¸è¶³6ä½çš„åé¢è¡¥0\n    for j in range(0, len(oldstr), 6):\n        newstr.append('{:<06}'.format(oldstr[j:j + 6]))\n    # åœ¨base_listä¸­æ‰¾åˆ°å¯¹åº”çš„å­—ç¬¦ï¼Œæ‹¼æ¥\n    for k in range(len(newstr)):\n        base64 += base64_list[int(newstr[k], 2)]\n    # åˆ¤æ–­baseå­—ç¬¦ç»“å°¾è¡¥å‡ ä¸ª'='\n    if len(string) % 3 == 1:\n        base64 += '=='\n    elif len(string) % 3 == 2:\n        base64 += '='\n    return base64\n```\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","tags":["ç¼–ç "],"categories":["computer"]},{"title":"Gitä¿¡æ¯æ³„éœ²","url":"/archives/8426/","content":"\nåœ¨é…ç½®ä¸å½“çš„æƒ…å†µä¸‹ï¼Œå¯èƒ½ä¼šå°† `.git` æ–‡ä»¶å¤¹ç›´æ¥éƒ¨ç½²åˆ°çº¿ä¸Šç¯å¢ƒï¼Œè¿™å°±é€ æˆäº† Git æ³„éœ²é—®é¢˜ã€‚æ”»å‡»è€…åˆ©ç”¨è¯¥æ¼æ´ä¸‹è½½ .git æ–‡ä»¶å¤¹ä¸­çš„æ‰€æœ‰å†…å®¹ã€‚å¦‚æœæ–‡ä»¶å¤¹ä¸­å­˜åœ¨æ•æ„Ÿä¿¡æ¯(æ•°æ®åº“è´¦å·å¯†ç ã€æºç ç­‰)ï¼Œé€šè¿‡ç™½ç›’çš„å®¡è®¡ç­‰æ–¹å¼å°±å¯èƒ½ç›´æ¥è·å¾—æ§åˆ¶æœåŠ¡å™¨çš„æƒé™å’Œæœºä¼šã€‚\n\n<!-- more -->\n\n# Git ç®€ä»‹\n\n- Git å§‹ç»ˆä¿å­˜å¿«ç…§è€Œä¸æ˜¯æ–‡ä»¶å·®å¼‚ã€‚\n- ä»»ä½•æ•°æ®å­˜å‚¨å‰å§‹ç»ˆä½¿ç”¨ SHA-1 è®¡ç®—æ ¡éªŒå’Œï¼Œä¿è¯å†…å®¹å®Œæ•´æ€§ã€‚\n- ä½¿ç”¨åˆ†å¸ƒå¼ä»“åº“è®¾è®¡ï¼Œè®©å¤§å¤šæ•°æ“ä½œéƒ½åœ¨æœ¬åœ°è¿›è¡Œï¼Œä¿è¯äº†ä½¿ç”¨æ•ˆç‡ã€‚å‡ ä¹æ‰€æœ‰æ“ä½œéƒ½æ˜¯å‘æ•°æ®åº“å¢åŠ æ•°æ®ï¼Œæäº¤ä¹‹åå°±å¾ˆéš¾ä¸¢å¤±æ•°æ®ã€‚\n\n![git description](Gitä¿¡æ¯æ³„éœ²/git_description.png)\n\nGit æ˜¯ä¸€ä¸ª[å†…å®¹å¯»å€æ–‡ä»¶ç³»ç»Ÿ(content-addressed filesystem)](https://en.wikipedia.org/wiki/Content-addressable_storage)ï¼Œå…¶å­˜å‚¨å†…å®¹éƒ½æ˜¯é€šè¿‡å†…å®¹åœ°å€ç»´æŠ¤ï¼Œå¯ä»¥æŠŠå®ƒç†è§£æˆä¸€ä¸ª**é”®å€¼å¯¹**å­˜å‚¨æ–¹å¼ï¼šå³ç»™å®šä¸€ä¸ªå­˜å‚¨æ–‡ä»¶ï¼Œè¯¥ç³»ç»Ÿæ ¹æ®æ–‡ä»¶ä¿¡æ¯å’Œå†…å®¹ï¼Œä½¿ç”¨SHA-1ç®—æ³•è®¡ç®—ï¼Œè¿”å›ä¸€ä¸ªç”±40ä¸ªåå…­è¿›åˆ¶å­—ç¬¦ç»„æˆçš„å­—ç¬¦ä¸²ï¼Œä¹‹ååªéœ€è¦é€šè¿‡è¯¥å­—ç¬¦ä¸²å³å¯è®¿é—®è¯¥æ–‡ä»¶ï¼Œè¿™ä¸ªå­—ç¬¦ä¸²å°±æ˜¯ Git ä¸­é€šå¸¸æ‰€è¯´çš„**æ ¡éªŒå’Œ**ã€‚\n\n- å†…å®¹å¯»å€\n  \n> è°ˆåˆ°å†…å®¹å¯»å€ï¼Œæœ‰å¿…è¦äº†è§£ä¸€ä¸‹çš„å°±æ˜¯æœ¬åœ°å¯»å€ï¼Œæˆ–è€…å«ç‰©ç†å¯»å€ã€‚å¯¹äºç‰©ç†å¯»å€ç³»ç»Ÿï¼Œå…¶æ‰€æœ‰æ•°æ®å­˜å‚¨åœ¨ç‰©ç†åª’ä»‹çš„å¯ç”¨ç©ºé—´ï¼Œä¸å…¶å†…å®¹æ— å…³ï¼Œç³»ç»Ÿè®°å½•å…¶ç‰©ç†åœ°å€ï¼ˆphysical locationï¼‰ä¾›éšåä½¿ç”¨ï¼Œè¿™äº›ç‰©ç†åœ°å€é€šå¸¸é€šè¿‡ä½¿ç”¨ä¸€ä¸ªåˆ—è¡¨æˆ–è€…ç›®å½•æ¥ç»´æŠ¤ï¼Œå½“å†æ¬¡è¯·æ±‚ç‰¹å®šæ•°æ®æ—¶ï¼Œéœ€è¦ä½¿ç”¨å…¶ç‰©ç†åœ°å€ï¼Œå¦‚è·¯å¾„å’Œæ–‡ä»¶åã€‚è€Œå¯¹äºä¸€ä¸ªå†…å®¹å¯»å€ç³»ç»Ÿï¼Œç³»ç»Ÿè®°å½•çš„æ˜¯ä¸€ä¸ªå†…å®¹åœ°å€ï¼ˆcontent-addressï¼‰ï¼Œè¯¥å†…å®¹åœ°å€æ˜¯å¯¹åº”æ•°æ®çš„ä¸€ä¸ªå”¯ä¸€ä¸”æŒä¹…çš„è¯†åˆ«ç¬¦ï¼Œå®ƒæ˜¯é€šè¿‡åŠ å¯†å“ˆå¸Œç®—æ³•ï¼ˆå¦‚ï¼ŒSHA-1æˆ–MD5ï¼‰è®¡ç®—å‡ºæ¥çš„ä¸€ä¸²å€¼ï¼Œå½“æˆ‘ä»¬éœ€è¦æ•°æ®æ—¶ï¼Œæä¾›è¯¥å†…å®¹åœ°å€ï¼Œç³»ç»Ÿå³å¯é€šè¿‡è¯¥åœ°å€è·å–æ•°æ®çš„ç‰©ç†åœ°å€ï¼Œè¿”å›æ•°æ®ï¼›åŒæ—¶ï¼Œå¯¹äºæ•°æ®çš„ä»»ä½•å˜æ›´éƒ½å°†å¯¼è‡´å†…å®¹åœ°å€å‘ç”Ÿå˜åŒ–ã€‚\n>\n\n- SHA-1å“ˆå¸Œå€¼\n  \n> åœ¨ Git ç³»ç»Ÿä¸­ï¼Œæ¯ä¸ª Git å¯¹è±¡éƒ½é€šè¿‡å“ˆå¸Œå€¼æ¥ä»£è¡¨è¿™ä¸ªå¯¹è±¡ã€‚å“ˆå¸Œå€¼æ˜¯é€šè¿‡ SHA-1 ç®—æ³•è®¡ç®—å‡ºæ¥çš„ï¼Œé•¿åº¦ä¸º40ä¸ªå­—ç¬¦ï¼ˆ40-digitï¼‰ã€‚\n\n# SVNä¸Gitçš„ä¸»è¦åŒºåˆ«\n\nSVNæ˜¯é›†ä¸­å¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œç‰ˆæœ¬åº“æ˜¯é›†ä¸­æ”¾åœ¨ä¸­å¤®æœåŠ¡å™¨çš„ã€‚è€Œå¹²æ´»çš„æ—¶å€™ï¼Œç”¨çš„éƒ½æ˜¯è‡ªå·±çš„ç”µè„‘ï¼Œæ‰€ä»¥é¦–å…ˆè¦ä»ä¸­å¤®æœåŠ¡å™¨å“ªé‡Œå¾—åˆ°æœ€æ–°çš„ç‰ˆæœ¬ï¼Œç„¶åå¹²æ´»ï¼Œå¹²å®Œåï¼Œéœ€è¦æŠŠè‡ªå·±åšå®Œçš„æ´»æ¨é€åˆ°ä¸­å¤®æœåŠ¡å™¨ã€‚é›†ä¸­å¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿæ˜¯å¿…é¡»è”ç½‘æ‰èƒ½å·¥ä½œï¼Œå¦‚æœåœ¨å±€åŸŸç½‘è¿˜å¯ä»¥ï¼Œå¸¦å®½å¤Ÿå¤§ï¼Œé€Ÿåº¦å¤Ÿå¿«ï¼Œå¦‚æœåœ¨äº’è”ç½‘ä¸‹ï¼Œå¦‚æœç½‘é€Ÿæ…¢çš„è¯ï¼Œå°±çº³é—·äº†ã€‚\n\nGitæ˜¯åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œé‚£ä¹ˆå®ƒå°±æ²¡æœ‰ä¸­å¤®æœåŠ¡å™¨çš„ï¼Œæ¯ä¸ªäººçš„ç”µè„‘å°±æ˜¯ä¸€ä¸ªå®Œæ•´çš„ç‰ˆæœ¬åº“ï¼Œè¿™æ ·ï¼Œå·¥ä½œçš„æ—¶å€™å°±ä¸éœ€è¦è”ç½‘äº†ï¼Œå› ä¸ºç‰ˆæœ¬éƒ½æ˜¯åœ¨è‡ªå·±çš„ç”µè„‘ä¸Šã€‚æ—¢ç„¶æ¯ä¸ªäººçš„ç”µè„‘éƒ½æœ‰ä¸€ä¸ªå®Œæ•´çš„ç‰ˆæœ¬åº“ï¼Œé‚£å¤šä¸ªäººå¦‚ä½•åä½œå‘¢ï¼Ÿæ¯”å¦‚è¯´è‡ªå·±åœ¨ç”µè„‘ä¸Šæ”¹äº†æ–‡ä»¶Aï¼Œå…¶ä»–äººä¹Ÿåœ¨ç”µè„‘ä¸Šæ”¹äº†æ–‡ä»¶Aï¼Œè¿™æ—¶ï¼Œä½ ä»¬ä¸¤ä¹‹é—´åªéœ€æŠŠå„è‡ªçš„ä¿®æ”¹æ¨é€ç»™å¯¹æ–¹ï¼Œå°±å¯ä»¥äº’ç›¸çœ‹åˆ°å¯¹æ–¹çš„ä¿®æ”¹äº†ã€‚\n\n# Git å­˜å‚¨ç›®å½•ç»“æ„\n\nåœ¨åˆå§‹åŒ– Git ä»“åº“çš„æ—¶å€™ï¼ˆgit clone æˆ– git initï¼‰ï¼ŒGit ä¼šç”Ÿæˆ .git éšè—ç›®å½•ã€‚Git ä¼šå°†æ‰€æœ‰çš„æ–‡ä»¶ï¼Œç›®å½•ï¼Œæäº¤ç­‰è½¬åŒ–ä¸º Git å¯¹è±¡ï¼Œå‹ç¼©å­˜å‚¨åœ¨è¿™ä¸ªç›®å½•å½“ä¸­ã€‚è¯¥ç›®å½•å†…å®¹å¤§è‡´å¦‚ä¸‹ï¼š\n\n- æ–‡ä»¶ï¼š\n    - COMMIT_EDITMSGï¼šä¿å­˜æœ€æ–°çš„commit messageï¼ŒGitç³»ç»Ÿä¸ä¼šç”¨åˆ°è¿™ä¸ªæ–‡ä»¶ï¼Œæ˜¯ç»™ç”¨æˆ·çš„ä¸€ä¸ªå‚è€ƒæ–‡ä»¶\n    - configï¼šGitä»“åº“çš„é…ç½®æ–‡ä»¶\n    - descriptionï¼šä»“åº“çš„æè¿°ä¿¡æ¯ï¼Œä¸»è¦ç»™gitwebç­‰gitæ‰˜ç®¡ç³»ç»Ÿä½¿ç”¨\n    - HEADï¼šè¿™ä¸ªæ–‡ä»¶åŒ…å«äº†ä¸€ä¸ªæ¡£æœŸåˆ†æ”¯ï¼ˆbranchï¼‰çš„å¼•ç”¨ï¼Œé€šè¿‡è¿™ä¸ªæ–‡ä»¶Gitå¯ä»¥å¾—åˆ°ä¸‹ä¸€æ¬¡commitçš„parent\n    - hooksï¼šè¿™ä¸ªç›®å½•å­˜æ”¾ä¸€äº›shellè„šæœ¬ï¼Œå¯ä»¥è®¾ç½®ç‰¹å®šçš„gitå‘½ä»¤åè§¦å‘ç›¸åº”çš„è„šæœ¬ï¼›åœ¨æ­å»ºgitwebç³»ç»Ÿæˆ–å…¶ä»– Git æ‰˜ç®¡ç³»ç»Ÿä¼šç»å¸¸ç”¨åˆ°hook script(é’©å­è„šæœ¬)\n    - indexï¼šè¿™ä¸ªæ–‡ä»¶æ˜¯æš‚å­˜åŒºï¼ˆstageï¼‰ï¼Œä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶\n    - ORIG_HEADï¼šHEADæŒ‡é’ˆçš„å‰ä¸€ä¸ªçŠ¶æ€\n- æ–‡ä»¶å¤¹\n    - infoï¼šåŒ…å«ä»“åº“çš„ä¸€äº›ä¿¡æ¯\n    - logsï¼šä¿å­˜æ‰€æœ‰æ›´æ–°çš„å¼•ç”¨è®°å½•\n    - objectsï¼šæ‰€æœ‰çš„ Git å¯¹è±¡éƒ½ä¼šå­˜æ”¾åœ¨è¿™ä¸ªç›®å½•ä¸­ï¼Œå¯¹è±¡çš„SHA-1å“ˆå¸Œå€¼çš„å‰ä¸¤ä½æ˜¯æ–‡ä»¶å¤¹åç§°ï¼Œå38ä½ä½œä¸ºå¯¹è±¡æ–‡ä»¶å\n    - refsï¼šè¿™ä¸ªç›®å½•ä¸€èˆ¬åŒ…æ‹¬ä¸‰ä¸ªå­æ–‡ä»¶å¤¹ï¼Œheadsã€remotes å’Œ tagsï¼Œheads ä¸­çš„æ–‡ä»¶æ ‡è¯†äº†é¡¹ç›®ä¸­çš„å„ä¸ªåˆ†æ”¯æŒ‡å‘çš„å½“å‰commit\n\n# Git ä»“åº“æ–‡ä»¶çŠ¶æ€\n\nGit ä»“åº“æ–‡ä»¶æœ‰äº”ç§çŠ¶æ€ï¼ˆæˆ–è€…å››ç§ï¼Œå³å‰å››ç§ï¼‰ï¼š\n\n- **Untracked**ï¼šæœªè·Ÿè¸ªã€‚æ­¤æ–‡ä»¶åœ¨æ–‡ä»¶å¤¹ä¸­ï¼Œä½†å¹¶æ²¡æœ‰åŠ å…¥åˆ° git åº“ï¼Œä¸å‚ä¸ç‰ˆæœ¬æ§åˆ¶ã€‚é€šè¿‡`git add`Â å°†çŠ¶æ€å˜ä¸º`Staged`ã€‚\n- **Unmodified**ï¼š æ–‡ä»¶å·²ç»å…¥åº“ï¼Œä½†æœªä¿®æ”¹ã€‚å³ç‰ˆæœ¬åº“ä¸­çš„æ–‡ä»¶å¿«ç…§å†…å®¹ä¸æ–‡ä»¶å¤¹ä¸­å®Œå…¨ä¸€è‡´ã€‚è¿™ç§ç±»å‹çš„æ–‡ä»¶æœ‰ä¸¤ç§å»å¤„ï¼šå¦‚æœå®ƒè¢«ä¿®æ”¹ï¼Œåˆ™å˜ä¸º`Modified`ï¼›å¦‚æœä½¿ç”¨`git rm`ç§»å‡ºç‰ˆæœ¬åº“ï¼Œåˆ™æˆä¸º`Untracked`æ–‡ä»¶ã€‚\n- **Modified**ï¼šæ–‡ä»¶å·²ä¿®æ”¹ï¼Œä½†ä»…ä»…æ˜¯ä¿®æ”¹ã€‚è¿™ä¸ªæ–‡ä»¶ä¹Ÿæœ‰ä¸¤ä¸ªå»å¤„ï¼šé€šè¿‡`git add`å¯è¿›å…¥æš‚å­˜åŒºï¼Œæˆä¸º`staged`çŠ¶æ€ï¼›ä½¿ç”¨`git checkout`ä¸¢å¼ƒä¿®æ”¹è¿‡ç¨‹ï¼Œè¿”å›åˆ°`unmodify`çŠ¶æ€ã€‚è¿™ä¸ª`git checkout`å³ä»åº“ä¸­å–å‡ºæ–‡ä»¶ï¼Œè¦†ç›–å½“å‰ä¿®æ”¹ã€‚\n- **Staged**ï¼šæš‚å­˜çŠ¶æ€ã€‚æ‰§è¡Œ`git commit`åˆ™å°†ä¿®æ”¹åŒæ­¥åˆ°åº“ä¸­ï¼Œè¿›å…¥`Untracked`çŠ¶æ€ï¼Œè¿™æ—¶åº“ä¸­çš„æ–‡ä»¶å’Œæœ¬åœ°æ–‡ä»¶åˆå˜ä¸ºä¸€è‡´ï¼Œæ–‡ä»¶ä¸º`Unmodify`çŠ¶æ€. æ‰§è¡Œ`git reset HEAD filename`å–æ¶ˆæš‚å­˜, æ–‡ä»¶çŠ¶æ€ä¸º`Modified`ã€‚\n- **Committed**ï¼šæ–‡ä»¶å·²æäº¤åˆ°è¿œç¨‹ä»“åº“ã€‚\n\n![git_status](Gitä¿¡æ¯æ³„éœ²/status.png)\n\nç”±ä¸Šé¢çš„æ–‡ä»¶çŠ¶æ€å¯ä»¥æ¨å‡ºå››ä¸ªå·¥ä½œåŒºåŸŸï¼ˆæˆ–è€…ä¸‰ä¸ªï¼Œå³å‰ä¸‰ä¸ªï¼‰ï¼š\n\n- **Workspace**ï¼šå·¥ä½œåŒºï¼Œå°±æ˜¯å¹³æ—¶å­˜æ”¾é¡¹ç›®ä»£ç çš„åœ°æ–¹ã€‚\n- **Index / Stage**ï¼šæš‚å­˜åŒºï¼Œç”¨äºä¸´æ—¶å­˜æ”¾é¡¹ç›®çš„æ”¹åŠ¨ï¼Œäº‹å®ä¸Šå®ƒåªæ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œä¿å­˜å³å°†æäº¤åˆ°æ–‡ä»¶åˆ—è¡¨ä¿¡æ¯ã€‚\n- **Repository**ï¼šä»“åº“åŒºï¼ˆæˆ–ç‰ˆæœ¬åº“ï¼‰ï¼Œå°±æ˜¯å®‰å…¨å­˜æ”¾æ•°æ®çš„ä½ç½®ï¼Œè¿™é‡Œé¢æœ‰æäº¤åˆ°æ‰€æœ‰ç‰ˆæœ¬çš„æ•°æ®ã€‚å…¶ä¸­HEADæŒ‡å‘æœ€æ–°æ”¾å…¥ä»“åº“çš„ç‰ˆæœ¬ã€‚\n- **Remote**ï¼šè¿œç¨‹ä»“åº“ï¼Œæ‰˜ç®¡ä»£ç çš„æœåŠ¡å™¨ï¼Œå¯ä»¥ç®€å•çš„è®¤ä¸ºæ˜¯é¡¹ç›®ç»„ä¸­çš„ä¸€å°ç”µè„‘ç”¨äºè¿œç¨‹æ•°æ®äº¤æ¢ã€‚\n\næ–‡ä»¶åœ¨è¿™å››ä¸ªåŒºåŸŸä¹‹é—´çš„è½¬æ¢å…³ç³»å¦‚ä¸‹ï¼ˆç®­å¤´ä¸Šé¢æ˜¯å¯¹åº”çš„ git æŒ‡ä»¤ï¼‰ï¼š\n\n![workspace](Gitä¿¡æ¯æ³„éœ²/workspace.png)\n\nå„ç§çŠ¶æ€å’ŒåŒºåŸŸä¹‹é—´çš„è½¬æ¢å…³ç³»ï¼š\n\n![relationship](Gitä¿¡æ¯æ³„éœ²/relationship.png)\n\næˆ–è€…å¯ä»¥ç®€åŒ–ä¸€ä¸‹ï¼Œä¸åŒå·¥ä½œåŒºåŸŸå¯¹åº”çš„ .git æ–‡ä»¶ï¼š\n\n![simplification](Gitä¿¡æ¯æ³„éœ²/simplification.png)\n\n# Git å¯¹è±¡\n\nåœ¨ Git ç³»ç»Ÿä¸­æœ‰å››ç§å¯¹è±¡ï¼Œæ‰€æœ‰çš„ Git æ“ä½œéƒ½æ˜¯åŸºäºè¿™äº›å¯¹è±¡ã€‚\n\n- blobï¼šç”¨æ¥ä¿å­˜æ–‡ä»¶çš„å†…å®¹ã€‚\n    - äºŒè¿›åˆ¶å¤§å¯¹è±¡\n    - ä¸»è¦ç”¨äºå­˜æ”¾æ–‡ä»¶çš„å†…å®¹ï¼ˆæ•°æ®çš„äºŒè¿›åˆ¶æµï¼‰\n    - Gitä¸­æ‰€æœ‰æ•°æ®éƒ½æ˜¯é€šè¿‡è¯¥æ–¹å¼å­˜å‚¨ã€‚\n- treeï¼šå¯ä»¥ç†è§£æˆä¸€ä¸ªå¯¹è±¡å…³ç³»æ ‘ï¼Œç”¨æ¥ç®¡ç†ä¸€äº› tree å’Œ blob å¯¹è±¡ã€‚\n    - ä»£è¡¨ blob çš„å“ˆå¸Œå€¼ï¼›\n    - æŒ‡å‘ tree å¯¹è±¡çš„å“ˆå¸Œå€¼ã€‚\n- commitï¼šæŒ‡å‘ä¸€ä¸ª treeï¼Œå®ƒç”¨æ¥æ ‡è®°é¡¹ç›®æŸä¸ªç‰¹å®šæ—¶é—´ç‚¹çš„çŠ¶æ€ã€‚å®ƒåŒ…æ‹¬ä»¥ä¸‹å…³äºæ—¶é—´ç‚¹çš„å…ƒæ•°æ®ï¼Œå¦‚æ—¶é—´æˆ³ã€æœ€è¿‘ä¸€æ¬¡æäº¤çš„ä½œè€…ã€æŒ‡å‘ä¸Šæ¬¡æäº¤ã€‚\n    - ä»£è¡¨ commit çš„å“ˆå¸Œå€¼\n    - æŒ‡å‘ tree å¯¹è±¡çš„å“ˆå¸Œå€¼\n    - ä½œè€… / æäº¤è€…ä¿¡æ¯\n    - æ³¨é‡Š\n- tagï¼šç»™æŸä¸ªæäº¤å¢æ·»çš„æ ‡è®°ã€‚\n    - å¯å½“æˆä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘æŸä¸ª commit ï¼ˆå…¶å®å°±æ˜¯ Git ç‰ˆæœ¬åº“çš„ä¸€ä¸ªå¿«ç…§ï¼‰\n    - ç›®å‰çš„é¡¹ç›®å¼€å‘ä¸­ï¼Œå½“å‘å¸ƒç‰ˆæœ¬æ—¶ä¸€èˆ¬ä¼šä½¿ç”¨tagï¼ˆä¾‹å¦‚ v1.1ï¼Œv1.2ï¼Œâ€¦â€¦ï¼‰\n\nGit å¯¹è±¡ä¹‹é—´çš„ä¸ªå…³ç³»å¦‚ä¸‹å›¾ï¼š\n\n![object](Gitä¿¡æ¯æ³„éœ²/object.png)\n\n# Git å¯¹è±¡çš„å“ˆå¸Œå€¼å¯¹åº”å…³ç³»\n\næ¯ä¸ª Git å¯¹è±¡éƒ½æœ‰ä¸ªå“ˆå¸Œå€¼ä»£è¡¨è¿™ä¸ªå¯¹è±¡ï¼ˆå³ {hash : object}ï¼‰ã€‚è¿™ä¸ªå“ˆå¸Œå€¼æ˜¯é€šè¿‡ SHA-1 ç®—æ³•è®¡ç®—å‡ºæ¥çš„ï¼Œé•¿åº¦ä¸º40ä¸ªå­—ç¬¦ã€‚\n\n`git init`\n\næ­¤å‘½ä»¤åˆå§‹åŒ–ä¸€ä¸ªæ–°æœ¬åœ°ä»“åº“ï¼Œå®ƒåœ¨å·¥ä½œç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ªåä¸º .git çš„éšè—æ–‡ä»¶å¤¹ã€‚Gitä¼šå°†æ‰€æœ‰çš„æ–‡ä»¶ã€ç›®å½•ã€æäº¤ç­‰è½¬åŒ–ä¸º Git å¯¹è±¡ï¼Œå‹ç¼©å­˜å‚¨åœ¨è¿™ä¸ªæ–‡ä»¶å¤¹å½“ä¸­ã€‚\n\nåˆå§‹çš„ .git æ–‡ä»¶å¤¹å†…åªæœ‰ä¸ƒä¸ªæ–‡ä»¶ï¼ˆå¤¹ï¼‰ï¼Œåœ¨objectsç›®å½•ä¸‹åªæœ‰ä¸¤ä¸ªæ–‡ä»¶å¤¹ã€‚\n\n|||\n|---|---|\n|![git_init](Gitä¿¡æ¯æ³„éœ²/git_init.png)|![git_init_dir](Gitä¿¡æ¯æ³„éœ²/git_init_dir.png)|\n\n`git status`\n\næ­¤å‘½ä»¤å¯ä»¥æŸ¥çœ‹å½“å‰çŠ¶æ€ã€‚åˆ›å»ºä¸€ä¸ª test.txt æ–‡ä»¶å¹¶å†™å…¥å†…å®¹ï¼Œæ­¤æ—¶ test.txt æ–‡ä»¶ä½äº`å·¥ä½œç›®å½•`ï¼ŒçŠ¶æ€ä¸º `untracked`ã€‚\n\n![git_status](Gitä¿¡æ¯æ³„éœ²/git_status.png)\n\n`git add`\n\næ­¤å‘½ä»¤å°†æ–‡ä»¶æ”¾åˆ°æš‚å­˜åŒºï¼Œå¹¶å°†æ›´æ”¹å†™å…¥åˆ° .git/index æ–‡ä»¶ä¸­ã€‚é€šè¿‡git addè·Ÿè¸ªè¿™ä¸ªæ–‡ä»¶ï¼ŒæŠŠtest.txtæ–‡ä»¶æ”¾åˆ°`æš‚å­˜åŒº`ã€‚ï¼ˆå¯ä»¥ä½¿ç”¨`git rm --cached`å‘½ä»¤æ¥å–æ¶ˆæš‚å­˜ï¼‰\n\n![git_add](Gitä¿¡æ¯æ³„éœ²/git_add.png)\n\næ‰§è¡Œå®Œ git add åï¼Œ.git æ–‡ä»¶å¤¹ä¸‹ä¼šå¤šå‡ºä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶ indexï¼Œç”¨åå…­è¿›åˆ¶ç¼–è¾‘å™¨æ‰“å¼€å¯ä»¥æŸ¥çœ‹è¯¥æ–‡ä»¶çš„å†…å®¹ã€‚\n\n![binary_index](Gitä¿¡æ¯æ³„éœ²/binary_index.png)\n\nä¼¼ä¹å…¶ä¸­æœ‰åˆšåˆšæ–°åˆ›å»ºçš„æ–‡ä»¶ã€‚å› ä¸º Git å­˜å‚¨çš„éƒ½æ˜¯å¯¹è±¡ä¿¡æ¯ï¼Œè¿™ä»½æ–‡ä»¶åœ¨ Git ç³»ç»Ÿä¸­ä¹Ÿä¼šä»¥å¯¹è±¡çš„å½¢å¼å­˜å‚¨ï¼Œå¯ä»¥çœ‹åˆ°åœ¨ .git/objects æ–‡ä»¶å¤¹å†…ç¡®å®å¤šäº†ä¸€ä¸ªæ–‡ä»¶å¤¹ã€‚\n\n![git_objects_dir](Gitä¿¡æ¯æ³„éœ²/git_objects_dir.png)\n\nå†æ¬¡æŸ¥çœ‹ index æ–‡ä»¶ä¿¡æ¯ï¼Œæœç„¶å­˜å‚¨äº†è¯¥å¯¹è±¡çš„åœ°å€ä¿¡æ¯ï¼ˆä¹Ÿå°±æ˜¯æ ¡æ£€å’Œï¼‰ã€‚ï¼ˆè¯¥åœ°å€æ˜¯ç»è¿‡ SHA-1 ç®—æ³•åŠ å¯†åå¾—åˆ°çš„ï¼‰\n\n![addr_info](Gitä¿¡æ¯æ³„éœ²/addr_info.png)\n\n`git cat-file`\n\næ­¤å‘½ä»¤ä¼šè§£å¯†æ ¡éªŒå’Œã€‚å¦‚ä¸‹å°±æ˜¯è§£å¯†äº†åˆšåˆšæ–°å»ºçš„æ–‡ä»¶ã€‚\n\n![git_cat-file](Gitä¿¡æ¯æ³„éœ²/git_cat-file.png)\n\nå› ä¸ºåœ¨ Git ä¸­ï¼Œè¿™äº›å¯¹è±¡å­˜å‚¨æ–‡ä»¶éƒ½æ˜¯é€šè¿‡ zlib è¿›è¡Œå‹ç¼©çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬åŒæ ·å¯ä»¥ä½¿ç”¨ zlib å°†å…¶è§£å‹å‡ºæ¥ï¼Œæ¥çœ‹çœ‹è¿™ä¸ªæ–‡ä»¶é‡Œé¢å­˜å‚¨çš„å†…å®¹æ˜¯ä»€ä¹ˆã€‚\n\n```python\nimport zlib\nimport requests\n\nurl = 'http://192.168.192.160:8080/d/ctf_tools/tmp_files/git_leak/.git/objects/a0/423896973644771497bdc03eb99d5281615b51'\nre = requests.get(url)\nss = re.content\nword = zlib.decompress(ss)\nprint(word)\n```\n\nï¼ˆä¸çŸ¥ä¸ºä½•æ‰“ä¸å¼€ï¼Œæ¢ç”¨å¦‚ä¸‹æ–¹å¼ï¼Œé“ç†è¿˜æ˜¯ä¸€æ ·çš„ï¼‰\n\n```python\nimport zlib\n\nfile_name = '423896973644771497bdc03eb99d5281615b51'\nwith open(file_name, 'rb') as f:\n    word = zlib.decompress(f.read())\n    print(word)\n```\n\n![objects_dec](Gitä¿¡æ¯æ³„éœ²/objects_dec.png)\n\nå‘ç° objects å¯¹åº”æ–‡ä»¶æ ‡è®°äº†æ˜¯ blob å¯¹è±¡ï¼Œå­˜å‚¨çš„æ˜¯æ–°å»ºçš„ test.txt æ–‡ä»¶çš„å†…å®¹ã€‚\n\n`git commit`\n\nåœ¨æš‚å­˜åŒºçš„æ–‡ä»¶ä½¿ç”¨git commitæäº¤åˆ°ç‰ˆæœ¬åº“ï¼ˆ`æ•°æ®ç›®å½•`ï¼‰ä¸­ã€‚-m å‚æ•°è¡¨ç¤ºæäº¤çš„æ³¨é‡Šï¼Œå¦‚æœä¸ä½¿ç”¨ -m å‚æ•°é‚£ä¹ˆä¼šè·³å‡ºé¡µé¢æç¤ºä¸»åŠ¨è¾“å…¥æ³¨é‡Šã€‚commit å®Œæˆåï¼Œworking tree å°±ä¼šæ¸…ç©ºã€‚\n\n|||\n|---|---|\n|![git_commit](Gitä¿¡æ¯æ³„éœ²/git_commit.png)|![git_commit_working_tree](Gitä¿¡æ¯æ³„éœ²/git_commit_working_tree.png)|\n\nä¿®æ”¹ test.txt æ–‡ä»¶ï¼Œå¹¶ç”¨ git status æŸ¥çœ‹æ–‡ä»¶çŠ¶æ€ï¼Œå¾—çŸ¥æ–‡ä»¶å·²è¢«ä¿®æ”¹ï¼Œä½†æ˜¯æœªæäº¤ä¿®æ”¹åˆ°ç‰ˆæœ¬åº“ä¸­ã€‚\n\n![modify_no_commit](Gitä¿¡æ¯æ³„éœ²/modify_no_commit.png)\n\n`git diff`\n\nå¯¹æ¯”å·¥ä½œåŒºå’Œæš‚å­˜åŒºæ–‡ä»¶çš„å·®å¼‚ï¼ŒæŸ¥çœ‹æ–‡ä»¶è¢«ä¿®æ”¹çš„åœ°æ–¹\n\n![git_diff](Gitä¿¡æ¯æ³„éœ²/git_diff.png)\n\nç¡®è®¤ä¿®æ”¹æ— è¯¯åå°†ä¿®æ”¹æäº¤åˆ°ç‰ˆæœ¬åº“çš„æ–¹æ³•å’Œæäº¤åˆå§‹æ–‡ä»¶ä¸€æ ·ï¼Œéœ€è¦å…ˆæäº¤åˆ°æš‚å­˜åŒºï¼Œç„¶åæäº¤åˆ°ç‰ˆæœ¬åº“ã€‚\n\n![submit](Gitä¿¡æ¯æ³„éœ²/submit.png)\n\n`git log`\n\nÂ æ­¤å‘½ä»¤èƒ½æŸ¥çœ‹ commit çš„å†å²è®°å½•ã€‚(HEAD -> master) ä¸ .git/HEAD æ–‡ä»¶çš„å†…å®¹çš„æ„ä¹‰ä¸€æ ·ï¼Œæ˜¯æŒ‡åˆ°æœ€åæäº¤çš„ç‰ˆæœ¬çš„æŒ‡é’ˆã€‚\n\n![git_log](Gitä¿¡æ¯æ³„éœ²/git_log.png)\n\n`git reset --hard`\n\næ­¤å‘½ä»¤èƒ½å›é€€ç‰ˆæœ¬ã€‚ç‰¹åˆ«åœ°ï¼Œè‹¥æƒ³å›é€€åˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬ï¼Œå¯ä»¥ç”¨`git reset --hard HEAD^`ï¼Œè‹¥è¦å›é€€åˆ°ä¸Šä¸Šä¸ªç‰ˆæœ¬åªéœ€æŠŠ **HEAD\\^Â æ”¹æˆÂ HEAD\\^\\^**ï¼Œä»¥æ­¤ç±»æ¨ã€‚è‹¥è¦å›é€€åˆ°å‰100ä¸ªç‰ˆæœ¬çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨è¿™ä¸ªç®€ä¾¿å‘½ä»¤æ“ä½œï¼š`git reset --hard HEAD~100`\n\n![git_reset](Gitä¿¡æ¯æ³„éœ²/git_reset.png)\n\nå¯ä»¥çœ‹åˆ° HEAD æŒ‡é’ˆä¹ŸæŒ‡åˆ°äº†æäº¤çš„ç‰ˆæœ¬ï¼Œä¿®æ”¹çš„ç‰ˆæœ¬çœ‹ä¸åˆ°äº†ã€‚\n\nä½†æ˜¯è¦æ˜¯å› ä¸ºæ“ä½œå¤±è¯¯ï¼Œæ€ä¹ˆè¿½å›ç¬¬äºŒæ¬¡ä¿®æ”¹çš„ç‰ˆæœ¬å‘¢ï¼Ÿå¯ä»¥ä½¿ç”¨ `git reset --hard ç‰ˆæœ¬å·` è¿½å›ã€‚\n\n`git reflog`\n\nè·å–ç‰ˆæœ¬å·ã€‚è·å¾—ä¿®æ”¹çš„ç‰ˆæœ¬å·ä¸º `93bf5b9`ã€‚`git reset --hard 93bf5b9` æ¢å¤\n\n![git_reflog](Gitä¿¡æ¯æ³„éœ²/git_reflog.png)\n\nå½“ç„¶ï¼Œç”¨ git log æŸ¥è¯¢æ—¶ commit åé¢çš„ SHA-1 å­—ç¬¦ä¸²ä¹Ÿå¯ä»¥å½“ä½œç‰ˆæœ¬å·æ¥å›é€€ã€‚\n\n![rollback](Gitä¿¡æ¯æ³„éœ²/rollback.png)\n\nåœ¨å·¥ä½œåŒºä¿®æ”¹çš„æ–‡ä»¶ git add æäº¤åˆ°æš‚å­˜åŒºåï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ `git checkout -- test.txt` æŠŠå·¥ä½œåŒºçš„ä¿®æ”¹æ’¤é”€ã€‚è¿™æ ·ï¼Œæ–‡ä»¶å°±ä¼šå›é€€åˆ°ä¸Šä¸€æ¬¡æäº¤æ—¶çš„çŠ¶æ€ã€‚\n\n## Git ä¿¡æ¯æ³„éœ²æ¼æ´\n\nç”±ä¸Šé¢ä¸€äº›ç®€å•çš„è¿‡ç¨‹ï¼Œå¯ä»¥å¾ˆå½¢è±¡åœ°äº†è§£åˆ° Git åœ¨è§£æå­˜å‚¨ç‰ˆæœ¬ä¿¡æ¯çš„æ—¶å€™ï¼Œåˆ©ç”¨çš„æ˜¯å†…å­˜åœ°å€å¯»å€çš„æ–¹å¼åˆ†å¸ƒå¼å­˜å‚¨ç‰ˆæœ¬ä¿¡æ¯çš„ã€‚\n\nå¦‚æœé…ç½®ä¸å½“ï¼Œå¯èƒ½ä¼šå°† .git æ–‡ä»¶å¤¹æ³„éœ²ï¼Œè¿™å°±å¼•èµ·äº† Git æ³„éœ²æ¼æ´ã€‚æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ zlib è§£å‹ç­‰æ–¹å¼è·å–åˆ°ç½‘ç«™çš„ç›¸å…³ç‰ˆæœ¬ä¿¡æ¯ç­‰ç­‰ï¼Œè¿›è€Œè¿›è¡Œä»£ç å®¡è®¡ç­‰æ“ä½œï¼Œåˆ†æåº”ç”¨çš„æ¼æ´ä»¥åŠç¤¾å·¥ç­‰ç­‰ã€‚ä¹Ÿå°±æ˜¯è¯´ Git ä¿¡æ¯æ³„éœ²æ¼æ´çš„å…¥æ‰‹ç‚¹å°±æ˜¯ .git æ–‡ä»¶å¤¹ã€‚\n\n## Git ä¿¡æ¯æ³„éœ²åˆ©ç”¨æ€»ç»“\n\né¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦å¯¹åº”çš„æˆæƒç«™ç‚¹æ˜¯å¦å­˜åœ¨è¿™ä¸ªæ¼æ´ï¼š\n\n- å¯ä»¥å…ˆè§‚å¯Ÿä¸€ä¸‹ç«™ç‚¹æ˜¯å¦æœ‰é†’ç›®åœ°æŒ‡å‡º Gitï¼Œå¦‚æœæœ‰çš„è¯ï¼Œé‚£å°±è¯´æ˜ç«™ç‚¹å¾ˆå¤§å¯èƒ½å­˜åœ¨è¿™ä¸ªé—®é¢˜ã€‚\n- å¦‚æœç«™ç‚¹æ²¡æœ‰é†’ç›®çš„æç¤ºçš„è¯ï¼Œå¯ä»¥åˆ©ç”¨ dirsearch è¿™ç±»æ‰«æå·¥å…·ï¼Œå¦‚æœå­˜åœ¨ ./git æ³„éœ²çš„é—®é¢˜çš„è¯ï¼Œä¼šè¢«æ‰«æå‡ºæ¥ã€‚\n- æœ€ç›´è§‚çš„æ–¹å¼ï¼Œå°±æ˜¯ç›´æ¥é€šè¿‡ç½‘é¡µè®¿é—® .git ç›®å½•ï¼Œå¦‚æœèƒ½è®¿é—®å°±è¯´æ˜å­˜åœ¨ã€‚\n\nå½“ç¡®è®¤å­˜åœ¨è¿™ä¸ªæ¼æ´ä¹‹åï¼Œå°±å¯ä»¥é€šè¿‡å·¥å…·æ¥ä¸‹è½½ Git æ³„éœ²çš„å…¨éƒ¨æºç ï¼ˆå·¥å…·ä¾‹å¦‚ï¼šGitHackç­‰ç­‰ï¼‰\n\n## Git ä¿¡æ¯æ³„éœ²å‘ç°\n\n- é€šè¿‡æ³„éœ²çš„ `.git` æ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶ï¼Œè¿˜åŸé‡å»ºå·¥ç¨‹æºä»£ç ã€‚\n- è§£æ `.git/index` æ–‡ä»¶ï¼Œæ‰¾åˆ°å·¥ç¨‹ä¸­æ‰€æœ‰çš„ï¼ˆæ–‡ä»¶åï¼Œæ–‡ä»¶ SHA-1ï¼‰ã€‚\n- å» `.git/objects` æ–‡ä»¶å¤¹ä¸‹ä¸‹è½½å¯¹åº”çš„æ–‡ä»¶ã€‚\n- `zlib` è§£å‹æ–‡ä»¶ï¼ŒæŒ‰åŸå§‹çš„ç›®å½•ç»“æ„å†™å…¥æºä»£ç ã€‚\n\n## ä¾‹é¢˜\n\nå¯ä»¥çœ‹æœ€è¿‘ 2022 DiceCTF @ HOPE æ¯”èµ›çš„ä¸€é“ Misc é¢˜ orphanã€‚\n\nä¸‹è½½é™„ä»¶è§£å‹åæ˜¯ä¸€ä¸ªå« orphan çš„æ–‡ä»¶å¤¹ï¼Œé‡Œé¢åªæœ‰ .git æ–‡ä»¶å¤¹å’Œ foo.txtï¼Œå¾ˆæ˜¾ç„¶è€ƒçš„æ˜¯ Git ä¿¡æ¯æ³„éœ²ã€‚\n\n![orphan_src](Gitä¿¡æ¯æ³„éœ²/orphan_src.png)\n\nåœ¨æ­¤æ–‡ä»¶å¤¹ä¸‹å¼€å¯ Git Bashï¼Œå¯ä»¥é€šè¿‡ `git reflog` çœ‹åˆ°è¿‡å»çš„ä¿®æ”¹ï¼Œæ˜¾ç„¶ç‰ˆæœ¬å· `b53c9e6` å¯¹åº”ç€ flagã€‚ç”¨ `git reset --hard b53c9e6` å›é€€ï¼Œå¯ä»¥çœ‹åˆ° foo.txt å˜æˆäº† flag.txtã€‚æ‰“å¼€å³å¾— `flagï¼šhope{ba9f11ecc3497d9993b933fdc2bd61e5}`\n\n![orphan_git_reflog](Gitä¿¡æ¯æ³„éœ²/orphan_git_reflog.png)\n\n![flag](Gitä¿¡æ¯æ³„éœ²/flag.png)\n\n# å‚è€ƒèµ„æ–™\n\n- [Gitä¸­æ–‡ä»¶çš„4ç§çŠ¶æ€Untrackedã€Unmodifyã€Modifiedã€Staged](http://t.zoukankan.com/thirteen-yang-p-13878118.html)\n- [Gitç”±æµ…å…¥æ·±ä¹‹å­˜å‚¨åŸç†](https://zhuanlan.zhihu.com/p/25989135)\n- [gitä¿¡æ¯æ³„éœ²æ¼æ´](https://blog.csdn.net/xy_sunny/article/details/107620695)\n- [Gitä¿¡æ¯æ³„éœ²åŸç†è§£æåŠåˆ©ç”¨æ€»ç»“](https://blog.csdn.net/wulanlin/article/details/122409259)\n- [Gitä½¿ç”¨æ•™ç¨‹--æœ€è¯¦ç»†ã€æœ€å‚»ç“œã€æœ€æµ…æ˜¾ã€çœŸæ­£æ‰‹æŠŠæ‰‹æ•™ï¼(ä¸€)](https://www.jianshu.com/p/93738d041381)\n- [Gitä½¿ç”¨æ•™ç¨‹--æœ€è¯¦ç»†ã€æœ€å‚»ç“œã€æœ€æµ…æ˜¾ã€çœŸæ­£æ‰‹æŠŠæ‰‹æ•™ï¼(äºŒ)](https://www.jianshu.com/p/f5e4b058a7b0)\n\n","tags":["é€†å‘","Git"],"categories":["computer"]},{"title":"httpè¯·æ±‚èµ°ç§","url":"/archives/63051/","content":"\nåœ¨å¤æ‚çš„ç½‘ç»œç¯å¢ƒä¸‹ï¼Œä¸åŒçš„æœåŠ¡å™¨å¯¹RFC( Request For Comments )æ ‡å‡†å®ç°çš„æ–¹å¼ä¸åŒï¼Œç¨‹åº¦ä¸åŒã€‚è¿™æ ·ä¸€æ¥ï¼Œå¯¹åŒä¸€ä¸ªHTTPè¯·æ±‚ï¼Œä¸åŒçš„æœåŠ¡å™¨å¯èƒ½ä¼šäº§ç”Ÿä¸åŒçš„å¤„ç†ç»“æœï¼Œè¿™æ ·å°±ä¼šäº§ç”Ÿå®‰å…¨é£é™©ã€‚\n\n<!-- more -->\n\n## æ¦‚è¿°\n\nHTTPæœ‰ç€æ— è¿æ¥è¿™ä¸ªé‡è¦çš„ç‰¹æ€§ï¼Œå®ƒæ˜¯åº”ç”¨å±‚çš„åè®®ï¼Œåœ¨ä¼ è¾“å±‚ä½¿ç”¨çš„æ˜¯TCPåè®®ã€‚\n\næ— è¿æ¥æ˜¯æŒ‡æ¯æ¬¡å‘é€HTTP è¯·æ±‚ï¼Œéƒ½éœ€è¦å»ºç«‹ä¸€æ¬¡TCPé“¾æ¥ï¼Œä½†è¿™ä¼šé€ æˆç½‘ç»œçš„åˆ©ç”¨ç‡æ¯”è¾ƒä½ã€‚\n\n> ç°ä»£çš„Webç½‘ç»œé¡µé¢æ˜¯ç”±å¤šç§èµ„æºç»„æˆçš„ï¼Œåœ¨æµè§ˆä¸€ä¸ªç½‘é¡µå†…å®¹æ—¶ï¼Œä¸ä»…è¦è¯·æ±‚HTMLæ–‡æ¡£ï¼Œè¿˜æœ‰JSã€CSSã€å›¾ç‰‡ç­‰å„ç§å„æ ·çš„èµ„æºã€‚\n>\n> å¦‚æœæ¯æ¬¡è¯·æ±‚éƒ½éœ€è¦å»ºç«‹ä¸€ä¸ªTCPé“¾æ¥ï¼Œå½“æœ‰å¤§é‡ç”¨æˆ·åŒæ—¶å‘èµ·è¯·æ±‚çš„æ—¶å€™ï¼Œä¾¿ä¼šç»™æœåŠ¡å™¨é€ æˆå¾ˆå¤šä¸å¿…è¦çš„æ¶ˆè€—ã€‚\n\näºæ˜¯ï¼Œä»HTTP 1.1ç‰ˆæœ¬å¼€å§‹ï¼Œå¢åŠ äº†Keep-Aliveå’ŒPipelineä¸¤ä¸ªç‰¹æ€§ã€‚\n\n### Keep-Alive\n\nåœ¨ HTTP åè®®ä¸­åŠ äº† **Connection: keep-alive** è¿™ä¸ªè¯·æ±‚å¤´ï¼Œå‘Šè¯‰ Server æ¥å—å®Œè¿™æ¬¡HTTPè¯·æ±‚åï¼Œä¸è¦å…³é—­TCPé“¾æ¥ï¼Œåç»­ä¼šå¤ç”¨è¿™ä¸ªé“¾æ¥ã€‚è¿™æ ·åªéœ€è¦ä¸€ä¸ªTCPæ¡æ‰‹çš„è¿‡ç¨‹ï¼Œå°±å¯ä»¥å‘é€å¤šä¸ªæ–‡ä»¶ï¼ŒèŠ‚çº¦èµ„æºï¼Œè¿˜èƒ½åŠ å¿«è®¿é—®çš„é€Ÿåº¦ã€‚å½“æœ‰è¯·æ±‚å¸¦ç€ **Connection: close** è¿™ä¸ªè¯·æ±‚å¤´åï¼Œåœ¨è¿™æ¬¡é€šä¿¡å®Œæˆä¹‹åï¼ŒæœåŠ¡å™¨æ‰ä¼šæ–­å¼€TCPé“¾æ¥ã€‚\n\nå¦‚æ­¤è§£å†³äº†é¢å¤–æ¶ˆè€—çš„é—®é¢˜ï¼Œä½†æ˜¯æœåŠ¡å™¨å¤„ç†è¯·æ±‚çš„æ–¹å¼ä¾ç„¶æ˜¯è¯·æ±‚ä¸€æ¬¡å“åº”ä¸€æ¬¡ï¼Œç„¶åå†å¤„ç†ä¸‹ä¸€ä¸ªè¯·æ±‚ã€‚è¿™ä¸­é—´è¿˜æœ‰ç€å¾ˆå¤§çš„æ—¶å»¶æ¶ˆè€—ã€‚ä¸ºæ­¤æå‡ºäº†Pipeliningè§£å†³è¿™ä¸ªé—®é¢˜ã€‚\n\n### Pipelining\n\nPipelining è¿™ä¸ªç‰¹æ€§å…è®¸å®¢æˆ·ç«¯åœ¨ç­‰å¾…ä¸Šä¸€ä¸ªæŠ¥æ–‡å›å¤çš„åŒæ—¶ï¼Œå‘é€ä¸‹ä¸€ä¸ªæŠ¥æ–‡ã€‚è¿™è®©å®¢æˆ·ç«¯å¯ä»¥ä¸€æ¬¡å‘é€å¤šä¸ªè¯·æ±‚ï¼ŒæœåŠ¡å™¨ä¹Ÿå¯ä»¥ä¸€æ¬¡æ¥å—å¤šä¸ªè¯·æ±‚ï¼Œéµå¾ªå…ˆè¿›å…ˆå‡ºçš„åŸåˆ™å¤„ç†è¿™äº›è¯·æ±‚ï¼Œå†å°†å“åº”å‘é€ç»™å®¢æˆ·ç«¯ã€‚\n\n ç°åœ¨ï¼Œæµè§ˆå™¨é»˜è®¤ä¸å¯ç”¨`Pipeline`çš„ï¼Œä½†æ˜¯ä¸€èˆ¬çš„æœåŠ¡å™¨éƒ½æä¾›äº†å¯¹`Pipleline`çš„æ”¯æŒã€‚ \n\n![http pipeline](httpè¯·æ±‚èµ°ç§/http_pipeline.png) \n\nä»¥ä¸Šçš„ä¸¤ç§ç‰¹æ€§èŠ‚çº¦äº†ç½‘ç»œèµ„æºï¼Œæé«˜äº†è¿™äº›èµ„æºçš„åˆ©ç”¨æ•ˆç‡ã€‚ä½†æ˜¯ï¼Œè¿™ä¹Ÿæœ‰æ–°çš„é—®é¢˜ï¼Œé‚£å°±æ˜¯æœåŠ¡å™¨è¦å¦‚ä½•åŒºåˆ†ä¸åŒçš„è¯·æ±‚æŠ¥æ–‡ã€‚\n\nå…³äºå¦‚ä½•ç•Œå®šæ•°æ®åŒ…çš„è¾¹ç•Œï¼ŒHTTPè¯·æ±‚å¤´ä¸­æœ‰ä¸¤ä¸ªæ–‡æ®µï¼ŒContent-Length å’Œ Transfer-Encodingã€‚\n\n#### Content-Length\n\nç®€ç§° CLï¼Œæ˜¯æŒ‡è¯·æ±‚ä½“æˆ–è€…å“åº”ä½“çš„é•¿åº¦ï¼Œç”¨**åè¿›åˆ¶**æ¥è¡¨ç¤ºã€‚\n\n> POST / HTTP/1.1\n> Host: test.com\n> Content-Length: 44\n>\n> abcdowjncowmco kqmcoqkmcimpmqi \n\nå¦‚æœ Content-Length çš„å€¼æ¯”å®é™…é•¿åº¦å°ï¼Œä¼šé€ æˆå†…å®¹è¢«æˆªæ–­ï¼›å¦‚æœæ¯”å®é™…é•¿åº¦å¤§ï¼ŒæœåŠ¡å™¨ä¼šä¸€ç›´ç­‰å¾…åé¢çš„å†…å®¹ï¼Œç›´åˆ°è¶…æ—¶ã€‚\n\n#### Transfer-Encoding\n\nç®€ç§° TEï¼Œæœ‰å¤šä¸ªå¸¸è§çš„å€¼ï¼š\n\n> Transfer-Encoding: chunked\n>\n> Transfer-Encoding: compress\n>\n> Transfer-Encoding: deflate\n>\n> Transfer-Encoding: gzip\n>\n> Transfer-Encoding: identity\n\nHTTPè¯·æ±‚èµ°ç§ä¸­ä¸€èˆ¬é‡‡ç”¨ chunkedï¼Œå³å°†æ¶ˆæ¯æ­£æ–‡ä½¿ç”¨åˆ†å—ç¼–ç ã€‚è¿™æ—¶ï¼ŒæŠ¥æ–‡ä¸­çš„å®ä½“éœ€è¦æ”¹ä¸ºç”¨ä¸€ç³»åˆ—åˆ†å—æ¥ä¼ è¾“ã€‚æ¯ä¸ªåˆ†å—åŒ…å«**åå…­è¿›åˆ¶**çš„é•¿åº¦å€¼å’Œæ•°æ®ï¼Œé•¿åº¦å€¼å ä¸€è¡Œï¼Œé•¿åº¦ä¸åŒ…æ‹¬ç»“å°¾çš„æ¢è¡Œç¬¦ï¼Œä¹Ÿä¸åŒ…æ‹¬åˆ†å—æ•°æ®ç»“å°¾çš„æ¢è¡Œç¬¦ï¼Œä½†æ˜¯åŒ…æ‹¬åˆ†å—ä¸­çš„æ¢è¡Œï¼Œç®—2ä¸ªå€¼ï¼ˆ\\r\\nï¼‰ã€‚\n\næœ€åä¸€ä¸ªåˆ†å—é•¿åº¦å€¼å¿…é¡»ä¸º0ï¼Œå¯¹åº”çš„åˆ†å—æ•°æ®æ²¡æœ‰å†…å®¹ï¼Œè¡¨ç¤ºå®ä½“ç»“æŸã€‚\n\n```http\nPost /langdetect HTTP/ 1.1\nHost: fanyi.baidu.com\nUser-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:77.0) Gecko/20100101 Firefox/77.0\nContent-Type: application/x-www-form-urlencoded\nTransfer-Encoding: chunked\n\n2\nab\n3\nery\n1\n=\n2\nja\n2\nck\n0\n\n```\n\nè¿™æ˜¯ä¸¤ç§è¡¨ç¤ºæŠ¥æ–‡é•¿åº¦çš„æ–¹å¼ï¼Œè€Œåœ¨ä¸€ä¸ªæŠ¥æ–‡æ®µä¸­ï¼Œå…è®¸ä¸¤ç§æ–¹å¼åŒæ—¶å‡ºç°ã€‚ä¸”ä¼˜å…ˆä»¥**Transfer-Encoding**ä¸ºå‡†ã€‚\n\n> æ ¹æ®RFCæ ‡å‡†ï¼Œå¦‚æœæ¥æ”¶åˆ°çš„æ¶ˆæ¯åŒæ—¶å…·æœ‰ **Content-Length** å’Œ **Transfer-Encoding** ä¸¤ä¸ªå­—æ®µï¼Œåˆ™å¿…é¡»å¿½ç•¥ **Content-Length** å­—æ®µï¼Œä½†æ˜¯å­˜åœ¨ä¸éµå¾ªæ ‡å‡†çš„ä¾‹å¤–ã€‚\n>\n> æ ¹æ®æ ‡å‡†ï¼Œå½“æ¥å—åˆ° **Transfer-Encoding**ï¼š chunked,error è¿™æ ·æœ‰å¤šä¸ªå€¼æˆ–è€…ä¸è¯†åˆ«çš„å€¼çš„æ—¶å€™ï¼Œåº”è¯¥è¿”å›400é”™è¯¯ã€‚ä½†å­˜åœ¨ä¸€äº›æ–¹æ³•å¯ä»¥ç»•è¿‡ã€‚\n\n## æ¼æ´åŸç†\n\nHTTP è§„èŒƒæä¾›äº†ä¸¤ç§ä¸åŒçš„æ–¹å¼æ¥æŒ‡å®šè¯·æ±‚ç»“æŸçš„ä½ç½®ï¼Œå½“å‰/åç«¯å¯¹äºæ•°æ®åŒ…è¾¹ç•Œçš„æ ¡éªŒä¸ä¸€è‡´æ—¶ï¼Œä¼šå¹²æ‰°æ­£å¸¸çš„è¯·æ±‚åºåˆ—ï¼Œ ä½¿å¾—æ”»å‡»è€…ç»•è¿‡å®‰å…¨æ§åˆ¶ï¼Œæœªç»æˆæƒè®¿é—®æ•æ„Ÿæ•°æ®ï¼Œå¹¶ç›´æ¥å±å®³å…¶ä»–åº”ç”¨ç¨‹åºç”¨æˆ·ã€‚ \n\n![ä»ä¸€é“CTFé¢˜åˆ°HTTPè¯·æ±‚èµ°ç§æ”»å‡»](httpè¯·æ±‚èµ°ç§/http.jpg) \n\nåŒæ—¶ä½¿ç”¨ä¸¤ç§ä¸åŒçš„æ–¹æ³•æ—¶ï¼Œ`Content-Length`æ— æ•ˆã€‚å½“ä½¿ç”¨å¤šä¸ªæœåŠ¡å™¨æ—¶ï¼Œå¯¹å®¢æˆ·ç«¯ä¼ å…¥çš„æ•°æ®ç†è§£ä¸ä¸€è‡´æ—¶ï¼Œå°±ä¼šå‡ºç°æœ‰äº›æœåŠ¡å™¨è®¤ä¸º`Content-Length`çš„é•¿åº¦æœ‰æ•ˆï¼Œæœ‰äº›ä»¥`Transfer-Encoding`æœ‰æ•ˆã€‚è€Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œåå‘ä»£ç†æœåŠ¡å™¨ä¸åç«¯çš„æºç«™æœåŠ¡å™¨ä¹‹é—´ï¼Œä¼šé‡ç”¨TCPé“¾æ¥ã€‚è¿™æ ·è¶…å‡ºçš„é•¿åº¦å°±ä¼šæ‹¼æ¥åˆ°ä¸‹ä¸€æ¬¡è¯·æ±‚è¿›è¡Œè¯·æ±‚ï¼Œä»è€Œå¯¼è‡´HTTPè¯·æ±‚èµ°ç§æ¼æ´ ã€‚\n\n**RFC2616è§„èŒƒ**\n\n> å¦‚æœæ¥æ”¶çš„æ¶ˆæ¯åŒæ—¶åŒ…å«ä¼ è¾“ç¼–ç å¤´å­—æ®µ(Transfer-Encoding)å’Œå†…å®¹é•¿åº¦å¤´(Content-Length)å­—æ®µï¼Œåˆ™å¿…é¡»å¿½ç•¥åè€…ã€‚\n\nç”±äºè§„èŒƒé»˜è®¸å¯ä»¥ä½¿ç”¨`Transfer-Encoding`å’Œ`Content-Length`å¤„ç†è¯·æ±‚ï¼Œå› æ­¤å¾ˆå°‘æœ‰æœåŠ¡å™¨æ‹’ç»æ­¤ç±»è¯·æ±‚ã€‚æ¯å½“æˆ‘ä»¬æ‰¾åˆ°ä¸€ç§æ–¹æ³•ï¼Œå°†`Transfer-Encoding`éšè—åœ¨æœåŠ¡ç«¯çš„ä¸€ä¸ª`chain`ä¸­æ—¶ï¼Œå®ƒå°†ä¼šå›é€€åˆ°ä½¿ç”¨`Content-Length`å»å‘é€è¯·æ±‚ã€‚\n\n**èµ°ç§æ”»å‡»å®ç°**\nå½“å‘ä»£ç†æœåŠ¡å™¨å‘é€ä¸€ä¸ªæ¯”è¾ƒæ¨¡ç³Šçš„HTTPè¯·æ±‚æ—¶ï¼Œç”±äºä¸¤è€…æœåŠ¡å™¨çš„å®ç°æ–¹å¼ä¸åŒï¼Œä»£ç†æœåŠ¡å™¨å¯èƒ½è®¤ä¸ºè¿™æ˜¯ä¸€ä¸ªHTTPè¯·æ±‚ï¼Œç„¶åå°†å…¶è½¬å‘ç»™äº†åç«¯çš„æºç«™æœåŠ¡å™¨ï¼Œä½†æºç«™æœåŠ¡å™¨ç»è¿‡è§£æå¤„ç†åï¼Œåªè®¤ä¸ºå…¶ä¸­çš„ä¸€éƒ¨åˆ†ä¸ºæ­£å¸¸è¯·æ±‚ï¼Œå‰©ä¸‹çš„é‚£ä¸€éƒ¨åˆ†ï¼Œå°±ç®—æ˜¯èµ°ç§çš„è¯·æ±‚ï¼Œå½“è¯¥éƒ¨åˆ†å¯¹æ­£å¸¸ç”¨æˆ·çš„è¯·æ±‚é€ æˆäº†å½±å“ä¹‹åï¼Œå°±å®ç°äº†HTTPèµ°ç§æ”»å‡»ã€‚\n\n### å¦‚ä½•æ‰§è¡ŒHTTPè¯·æ±‚èµ°ç§æ”»å‡»\n\nHTTPè¯·æ±‚èµ°ç§æ”»å‡»æ¶‰åŠå°†`Content-Length`æ ‡å¤´å’Œ`Transfer-Encoding`æ ‡å¤´éƒ½æ”¾ç½®åœ¨å•ä¸ªHTTPè¯·æ±‚ä¸­å¹¶è¿›è¡Œå¤„ç†ï¼Œä»¥ä¾¿å‰ç«¯æœåŠ¡å™¨å’Œåç«¯æœåŠ¡å™¨ä»¥ä¸åŒçš„æ–¹å¼å¤„ç†è¯·æ±‚ã€‚å®Œæˆæ­¤æ“ä½œçš„ç¡®åˆ‡æ–¹å¼å–å†³äºä¸¤ä¸ªæœåŠ¡å™¨çš„è¡Œä¸ºï¼š\n\n> CL.TEï¼šå‰ç«¯æœåŠ¡å™¨ä½¿ç”¨Content-Lengthæ ‡å¤´ï¼Œè€Œåç«¯æœåŠ¡å™¨ä½¿ç”¨Transfer-Encodingæ ‡å¤´ã€‚\n> TE.CLï¼šå‰ç«¯æœåŠ¡å™¨ä½¿ç”¨Transfer-Encodingæ ‡å¤´ï¼Œè€Œåç«¯æœåŠ¡å™¨ä½¿ç”¨Content-Lengthæ ‡å¤´ã€‚\n> TE.TEï¼šå‰ç«¯æœåŠ¡å™¨å’Œåç«¯æœåŠ¡å™¨éƒ½æ”¯æŒTransfer-Encodingæ ‡å¤´ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡å¯¹æ ‡å¤´è¿›è¡ŒæŸç§æ–¹å¼çš„æ··æ·†æ¥è¯±å¯¼å…¶ä¸­ä¸€å°æœåŠ¡å™¨ä¸å¯¹å…¶è¿›è¡Œå¤„ç†ã€‚\n\n### HTTPè¯·æ±‚èµ°ç§æ”»å‡»çš„äº”ç§æ–¹å¼\n\n#### CLä¸ä¸º0\n\næ‰€æœ‰ä¸æºå¸¦è¯·æ±‚ä½“çš„HTTPè¯·æ±‚éƒ½æœ‰å¯èƒ½å—æ­¤å½±å“ã€‚è¿™é‡Œç”¨GETè¯·æ±‚ä¸¾ä¾‹ã€‚\nå‰ç«¯ä»£ç†æœåŠ¡å™¨å…è®¸GETè¯·æ±‚æºå¸¦è¯·æ±‚ä½“ï¼›åç«¯æœåŠ¡å™¨ä¸å…è®¸GETè¯·æ±‚æºå¸¦è¯·æ±‚ä½“ï¼Œå®ƒä¼šç›´æ¥å¿½ç•¥æ‰GETè¯·æ±‚ä¸­çš„`Content-Length`å¤´ï¼Œä¸è¿›è¡Œå¤„ç†ã€‚è¿™å°±æœ‰å¯èƒ½å¯¼è‡´è¯·æ±‚èµ°ç§ã€‚\n\n**æ„é€ è¯·æ±‚ç¤ºä¾‹**ï¼š\n\n```\nGET / HTTP/1.1\\r\\n\nHost: test.com\\r\\n\nContent-Length: 44\\r\\n\n\nGET /secret HTTP/1.1\\r\\n\nHost: test.com\\r\\n\n\\r\\n\n```\n\n> ```\n> \\r\\n`æ˜¯æ¢è¡Œçš„æ„æ€ï¼Œwindowsçš„æ¢è¡Œæ˜¯`\\r\\n`ï¼Œunixçš„æ˜¯`\\n`ï¼Œmacçš„æ˜¯`\\r\n> ```\n\n**æ”»å‡»æµç¨‹**ï¼š\nå‰ç«¯æœåŠ¡å™¨æ”¶åˆ°è¯¥è¯·æ±‚ï¼Œè¯»å–`Content-Length`ï¼Œåˆ¤æ–­è¿™æ˜¯ä¸€ä¸ªå®Œæ•´çš„è¯·æ±‚ã€‚\nç„¶åè½¬å‘ç»™åç«¯æœåŠ¡å™¨ï¼Œåç«¯æœåŠ¡å™¨æ”¶åˆ°åï¼Œå› ä¸ºå®ƒè®¤ä¸ºè¿™æ˜¯ä¸€ä¸ª Get è¯·æ±‚ï¼Œå› æ­¤å®ƒä¸å¯¹`Content-Length`è¿›è¡Œå¤„ç†ï¼Œç”±äº`Pipeline`æ€§è´¨çš„å­˜åœ¨ï¼Œåç«¯æœåŠ¡å™¨å°±è®¤ä¸ºè¿™æ˜¯æ”¶åˆ°äº†ä¸¤ä¸ªè¯·æ±‚ï¼Œåˆ†åˆ«æ˜¯ï¼š\n\nç¬¬ä¸€ä¸ªï¼š\n\n```\nGET / HTTP/1.1\\r\\n\nHost: test.com\\r\\n\n```\n\nç¬¬äºŒä¸ªï¼š\n\n```\nGET /secret HTTP/1.1\\r\\n\nHost: test.com\\r\\n\n```\n\næ‰€ä»¥é€ æˆäº†è¯·æ±‚èµ°ç§ã€‚\n\n#### CL-CL\n\n**RFC7230è§„èŒƒ**\n\n> åœ¨RFC7230çš„ç¬¬3.3.3èŠ‚ä¸­çš„ç¬¬å››æ¡ä¸­ï¼Œè§„å®šå½“æœåŠ¡å™¨æ”¶åˆ°çš„è¯·æ±‚ä¸­åŒ…å«ä¸¤ä¸ª`Content-Length`ï¼Œè€Œä¸”ä¸¤è€…çš„å€¼ä¸åŒæ—¶ï¼Œéœ€è¦è¿”å›400é”™è¯¯ã€‚\n\næœ‰äº›æœåŠ¡å™¨ä¸ä¼šä¸¥æ ¼çš„å®ç°è¯¥è§„èŒƒï¼Œå‡è®¾ä¸­é—´çš„ä»£ç†æœåŠ¡å™¨å’Œåç«¯çš„æºç«™æœåŠ¡å™¨åœ¨æ”¶åˆ°ç±»ä¼¼çš„è¯·æ±‚æ—¶ï¼Œéƒ½ä¸ä¼šè¿”å›400é”™è¯¯ã€‚\nä½†æ˜¯ä¸­é—´ä»£ç†æœåŠ¡å™¨æŒ‰ç…§ç¬¬ä¸€ä¸ª`Content-Length`çš„å€¼å¯¹è¯·æ±‚è¿›è¡Œå¤„ç†ï¼Œè€Œåç«¯æºç«™æœåŠ¡å™¨æŒ‰ç…§ç¬¬äºŒä¸ª`Content-Length`çš„å€¼è¿›è¡Œå¤„ç†ã€‚\n**æ„é€ è¯·æ±‚ç¤ºä¾‹**ï¼š\n\n```\nPOST / HTTP/1.1\\r\\n\nHost: test.com\\r\\n\nContent-Length: 8\\r\\n\nContent-Length: 7\\r\\n\n\n12345\\r\\n\na\n```\n\n**æ”»å‡»æµç¨‹**ï¼š\nä¸­é—´ä»£ç†æœåŠ¡å™¨è·å–åˆ°çš„æ•°æ®åŒ…çš„é•¿åº¦ä¸º8ï¼Œå°†ä¸Šè¿°æ•´ä¸ªæ•°æ®åŒ…åŸå°ä¸åŠ¨çš„è½¬å‘ç»™åç«¯çš„æºç«™æœåŠ¡å™¨ã€‚\nè€Œåç«¯æœåŠ¡å™¨è·å–åˆ°çš„æ•°æ®åŒ…é•¿åº¦ä¸º7ã€‚å½“è¯»å–å®Œå‰7ä¸ªå­—ç¬¦åï¼Œåç«¯æœåŠ¡å™¨è®¤ä¸ºå·²ç»è¯»å–å®Œæ¯•ï¼Œç„¶åç”Ÿæˆå¯¹åº”çš„å“åº”ï¼Œå‘é€å‡ºå»ã€‚è€Œæ­¤æ—¶çš„ç¼“å†²åŒºå»è¿˜å‰©ä½™ä¸€ä¸ªå­—æ¯`a`ï¼Œå¯¹äºåç«¯æœåŠ¡å™¨æ¥è¯´ï¼Œè¿™ä¸ª`a`æ˜¯ä¸‹ä¸€ä¸ªè¯·æ±‚çš„ä¸€éƒ¨åˆ†ï¼Œä½†æ˜¯è¿˜æ²¡æœ‰ä¼ è¾“å®Œæ¯•ã€‚\nå¦‚æœæ­¤æ—¶æœ‰ä¸€ä¸ªå…¶ä»–çš„æ­£å¸¸ç”¨æˆ·å¯¹æœåŠ¡å™¨è¿›è¡Œäº†è¯·æ±‚ï¼š\n\n```\nGET /index.html HTTP/1.1\\r\\n\nHost: test.com\\r\\n\n```\n\nå› ä¸ºä»£ç†æœåŠ¡å™¨ä¸æºç«™æœåŠ¡å™¨ä¹‹é—´ä¸€èˆ¬ä¼šé‡ç”¨TCPè¿æ¥ã€‚æ‰€ä»¥æ­£å¸¸ç”¨æˆ·çš„è¯·æ±‚å°±æ‹¼æ¥åˆ°äº†å­—æ¯`a`çš„åé¢ï¼Œå½“åç«¯æœåŠ¡å™¨æ¥æ”¶å®Œæ¯•åï¼Œå®ƒå®é™…å¤„ç†çš„è¯·æ±‚å…¶å®æ˜¯ï¼š\n\n```\naGET /index.html HTTP/1.1\\r\\n\nHost: test.com\\r\\n\n```\n\nè¿™æ—¶ï¼Œç”¨æˆ·å°±ä¼šæ”¶åˆ°ä¸€ä¸ªç±»ä¼¼äº`aGET request method not found`çš„æŠ¥é”™ã€‚è¿™æ ·å°±å®ç°äº†ä¸€æ¬¡HTTPèµ°ç§æ”»å‡»ï¼Œè€Œä¸”è¿˜å¯¹æ­£å¸¸ç”¨æˆ·çš„è¡Œä¸ºé€ æˆäº†å½±å“ï¼Œè€Œä¸”è¿˜å¯ä»¥æ‰©å±•æˆç±»ä¼¼äºCSRF( Crossâ€”Site Request Forgery )çš„æ”»å‡»æ–¹å¼ã€‚\n\nä½†æ˜¯ä¸€èˆ¬çš„æœåŠ¡å™¨éƒ½ä¸ä¼šæ¥å—è¿™ç§å­˜åœ¨ä¸¤ä¸ªè¯·æ±‚å¤´çš„è¯·æ±‚åŒ…ã€‚è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ\næ‰€ä»¥æƒ³åˆ°å‰é¢æ‰€è¯´çš„\n**RFC2616è§„èŒƒ**\n\n> å¦‚æœæ”¶åˆ°åŒæ—¶å­˜åœ¨`Content-Length`å’Œ`Transfer-Encoding`è¿™ä¸¤ä¸ªè¯·æ±‚å¤´çš„è¯·æ±‚åŒ…æ—¶ï¼Œåœ¨å¤„ç†çš„æ—¶å€™å¿…é¡»å¿½ç•¥`Content-Length`ã€‚\n\næ‰€ä»¥è¯·æ±‚åŒ…ä¸­åŒæ—¶åŒ…å«è¿™ä¸¤ä¸ªè¯·æ±‚å¤´å¹¶ä¸ç®—è¿è§„ï¼ŒæœåŠ¡å™¨ä¹Ÿä¸éœ€è¦è¿”å›400é”™è¯¯ã€‚å¯¼è‡´æœåŠ¡å™¨åœ¨è¿™é‡Œçš„å®ç°æ›´å®¹æ˜“å‡ºé—®é¢˜ã€‚\n\n#### CL-TE\n\nCL-TEï¼Œå°±æ˜¯å½“æ”¶åˆ°å­˜åœ¨ä¸¤ä¸ªè¯·æ±‚å¤´çš„è¯·æ±‚åŒ…æ—¶ï¼Œå‰ç«¯ä»£ç†æœåŠ¡å™¨åªå¤„ç†`Content-Length`è¯·æ±‚å¤´ï¼Œè€Œåç«¯æœåŠ¡å™¨ä¼šéµå®ˆ`RFC2616`çš„è§„å®šï¼Œå¿½ç•¥æ‰`Content-Length`ï¼Œå¤„ç†`Transfer-Encoding`è¯·æ±‚å¤´ã€‚\n\n**chunkä¼ è¾“æ•°æ®(sizeçš„å€¼ç”±16è¿›åˆ¶è¡¨ç¤º)**\n\n```\n[chunk size][\\r\\n][chunk data][\\r\\n][chunk size][\\r\\n][chunk data][\\r\\n][chunk size = 0][\\r\\n][\\r\\n]\n```\n\n**æ„é€ è¯·æ±‚ç¤ºä¾‹**ï¼š\n\n```\nPOST / HTTP/1.1\\r\\n\nHost: test.com\\r\\n\n......\nConnection: keep-alive\\r\\n\nContent-Length: 6\\r\\n\nTransfer-Encoding: chunked\\r\\n\n\\r\\n\n0\\r\\n\n\\r\\n\na\n```\n\nè¿ç»­å‘é€å‡ æ¬¡è¯·æ±‚å°±å¯ä»¥è·å¾—å“åº”ã€‚\n**æ”»å‡»æµç¨‹**ï¼š\nç”±äºå‰ç«¯æœåŠ¡å™¨å¤„ç†`Content-Length`ï¼Œæ‰€ä»¥è¿™ä¸ªè¯·æ±‚å¯¹äºå®ƒæ¥è¯´æ˜¯ä¸€ä¸ªå®Œæ•´çš„è¯·æ±‚ï¼Œè¯·æ±‚ä½“çš„é•¿åº¦ä¸º6ï¼Œä¹Ÿå°±æ˜¯\n\n```\n0\\r\\n\n\\r\\n\na\n```\n\nå½“è¯·æ±‚åŒ…ç»è¿‡ä»£ç†æœåŠ¡å™¨è½¬å‘ç»™åç«¯æœåŠ¡å™¨æ—¶ï¼Œåç«¯æœåŠ¡å™¨å¤„ç†`Transfer-Encoding`ï¼Œå½“å®ƒè¯»å–åˆ°\n\n```\n0\\r\\n\n\\r\\n\n```\n\nè®¤ä¸ºå·²ç»è¯»å–åˆ°ç»“å°¾äº†ã€‚\nä½†å‰©ä¸‹çš„å­—æ¯`a`å°±è¢«ç•™åœ¨äº†ç¼“å†²åŒºä¸­ï¼Œç­‰å¾…ä¸‹ä¸€æ¬¡è¯·æ±‚ã€‚å½“æˆ‘ä»¬é‡å¤å‘é€è¯·æ±‚åï¼Œå‘é€çš„è¯·æ±‚åœ¨åç«¯æœåŠ¡å™¨æ‹¼æ¥æˆäº†ç±»ä¼¼ä¸‹é¢è¿™ç§è¯·æ±‚ï¼š\n\n```\naPOST / HTTP/1.1\\r\\n\nHost: test.com\\r\\n\n......\n```\n\næœåŠ¡å™¨åœ¨è§£ææ—¶å°±ä¼šäº§ç”ŸæŠ¥é”™äº†ï¼Œä»è€Œé€ æˆHTTPè¯·æ±‚èµ°ç§ã€‚\n\n#### TE-CL\n\nTE-CLï¼Œå°±æ˜¯å½“æ”¶åˆ°å­˜åœ¨ä¸¤ä¸ªè¯·æ±‚å¤´çš„è¯·æ±‚åŒ…æ—¶ï¼Œå‰ç«¯ä»£ç†æœåŠ¡å™¨å¤„ç†`Transfer-Encoding`è¯·æ±‚å¤´ï¼Œåç«¯æœåŠ¡å™¨å¤„ç†`Content-Length`è¯·æ±‚å¤´ã€‚\n**æ„é€ è¯·æ±‚ç¤ºä¾‹**ï¼š\n\n```\nPOST / HTTP/1.1\\r\\n\nHost: test.com\\r\\n\n......\nContent-Length: 4\\r\\n\nTransfer-Encoding: chunked\\r\\n\n\\r\\n\n12\\r\\n\naPOST / HTTP/1.1\\r\\n\n\\r\\n\n0\\r\\n\n\\r\\n\n```\n\n**æ”»å‡»æµç¨‹**ï¼š\nå‰ç«¯æœåŠ¡å™¨å¤„ç†`Transfer-Encoding`ï¼Œå½“å…¶è¯»å–åˆ°\n\n```\n0\\r\\n\n\\r\\n\n```\n\nè®¤ä¸ºæ˜¯è¯»å–å®Œæ¯•äº†ã€‚\næ­¤æ—¶è¿™ä¸ªè¯·æ±‚å¯¹ä»£ç†æœåŠ¡å™¨æ¥è¯´æ˜¯ä¸€ä¸ªå®Œæ•´çš„è¯·æ±‚ï¼Œç„¶åè½¬å‘ç»™åç«¯æœåŠ¡å™¨ï¼Œåç«¯æœåŠ¡å™¨å¤„ç†`Content-Length`è¯·æ±‚å¤´ï¼Œå› ä¸ºè¯·æ±‚ä½“çš„é•¿åº¦ä¸º`4`.ä¹Ÿå°±æ˜¯å½“å®ƒè¯»å–å®Œ\n\n```\n12\\r\\n\n```\n\nå°±è®¤ä¸ºè¿™ä¸ªè¯·æ±‚å·²ç»ç»“æŸäº†ã€‚åé¢çš„æ•°æ®å°±è®¤ä¸ºæ˜¯å¦ä¸€ä¸ªè¯·æ±‚ï¼š\n\n```\naPOST / HTTP/1.1\\r\\n\n\\r\\n\n0\\r\\n\n\\r\\n\n```\n\næˆåŠŸæŠ¥é”™ï¼Œé€ æˆHTTPè¯·æ±‚èµ°ç§ã€‚\n\n#### TE-TE\n\nTE-TEï¼Œå½“æ”¶åˆ°å­˜åœ¨ä¸¤ä¸ªè¯·æ±‚å¤´çš„è¯·æ±‚åŒ…æ—¶ï¼Œå‰åç«¯æœåŠ¡å™¨éƒ½å¤„ç†`Transfer-Encoding`è¯·æ±‚å¤´ï¼Œç¡®å®æ˜¯å®ç°äº†RFCçš„æ ‡å‡†ã€‚ä¸è¿‡å‰åç«¯æœåŠ¡å™¨ä¸æ˜¯åŒä¸€ç§ã€‚è¿™å°±æœ‰äº†ä¸€ç§æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹å‘é€çš„è¯·æ±‚åŒ…ä¸­çš„`Transfer-Encoding`è¿›è¡ŒæŸç§æ··æ·†æ“ä½œ(å¦‚æŸä¸ªå­—ç¬¦æ”¹å˜å¤§å°å†™)ï¼Œä»è€Œä½¿å…¶ä¸­ä¸€ä¸ªæœåŠ¡å™¨ä¸å¤„ç†`Transfer-Encoding`è¯·æ±‚å¤´ã€‚åœ¨æŸç§æ„ä¹‰ä¸Šè¿™è¿˜æ˜¯`CL-TE`æˆ–è€…`TE-CL`ã€‚\n**æ„é€ è¯·æ±‚ç¤ºä¾‹**ï¼š\n\n```\nPOST / HTTP/1.1\\r\\n\nHost: test.com\\r\\n\n......\nContent-length: 4\\r\\n\nTransfer-Encoding: chunked\\r\\n\n\\r\\n\n5c\\r\\n\naPOST / HTTP/1.1\\r\\n\nContent-Type: application/x-www-form-urlencoded\\r\\n\nContent-Length: 15\\r\\n\n\\r\\n\nx=1\\r\\n\n0\\r\\n\n\\r\\n\n```\n\n**æ”»å‡»æµç¨‹**ï¼š\nå‰ç«¯æœåŠ¡å™¨å¤„ç†`Transfer-Encoding`ï¼Œå½“å…¶è¯»å–åˆ°\n\n```\n0\\r\\n\n\\r\\n\n```\n\nè®¤ä¸ºæ˜¯è¯»å–ç»“æŸã€‚\næ­¤æ—¶è¿™ä¸ªè¯·æ±‚å¯¹ä»£ç†æœåŠ¡å™¨æ¥è¯´æ˜¯ä¸€ä¸ªå®Œæ•´çš„è¯·æ±‚ï¼Œç„¶åè½¬å‘ç»™åç«¯æœåŠ¡å™¨å¤„ç†`Transfer-encoding`è¯·æ±‚å¤´ï¼Œå°†`Transfer-Encoding`éšè—åœ¨æœåŠ¡ç«¯çš„ä¸€ä¸ª`chain`ä¸­æ—¶ï¼Œå®ƒå°†ä¼šå›é€€åˆ°ä½¿ç”¨`Content-Length`å»å‘é€è¯·æ±‚ã€‚è¯»å–åˆ°\n\n```\n5c\\r\\n\n```\n\nè®¤ä¸ºæ˜¯è¯»å–å®Œæ¯•äº†ã€‚åé¢çš„æ•°æ®å°±è®¤ä¸ºæ˜¯å¦ä¸€ä¸ªè¯·æ±‚ï¼š\n\n```\naPOST / HTTP/1.1\\r\\n\nContent-Type: application/x-www-form-urlencoded\\r\\n\nContent-Length: 15\\r\\n\n\\r\\n\nx=1\\r\\n\n0\\r\\n\n\\r\\n\n```\n\næˆåŠŸæŠ¥é”™ï¼Œé€ æˆHTTPè¯·æ±‚èµ°ç§ã€‚\n\n### æ”»å‡»æ€è·¯\n\n1. ç”¨æˆ·åŠ«æŒ\n\n   åœ¨æœ‰çš„ç½‘ç»œç¯å¢ƒä¸‹ï¼Œå‰ç«¯ä»£ç†æœåŠ¡å™¨åœ¨æ”¶åˆ°è¯·æ±‚åï¼Œä¸ä¼šç›´æ¥è½¬å‘ç»™åç«¯æœåŠ¡å™¨ï¼Œè€Œæ˜¯å…ˆæ·»åŠ ä¸€äº›å¿…è¦çš„å­—æ®µï¼Œç„¶åå†è½¬å‘ç»™åç«¯æœåŠ¡å™¨ã€‚è¿™äº›å­—æ®µæ˜¯åç«¯æœåŠ¡å™¨å¯¹è¯·æ±‚è¿›è¡Œå¤„ç†æ‰€å¿…é¡»çš„ï¼Œæ¯”å¦‚ï¼š\n\n   * æè¿°TLSé“¾æ¥æ‰€ä½¿ç”¨çš„åè®®å’Œå¯†ç \n   * åŒ…å«ç”¨æˆ·IPåœ°å€çš„XFFå¤´\n   * ç”¨æˆ·çš„ä¼šè¯ä»¤ç‰ŒID\n\n   æˆ‘ä»¬å¯ä»¥ç”¨ä¸‰å¤§æ­¥éª¤æ¥è·å–è¿™äº›ä¿¡æ¯\n\n   > 1. æ‰¾ä¸€ä¸ªèƒ½å¤Ÿå°†è¯·æ±‚å‚æ•°çš„å€¼è¾“å‡ºåˆ°å“åº”ä¸­çš„POSTè¯·æ±‚\n   > 2. æŠŠè¯¥POSTè¯·æ±‚ä¸­ï¼Œæ‰¾åˆ°çš„è¿™ä¸ªç‰¹æ®Šçš„å‚æ•°æ”¾åœ¨æ¶ˆæ¯çš„æœ€åé¢\n   > 3. èµ°ç§è¿™ä¸ªè¯·æ±‚ï¼Œç„¶åç›´æ¥å‘é€ä¸€ä¸ªæ™®é€šçš„è¯·æ±‚ï¼Œå‰ç«¯æœåŠ¡å™¨å¯¹è¿™ä¸ªè¯·æ±‚é‡å†™çš„ä¸€äº›å­—æ®µå°±ä¼šæ˜¾ç°å‡ºæ¥ \n\n   å‡è®¾å‰ç«¯æœåŠ¡å™¨å…è®¸GETè¯·æ±‚æºå¸¦è¯·æ±‚ä½“ï¼Œè€Œåç«¯æœåŠ¡å™¨ä¸å…è®¸GETè¯·æ±‚æºå¸¦è¯·æ±‚ä½“ï¼Œå®ƒä¼šç›´æ¥å¿½ç•¥æ‰GETè¯·æ±‚ä¸­çš„Content-Lengthå­—æ®µï¼Œä¸è¿›è¡Œå¤„ç†ï¼Œè¿™å°±æœ‰å¯èƒ½å¯¼è‡´è¯·æ±‚èµ°ç§ã€‚\n\n   ```\n   GET / HTTP/1.1\n   Host: example.com\n   Content-Length: 72\n   \n   POST /Comment HTTP/1.1\n   Host: example.com\n   Content-Length: 666\n   \n   mag=aaa\n   ```\n\n   å‰ç«¯æœåŠ¡å™¨é€šè¿‡è¯»å–Content-Lengthï¼Œç¡®è®¤äº†è¿™æ˜¯ä¸€ä¸ªå®Œæ•´çš„è¯·æ±‚ï¼Œç„¶åè½¬å‘åˆ°åç«¯æœåŠ¡å™¨ï¼Œè€Œåç«¯æœåŠ¡å™¨ä¸å¯¹Content-Lengthè¿›è¡Œåˆ¤æ–­ï¼Œäºæ˜¯è¿™åœ¨æœåŠ¡å™¨ä¸­å˜æˆäº†ä¸¤ä¸ªè¯·æ±‚ã€‚\n\n   è€Œç¬¬äºŒä¸ªä¸ºPOSTè¯·æ±‚ï¼Œå‡å®šè¿™æ˜¯ä¸€ä¸ªä¼šå°†ä¿¡æ¯æ˜¾ç¤ºå‡ºæ¥çš„è¯·æ±‚ï¼Œæ¯”å¦‚å¼¹å¹•æˆ–è€…è¯„è®ºï¼Œå†å‡å®šåç«¯æœåŠ¡å™¨ä¼šé€šè¿‡ Content-Length æ¥ç•Œå®šæ•°æ®åŒ…ã€‚\n\n   é‚£ä¹ˆç”±äºæ•°æ®åŒ…çš„é•¿åº¦ä¸º666ï¼Œé‚£ä¹ˆæœåŠ¡å™¨ä¼šç­‰å¾…åé¢çš„æ•°æ®ï¼Œç­‰å¾…æ­£å¸¸ç”¨æˆ·çš„è¯·æ±‚åŒ…åˆ°æ¥ï¼Œä¸å…¶æ‹¼æ¥ï¼Œå˜ä¸º mas=aaaGET / HTTP/1.1......ï¼Œç„¶åä¼šå°†å…¶æ˜¾ç¤ºåœ¨æ­£å¸¸çš„é¡µé¢ä¸Šï¼Œå¯¼è‡´ç”¨æˆ·çš„Cookieç­‰ä¿¡æ¯å‘ç”Ÿæ³„éœ²ã€‚\n\n2. é…åˆ Reflected XSS è¿›è¡Œæ— äº¤äº’XSS\n\n   å°† Reflected XSSèµ°ç§åˆ°ç¼“å†²åŒºï¼Œç­‰å¾…æ­£å¸¸ç”¨æˆ·è®¿é—®ã€‚\n\n3. æ¶æ„é‡å®šå‘\n\n   > è®¸å¤šåº”ç”¨ç¨‹åºæ‰§è¡Œä»ä¸€ä¸ªURLåˆ°å¦ä¸€ä¸ªURLçš„é‡å®šå‘ï¼Œä¼šå°†æ¥è‡ªè¯·æ±‚çš„HOSTæ ‡å¤´çš„ä¸»æœºåæ”¾å…¥é‡å®šå‘URLã€‚\n\n   ```\n   è¯·æ±‚\n   GET /home HTTP/1.1\n   Host: normal-website.com\n   \n   å“åº”\n   HTTP/1.1 301 Moved Permanently\n   Location: https://normal-website.com/home/\n   ```\n\n   é€šå¸¸ï¼Œè¿™æ ·çš„è¡Œä¸ºæ˜¯æ— å®³çš„ï¼Œä½†æ˜¯å¯ä»¥åœ¨HTTPèµ°ç§è¯·æ±‚æ”»å‡»ä¸­åˆ©ç”¨å®ƒæ¥å°†ç”¨æˆ·é‡å®šå‘åˆ°å¤–éƒ¨åŸŸä¸­ã€‚\n\n   ```\n   POST / HTTP/1.1\n   Host: vulnerable-website.com\n   content-Length: 54\n   Transfer-Encoding: chunked\n   \n   0\n   \n   GET /home HTTP/1.1\n   Host: attacker-website.com\n   Foo: x\n   ```\n\n   èµ°ç§çš„è¯·æ±‚å°†è§¦å‘é‡å®šå‘åˆ°æ”»å‡»è€…çš„ç½‘ç«™ï¼Œè¿™å°†å½±å“åç«¯æœåŠ¡å™¨å¤„ç†çš„ä¸‹ä¸€ä¸ªç”¨æˆ·è¯·æ±‚\n\n   ```\n   æ‹¼æ¥åçš„æ­£å¸¸è¯·æ±‚\n   GET /home HTTP/1.1\n   Host: attacker-website.com\n   Foo: xGET /scripts/include.js HTTP/1.1\n   Host: vulnerable-website.com\n   \n   æ¶æ„å“åº”\n   HTTP/1.1 301 Moved Permanently\n   Location: https://attacker-website.com/home/\n   ```\n\n   å¦‚æœç”¨æˆ·è¯·æ±‚çš„æ˜¯ä¸€ä¸ªJavaScriptæ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶æ˜¯ç”±ç½‘ç«™ä¸Šçš„é¡µé¢å¯¼å…¥çš„ã€‚æ”»å‡»è€…å¯ä»¥é€šè¿‡åœ¨å“åº”ä¸­è¿”å›æ¶æ„çš„JavaScriptæ–‡ä»¶æ¥å®Œå…¨ç ´åç”¨æˆ·ã€‚\n\n4. ç¼“å­˜æŠ•æ¯’\n\n   ä¸€èˆ¬æ¥è¯´ï¼Œå‰ç«¯æœåŠ¡å™¨ç”±äºæ€§èƒ½åŸå› ï¼Œä¼šå¯¹åç«¯æœåŠ¡å™¨çš„ä¸€äº›èµ„æºè¿›è¡Œç¼“å­˜ï¼Œå¦‚æœå­˜åœ¨HTTPè¯·æ±‚èµ°ç§æ¼æ´ï¼Œåˆ™æœ‰å¯èƒ½ä½¿ç”¨é‡å®šå‘æ¥è¿›è¡Œç¼“å­˜æŠ•æ¯’ï¼Œä»è€Œå½±å“åç»­è®¿é—®çš„æ‰€æœ‰ç”¨æˆ·ã€‚\n\n### æ¼æ´ä¿®å¤\n\n1. å°†å‰ç«¯æœåŠ¡å™¨é…ç½®ä¸ºåªä½¿ç”¨HTTP/2ä¸åç«¯ç³»ç»Ÿé€šä¿¡\n2. å®Œå…¨ç¦ç”¨åç«¯è¿æ¥é‡ç”¨æ¥è§£å†³æ­¤æ¼æ´çš„æ‰€æœ‰å˜ä½“ \n3. ç¡®ä¿è¿æ¥ä¸­çš„æ‰€æœ‰æœåŠ¡å™¨è¿è¡Œå…·æœ‰ç›¸åŒé…ç½®çš„ç›¸åŒwebæœåŠ¡å™¨è½¯ä»¶ã€‚\n4. å½»åº•æ‹’ç»æ¨¡ç³Šçš„è¯·æ±‚ï¼Œå¹¶åˆ é™¤å…³è”çš„è¿æ¥ã€‚","tags":["CTF"],"categories":["computer"]},{"title":"æ’åºç®—æ³•","url":"/archives/61237/","content":"\næ’åºç®—æ³•æ˜¯ç®—æ³•çš„å…¥é—¨çŸ¥è¯†ï¼Œå…¶ç»å…¸æ€æƒ³å¯ä»¥ç”¨äºå¾ˆå¤šç®—æ³•å½“ä¸­ã€‚\n\n<!-- more -->\n\n# å·¥å…·å‡½æ•°\n\näº¤æ¢å‡½æ•°\n\n```java\npublic void swap(int[] nums, int i, int j) {\n    int tmp = nums[i];\n    nums[i] = nums[j];\n    nums[j] = tmp;\n}\n```\n\n# åå¤§ç»å…¸æ’åºç®—æ³•\n\n| æ’åºç®—æ³• | å¹³å‡æ—¶é—´å¤æ‚åº¦ | æœ€å¥½æƒ…å†µ      | æœ€åæƒ…å†µ      | ç©ºé—´å¤æ‚åº¦  | ç¨³å®šæ€§ |\n| -------- | -------------- | ------------- | ------------- | ----------- | ------ |\n| å†’æ³¡     | $O(n^2)$       | $O(n)$        | $O(n^2)$      | $O(1)$      | ç¨³å®š   |\n| é€‰æ‹©     | $O(n^2)$       | $O(n)$        | $O(n^2)$      | $O(1)$      | ä¸ç¨³å®š |\n| æ’å…¥     | $O(n^2)$       | $O(n)$        | $O(n^2)$      | $O(1)$      | ç¨³å®š   |\n| å¸Œå°”     | $O(n\\log n)$   | $O(n\\log^2n)$ | $O(n\\log^2n)$ | $O(1)$      | ä¸ç¨³å®š |\n| å½’å¹¶     | $O(n\\log n)$   | $O(n\\log n)$  | $O(n\\log n)$  | $O(n)$      | ç¨³å®š   |\n| å¿«é€Ÿ     | $O(n\\log n)$   | $O(n\\log n)$  | $O(n^2)$      | $O(\\log n)$ | ä¸ç¨³å®š |\n| å †       | $O(n\\log n)$   | $O(n\\log n)$  | $O(n\\log n)$  | $O(1)$      | ä¸ç¨³å®š |\n| è®¡æ•°     | $O(n+k)$       | $O(n+k)$      | $O(n+k)$      | $O(k)$      | ç¨³å®š   |\n| æ¡¶       | $O(n+k)$       | $O(n+k)$      | $O(n^2)$      | $O(n+k)$    | ç¨³å®š   |\n| åŸºæ•°     | $O(nk)$        | $O(nk)$       | $O(nk)$       | $O(n+k)$    | ç¨³å®š   |\n\n## å†’æ³¡æ’åº\n\nå†’æ³¡æ’åºè¦å¯¹ä¸€ä¸ªåˆ—è¡¨å¤šæ¬¡é‡å¤éå†ã€‚å®ƒè¦æ¯”è¾ƒç›¸é‚»çš„ä¸¤é¡¹ï¼Œå¹¶ä¸”äº¤æ¢é¡ºåºæ’é”™çš„é¡¹ã€‚æ¯å¯¹ åˆ—è¡¨å®è¡Œä¸€æ¬¡éå†ï¼Œå°±æœ‰ä¸€ä¸ªæœ€å¤§é¡¹æ’åœ¨äº†æ­£ç¡®çš„ä½ç½®ã€‚\n\næ™®é€šç‰ˆï¼š\n\n```java\npublic void bubbleSort(int[] nums) {\n    int n = nums.length;\n    for (int i = 1; i < n; i++) {\n        for (int j = 0; j < n - i; j++) {\n            if (nums[j] > nums[j + 1])\n                swap(nums, j, j + 1);\n        }\n    }\n}\n```\n\nå¦‚æœå‘ç°åˆ—è¡¨å·²ç»æ’å¥½åºäº†ï¼Œé‚£ä¹ˆå°±å¯ä»¥æå‰ç»“æŸã€‚\n\nä¼˜åŒ–ç‰ˆï¼š\n\n```java\npublic void bubbleSort(int[] nums) {\n    int n = nums.length;\n    boolean flag = false;\n    for (int i = 1; i < n; i++) {\n        for (int j = 0; j < n - i; j++) {\n            if (nums[j] > nums[j + 1]) {\n                swap(nums, j, j + 1);\n                flag = true;\n            }\n        }\n        if (!flag) \n            break;\n    }\n}\n```\n\n\n\n\n# å‚è€ƒèµ„æ–™\n\n- [å¸¸ç”¨çš„æ’åºç®—æ³•æ€»ç»“](https://zhuanlan.zhihu.com/p/40695917)","tags":["ç®—æ³•"],"categories":["computer"]},{"title":"manim--3b1bæ•°å­¦åŠ¨ç”»å¼•æ“å®‰è£…","url":"/archives/57358/","tags":["é…ç½®"],"categories":["computer"]},{"title":"é«˜ç­‰æ•°å­¦ï¼šæ³°å‹’å…¬å¼","url":"/archives/48914/","content":"\næ³°å‹’å…¬å¼è™½ç„¶å½¢å¼ä¸ç®—å¤æ‚ï¼Œä½†æ¥è·¯æ¯”è¾ƒè¯¡å¼‚ã€‚å‡ ä¹æ‰€æœ‰çš„æ•™æéƒ½æ˜¯ç›´æ¥ç»™å‡ºè¿™ä¸ªå…¬å¼ï¼Œç„¶åå†è¿›è¡Œç›¸åº”çš„ç»“è®ºè¯æ˜ï¼Œæ˜¾å¾—è¿‡äºçªå…€ï¼Œä¹Ÿä¸ä¾¿äºç†è§£ã€‚æœ¬æ–‡å°è¯•ç»™å‡ºä¸€ç§ç”±åŸºæœ¬çš„å¯¼æ•°å…¬å¼å’Œæé™å®šç†æ¨å¯¼æ³°å‹’å…¬å¼çš„æ–¹æ³•ï¼Œå¸Œæœ›èƒ½å¯¹è¯»è€…è¯¸å›æœ‰æ‰€å¸®åŠ©ã€‚\n\n<!-- more -->\n\n# ä»ä¸€é˜¶æ³°å‹’å…¬å¼è¯´èµ·\n\næˆ‘ä»¬é¦–å…ˆä»ä¸€é˜¶å¯¼æ•°ç€æ‰‹ã€‚å‡è®¾ $f(x)$ åœ¨ $x_0$ æœ‰ä¸€é˜¶å¯¼æ•°ï¼Œé‚£ä¹ˆæ ¹æ®å®šä¹‰ï¼Œå°±æœ‰\n\n$$\n\\begin{equation}\n  \\lim_{x\\rightarrow x_0}\\frac{f(x)-f(x_0)}{x-x_0}=f'(x_0)\n\\end{equation}\n$$\n\nç°åœ¨å›é¡¾ä¸€ä¸‹å…³äºå‡½æ•°æé™çš„ä¸€ä¸ªç»“è®ºï¼š\n\n$$\n\\begin{equation}\n  \\lim_{x\\rightarrow x^*}f(x)=L \\Leftrightarrow f(x)=L+\\alpha(x)\n\\end{equation}\n$$\n\nå…¶ä¸­ï¼Œ $\\alpha(x)$ æ˜¯è¯¥æé™è¿‡ç¨‹ä¸‹çš„æŸä¸ªæ— ç©·å°ï¼Œå³ $\\alpha\\rightarrow 0$ å½“ $x\\rightarrow x^*$. åˆ©ç”¨è¿™ä¸ªç»“è®ºï¼Œå¯ä»¥å°† å…¬å¼(1) æ”¹å†™ä¸º\n\n$$\n\\begin{equation}\n  \\frac{f(x)-f(x_0)}{x-x_0}=f'(x_0)+\\alpha_1(x)\n\\end{equation}\n$$\n\nå…¶ä¸­ï¼Œ$\\alpha\\rightarrow 0$ å½“ $x\\rightarrow x^*$. å†è¿›ä¸€æ­¥å˜å½¢ï¼Œå°±å¯ä»¥å¾—åˆ°\n\n$$\n\\begin{equation}\n  f(x)=f(x_0)+f'(x_0)(x-x_0)+\\alpha_1(x)\\cdot(x-x_0)\n\\end{equation}\n$$\n\næ³¨æ„åˆ° å…¬å¼(4) æœ«å°¾é‚£ä¸€é¡¹ï¼Œæ˜¾ç„¶ï¼Œå®ƒæ˜¯ $(x-x_0)$ çš„é«˜é˜¶æ— ç©·å°ï¼Œè¿™æ˜¯å› ä¸º\n\n$$\n\\begin{equation}\n  \\lim_{x\\rightarrow x_0}\\frac{\\alpha_1(x)\\cdot(x-x_0)}{x-x_0}=\\lim_{x\\rightarrow x_0}\\alpha_1(x)=0\n\\end{equation}\n$$\n\näºæ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥å°†å®ƒè®°ä½œ\n\n$$\n\\begin{equation}\n  \\alpha_1(x)\\cdot(x-x_0)=\\omicron_1(x-x_0)\n\\end{equation}\n$$\n\nè¿™æ ·çš„è¯ï¼Œ å…¬å¼(4) å¼å¯è¿›ä¸€æ­¥æ”¹å†™ä¸º\n\n$$\n\\begin{equation}\n  f(x)=f(x_0)+f'(x_0)(x-x_0)+\\omicron_1(x-x_0)\n\\end{equation}\n$$\n\nå¥½äº†ï¼è¿™å°±æ˜¯ä¸€é˜¶æ³°å‹’å…¬å¼ã€‚\n\n# ä¸€é˜¶åˆ°äºŒé˜¶\n\né‚£ä¹ˆå¦‚ä½•å¾—åˆ°äºŒé˜¶çš„å‘¢ï¼Ÿ\n\nå…ˆæ¯”è¾ƒä¸€ä¸‹äºŒé˜¶æ³°å‹’å’Œä¸€é˜¶æ³°å‹’å½¢å¼ä¸Šçš„å·®åˆ«å§ã€‚å®ƒä»¬å‰ä¸¤é¡¹éƒ½æ˜¯ä¸€æ ·çš„ï¼Œåªä¸è¿‡äºŒé˜¶çš„åˆå¤šå‡ºäº†ä¸€é¡¹ã€‚æ³¨æ„åˆ°ï¼Œé«˜é˜¶æ— ç©·å°çš„è®°å·å®é™…ä¸Šæ˜¯ä¸€ä¸ªã€Œæ”¶çº³ç­ã€ï¼Œå®ƒé‡Œé¢è£…ç€å¾ˆå¤šéšè—ç€çš„ä¸œè¥¿ã€‚å¦‚æ­¤ï¼Œæˆ‘ä»¬çŒœæµ‹ï¼ŒäºŒé˜¶æ³°å‹’å¤šå‡ºæ¥çš„è¿™ä¸€é¡¹ï¼Œä¸€å®šæ˜¯ä»ä¸€é˜¶æ³°å‹’é‚£ä¸ªé«˜é˜¶æ— ç©·å°ä¸­ã€Œåˆ†æã€å‡ºæ¥çš„ã€‚\n\nè¿™å¯å‘æˆ‘ä»¬æ¥è€ƒå¯Ÿè¿™æ ·ä¸€ä¸ªæé™\n\n$$\n\\begin{equation}\n  \\lim_{x\\rightarrow x_0}\\frac{\\omicron_1(x-x_0)}{(x-x_0)^2}=\\lim_{x\\rightarrow x_0}\\frac{f(x)-f(x_0)-f'(x_0)(x-x_0)}{(x-x_0)^2}\n\\end{equation}\n$$\n\nè¿™æ˜¯ä¸€ä¸ª $0/0$ çš„æé™ï¼Œè¦æ±‚è§£å®ƒå¯ä»¥è€ƒè™‘ä½¿ç”¨æ´›å¿…è¾¾ã€‚ä½†æ˜¯ï¼Œè¯·æ³¨æ„ï¼Œæˆ‘ä»¬ç°åœ¨åªæœ‰ $f(x)$ åœ¨ $x_0$ ä¸€ç‚¹ä¸€é˜¶å¯å¯¼çš„æ¡ä»¶ï¼Œè¿™è¿˜ä¸è¶³ä»¥è®©æˆ‘ä»¬ä½¿ç”¨æ´›å¿…è¾¾ã€‚ä¸è¿‡ï¼Œè¿™å¹¶æ²¡æœ‰å¤ªå¤§å›°éš¾ï¼Œåªè¦åŠ å¼ºæ¡ä»¶å°±è¡Œï¼Œæ¯”å¦‚ï¼šæˆ‘ä»¬è®© $f(x)$ åœ¨ $x_0$ äºŒé˜¶å¯å¯¼ï¼Œè¿™æ ·çš„è¯ï¼Œå°±ä¸ä»…ä¿è¯äº† $f''(x_0)$ å­˜åœ¨ï¼Œè¿˜åŒæ—¶ä¿è¯äº† $f(x)$ åœ¨ $x_0$ æŸé‚»åŸŸå†…ä¸€é˜¶å¯å¯¼ï¼Œè¿™å°±æ»¡è¶³äº†æ´›å¿…è¾¾çš„ä½¿ç”¨æ¡ä»¶ã€‚\n\nå¥½äº†ï¼å¼€å§‹æ´›å¿…è¾¾ï¼\n\n$$\n\\begin{align}\n  &\\lim_{x\\rightarrow x_0}\\frac{\\omicron_1(x-x_0)}{(x-x_0)^2}\\notag \\\\\n  &=\\lim_{x\\rightarrow x_0}\\frac{f(x)-f(x_0)-f'(x_0)(x-x_0)}{(x-x_0)^2}\\notag \\\\\n  &=\\lim_{x\\rightarrow x_0}\\frac{f'(x)-f'(x_0)}{2(x-x_0)}\\notag \\\\\n  &=\\frac{1}{2}f''(x_0)\n\\end{align}\n$$\n\nç°åœ¨ï¼Œæˆ‘ä»¬åˆåˆ©ç”¨ å…¬å¼(2) çš„ç»“è®ºï¼Œå°†è¿™ä¸ªæé™æ”¹å†™ä¸º\n\n$$\n\\begin{equation}\n  \\omicron_1(x-x_0)=\\frac{1}{2}f''(x_0)(x-x_0)^2+\\alpha_2(x)\\cdot(x-x_0)^2\n\\end{equation}\n$$\n\nåŸºäºåŒæ ·çš„ç†ç”±ï¼Œ $\\alpha_2(x)\\cdot(x-x_0)^2=\\omicron_2((x-x_0)^2)$ æˆ‘ä»¬å°†å®ƒä»£å…¥ å…¬å¼(10) å¹¶è¿åŒ å…¬å¼(10) ä¸€èµ·ä»£å› å…¬å¼(7) ,å°±å°†å¾—åˆ°\n\n$$\n\\begin{equation}\n  f(x)=f(x_0)+f'(x_0)(x-x_0)+\\frac{1}{2}f''(x_0)(x-x_0)^2+\\omicron_2((x-x_0)^2)\n\\end{equation}\n$$\n\næ˜¾ç„¶ï¼Œè¿™å°±æ˜¯äºŒé˜¶æ³°å‹’å…¬å¼ï¼\n\n# å¦‚æ³•ç‚®åˆ¶â€¦â€¦\n\nè‡³æ­¤ï¼Œå·²ç»ååˆ†æ˜æ˜¾äº†ï¼Œåªè¦ç»™å®š $f(x)$ åœ¨ $x_0$ ä¸‰é˜¶ã€å››é˜¶â€¦â€¦ç›´è‡³ $n$ é˜¶å¯å¯¼ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ²¿ç”¨æ­¤æ³•åå¤åœ°å°†ä½ä¸€é˜¶å…¬å¼ä¸­çš„é«˜é˜¶æ— ç©·å°åˆ†æç€å±•å¼€ï¼Œä¾æ¬¡å¾—åˆ°ä¸‰é˜¶ã€å››é˜¶â€¦â€¦ç›´è‡³ $n$ é˜¶çš„æ³°å‹’å…¬å¼ã€‚\n\n# æ³¨è®°\n\nå½“ç„¶ï¼Œç»†å¿ƒçš„è¯»è€…å¯èƒ½æ³¨æ„åˆ°ä¸€ç‚¹ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œç»™å®šçš„ $n$ é˜¶æ³°å‹’å…¬å¼å±•å¼€æ¡ä»¶ï¼Œä»…ä»…æ˜¯ $f(x)$ åœ¨ $x_0$ ä¸€ç‚¹å¤„çš„ $n$ é˜¶å¯å¯¼ï¼Œè€Œå¹¶ä¸æ˜¯é€šè¡Œæ•™æä¸­çº¦å®šçš„ã€Œåœ¨åŒ…å« $x_0$ çš„æŸé—­åŒºé—´ $[a,b]$ ä¸Š $n$ é˜¶å¯å¯¼ã€ä¸”åœ¨å¼€åŒºé—´ $(a,b)$ å†… $n+1$ é˜¶å¯å¯¼ã€ï¼\n\nè¿™åˆæ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ\n\näº‹å®ä¸Šï¼Œæˆ‘ä»¬è¿™é‡Œæ¨å¯¼çš„æ³°å‹’å…¬å¼æ˜¯å¸¦çš®äºšè¯ºä½™é¡¹çš„æ³°å‹’å…¬å¼ï¼Œè€Œä¸æ˜¯å¸¦æ‹‰æ ¼æœ—æ—¥ä½™é¡¹çš„æ³°å‹’å…¬å¼ï¼Œè€Œè¦å¾—å‡ºé‚£ä¸ªæ‹‰æ ¼æœ—æ—¥ä½™é¡¹ï¼Œå°±è¿˜å¿…é¡»å†ç”¨ä¸€æ¬¡æ‹‰æ ¼æœ—æ—¥ä¸­å€¼å®šç†ï¼Œäºæ˜¯å°±éœ€è¦æœ‰æ›´å¼ºçš„æ¡ä»¶ï¼å…³äºè¿™ä¸€ç‚¹ï¼Œè¯»è€…åªéœ€è¦å›é¡¾ä¸€ä¸‹æ‹‰æ ¼æœ—æ—¥ä¸­å€¼å®šç†çš„æ¡ä»¶ï¼Œå°±å¾ˆå®¹æ˜“ç†è§£äº†ã€‚\n\n# æ„¿æ„è¯•è¯•æ‰‹å—ï¼Ÿ\n\nè®²äº†è¿™ä¹ˆå¤šï¼Œç°åœ¨å°±è¯·ä½ æ‹¿å‡ºçº¸ç¬”ä»åˆ†æ $\\lim_{x\\rightarrow x_0}\\frac{\\omicron_2((x-x_0)^2)}{(x-x_0)^3}$ å…¥æ‰‹æ¨å¯¼ä¸‰é˜¶æ³°å‹’ï¼Œæˆ‘ç›¸ä¿¡ä½ èƒ½è¡Œï¼\n\n# å‚è€ƒèµ„æ–™\n\n- [æˆ‘ä»¬æ¥æ›´è‡ªç„¶åœ°æ¨å¯¼æ³°å‹’å…¬å¼ï¼](https://zhuanlan.zhihu.com/p/89717331)","tags":["é«˜æ•°"],"categories":["math"]},{"title":"å¤§å­¦ç‰©ç†ï¼šçƒ­å­¦","url":"/archives/13332/","content":"\nå…¬å¼æ˜¯çœŸå°¼ç›å¤šï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼\n\n- æ¸©åº¦ï¼ˆtemperatureï¼‰ï¼šç¬¦å·ï¼šTã€tï¼›SIå•ä½ï¼šå¼€å°”æ–‡ï¼ˆKelvinï¼ŒKï¼‰ï¼›å¸¸ç”¨å•ä½ï¼šæ‘„æ°åº¦ï¼ˆCelsiusï¼Œâ„ƒï¼‰ï¼Œåæ°åº¦ï¼ˆFahrenheitï¼Œâ„‰ï¼‰\n\n    ç”¨æ¥è¡¨ç¤ºç‰©ä½“å†·çƒ­ç¨‹åº¦çš„ç‰©ç†é‡ï¼Œå¾®è§‚ä¸Šæ¥è®²æ˜¯ç‰©ä½“åˆ†å­çƒ­è¿åŠ¨çš„å‰§çƒˆç¨‹åº¦ã€‚è¡¨æ˜äº†åˆ†å­å¹³å‡é€Ÿç‡çš„å¤§å°ã€‚\n\n- çƒ­å¹³è¡¡ï¼ˆThermal equilibriumï¼‰ï¼š\n\n    åŒå¤–ç•Œæ¥è§¦çš„ç‰©ä½“ï¼Œå…¶å†…éƒ¨æ¸©åº¦å„å¤„å‡åŒ€ä¸”ç­‰äºå¤–ç•Œæ¸©åº¦çš„çŠ¶å†µã€‚åœ¨çƒ­å¹³è¡¡æ—¶ï¼Œç‰©ä½“å„éƒ¨åˆ†ä»¥åŠç‰©ä½“åŒå¤–ç•Œä¹‹é—´éƒ½æ²¡æœ‰çƒ­é‡äº¤æ¢ã€‚\n\n- çƒ­åŠ›å­¦ç¬¬é›¶å®šå¾‹ï¼ˆçƒ­å¹³è¡¡å®šå¾‹ï¼‰ï¼ˆThe Zeroth Law of Thermodynamicsï¼‰:\n\n    å¦‚æœä¸¤ä¸ªçƒ­åŠ›å­¦ç³»ç»Ÿä¸­çš„æ¯ä¸€ä¸ªéƒ½ä¸ç¬¬ä¸‰ä¸ªçƒ­åŠ›å­¦ç³»ç»Ÿå¤„äºçƒ­å¹³è¡¡(æ¸©åº¦ç›¸åŒ)ï¼Œåˆ™å®ƒä»¬å½¼æ­¤ä¹Ÿå¿…å®šå¤„äºçƒ­å¹³è¡¡ã€‚\n\n- æµ‹é‡æ¸©åº¦ï¼š\n\n    æ°´çš„ä¸‰ç›¸ç‚¹ï¼ˆtriple point of waterï¼‰ï¼šæ­¤çŠ¶æ€ä¸‹æ°´çš„å›ºæ¶²æ°”æ€å…±å­˜ï¼š$T_3=273.16K , P_3=611.73Pa$\n\n- å®šå®¹æ°”ä½“æ¸©åº¦è®¡ï¼ˆconstant-volume gas thermometerï¼‰ï¼š\n\n    åŸç†ï¼šæŸ¥ç†å®šå¾‹ï¼š$T=Cp$\n\n    $T=(273.16K)(\\lim\\limits_{gas \\to 0}\\frac{p}{p_1})$\n\n- æ¸©æ ‡ï¼ˆtemperature scaleï¼‰ï¼š\n\n    æ‘„æ°åº¦ï¼š0â„ƒï¼šæ°´çš„å‡å›ºç‚¹ï¼›100â„ƒï¼šæ°´çš„æ²¸ç‚¹ã€‚$T_C=T-273.15â„ƒ$\n\n    åæ°åº¦ï¼š$T_F=\\frac{9}{5}T_C+32â„‰$\n\n- çƒ­è†¨èƒ€ï¼ˆthermal expansionï¼‰ï¼š\n\n    å½“ç‰©ä½“æ¸©åº¦æ”¹å˜æ—¶ï¼Œç‰©ä½“åœ¨å½¢çŠ¶ã€é¢ç§¯ã€ä½“ç§¯æ–¹é¢æœ‰æ”¹å˜çš„è¶‹åŠ¿ã€‚\n\n    çº¿æ€§è†¨èƒ€ï¼š$\\Delta L=L\\alpha \\Delta T$ ï¼› ä½“è†¨èƒ€ï¼š$\\Delta V=V\\beta \\Delta T$\n\n    å…¶ä¸­ï¼Œ$\\beta =3\\alpha$\n\n- æ°´ä½“ç§¯çš„æ”¶ç¼©ï¼šåœ¨3.984â„ƒæ—¶ï¼Œæ°´çš„å¯†åº¦è¾¾åˆ°æœ€å¤§ã€‚\n\n- çƒ­ï¼ˆHeatï¼‰ï¼šç¬¦å·ï¼šQï¼›SIå•ä½ï¼šç„¦è€³ï¼ˆjouleï¼ŒJï¼‰ï¼›å¸¸ç”¨å•ä½ï¼šå¡è·¯é‡Œï¼ˆcalorieï¼‰\n\n- çƒ­çš„ä¼ é€’æ–¹å¼ï¼š\n\n  1. ä¼ å¯¼ï¼ˆconductionï¼‰ï¼šä¸¤ä¸ªæœ‰æ¥è§¦çš„ç‰©ä½“ä¹‹é—´ï¼›\n\n  2. å¯¹æµï¼ˆconvectionï¼‰ï¼šå› æµä½“è¿åŠ¨ï¼Œå‘ç”Ÿåœ¨ç‰©ä½“ä¸ç¯å¢ƒä¹‹é—´ï¼›\n\n  3. è¾å°„ï¼ˆradiationï¼‰ï¼šåˆ†å­å‘å‡ºçš„ç”µç£èƒ½é‡ã€‚\n\n- çƒ­ä¼ å¯¼ï¼š\n\n  $$\n  P_{cond}=\\frac{Q}{t}=kA\\frac{T_H-T_C}{L}=\\frac{\\Delta T}{R}\n  $$ \n\n  å…¶ä¸­ï¼Œtï¼šæ—¶é—´ï¼Œkï¼šçƒ­å¯¼ç‡ï¼ŒRï¼š$R=\\frac{L}{kA}$ï¼‰ã€‚\n\n- ç¨³æ€å¯¼çƒ­è¿‡ç¨‹ï¼ˆsteady-state thermal conduction processï¼‰ï¼š\n\n    ææ–™ä¸­çš„ä»»ä½•ä¸€ç‚¹çš„æ¸©åº¦å’Œé€šè¿‡ææ–™çš„èƒ½é‡ä¼ é€’æ•ˆç‡éƒ½ä¸éšæ—¶é—´å˜åŒ–ã€‚\n\n- å¤šç‰©ä½“çƒ­ä¼ å¯¼ï¼š\n\n1. ä¸²è”ï¼š\n\n   $$\n   P_{cond}=P_1=P_2=\\dots =P_n\n   $$\n\n   æˆ–è€…ï¼Œ\n\n   $$\n   P_{cond}=k_iA\\frac{T_{i-1}-T_i}{L_i} (i=1,2,\\dots ,n)\n   $$\n\n   äºæ˜¯ï¼Œ\n   \n   $$\n   T_0-T_n=T_0-T_1+T_1-T_2+\\dots =P_{cond}\\sum\\limits_{i=1}^n\\frac{L_i}{Ak_i}\n   $$\n   \n   æˆ–è€…ï¼Œ\n   \n   $$\n   R_{tot}=\\sum\\limits_{i=1}R_i\n   $$\n\n2. å¹¶è”ï¼š\n\n    $$\n    P_{cond}=P_1+P_2+\\dots +P_n\n    $$\n    \n    æ•…ï¼Œ\n    \n    $$\n    P_{cond}=\\sum\\limits_{i=1}k_iA_i\\frac{T_H-T_C}{L}=(T_H-T_C)\\sum\\limits_{i=1}\\frac{k_iA_i}{L}\n    $$\n    \n    æˆ–è€…ï¼Œ\n    \n    $$\n    P_{cond}=\\frac{T_H-T_C}{R_{tot}}ï¼Œ\\frac{1}{R_{tot}} =\\sum\\limits_{i=1}\\frac{1}{R_i}\n    $$\n\nåé¢æœ‰ç©ºå†å†™\n","tags":["å¤§ç‰©"],"categories":["physic"]},{"title":"çº¿æ€§ä»£æ•°ï¼šè¡Œåˆ—å¼å®šä¹‰ä¸å±•å¼€æ³•åˆ™","url":"/archives/25238/","content":"\nå¯¹äºä¸€ä¸ª $n\\times n$ çš„çŸ©é˜µ $A$ çš„è¡Œåˆ—å¼ï¼Œæˆ‘ä»¬æœ‰\n\n1ã€å½“ $n=1$ æ—¶ï¼Œ$\\det{(A)}=a_{11}$\n\n2ã€å½“ $n\\ge 2$ æ—¶ï¼Œä»¤ $M_{ij} (1\\le i, j \\ge n)$ ä¸ºåˆ é™¤æ‰çŸ©é˜µ $A$ çš„ç¬¬ $i$ è¡Œå’Œç¬¬ $j$ åˆ—çš„ä¸€ä¸ª $(n-1)\\times(n-1)$ çŸ©é˜µã€‚è‹¥æŒ‰ $\\det{(A)}$ çš„ç¬¬ä¸€è¡Œå±•å¼€ï¼Œåˆ™æœ‰ï¼š\n\n$$\n\\begin{vmatrix} A \\end{vmatrix} =\\det{(A)}=a_{11}\\begin{vmatrix} M_{11} \\end{vmatrix}-a_{12}\\begin{vmatrix} M_{12} \\end{vmatrix}+\\dots+(-1)^{n+1}a_{1n}\\begin{vmatrix} M_{1n} \\end{vmatrix} \\\\ =\\sum_{j=1}^n (-1)^{j+1} a_{1j} \\det{(M_{1j})}\n$$\n\nå½“ç„¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä¸å¿…æ²¿ç€ç¬¬ä¸€è¡Œå±•å¼€ï¼Œæ­¤æ—¶æˆ‘ä»¬åªéœ€å°†å…¬å¼ä¸­çš„ â€œ1â€ æ¢æˆå…¶ä»–æ•°å­—å°±å¥½ï¼Œè€Œä¸”ç”±äºè¡Œåˆ—å¼ä¸è½¬ç½®è¡Œåˆ—å¼ç›¸ç­‰ï¼ŒæŒ‰åˆ—å±•å¼€ä¹Ÿæ˜¯åŒç†è¿›è¡Œã€‚\n\nç‰¹æ®Šåœ°ï¼Œè‹¥ $n\\times n$ çŸ©é˜µ $A$ æ˜¯ä¸‰è§’é˜µï¼ˆä¸Šã€ä¸‹ä¸‰è§’ï¼‰æˆ–å¯¹è§’é˜µï¼Œåˆ™å…¶è¡Œåˆ—å¼çš„å€¼ä¸º\n\n$$\n\\begin{vmatrix} A \\end{vmatrix}=a_{11}a_{22}\\dots a_{nn}\n$$\n\nå³å¯¹è§’å…ƒä¹‹ç§¯ã€‚è‹¥ä¸ºåä¸‰è§’é˜µæˆ–åå¯¹è§’é˜µï¼Œåˆ™å…¶è¡Œåˆ—å¼çš„å€¼ä¸º\n\n$$\n\\begin{vmatrix} A \\end{vmatrix}=(-1)^{\\frac{n(n-1)}{2}}b_1b_2\\dots b_n\n$$\n\nå…¶ä¸­ $b_i (i=1\\dots n)$ æ˜¯è¯¥é˜µçš„åå¯¹è§’å…ƒã€‚\n\nåé¢æœ‰ç©ºå†è¡¥\n","tags":["çº¿ä»£"],"categories":["math"]},{"title":"çº¿æ€§ä»£æ•°ï¼šå„ç±³ç‰¹çŸ©é˜µã€é…‰çŸ©é˜µ","url":"/archives/16976/","content":"\nè¿™ç¯‡æ–‡ç« ä¸»è¦è®²çš„æ˜¯ç¬”è€…ä¸Šä¸Šå‘¨åˆšå­¦çš„ä¸¤ä¸ªå¤æ•°åŸŸä¸‹çš„çŸ©é˜µï¼šå„ç±³ç‰¹çŸ©é˜µå’Œé…‰çŸ©é˜µã€‚\n\n<!-- more -->\n\næƒ³å¿…å¤§å®¶é«˜ä¸­éƒ½å·²ç»å­¦è¿‡äº†å¤æ•°ï¼Œå†è¡¥å……ä¸€ä¸ªæåæ ‡å½¢å¼çš„å¤æ•°åï¼Œæˆ‘ä»¬å°±ç›´æ¥è¿›å…¥æ­£é¢˜å§ï¼\n\næåæ ‡å½¢å¼ï¼ˆpolar formï¼‰ï¼š\n\n$$\nz=re^{i\\theta}=r(cos\\theta+isin\\theta)\n$$\n\nå…¶æ»¡è¶³ $z_1Â·z_2=r_1r_2e^{i(\\alpha+\\theta)}$ , $\\frac{z_1}{z_2}=\\frac{r_1}{r_2}e^{i(\\alpha-\\theta)}$. è¿™éƒ½æ˜¯ä¸€äº›éå¸¸å¥½çš„æ€§è´¨ã€‚\n\nå„ç±³ç‰¹çŸ©é˜µï¼ˆHermitian matrixï¼‰ï¼š\n\nå³è‡ªå…±è½­çŸ©é˜µï¼Œå…±è½­è½¬ç½®ç­‰äºè‡ªèº«ã€‚çŸ©é˜µä¸­æ¯ä¸€ä¸ªç¬¬iè¡Œç¬¬jåˆ—çš„å…ƒç´ éƒ½ä¸ç¬¬jè¡Œç¬¬iåˆ—çš„å…ƒç´ çš„å…±è½­ç›¸ç­‰ã€‚å„ç±³ç‰¹ç‰¹çŸ©é˜µä¸»å¯¹è§’çº¿ä¸Šçš„å…ƒç´ éƒ½æ˜¯å®æ•°çš„ï¼Œå…¶ç‰¹å¾å€¼ä¹Ÿæ˜¯å®æ•°ã€‚ï¼ˆå¯ç±»æ¯”ä¸ºå®å¯¹ç§°çŸ©é˜µï¼‰\n\nå…±è½­è½¬ç½®ï¼ˆconjugate transposeï¼‰æ“ä½œï¼Œå¯ç±»æ¯”ä¸ºå®çŸ©é˜µçš„è½¬ç½®æ“ä½œï¼ˆå¯¹å®çŸ©é˜µæ¥è¯´ï¼Œè½¬ç½®å’Œå„ç±³å…±è½­æ“ä½œæ˜¯ç›¸åŒçš„ï¼‰ï¼ŒåŒæ ·æœ‰å¦‚ä¸‹æ€§è´¨ï¼š\n\n$(AB)^H=B^HA^H$ ï¼›$(A^H)^H=A$ ï¼›$(A+B)^H=A^H+B^H$\n\nå„ç±³ç‰¹çŸ©é˜µçš„æ€§è´¨ï¼š\n\nâ‘  $A^H=A$ ï¼šè¿™æ¡æ€§è´¨è¦æ±‚å„ç±³ç‰¹çŸ©é˜µçš„ä¸»å¯¹è§’å…ƒå¿…é¡»ä¸ºå®æ•°ï¼›\n\nâ‘¡ å¯¹å„ç±³ç‰¹çŸ©é˜µ $A$ å’Œå¤å‘é‡ $x$ï¼Œæ•° $x^HAx$ å¿…ä¸ºå®æ•°;\n\nè¯ï¼š\n\n$$\n(x^HAx)^H=x^HA(x^H)^H=X^HAx\n$$ \n\nå³ $x^HAx$ ç­‰äºå®ƒè‡ªèº«çš„å…±è½­ï¼Œæ•… $x^HAx$ å¿…æ˜¯å®æ•°.\n\nâ‘¢ å„ç±³ç‰¹çŸ©é˜µçš„ç‰¹å¾å€¼æ˜¯å®æ•°ï¼›\n\nè¯ï¼šæ³•ä¸€ï¼šè®¾ $Ax=\\lambda x (x\\neq 0)$ï¼Œåˆ™æœ‰\n\n$$\nx^HAx=x^H\\lambda x=\\lambda x^Hx=\\lambda\\begin{Vmatrix}x\\end{Vmatrix}^2\n$$\n\nç”±æ€§è´¨â‘ å¯çŸ¥ $x^HAx$ å¿…ä¸ºå®æ•°ï¼Œå¹¶ä¸”ç”±äº $x\\neq 0$ï¼Œ$\\begin{Vmatrix}x\\end{Vmatrix}^2$ å¿…ä¸ºæ­£å®æ•°ï¼Œæ‰€ä»¥ï¼Œç‰¹å¾å€¼ $\\lambda=\\frac{x^Hx}{\\begin{Vmatrix}x\\end{Vmatrix}^2}$ å¿…ä¸ºå®æ•°.\n\næ³•äºŒï¼šè®¾$Ax=\\lambda x (x\\neq 0)$ï¼Œ$\\overline \\lambda x^Hx=(\\lambda x)^Hx=(Ax)^Hx=x^HA^Hx=x^HAx=x^H\\lambda x=\\lambda x^Hx$ ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬æœ‰ $\\overline \\lambda$ï¼Œæ•… $\\lambda$ å¿…ä¸ºå®æ•°.\n\nâ‘£ å„ç±³ç‰¹çŸ©é˜µ $A$ çš„å±äºä¸åŒç‰¹å¾å€¼çš„ç‰¹å¾å‘é‡æ˜¯æ­£äº¤çš„ï¼ˆå®å¯¹ç§°çŸ©é˜µä¹ŸåŒæ ·æ»¡è¶³ï¼‰ï¼›\n\nè¯ï¼šè®¾ $x_1, x_2$ æ˜¯åˆ†åˆ«å¯¹åº”äºç‰¹å¾å€¼ $\\lambda_1 , \\lambda_2$ çš„ $A$ çš„ç‰¹å¾å‘é‡ï¼Œåˆ™\n\n$$\nAx_1=\\lambda_1 x_1 , Ax_2=\\lambda_2 x_2\n$$\n\nå› æ­¤ï¼Œ\n\n$$\n\\lambda_1 x_1^Hx_2=(\\lambda_1 x_1)^Hx_2=(Ax_1)^Hx_2=x_1^HA^Hx_2=x_1^HAx_2=x_1^H\\lambda_2 x_2=\\lambda_2 x_1^Hx_2\n$$\n\nåˆå› ä¸º $\\lambda_1=\\lambda_2$ï¼Œæ‰€ä»¥æˆ‘ä»¬æœ‰ $x_1^Hx_2=0$ï¼Œå®ƒä»¬æ˜¯æ­£äº¤çš„.\n\né…‰çŸ©é˜µï¼ˆå¹ºæ­£çŸ©é˜µï¼Œunitary matrixï¼‰ï¼š\n\nå¯ç±»æ¯”äºå®æ­£äº¤çŸ©é˜µï¼Œæ»¡è¶³å„ç±³å…±è½­çŸ©é˜µç­‰äºé€†é˜µï¼Œå³ $U^H=U^{-1}$ï¼Œç­‰ä»·æœ‰ $U^HU=I , UU^H=I$\n\né…‰çŸ©é˜µçš„æ€§è´¨ï¼š\n\nâ‘  å†…ç§¯å’Œå‘é‡é•¿åº¦å¯è¢«é…‰çŸ©é˜µä¿ç•™ï¼Ÿï¼ˆè¿™æ®µè¯ä¸çŸ¥å¦‚ä½•ç¿»è¯‘ï¼Œæ„æ€å¯çœ‹è¯æ˜è¿‡ç¨‹ï¼‰ï¼›\n\nè¯ï¼š$(Ux)^H(Uy)=x^HU^HUy=x^Hy$ æ•…åŒç†æœ‰ $\\begin{Vmatrix}U\\end{Vmatrix}^2=\\begin{Vmatrix}x\\end{Vmatrix}^2$\n\nâ‘¡ é…‰çŸ©é˜µçš„ç‰¹å¾å€¼çš„ç»å¯¹å€¼ç­‰äº $1$ï¼›\n\nè¯ï¼šè®¾ $Ux=\\lambda x$ï¼Œåˆ™ $\\begin{Vmatrix}Ux\\end{Vmatrix}=\\begin{Vmatrix}\\lambda x\\end{Vmatrix}=\\begin{vmatrix}\\lambda\\end{vmatrix} \\begin{Vmatrix}x\\end{Vmatrix}$ ç”±æ€§è´¨â‘ æˆ‘ä»¬æœ‰ï¼Œ$\\begin{Vmatrix}Ux\\end{Vmatrix}=\\begin{Vmatrix}x\\end{Vmatrix}^2$ï¼Œæ‰€ä»¥$\\begin{Vmatrix}x\\end{Vmatrix}=\\begin{vmatrix}\\lambda\\end{vmatrix}Â·\\begin{Vmatrix}x\\end{Vmatrix}$ï¼Œæ•…$\\begin{vmatrix}\\lambda\\end{vmatrix}=1$\n\nâ‘¢ é…‰çŸ©é˜µ $U$ çš„å±äºä¸åŒç‰¹å¾å€¼çš„ç‰¹å¾å‘é‡æ˜¯æ­£äº¤çš„ã€‚\n\nè¯ï¼š\n\nåé¢æœ‰ç©ºå†è¡¥äº†","tags":["çº¿ä»£"],"categories":["math"]},{"title":"çº¿æ€§ä»£æ•°ï¼šé«˜æ–¯æ¶ˆå…ƒ","url":"/archives/15357/","content":"\nç¬”è€…æ˜¯ä»Šå¹´9æœˆä»½å¼€å§‹çš„å¤§å­¦ç”Ÿæ´»ï¼Œä¹Ÿæ˜¯ä»9æœˆä»½å¼€å§‹çº¿æ€§ä»£æ•°çš„å­¦ä¹ ã€‚åœ¨çº¿ä»£ä¸­ï¼Œæœ‰è®¸å¤šæ–°é²œçš„å®šä¹‰å’Œè¿ç®—ï¼Œæ‰€ä»¥ä¸é«˜ç­‰æ•°å­¦ç›¸æ¯”ï¼Œç¬”è€…è§‰å¾—çº¿ä»£æ›´éš¾å­¦å¾—é€šé€ã€‚å› æ­¤ï¼Œç¬”è€…å¸Œæœ›é€šè¿‡è¯¥ç¯‡ä»¥åŠåç»­æ–‡ç« æ¥æ¢³ç†ä¸‹çº¿ä»£ä¸­çš„çŸ¥è¯†ã€‚\n\n<!-- more -->\n\nç¬”è€…æ‰€ç”¨çš„çº¿ä»£æ•™ææ˜¯ *Gilbert Strang* æ‰€ç¼–å†™çš„ Linear Algebra and its Application (the 4th edition) ï¼Œåœ¨Bç«™ä¸Šä¹Ÿæœ‰ä»–çš„ç›¸å…³æ•™å­¦è§†é¢‘ [MITã€Šçº¿æ€§ä»£æ•°ã€‹å‰å°”ä¼¯ç‰¹.æ–¯ç‰¹æœ—](https://www.bilibili.com/video/BV134411y7uH?from=search&seid=2698493779032149614)\n\nå¥½ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å¼€å§‹çº¿ä»£çš„å­¦ä¹ ã€‚åˆå…¥çº¿ä»£ï¼Œä¸åŒäºåŒæµç´«æœ¬ä»è¡Œåˆ—å¼å¼€å§‹ï¼ˆåˆšçœ‹åŒæµä¹¦çš„æ—¶å€™å¤´éƒ½å¤§äº†ï¼‰ï¼Œæˆ‘ä»¬å…ˆä»çŸ©é˜µä¸é«˜æ–¯æ¶ˆå…ƒæ³•è®²èµ·ã€‚\n\nçº¿ä»£çš„ä¸­å¿ƒé—®é¢˜å°±æ˜¯å¦‚ä½•æ±‚è§£çº¿æ€§æ–¹ç¨‹ç»„ï¼Œå› æ­¤æˆ‘ä»¬æœ‰å¿…è¦äº†è§£ä»€ä¹ˆæ˜¯çº¿æ€§æ–¹ç¨‹å’Œçº¿æ€§æ–¹ç¨‹ç»„ï¼Œä»¥åŠå…¶ä¸­çš„ä¸“æœ‰åè¯ã€‚\n\n- çº¿æ€§æ–¹ç¨‹ï¼ˆlinear equationï¼‰ï¼š\n\n    æ­£å¦‚å…¶åï¼Œçº¿æ€§æ–¹ç¨‹ï¼ˆlinear equationï¼‰å°±æ˜¯å½¢å¦‚\n    $$\n    a_1x_1+a_2x_2+...+a_nx_n=b\n    $$\n    çš„æ–¹ç¨‹ã€‚å…¶ä¸­ï¼Œ$a_i$ æ˜¯ç³»æ•°ï¼ˆcoefficientï¼‰ï¼Œ$x_i$ æ˜¯å˜é‡ï¼ˆvariableï¼Œæˆ–ç§°æœªçŸ¥æ•°unknownï¼‰ï¼Œ$b$ æ˜¯å¸¸æ•°ï¼ˆconstantï¼‰ã€‚\n\nç”±æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥æœ‰çº¿æ€§æ–¹ç¨‹ç»„ï¼ˆsystem of linear equationsï¼‰ï¼Œå³å¤šä¸ªçº¿æ€§æ–¹ç¨‹æ–¹ç¨‹æ‰€æ„æˆçš„æ–¹ç¨‹ç»„ï¼Œå…¶è§£å–å†³äºç³»æ•°ä¸å¸¸æ•°é¡¹ï¼äºæ˜¯ï¼Œä¸ºäº†ç®€ä¾¿ç¾åŒ–å†™æ³•ï¼Œæˆ‘ä»¬ä¾¿å¼•å…¥äº†çŸ©é˜µæ¥è¡¨ç¤ºçº¿æ€§æ–¹ç¨‹ç»„ã€‚\n\n- çŸ©é˜µè®°å·ï¼ˆmatrix notationï¼‰ï¼š\n  - ç³»æ•°çŸ©é˜µï¼ˆcoefficient matrixï¼‰ï¼š\n    $$\n    \n    $$\n  - å¢å¹¿çŸ©é˜µï¼ˆaugmented matrixï¼‰ï¼š\n    $$\n    \n    $$\n\n- é«˜æ–¯æ¶ˆå…ƒæ³•ï¼ˆGuassian eliminationï¼‰ï¼š\n\n    æ˜¯é€šè¿‡åˆç­‰è¡Œå˜æ¢ï¼ˆElementary row operation, EROï¼‰æ¥å°†çŸ©é˜µè½¬åŒ–ä¸ºä¸Šä¸‰è§’çŸ©é˜µï¼ˆupper triangular matrixï¼‰æˆ–è¡Œé˜¶æ¢¯å½¢çŸ©é˜µï¼ˆrow echelon form matrixï¼‰ï¼Œè¿›è€Œé€šè¿‡å›ä»£æ±‚è§£çº¿æ€§æ–¹ç¨‹ç»„çš„æ–¹æ³•ã€‚\n\n    1. å¯¹æ¢ï¼ˆinterchangeï¼‰ï¼šäº¤æ¢ä»»æ„ä¸¤è¡Œï¼›\n    2. å€ä¹˜ï¼ˆscalingï¼‰ï¼šç”¨éé›¶å®æ•°ä¹˜ä»¥æŸè¡Œï¼›\n    3. å€åŠ ï¼ˆreplacementï¼‰ï¼šå°†æŸä¸ªæ–¹ç¨‹çš„å€æ•°åŠ åˆ°å¦ä¸€ä¸ªæ–¹ç¨‹ä¸Šã€‚\n\n    ç»è¿‡EROå¤„ç†å‰åçš„çŸ©é˜µè¡Œç­‰ä»·ï¼ˆrow equivalentï¼‰ï¼Œæ•…EROå¯é€†ã€‚\n\n- å›ä»£ï¼ˆback-substitutionï¼‰ï¼š\n  \n  çŸ©é˜µåŒ–ä¸ºä¸Šä¸‰è§’é˜µæˆ–è¡Œé˜¶æ¢¯å½¢åï¼Œä»æœ€åä¸€ä¸ªæœªçŸ¥æ•°å¼€å§‹ç”±å°¾è‡³å¤´é€æ­¥ä»£å›ï¼Œå¾—å‡ºè§£çš„è¿‡ç¨‹ã€‚\n\n- è§£çš„æƒ…å†µ\n  - ç›¸å®¹ï¼ˆconsistentï¼‰ï¼šæ–¹ç¨‹ç»„æœ‰è§£ï¼š\n    1. å”¯ä¸€è§£ï¼›\n    2. æ— ç©·å¤šè§£ã€‚\n  - ä¸ç›¸å®¹ï¼ˆinconsistentï¼‰ï¼šæ–¹ç¨‹ç»„æ— è§£ã€‚\n\n- æ€»ç»“ï¼š\n\n    é«˜æ–¯æ¶ˆå…ƒæ³•å®é™…ä¸Šæ˜¯ä¸ªå¾ˆç®€å•çš„è¿‡ç¨‹ï¼š\n\n    åŸçº¿æ€§æ–¹ç¨‹ç»„ -> é«˜æ–¯æ¶ˆå…ƒï¼ˆè¡Œå˜æ¢ï¼‰-> ä¸‰è§’çŸ©é˜µ -> å›ä»£ -> å¾—å‡ºè§£","tags":["çº¿ä»£"],"categories":["math"]}]